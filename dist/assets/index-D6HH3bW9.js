const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dashboardApi-BfrJzdLB.js","assets/ui-DJO2kEUD.js","assets/vendor-O_Wxd0qj.js","assets/utils-BPZBwj5v.js","assets/router-DjmRium3.js"])))=>i.map(i=>d[i]);
var __defProp = Object.defineProperty;
var __typeError = (msg) => {
  throw TypeError(msg);
};
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
var __accessCheck = (obj, member, msg) => member.has(obj) || __typeError("Cannot " + msg);
var __privateGet = (obj, member, getter) => (__accessCheck(obj, member, "read from private field"), getter ? getter.call(obj) : member.get(obj));
var __privateAdd = (obj, member, value) => member.has(obj) ? __typeError("Cannot add the same private member more than once") : member instanceof WeakSet ? member.add(obj) : member.set(obj, value);
var __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, "write to private field"), setter ? setter.call(obj, value) : member.set(obj, value), value);
var __privateMethod = (obj, member, method) => (__accessCheck(obj, member, "access private method"), method);
var __privateWrapper = (obj, member, setter, getter) => ({
  set _(value) {
    __privateSet(obj, member, value, setter);
  },
  get _() {
    return __privateGet(obj, member, getter);
  }
});
var _focused, _cleanup, _setup, _a, _online, _cleanup2, _setup2, _b, _gcTimeout, _c, _initialState, _revertState, _cache, _client, _retryer, _defaultOptions, _abortSignalConsumed, _Query_instances, dispatch_fn, _d, _queries, _e2, _observers, _mutationCache, _retryer2, _Mutation_instances, dispatch_fn2, _f, _mutations, _scopes, _mutationId, _g, _queryCache, _mutationCache2, _defaultOptions2, _queryDefaults, _mutationDefaults, _mountCount, _unsubscribeFocus, _unsubscribeOnline, _h;
import { j as jsxRuntimeExports, V as Viewport$2, R as Root2$5, A as Action$1, C as Close, T as Title, D as Description, P as Provider$1, c as createContextScope, a as createPopperScope, u as useComposedRefs, b as Anchor, d as Primitive, e as composeEventHandlers, f as Presence, g as DismissableLayer, h as Content$1, i as Root$4, k as Arrow, l as createSlottable, m as useId, n as useControllableState, o as Root2$6, S as Slot$2, p as useCallbackRef, q as useLayoutEffect2, r as SubTrigger2, s as SubContent2, t as Portal2$1, v as Content2$4, I as Item2$1, w as CheckboxItem2, x as ItemIndicator2, y as RadioItem2, L as Label2, z as Separator2, B as Root2$7, E as Trigger$4, F as useSize, G as createCollection, H as hideOthers, J as useFocusGuards, K as ReactRemoveScroll, M as FocusScope, N as VISUALLY_HIDDEN_STYLES, O as useDirection, Q as Portal$2, U as createSlot, W as Overlay, X as Content$2, Y as Close$1, Z as Title$1, _ as Description$1, $ as Root$5, a0 as Portal$3, a1 as createRovingFocusGroupScope, a2 as Root$6, a3 as Item$1, a4 as createDialogScope, a5 as Trigger$5, a6 as WarningProvider, a7 as composeRefs } from "./ui-DJO2kEUD.js";
import { b as reactDomExports, r as reactExports, a as React$1, v as vt, g as getDefaultExportFromCjs } from "./vendor-O_Wxd0qj.js";
import { t as twMerge, c as clsx, a as cva } from "./utils-BPZBwj5v.js";
import { u as useLocation, a as useNavigate, N as Navigate, O as Outlet, L as Link, b as useSearchParams, B as BrowserRouter, R as Routes, c as Route } from "./router-DjmRium3.js";
(function polyfill() {
  const relList = document.createElement("link").relList;
  if (relList && relList.supports && relList.supports("modulepreload")) {
    return;
  }
  for (const link of document.querySelectorAll('link[rel="modulepreload"]')) {
    processPreload(link);
  }
  new MutationObserver((mutations) => {
    for (const mutation of mutations) {
      if (mutation.type !== "childList") {
        continue;
      }
      for (const node of mutation.addedNodes) {
        if (node.tagName === "LINK" && node.rel === "modulepreload")
          processPreload(node);
      }
    }
  }).observe(document, { childList: true, subtree: true });
  function getFetchOpts(link) {
    const fetchOpts = {};
    if (link.integrity) fetchOpts.integrity = link.integrity;
    if (link.referrerPolicy) fetchOpts.referrerPolicy = link.referrerPolicy;
    if (link.crossOrigin === "use-credentials")
      fetchOpts.credentials = "include";
    else if (link.crossOrigin === "anonymous") fetchOpts.credentials = "omit";
    else fetchOpts.credentials = "same-origin";
    return fetchOpts;
  }
  function processPreload(link) {
    if (link.ep)
      return;
    link.ep = true;
    const fetchOpts = getFetchOpts(link);
    fetch(link.href, fetchOpts);
  }
})();
var createRoot;
var m$1 = reactDomExports;
{
  createRoot = m$1.createRoot;
  m$1.hydrateRoot;
}
const TOAST_LIMIT = 1;
const TOAST_REMOVE_DELAY = 1e6;
let count = 0;
function genId() {
  count = (count + 1) % Number.MAX_SAFE_INTEGER;
  return count.toString();
}
const toastTimeouts = /* @__PURE__ */ new Map();
const addToRemoveQueue = (toastId) => {
  if (toastTimeouts.has(toastId)) {
    return;
  }
  const timeout = setTimeout(() => {
    toastTimeouts.delete(toastId);
    dispatch({
      type: "REMOVE_TOAST",
      toastId
    });
  }, TOAST_REMOVE_DELAY);
  toastTimeouts.set(toastId, timeout);
};
const reducer = (state, action) => {
  switch (action.type) {
    case "ADD_TOAST":
      return {
        ...state,
        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT)
      };
    case "UPDATE_TOAST":
      return {
        ...state,
        toasts: state.toasts.map((t2) => t2.id === action.toast.id ? { ...t2, ...action.toast } : t2)
      };
    case "DISMISS_TOAST": {
      const { toastId } = action;
      if (toastId) {
        addToRemoveQueue(toastId);
      } else {
        state.toasts.forEach((toast2) => {
          addToRemoveQueue(toast2.id);
        });
      }
      return {
        ...state,
        toasts: state.toasts.map(
          (t2) => t2.id === toastId || toastId === void 0 ? {
            ...t2,
            open: false
          } : t2
        )
      };
    }
    case "REMOVE_TOAST":
      if (action.toastId === void 0) {
        return {
          ...state,
          toasts: []
        };
      }
      return {
        ...state,
        toasts: state.toasts.filter((t2) => t2.id !== action.toastId)
      };
  }
};
const listeners = [];
let memoryState = { toasts: [] };
function dispatch(action) {
  memoryState = reducer(memoryState, action);
  listeners.forEach((listener) => {
    listener(memoryState);
  });
}
function toast({ ...props }) {
  const id = genId();
  const update = (props2) => dispatch({
    type: "UPDATE_TOAST",
    toast: { ...props2, id }
  });
  const dismiss = () => dispatch({ type: "DISMISS_TOAST", toastId: id });
  dispatch({
    type: "ADD_TOAST",
    toast: {
      ...props,
      id,
      open: true,
      onOpenChange: (open) => {
        if (!open) dismiss();
      }
    }
  });
  return {
    id,
    dismiss,
    update
  };
}
function useToast() {
  const [state, setState] = reactExports.useState(memoryState);
  reactExports.useEffect(() => {
    listeners.push(setState);
    return () => {
      const index = listeners.indexOf(setState);
      if (index > -1) {
        listeners.splice(index, 1);
      }
    };
  }, [state]);
  return {
    ...state,
    toast,
    dismiss: (toastId) => dispatch({ type: "DISMISS_TOAST", toastId })
  };
}
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, "$1-$2").toLowerCase();
const mergeClasses = (...classes) => classes.filter((className, index, array) => {
  return Boolean(className) && className.trim() !== "" && array.indexOf(className) === index;
}).join(" ").trim();
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var defaultAttributes = {
  xmlns: "http://www.w3.org/2000/svg",
  width: 24,
  height: 24,
  viewBox: "0 0 24 24",
  fill: "none",
  stroke: "currentColor",
  strokeWidth: 2,
  strokeLinecap: "round",
  strokeLinejoin: "round"
};
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Icon$1 = reactExports.forwardRef(
  ({
    color = "currentColor",
    size = 24,
    strokeWidth = 2,
    absoluteStrokeWidth,
    className = "",
    children,
    iconNode,
    ...rest
  }, ref) => {
    return reactExports.createElement(
      "svg",
      {
        ref,
        ...defaultAttributes,
        width: size,
        height: size,
        stroke: color,
        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,
        className: mergeClasses("lucide", className),
        ...rest
      },
      [
        ...iconNode.map(([tag, attrs]) => reactExports.createElement(tag, attrs)),
        ...Array.isArray(children) ? children : [children]
      ]
    );
  }
);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const createLucideIcon = (iconName, iconNode) => {
  const Component = reactExports.forwardRef(
    ({ className, ...props }, ref) => reactExports.createElement(Icon$1, {
      ref,
      iconNode,
      className: mergeClasses(`lucide-${toKebabCase(iconName)}`, className),
      ...props
    })
  );
  Component.displayName = `${iconName}`;
  return Component;
};
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Activity = createLucideIcon("Activity", [
  [
    "path",
    {
      d: "M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",
      key: "169zse"
    }
  ]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const ArrowLeft = createLucideIcon("ArrowLeft", [
  ["path", { d: "m12 19-7-7 7-7", key: "1l729n" }],
  ["path", { d: "M19 12H5", key: "x3x0zl" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const ArrowRight = createLucideIcon("ArrowRight", [
  ["path", { d: "M5 12h14", key: "1ays0h" }],
  ["path", { d: "m12 5 7 7-7 7", key: "xquz4c" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const ArrowUpDown = createLucideIcon("ArrowUpDown", [
  ["path", { d: "m21 16-4 4-4-4", key: "f6ql7i" }],
  ["path", { d: "M17 20V4", key: "1ejh1v" }],
  ["path", { d: "m3 8 4-4 4 4", key: "11wl7u" }],
  ["path", { d: "M7 4v16", key: "1glfcx" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Banknote = createLucideIcon("Banknote", [
  ["rect", { width: "20", height: "12", x: "2", y: "6", rx: "2", key: "9lu3g6" }],
  ["circle", { cx: "12", cy: "12", r: "2", key: "1c9p78" }],
  ["path", { d: "M6 12h.01M18 12h.01", key: "113zkx" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Bell = createLucideIcon("Bell", [
  ["path", { d: "M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9", key: "1qo2s2" }],
  ["path", { d: "M10.3 21a1.94 1.94 0 0 0 3.4 0", key: "qgo35s" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Bike = createLucideIcon("Bike", [
  ["circle", { cx: "18.5", cy: "17.5", r: "3.5", key: "15x4ox" }],
  ["circle", { cx: "5.5", cy: "17.5", r: "3.5", key: "1noe27" }],
  ["circle", { cx: "15", cy: "5", r: "1", key: "19l28e" }],
  ["path", { d: "M12 17.5V14l-3-3 4-3 2 3h2", key: "1npguv" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Building2 = createLucideIcon("Building2", [
  ["path", { d: "M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z", key: "1b4qmf" }],
  ["path", { d: "M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2", key: "i71pzd" }],
  ["path", { d: "M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2", key: "10jefs" }],
  ["path", { d: "M10 6h4", key: "1itunk" }],
  ["path", { d: "M10 10h4", key: "tcdvrf" }],
  ["path", { d: "M10 14h4", key: "kelpxr" }],
  ["path", { d: "M10 18h4", key: "1ulq68" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Building = createLucideIcon("Building", [
  ["rect", { width: "16", height: "20", x: "4", y: "2", rx: "2", ry: "2", key: "76otgf" }],
  ["path", { d: "M9 22v-4h6v4", key: "r93iot" }],
  ["path", { d: "M8 6h.01", key: "1dz90k" }],
  ["path", { d: "M16 6h.01", key: "1x0f13" }],
  ["path", { d: "M12 6h.01", key: "1vi96p" }],
  ["path", { d: "M12 10h.01", key: "1nrarc" }],
  ["path", { d: "M12 14h.01", key: "1etili" }],
  ["path", { d: "M16 10h.01", key: "1m94wz" }],
  ["path", { d: "M16 14h.01", key: "1gbofw" }],
  ["path", { d: "M8 10h.01", key: "19clt8" }],
  ["path", { d: "M8 14h.01", key: "6423bh" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const CalendarPlus = createLucideIcon("CalendarPlus", [
  ["path", { d: "M8 2v4", key: "1cmpym" }],
  ["path", { d: "M16 2v4", key: "4m81vk" }],
  ["path", { d: "M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8", key: "3spt84" }],
  ["path", { d: "M3 10h18", key: "8toen8" }],
  ["path", { d: "M16 19h6", key: "xwg31i" }],
  ["path", { d: "M19 16v6", key: "tddt3s" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Calendar = createLucideIcon("Calendar", [
  ["path", { d: "M8 2v4", key: "1cmpym" }],
  ["path", { d: "M16 2v4", key: "4m81vk" }],
  ["rect", { width: "18", height: "18", x: "3", y: "4", rx: "2", key: "1hopcy" }],
  ["path", { d: "M3 10h18", key: "8toen8" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Camera = createLucideIcon("Camera", [
  [
    "path",
    {
      d: "M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",
      key: "1tc9qg"
    }
  ],
  ["circle", { cx: "12", cy: "13", r: "3", key: "1vg3eu" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Car = createLucideIcon("Car", [
  [
    "path",
    {
      d: "M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",
      key: "5owen"
    }
  ],
  ["circle", { cx: "7", cy: "17", r: "2", key: "u2ysq9" }],
  ["path", { d: "M9 17h6", key: "r8uit2" }],
  ["circle", { cx: "17", cy: "17", r: "2", key: "axvx0g" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const ChartColumn = createLucideIcon("ChartColumn", [
  ["path", { d: "M3 3v16a2 2 0 0 0 2 2h16", key: "c24i48" }],
  ["path", { d: "M18 17V9", key: "2bz60n" }],
  ["path", { d: "M13 17V5", key: "1frdt8" }],
  ["path", { d: "M8 17v-3", key: "17ska0" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Check = createLucideIcon("Check", [["path", { d: "M20 6 9 17l-5-5", key: "1gmf2c" }]]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const ChevronDown = createLucideIcon("ChevronDown", [
  ["path", { d: "m6 9 6 6 6-6", key: "qrunsl" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const ChevronLeft = createLucideIcon("ChevronLeft", [
  ["path", { d: "m15 18-6-6 6-6", key: "1wnfg3" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const ChevronRight = createLucideIcon("ChevronRight", [
  ["path", { d: "m9 18 6-6-6-6", key: "mthhwq" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const ChevronUp = createLucideIcon("ChevronUp", [["path", { d: "m18 15-6-6-6 6", key: "153udz" }]]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const ChevronsUpDown = createLucideIcon("ChevronsUpDown", [
  ["path", { d: "m7 15 5 5 5-5", key: "1hf1tw" }],
  ["path", { d: "m7 9 5-5 5 5", key: "sgt6xg" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const CircleAlert = createLucideIcon("CircleAlert", [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["line", { x1: "12", x2: "12", y1: "8", y2: "12", key: "1pkeuh" }],
  ["line", { x1: "12", x2: "12.01", y1: "16", y2: "16", key: "4dfq90" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const CircleCheckBig = createLucideIcon("CircleCheckBig", [
  ["path", { d: "M21.801 10A10 10 0 1 1 17 3.335", key: "yps3ct" }],
  ["path", { d: "m9 11 3 3L22 4", key: "1pflzl" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const CircleX = createLucideIcon("CircleX", [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "m15 9-6 6", key: "1uzhvr" }],
  ["path", { d: "m9 9 6 6", key: "z0biqf" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Circle = createLucideIcon("Circle", [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Clock = createLucideIcon("Clock", [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["polyline", { points: "12 6 12 12 16 14", key: "68esgv" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const CreditCard = createLucideIcon("CreditCard", [
  ["rect", { width: "20", height: "14", x: "2", y: "5", rx: "2", key: "ynyp8z" }],
  ["line", { x1: "2", x2: "22", y1: "10", y2: "10", key: "1b3vmo" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Crown = createLucideIcon("Crown", [
  [
    "path",
    {
      d: "M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",
      key: "1vdc57"
    }
  ],
  ["path", { d: "M5 21h14", key: "11awu3" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Database = createLucideIcon("Database", [
  ["ellipse", { cx: "12", cy: "5", rx: "9", ry: "3", key: "msslwz" }],
  ["path", { d: "M3 5V19A9 3 0 0 0 21 19V5", key: "1wlel7" }],
  ["path", { d: "M3 12A9 3 0 0 0 21 12", key: "mv7ke4" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Download = createLucideIcon("Download", [
  ["path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4", key: "ih7n3h" }],
  ["polyline", { points: "7 10 12 15 17 10", key: "2ggqvy" }],
  ["line", { x1: "12", x2: "12", y1: "15", y2: "3", key: "1vk2je" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Ellipsis = createLucideIcon("Ellipsis", [
  ["circle", { cx: "12", cy: "12", r: "1", key: "41hilf" }],
  ["circle", { cx: "19", cy: "12", r: "1", key: "1wjl8i" }],
  ["circle", { cx: "5", cy: "12", r: "1", key: "1pcz8c" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const EyeOff = createLucideIcon("EyeOff", [
  [
    "path",
    {
      d: "M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",
      key: "ct8e1f"
    }
  ],
  ["path", { d: "M14.084 14.158a3 3 0 0 1-4.242-4.242", key: "151rxh" }],
  [
    "path",
    {
      d: "M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",
      key: "13bj9a"
    }
  ],
  ["path", { d: "m2 2 20 20", key: "1ooewy" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Eye = createLucideIcon("Eye", [
  [
    "path",
    {
      d: "M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",
      key: "1nclc0"
    }
  ],
  ["circle", { cx: "12", cy: "12", r: "3", key: "1v7zrd" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const FileText = createLucideIcon("FileText", [
  ["path", { d: "M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z", key: "1rqfz7" }],
  ["path", { d: "M14 2v4a2 2 0 0 0 2 2h4", key: "tnqrlb" }],
  ["path", { d: "M10 9H8", key: "b1mrlr" }],
  ["path", { d: "M16 13H8", key: "t4e002" }],
  ["path", { d: "M16 17H8", key: "z1uh3a" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Info = createLucideIcon("Info", [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "M12 16v-4", key: "1dtifu" }],
  ["path", { d: "M12 8h.01", key: "e9boi3" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const LayoutDashboard = createLucideIcon("LayoutDashboard", [
  ["rect", { width: "7", height: "9", x: "3", y: "3", rx: "1", key: "10lvy0" }],
  ["rect", { width: "7", height: "5", x: "14", y: "3", rx: "1", key: "16une8" }],
  ["rect", { width: "7", height: "9", x: "14", y: "12", rx: "1", key: "1hutg5" }],
  ["rect", { width: "7", height: "5", x: "3", y: "16", rx: "1", key: "ldoo1y" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const LoaderCircle = createLucideIcon("LoaderCircle", [
  ["path", { d: "M21 12a9 9 0 1 1-6.219-8.56", key: "13zald" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const LogOut = createLucideIcon("LogOut", [
  ["path", { d: "M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4", key: "1uf3rs" }],
  ["polyline", { points: "16 17 21 12 16 7", key: "1gabdz" }],
  ["line", { x1: "21", x2: "9", y1: "12", y2: "12", key: "1uyos4" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Mail = createLucideIcon("Mail", [
  ["rect", { width: "20", height: "16", x: "2", y: "4", rx: "2", key: "18n3k1" }],
  ["path", { d: "m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7", key: "1ocrg3" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const MapPin = createLucideIcon("MapPin", [
  [
    "path",
    {
      d: "M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",
      key: "1r0f0z"
    }
  ],
  ["circle", { cx: "12", cy: "10", r: "3", key: "ilqhr7" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Menu = createLucideIcon("Menu", [
  ["line", { x1: "4", x2: "20", y1: "12", y2: "12", key: "1e0a9i" }],
  ["line", { x1: "4", x2: "20", y1: "6", y2: "6", key: "1owob3" }],
  ["line", { x1: "4", x2: "20", y1: "18", y2: "18", key: "yk5zj1" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Phone = createLucideIcon("Phone", [
  [
    "path",
    {
      d: "M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",
      key: "foiqr5"
    }
  ]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Plus = createLucideIcon("Plus", [
  ["path", { d: "M5 12h14", key: "1ays0h" }],
  ["path", { d: "M12 5v14", key: "s699le" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const QrCode = createLucideIcon("QrCode", [
  ["rect", { width: "5", height: "5", x: "3", y: "3", rx: "1", key: "1tu5fj" }],
  ["rect", { width: "5", height: "5", x: "16", y: "3", rx: "1", key: "1v8r4q" }],
  ["rect", { width: "5", height: "5", x: "3", y: "16", rx: "1", key: "1x03jg" }],
  ["path", { d: "M21 16h-3a2 2 0 0 0-2 2v3", key: "177gqh" }],
  ["path", { d: "M21 21v.01", key: "ents32" }],
  ["path", { d: "M12 7v3a2 2 0 0 1-2 2H7", key: "8crl2c" }],
  ["path", { d: "M3 12h.01", key: "nlz23k" }],
  ["path", { d: "M12 3h.01", key: "n36tog" }],
  ["path", { d: "M12 16v.01", key: "133mhm" }],
  ["path", { d: "M16 12h1", key: "1slzba" }],
  ["path", { d: "M21 12v.01", key: "1lwtk9" }],
  ["path", { d: "M12 21v-1", key: "1880an" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const RefreshCw = createLucideIcon("RefreshCw", [
  ["path", { d: "M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8", key: "v9h5vc" }],
  ["path", { d: "M21 3v5h-5", key: "1q7to0" }],
  ["path", { d: "M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16", key: "3uifl3" }],
  ["path", { d: "M8 16H3v5", key: "1cv678" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Save = createLucideIcon("Save", [
  [
    "path",
    {
      d: "M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",
      key: "1c8476"
    }
  ],
  ["path", { d: "M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7", key: "1ydtos" }],
  ["path", { d: "M7 3v4a1 1 0 0 0 1 1h7", key: "t51u73" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Search = createLucideIcon("Search", [
  ["circle", { cx: "11", cy: "11", r: "8", key: "4ej97u" }],
  ["path", { d: "m21 21-4.3-4.3", key: "1qie3q" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Settings$1 = createLucideIcon("Settings", [
  [
    "path",
    {
      d: "M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",
      key: "1qme2f"
    }
  ],
  ["circle", { cx: "12", cy: "12", r: "3", key: "1v7zrd" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Shield = createLucideIcon("Shield", [
  [
    "path",
    {
      d: "M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",
      key: "oel41y"
    }
  ]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const SquarePen = createLucideIcon("SquarePen", [
  ["path", { d: "M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7", key: "1m0v6g" }],
  [
    "path",
    {
      d: "M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",
      key: "ohrbg2"
    }
  ]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Star = createLucideIcon("Star", [
  [
    "path",
    {
      d: "M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",
      key: "r04s7s"
    }
  ]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Trash2 = createLucideIcon("Trash2", [
  ["path", { d: "M3 6h18", key: "d0wm0j" }],
  ["path", { d: "M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6", key: "4alrt4" }],
  ["path", { d: "M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2", key: "v07s0e" }],
  ["line", { x1: "10", x2: "10", y1: "11", y2: "17", key: "1uufr5" }],
  ["line", { x1: "14", x2: "14", y1: "11", y2: "17", key: "xtxkd" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const TrendingUp = createLucideIcon("TrendingUp", [
  ["polyline", { points: "22 7 13.5 15.5 8.5 10.5 2 17", key: "126l90" }],
  ["polyline", { points: "16 7 22 7 22 13", key: "kwv8wd" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const TriangleAlert = createLucideIcon("TriangleAlert", [
  [
    "path",
    {
      d: "m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",
      key: "wmoenq"
    }
  ],
  ["path", { d: "M12 9v4", key: "juzpu7" }],
  ["path", { d: "M12 17h.01", key: "p32p05" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Upload = createLucideIcon("Upload", [
  ["path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4", key: "ih7n3h" }],
  ["polyline", { points: "17 8 12 3 7 8", key: "t8dd8p" }],
  ["line", { x1: "12", x2: "12", y1: "3", y2: "15", key: "widbto" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const UserMinus = createLucideIcon("UserMinus", [
  ["path", { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2", key: "1yyitq" }],
  ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }],
  ["line", { x1: "22", x2: "16", y1: "11", y2: "11", key: "1shjgl" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const UserPlus = createLucideIcon("UserPlus", [
  ["path", { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2", key: "1yyitq" }],
  ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }],
  ["line", { x1: "19", x2: "19", y1: "8", y2: "14", key: "1bvyxn" }],
  ["line", { x1: "22", x2: "16", y1: "11", y2: "11", key: "1shjgl" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const User = createLucideIcon("User", [
  ["path", { d: "M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2", key: "975kel" }],
  ["circle", { cx: "12", cy: "7", r: "4", key: "17ys0d" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Users = createLucideIcon("Users", [
  ["path", { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2", key: "1yyitq" }],
  ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }],
  ["path", { d: "M22 21v-2a4 4 0 0 0-3-3.87", key: "kshegd" }],
  ["path", { d: "M16 3.13a4 4 0 0 1 0 7.75", key: "1da9ce" }]
]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const X$1 = createLucideIcon("X", [
  ["path", { d: "M18 6 6 18", key: "1bl5f8" }],
  ["path", { d: "m6 6 12 12", key: "d8bk6v" }]
]);
function cn(...inputs) {
  return twMerge(clsx(inputs));
}
const ToastProvider = Provider$1;
const ToastViewport = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  Viewport$2,
  {
    ref,
    className: cn(
      "fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",
      className
    ),
    ...props
  }
));
ToastViewport.displayName = Viewport$2.displayName;
const toastVariants = cva(
  "group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",
  {
    variants: {
      variant: {
        default: "border bg-background text-foreground",
        destructive: "destructive group border-destructive bg-destructive text-destructive-foreground"
      }
    },
    defaultVariants: {
      variant: "default"
    }
  }
);
const Toast = reactExports.forwardRef(({ className, variant, ...props }, ref) => {
  return /* @__PURE__ */ jsxRuntimeExports.jsx(Root2$5, { ref, className: cn(toastVariants({ variant }), className), ...props });
});
Toast.displayName = Root2$5.displayName;
const ToastAction = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  Action$1,
  {
    ref,
    className: cn(
      "inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",
      className
    ),
    ...props
  }
));
ToastAction.displayName = Action$1.displayName;
const ToastClose = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  Close,
  {
    ref,
    className: cn(
      "absolute right-2 top-2 rounded-md p-1 text-foreground/70 opacity-100 transition-opacity group-[.destructive]:text-red-300 hover:text-foreground hover:bg-background/10 group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",
      className
    ),
    "toast-close": "",
    ...props,
    children: /* @__PURE__ */ jsxRuntimeExports.jsx(X$1, { className: "h-4 w-4" })
  }
));
ToastClose.displayName = Close.displayName;
const ToastTitle = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(Title, { ref, className: cn("text-sm font-semibold", className), ...props }));
ToastTitle.displayName = Title.displayName;
const ToastDescription = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(Description, { ref, className: cn("text-sm opacity-90", className), ...props }));
ToastDescription.displayName = Description.displayName;
function Toaster$1() {
  const { toasts } = useToast();
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(ToastProvider, { children: [
    toasts.map(function({ id, title, description: description2, action, ...props }) {
      return /* @__PURE__ */ jsxRuntimeExports.jsxs(Toast, { ...props, children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid gap-1", children: [
          title && /* @__PURE__ */ jsxRuntimeExports.jsx(ToastTitle, { children: title }),
          description2 && /* @__PURE__ */ jsxRuntimeExports.jsx(ToastDescription, { children: description2 })
        ] }),
        action,
        /* @__PURE__ */ jsxRuntimeExports.jsx(ToastClose, {})
      ] }, id);
    }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(ToastViewport, {})
  ] });
}
var P$1 = ["light", "dark"], E = "(prefers-color-scheme: dark)", L$1 = reactExports.createContext(void 0), D$1 = { setTheme: (e) => {
}, themes: [] }, j = () => {
  var e;
  return (e = reactExports.useContext(L$1)) != null ? e : D$1;
};
reactExports.memo(({ forcedTheme: e, storageKey: a, attribute: n2, enableSystem: g, enableColorScheme: m2, defaultTheme: c, value: o2, attrs: y, nonce: h }) => {
  let k2 = c === "system", w = n2 === "class" ? `var d=document.documentElement,c=d.classList;${`c.remove(${y.map((u2) => `'${u2}'`).join(",")})`};` : `var d=document.documentElement,n='${n2}',s='setAttribute';`, i2 = m2 ? (P$1.includes(c) ? c : null) ? `if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${c}'` : "if(e==='light'||e==='dark')d.style.colorScheme=e" : "", d = (l, u2 = false, R = true) => {
    let f = o2 ? o2[l] : l, p2 = u2 ? l + "|| ''" : `'${f}'`, $2 = "";
    return m2 && R && !u2 && P$1.includes(l) && ($2 += `d.style.colorScheme = '${l}';`), n2 === "class" ? u2 || f ? $2 += `c.add(${p2})` : $2 += "null" : f && ($2 += `d[s](n,${p2})`), $2;
  }, S = e ? `!function(){${w}${d(e)}}()` : g ? `!function(){try{${w}var e=localStorage.getItem('${a}');if('system'===e||(!e&&${k2})){var t='${E}',m=window.matchMedia(t);if(m.media!==t||m.matches){${d("dark")}}else{${d("light")}}}else if(e){${o2 ? `var x=${JSON.stringify(o2)};` : ""}${d(o2 ? "x[e]" : "e", true)}}${k2 ? "" : "else{" + d(c, false, false) + "}"}${i2}}catch(e){}}()` : `!function(){try{${w}var e=localStorage.getItem('${a}');if(e){${o2 ? `var x=${JSON.stringify(o2)};` : ""}${d(o2 ? "x[e]" : "e", true)}}else{${d(c, false, false)};}${i2}}catch(t){}}();`;
  return reactExports.createElement("script", { nonce: h, dangerouslySetInnerHTML: { __html: S } });
});
var jt = (n2) => {
  switch (n2) {
    case "success":
      return ee$1;
    case "info":
      return ae;
    case "warning":
      return oe;
    case "error":
      return se;
    default:
      return null;
  }
}, te = Array(12).fill(0), Yt = ({ visible: n2, className: e }) => React$1.createElement("div", { className: ["sonner-loading-wrapper", e].filter(Boolean).join(" "), "data-visible": n2 }, React$1.createElement("div", { className: "sonner-spinner" }, te.map((t2, a) => React$1.createElement("div", { className: "sonner-loading-bar", key: `spinner-bar-${a}` })))), ee$1 = React$1.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 20 20", fill: "currentColor", height: "20", width: "20" }, React$1.createElement("path", { fillRule: "evenodd", d: "M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z", clipRule: "evenodd" })), oe = React$1.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", fill: "currentColor", height: "20", width: "20" }, React$1.createElement("path", { fillRule: "evenodd", d: "M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z", clipRule: "evenodd" })), ae = React$1.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 20 20", fill: "currentColor", height: "20", width: "20" }, React$1.createElement("path", { fillRule: "evenodd", d: "M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z", clipRule: "evenodd" })), se = React$1.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 20 20", fill: "currentColor", height: "20", width: "20" }, React$1.createElement("path", { fillRule: "evenodd", d: "M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z", clipRule: "evenodd" })), Ot = React$1.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: "12", height: "12", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "1.5", strokeLinecap: "round", strokeLinejoin: "round" }, React$1.createElement("line", { x1: "18", y1: "6", x2: "6", y2: "18" }), React$1.createElement("line", { x1: "6", y1: "6", x2: "18", y2: "18" }));
var Ft = () => {
  let [n2, e] = React$1.useState(document.hidden);
  return React$1.useEffect(() => {
    let t2 = () => {
      e(document.hidden);
    };
    return document.addEventListener("visibilitychange", t2), () => window.removeEventListener("visibilitychange", t2);
  }, []), n2;
};
var bt = 1, yt = class {
  constructor() {
    this.subscribe = (e) => (this.subscribers.push(e), () => {
      let t2 = this.subscribers.indexOf(e);
      this.subscribers.splice(t2, 1);
    });
    this.publish = (e) => {
      this.subscribers.forEach((t2) => t2(e));
    };
    this.addToast = (e) => {
      this.publish(e), this.toasts = [...this.toasts, e];
    };
    this.create = (e) => {
      var S;
      let { message: t2, ...a } = e, u2 = typeof (e == null ? void 0 : e.id) == "number" || ((S = e.id) == null ? void 0 : S.length) > 0 ? e.id : bt++, f = this.toasts.find((g) => g.id === u2), w = e.dismissible === void 0 ? true : e.dismissible;
      return this.dismissedToasts.has(u2) && this.dismissedToasts.delete(u2), f ? this.toasts = this.toasts.map((g) => g.id === u2 ? (this.publish({ ...g, ...e, id: u2, title: t2 }), { ...g, ...e, id: u2, dismissible: w, title: t2 }) : g) : this.addToast({ title: t2, ...a, dismissible: w, id: u2 }), u2;
    };
    this.dismiss = (e) => (this.dismissedToasts.add(e), e || this.toasts.forEach((t2) => {
      this.subscribers.forEach((a) => a({ id: t2.id, dismiss: true }));
    }), this.subscribers.forEach((t2) => t2({ id: e, dismiss: true })), e);
    this.message = (e, t2) => this.create({ ...t2, message: e });
    this.error = (e, t2) => this.create({ ...t2, message: e, type: "error" });
    this.success = (e, t2) => this.create({ ...t2, type: "success", message: e });
    this.info = (e, t2) => this.create({ ...t2, type: "info", message: e });
    this.warning = (e, t2) => this.create({ ...t2, type: "warning", message: e });
    this.loading = (e, t2) => this.create({ ...t2, type: "loading", message: e });
    this.promise = (e, t2) => {
      if (!t2) return;
      let a;
      t2.loading !== void 0 && (a = this.create({ ...t2, promise: e, type: "loading", message: t2.loading, description: typeof t2.description != "function" ? t2.description : void 0 }));
      let u2 = e instanceof Promise ? e : e(), f = a !== void 0, w, S = u2.then(async (i2) => {
        if (w = ["resolve", i2], React$1.isValidElement(i2)) f = false, this.create({ id: a, type: "default", message: i2 });
        else if (ie(i2) && !i2.ok) {
          f = false;
          let T2 = typeof t2.error == "function" ? await t2.error(`HTTP error! status: ${i2.status}`) : t2.error, F = typeof t2.description == "function" ? await t2.description(`HTTP error! status: ${i2.status}`) : t2.description;
          this.create({ id: a, type: "error", message: T2, description: F });
        } else if (t2.success !== void 0) {
          f = false;
          let T2 = typeof t2.success == "function" ? await t2.success(i2) : t2.success, F = typeof t2.description == "function" ? await t2.description(i2) : t2.description;
          this.create({ id: a, type: "success", message: T2, description: F });
        }
      }).catch(async (i2) => {
        if (w = ["reject", i2], t2.error !== void 0) {
          f = false;
          let D2 = typeof t2.error == "function" ? await t2.error(i2) : t2.error, T2 = typeof t2.description == "function" ? await t2.description(i2) : t2.description;
          this.create({ id: a, type: "error", message: D2, description: T2 });
        }
      }).finally(() => {
        var i2;
        f && (this.dismiss(a), a = void 0), (i2 = t2.finally) == null || i2.call(t2);
      }), g = () => new Promise((i2, D2) => S.then(() => w[0] === "reject" ? D2(w[1]) : i2(w[1])).catch(D2));
      return typeof a != "string" && typeof a != "number" ? { unwrap: g } : Object.assign(a, { unwrap: g });
    };
    this.custom = (e, t2) => {
      let a = (t2 == null ? void 0 : t2.id) || bt++;
      return this.create({ jsx: e(a), id: a, ...t2 }), a;
    };
    this.getActiveToasts = () => this.toasts.filter((e) => !this.dismissedToasts.has(e.id));
    this.subscribers = [], this.toasts = [], this.dismissedToasts = /* @__PURE__ */ new Set();
  }
}, v = new yt(), ne = (n2, e) => {
  let t2 = (e == null ? void 0 : e.id) || bt++;
  return v.addToast({ title: n2, ...e, id: t2 }), t2;
}, ie = (n2) => n2 && typeof n2 == "object" && "ok" in n2 && typeof n2.ok == "boolean" && "status" in n2 && typeof n2.status == "number", le$1 = ne, ce$1 = () => v.toasts, de$1 = () => v.getActiveToasts();
Object.assign(le$1, { success: v.success, info: v.info, warning: v.warning, error: v.error, custom: v.custom, message: v.message, promise: v.promise, dismiss: v.dismiss, loading: v.loading }, { getHistory: ce$1, getToasts: de$1 });
function wt(n2, { insertAt: e } = {}) {
  if (typeof document == "undefined") return;
  let t2 = document.head || document.getElementsByTagName("head")[0], a = document.createElement("style");
  a.type = "text/css", e === "top" && t2.firstChild ? t2.insertBefore(a, t2.firstChild) : t2.appendChild(a), a.styleSheet ? a.styleSheet.cssText = n2 : a.appendChild(document.createTextNode(n2));
}
wt(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);
function tt(n2) {
  return n2.label !== void 0;
}
var pe$1 = 3, me$1 = "32px", ge = "16px", Wt = 4e3, he$1 = 356, be$1 = 14, ye$1 = 20, we$1 = 200;
function M(...n2) {
  return n2.filter(Boolean).join(" ");
}
function xe$1(n2) {
  let [e, t2] = n2.split("-"), a = [];
  return e && a.push(e), t2 && a.push(t2), a;
}
var ve$1 = (n2) => {
  var Dt, Pt, Nt, Bt, Ct, kt, It, Mt, Ht, At, Lt;
  let { invert: e, toast: t2, unstyled: a, interacting: u2, setHeights: f, visibleToasts: w, heights: S, index: g, toasts: i2, expanded: D2, removeToast: T2, defaultRichColors: F, closeButton: et, style: ut, cancelButtonStyle: ft, actionButtonStyle: l, className: ot = "", descriptionClassName: at = "", duration: X2, position: st, gap: pt, loadingIcon: rt, expandByDefault: B2, classNames: s2, icons: P2, closeButtonAriaLabel: nt = "Close toast", pauseWhenPageIsHidden: it } = n2, [Y2, C] = React$1.useState(null), [lt, J2] = React$1.useState(null), [W2, H2] = React$1.useState(false), [A, mt] = React$1.useState(false), [L2, z] = React$1.useState(false), [ct, d] = React$1.useState(false), [h, y] = React$1.useState(false), [R, j2] = React$1.useState(0), [p2, _] = React$1.useState(0), O = React$1.useRef(t2.duration || X2 || Wt), G2 = React$1.useRef(null), k2 = React$1.useRef(null), Vt = g === 0, Ut = g + 1 <= w, N2 = t2.type, V = t2.dismissible !== false, Kt = t2.className || "", Xt = t2.descriptionClassName || "", dt = React$1.useMemo(() => S.findIndex((r2) => r2.toastId === t2.id) || 0, [S, t2.id]), Jt = React$1.useMemo(() => {
    var r2;
    return (r2 = t2.closeButton) != null ? r2 : et;
  }, [t2.closeButton, et]), Tt = React$1.useMemo(() => t2.duration || X2 || Wt, [t2.duration, X2]), gt = React$1.useRef(0), U2 = React$1.useRef(0), St = React$1.useRef(0), K2 = React$1.useRef(null), [Gt, Qt] = st.split("-"), Rt = React$1.useMemo(() => S.reduce((r2, m2, c) => c >= dt ? r2 : r2 + m2.height, 0), [S, dt]), Et = Ft(), qt = t2.invert || e, ht = N2 === "loading";
  U2.current = React$1.useMemo(() => dt * pt + Rt, [dt, Rt]), React$1.useEffect(() => {
    O.current = Tt;
  }, [Tt]), React$1.useEffect(() => {
    H2(true);
  }, []), React$1.useEffect(() => {
    let r2 = k2.current;
    if (r2) {
      let m2 = r2.getBoundingClientRect().height;
      return _(m2), f((c) => [{ toastId: t2.id, height: m2, position: t2.position }, ...c]), () => f((c) => c.filter((b) => b.toastId !== t2.id));
    }
  }, [f, t2.id]), React$1.useLayoutEffect(() => {
    if (!W2) return;
    let r2 = k2.current, m2 = r2.style.height;
    r2.style.height = "auto";
    let c = r2.getBoundingClientRect().height;
    r2.style.height = m2, _(c), f((b) => b.find((x) => x.toastId === t2.id) ? b.map((x) => x.toastId === t2.id ? { ...x, height: c } : x) : [{ toastId: t2.id, height: c, position: t2.position }, ...b]);
  }, [W2, t2.title, t2.description, f, t2.id]);
  let $2 = React$1.useCallback(() => {
    mt(true), j2(U2.current), f((r2) => r2.filter((m2) => m2.toastId !== t2.id)), setTimeout(() => {
      T2(t2);
    }, we$1);
  }, [t2, T2, f, U2]);
  React$1.useEffect(() => {
    if (t2.promise && N2 === "loading" || t2.duration === 1 / 0 || t2.type === "loading") return;
    let r2;
    return D2 || u2 || it && Et ? (() => {
      if (St.current < gt.current) {
        let b = (/* @__PURE__ */ new Date()).getTime() - gt.current;
        O.current = O.current - b;
      }
      St.current = (/* @__PURE__ */ new Date()).getTime();
    })() : (() => {
      O.current !== 1 / 0 && (gt.current = (/* @__PURE__ */ new Date()).getTime(), r2 = setTimeout(() => {
        var b;
        (b = t2.onAutoClose) == null || b.call(t2, t2), $2();
      }, O.current));
    })(), () => clearTimeout(r2);
  }, [D2, u2, t2, N2, it, Et, $2]), React$1.useEffect(() => {
    t2.delete && $2();
  }, [$2, t2.delete]);
  function Zt() {
    var r2, m2, c;
    return P2 != null && P2.loading ? React$1.createElement("div", { className: M(s2 == null ? void 0 : s2.loader, (r2 = t2 == null ? void 0 : t2.classNames) == null ? void 0 : r2.loader, "sonner-loader"), "data-visible": N2 === "loading" }, P2.loading) : rt ? React$1.createElement("div", { className: M(s2 == null ? void 0 : s2.loader, (m2 = t2 == null ? void 0 : t2.classNames) == null ? void 0 : m2.loader, "sonner-loader"), "data-visible": N2 === "loading" }, rt) : React$1.createElement(Yt, { className: M(s2 == null ? void 0 : s2.loader, (c = t2 == null ? void 0 : t2.classNames) == null ? void 0 : c.loader), visible: N2 === "loading" });
  }
  return React$1.createElement("li", { tabIndex: 0, ref: k2, className: M(ot, Kt, s2 == null ? void 0 : s2.toast, (Dt = t2 == null ? void 0 : t2.classNames) == null ? void 0 : Dt.toast, s2 == null ? void 0 : s2.default, s2 == null ? void 0 : s2[N2], (Pt = t2 == null ? void 0 : t2.classNames) == null ? void 0 : Pt[N2]), "data-sonner-toast": "", "data-rich-colors": (Nt = t2.richColors) != null ? Nt : F, "data-styled": !(t2.jsx || t2.unstyled || a), "data-mounted": W2, "data-promise": !!t2.promise, "data-swiped": h, "data-removed": A, "data-visible": Ut, "data-y-position": Gt, "data-x-position": Qt, "data-index": g, "data-front": Vt, "data-swiping": L2, "data-dismissible": V, "data-type": N2, "data-invert": qt, "data-swipe-out": ct, "data-swipe-direction": lt, "data-expanded": !!(D2 || B2 && W2), style: { "--index": g, "--toasts-before": g, "--z-index": i2.length - g, "--offset": `${A ? R : U2.current}px`, "--initial-height": B2 ? "auto" : `${p2}px`, ...ut, ...t2.style }, onDragEnd: () => {
    z(false), C(null), K2.current = null;
  }, onPointerDown: (r2) => {
    ht || !V || (G2.current = /* @__PURE__ */ new Date(), j2(U2.current), r2.target.setPointerCapture(r2.pointerId), r2.target.tagName !== "BUTTON" && (z(true), K2.current = { x: r2.clientX, y: r2.clientY }));
  }, onPointerUp: () => {
    var x, Q, q, Z2;
    if (ct || !V) return;
    K2.current = null;
    let r2 = Number(((x = k2.current) == null ? void 0 : x.style.getPropertyValue("--swipe-amount-x").replace("px", "")) || 0), m2 = Number(((Q = k2.current) == null ? void 0 : Q.style.getPropertyValue("--swipe-amount-y").replace("px", "")) || 0), c = (/* @__PURE__ */ new Date()).getTime() - ((q = G2.current) == null ? void 0 : q.getTime()), b = Y2 === "x" ? r2 : m2, I = Math.abs(b) / c;
    if (Math.abs(b) >= ye$1 || I > 0.11) {
      j2(U2.current), (Z2 = t2.onDismiss) == null || Z2.call(t2, t2), J2(Y2 === "x" ? r2 > 0 ? "right" : "left" : m2 > 0 ? "down" : "up"), $2(), d(true), y(false);
      return;
    }
    z(false), C(null);
  }, onPointerMove: (r2) => {
    var Q, q, Z2, zt;
    if (!K2.current || !V || ((Q = window.getSelection()) == null ? void 0 : Q.toString().length) > 0) return;
    let c = r2.clientY - K2.current.y, b = r2.clientX - K2.current.x, I = (q = n2.swipeDirections) != null ? q : xe$1(st);
    !Y2 && (Math.abs(b) > 1 || Math.abs(c) > 1) && C(Math.abs(b) > Math.abs(c) ? "x" : "y");
    let x = { x: 0, y: 0 };
    Y2 === "y" ? (I.includes("top") || I.includes("bottom")) && (I.includes("top") && c < 0 || I.includes("bottom") && c > 0) && (x.y = c) : Y2 === "x" && (I.includes("left") || I.includes("right")) && (I.includes("left") && b < 0 || I.includes("right") && b > 0) && (x.x = b), (Math.abs(x.x) > 0 || Math.abs(x.y) > 0) && y(true), (Z2 = k2.current) == null || Z2.style.setProperty("--swipe-amount-x", `${x.x}px`), (zt = k2.current) == null || zt.style.setProperty("--swipe-amount-y", `${x.y}px`);
  } }, Jt && !t2.jsx ? React$1.createElement("button", { "aria-label": nt, "data-disabled": ht, "data-close-button": true, onClick: ht || !V ? () => {
  } : () => {
    var r2;
    $2(), (r2 = t2.onDismiss) == null || r2.call(t2, t2);
  }, className: M(s2 == null ? void 0 : s2.closeButton, (Bt = t2 == null ? void 0 : t2.classNames) == null ? void 0 : Bt.closeButton) }, (Ct = P2 == null ? void 0 : P2.close) != null ? Ct : Ot) : null, t2.jsx || reactExports.isValidElement(t2.title) ? t2.jsx ? t2.jsx : typeof t2.title == "function" ? t2.title() : t2.title : React$1.createElement(React$1.Fragment, null, N2 || t2.icon || t2.promise ? React$1.createElement("div", { "data-icon": "", className: M(s2 == null ? void 0 : s2.icon, (kt = t2 == null ? void 0 : t2.classNames) == null ? void 0 : kt.icon) }, t2.promise || t2.type === "loading" && !t2.icon ? t2.icon || Zt() : null, t2.type !== "loading" ? t2.icon || (P2 == null ? void 0 : P2[N2]) || jt(N2) : null) : null, React$1.createElement("div", { "data-content": "", className: M(s2 == null ? void 0 : s2.content, (It = t2 == null ? void 0 : t2.classNames) == null ? void 0 : It.content) }, React$1.createElement("div", { "data-title": "", className: M(s2 == null ? void 0 : s2.title, (Mt = t2 == null ? void 0 : t2.classNames) == null ? void 0 : Mt.title) }, typeof t2.title == "function" ? t2.title() : t2.title), t2.description ? React$1.createElement("div", { "data-description": "", className: M(at, Xt, s2 == null ? void 0 : s2.description, (Ht = t2 == null ? void 0 : t2.classNames) == null ? void 0 : Ht.description) }, typeof t2.description == "function" ? t2.description() : t2.description) : null), reactExports.isValidElement(t2.cancel) ? t2.cancel : t2.cancel && tt(t2.cancel) ? React$1.createElement("button", { "data-button": true, "data-cancel": true, style: t2.cancelButtonStyle || ft, onClick: (r2) => {
    var m2, c;
    tt(t2.cancel) && V && ((c = (m2 = t2.cancel).onClick) == null || c.call(m2, r2), $2());
  }, className: M(s2 == null ? void 0 : s2.cancelButton, (At = t2 == null ? void 0 : t2.classNames) == null ? void 0 : At.cancelButton) }, t2.cancel.label) : null, reactExports.isValidElement(t2.action) ? t2.action : t2.action && tt(t2.action) ? React$1.createElement("button", { "data-button": true, "data-action": true, style: t2.actionButtonStyle || l, onClick: (r2) => {
    var m2, c;
    tt(t2.action) && ((c = (m2 = t2.action).onClick) == null || c.call(m2, r2), !r2.defaultPrevented && $2());
  }, className: M(s2 == null ? void 0 : s2.actionButton, (Lt = t2 == null ? void 0 : t2.classNames) == null ? void 0 : Lt.actionButton) }, t2.action.label) : null));
};
function _t() {
  if (typeof window == "undefined" || typeof document == "undefined") return "ltr";
  let n2 = document.documentElement.getAttribute("dir");
  return n2 === "auto" || !n2 ? window.getComputedStyle(document.documentElement).direction : n2;
}
function Te$1(n2, e) {
  let t2 = {};
  return [n2, e].forEach((a, u2) => {
    let f = u2 === 1, w = f ? "--mobile-offset" : "--offset", S = f ? ge : me$1;
    function g(i2) {
      ["top", "right", "bottom", "left"].forEach((D2) => {
        t2[`${w}-${D2}`] = typeof i2 == "number" ? `${i2}px` : i2;
      });
    }
    typeof a == "number" || typeof a == "string" ? g(a) : typeof a == "object" ? ["top", "right", "bottom", "left"].forEach((i2) => {
      a[i2] === void 0 ? t2[`${w}-${i2}`] = S : t2[`${w}-${i2}`] = typeof a[i2] == "number" ? `${a[i2]}px` : a[i2];
    }) : g(S);
  }), t2;
}
var $e = reactExports.forwardRef(function(e, t2) {
  let { invert: a, position: u2 = "bottom-right", hotkey: f = ["altKey", "KeyT"], expand: w, closeButton: S, className: g, offset: i2, mobileOffset: D2, theme: T2 = "light", richColors: F, duration: et, style: ut, visibleToasts: ft = pe$1, toastOptions: l, dir: ot = _t(), gap: at = be$1, loadingIcon: X2, icons: st, containerAriaLabel: pt = "Notifications", pauseWhenPageIsHidden: rt } = e, [B2, s2] = React$1.useState([]), P2 = React$1.useMemo(() => Array.from(new Set([u2].concat(B2.filter((d) => d.position).map((d) => d.position)))), [B2, u2]), [nt, it] = React$1.useState([]), [Y2, C] = React$1.useState(false), [lt, J2] = React$1.useState(false), [W2, H2] = React$1.useState(T2 !== "system" ? T2 : typeof window != "undefined" && window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light"), A = React$1.useRef(null), mt = f.join("+").replace(/Key/g, "").replace(/Digit/g, ""), L2 = React$1.useRef(null), z = React$1.useRef(false), ct = React$1.useCallback((d) => {
    s2((h) => {
      var y;
      return (y = h.find((R) => R.id === d.id)) != null && y.delete || v.dismiss(d.id), h.filter(({ id: R }) => R !== d.id);
    });
  }, []);
  return React$1.useEffect(() => v.subscribe((d) => {
    if (d.dismiss) {
      s2((h) => h.map((y) => y.id === d.id ? { ...y, delete: true } : y));
      return;
    }
    setTimeout(() => {
      vt.flushSync(() => {
        s2((h) => {
          let y = h.findIndex((R) => R.id === d.id);
          return y !== -1 ? [...h.slice(0, y), { ...h[y], ...d }, ...h.slice(y + 1)] : [d, ...h];
        });
      });
    });
  }), []), React$1.useEffect(() => {
    if (T2 !== "system") {
      H2(T2);
      return;
    }
    if (T2 === "system" && (window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches ? H2("dark") : H2("light")), typeof window == "undefined") return;
    let d = window.matchMedia("(prefers-color-scheme: dark)");
    try {
      d.addEventListener("change", ({ matches: h }) => {
        H2(h ? "dark" : "light");
      });
    } catch (h) {
      d.addListener(({ matches: y }) => {
        try {
          H2(y ? "dark" : "light");
        } catch (R) {
          console.error(R);
        }
      });
    }
  }, [T2]), React$1.useEffect(() => {
    B2.length <= 1 && C(false);
  }, [B2]), React$1.useEffect(() => {
    let d = (h) => {
      var R, j2;
      f.every((p2) => h[p2] || h.code === p2) && (C(true), (R = A.current) == null || R.focus()), h.code === "Escape" && (document.activeElement === A.current || (j2 = A.current) != null && j2.contains(document.activeElement)) && C(false);
    };
    return document.addEventListener("keydown", d), () => document.removeEventListener("keydown", d);
  }, [f]), React$1.useEffect(() => {
    if (A.current) return () => {
      L2.current && (L2.current.focus({ preventScroll: true }), L2.current = null, z.current = false);
    };
  }, [A.current]), React$1.createElement("section", { ref: t2, "aria-label": `${pt} ${mt}`, tabIndex: -1, "aria-live": "polite", "aria-relevant": "additions text", "aria-atomic": "false", suppressHydrationWarning: true }, P2.map((d, h) => {
    var j2;
    let [y, R] = d.split("-");
    return B2.length ? React$1.createElement("ol", { key: d, dir: ot === "auto" ? _t() : ot, tabIndex: -1, ref: A, className: g, "data-sonner-toaster": true, "data-theme": W2, "data-y-position": y, "data-lifted": Y2 && B2.length > 1 && !w, "data-x-position": R, style: { "--front-toast-height": `${((j2 = nt[0]) == null ? void 0 : j2.height) || 0}px`, "--width": `${he$1}px`, "--gap": `${at}px`, ...ut, ...Te$1(i2, D2) }, onBlur: (p2) => {
      z.current && !p2.currentTarget.contains(p2.relatedTarget) && (z.current = false, L2.current && (L2.current.focus({ preventScroll: true }), L2.current = null));
    }, onFocus: (p2) => {
      p2.target instanceof HTMLElement && p2.target.dataset.dismissible === "false" || z.current || (z.current = true, L2.current = p2.relatedTarget);
    }, onMouseEnter: () => C(true), onMouseMove: () => C(true), onMouseLeave: () => {
      lt || C(false);
    }, onDragEnd: () => C(false), onPointerDown: (p2) => {
      p2.target instanceof HTMLElement && p2.target.dataset.dismissible === "false" || J2(true);
    }, onPointerUp: () => J2(false) }, B2.filter((p2) => !p2.position && h === 0 || p2.position === d).map((p2, _) => {
      var O, G2;
      return React$1.createElement(ve$1, { key: p2.id, icons: st, index: _, toast: p2, defaultRichColors: F, duration: (O = l == null ? void 0 : l.duration) != null ? O : et, className: l == null ? void 0 : l.className, descriptionClassName: l == null ? void 0 : l.descriptionClassName, invert: a, visibleToasts: ft, closeButton: (G2 = l == null ? void 0 : l.closeButton) != null ? G2 : S, interacting: lt, position: d, style: l == null ? void 0 : l.style, unstyled: l == null ? void 0 : l.unstyled, classNames: l == null ? void 0 : l.classNames, cancelButtonStyle: l == null ? void 0 : l.cancelButtonStyle, actionButtonStyle: l == null ? void 0 : l.actionButtonStyle, removeToast: ct, toasts: B2.filter((k2) => k2.position == p2.position), heights: nt.filter((k2) => k2.position == p2.position), setHeights: it, expandByDefault: w, gap: at, loadingIcon: X2, expanded: Y2, pauseWhenPageIsHidden: rt, swipeDirections: e.swipeDirections });
    })) : null;
  }));
});
const Toaster = ({ ...props }) => {
  const { theme = "system" } = j();
  return /* @__PURE__ */ jsxRuntimeExports.jsx(
    $e,
    {
      theme,
      className: "toaster group",
      toastOptions: {
        classNames: {
          toast: "group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",
          description: "group-[.toast]:text-muted-foreground",
          actionButton: "group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",
          cancelButton: "group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"
        }
      },
      ...props
    }
  );
};
var [createTooltipContext, createTooltipScope] = createContextScope("Tooltip", [
  createPopperScope
]);
var usePopperScope$2 = createPopperScope();
var PROVIDER_NAME = "TooltipProvider";
var DEFAULT_DELAY_DURATION = 700;
var TOOLTIP_OPEN = "tooltip.open";
var [TooltipProviderContextProvider, useTooltipProviderContext] = createTooltipContext(PROVIDER_NAME);
var TooltipProvider$1 = (props) => {
  const {
    __scopeTooltip,
    delayDuration = DEFAULT_DELAY_DURATION,
    skipDelayDuration = 300,
    disableHoverableContent = false,
    children
  } = props;
  const isOpenDelayedRef = reactExports.useRef(true);
  const isPointerInTransitRef = reactExports.useRef(false);
  const skipDelayTimerRef = reactExports.useRef(0);
  reactExports.useEffect(() => {
    const skipDelayTimer = skipDelayTimerRef.current;
    return () => window.clearTimeout(skipDelayTimer);
  }, []);
  return /* @__PURE__ */ jsxRuntimeExports.jsx(
    TooltipProviderContextProvider,
    {
      scope: __scopeTooltip,
      isOpenDelayedRef,
      delayDuration,
      onOpen: reactExports.useCallback(() => {
        window.clearTimeout(skipDelayTimerRef.current);
        isOpenDelayedRef.current = false;
      }, []),
      onClose: reactExports.useCallback(() => {
        window.clearTimeout(skipDelayTimerRef.current);
        skipDelayTimerRef.current = window.setTimeout(
          () => isOpenDelayedRef.current = true,
          skipDelayDuration
        );
      }, [skipDelayDuration]),
      isPointerInTransitRef,
      onPointerInTransitChange: reactExports.useCallback((inTransit) => {
        isPointerInTransitRef.current = inTransit;
      }, []),
      disableHoverableContent,
      children
    }
  );
};
TooltipProvider$1.displayName = PROVIDER_NAME;
var TOOLTIP_NAME = "Tooltip";
var [TooltipContextProvider, useTooltipContext] = createTooltipContext(TOOLTIP_NAME);
var Tooltip$1 = (props) => {
  const {
    __scopeTooltip,
    children,
    open: openProp,
    defaultOpen,
    onOpenChange,
    disableHoverableContent: disableHoverableContentProp,
    delayDuration: delayDurationProp
  } = props;
  const providerContext = useTooltipProviderContext(TOOLTIP_NAME, props.__scopeTooltip);
  const popperScope = usePopperScope$2(__scopeTooltip);
  const [trigger, setTrigger] = reactExports.useState(null);
  const contentId = useId();
  const openTimerRef = reactExports.useRef(0);
  const disableHoverableContent = disableHoverableContentProp ?? providerContext.disableHoverableContent;
  const delayDuration = delayDurationProp ?? providerContext.delayDuration;
  const wasOpenDelayedRef = reactExports.useRef(false);
  const [open, setOpen] = useControllableState({
    prop: openProp,
    defaultProp: defaultOpen ?? false,
    onChange: (open2) => {
      if (open2) {
        providerContext.onOpen();
        document.dispatchEvent(new CustomEvent(TOOLTIP_OPEN));
      } else {
        providerContext.onClose();
      }
      onOpenChange?.(open2);
    },
    caller: TOOLTIP_NAME
  });
  const stateAttribute = reactExports.useMemo(() => {
    return open ? wasOpenDelayedRef.current ? "delayed-open" : "instant-open" : "closed";
  }, [open]);
  const handleOpen = reactExports.useCallback(() => {
    window.clearTimeout(openTimerRef.current);
    openTimerRef.current = 0;
    wasOpenDelayedRef.current = false;
    setOpen(true);
  }, [setOpen]);
  const handleClose = reactExports.useCallback(() => {
    window.clearTimeout(openTimerRef.current);
    openTimerRef.current = 0;
    setOpen(false);
  }, [setOpen]);
  const handleDelayedOpen = reactExports.useCallback(() => {
    window.clearTimeout(openTimerRef.current);
    openTimerRef.current = window.setTimeout(() => {
      wasOpenDelayedRef.current = true;
      setOpen(true);
      openTimerRef.current = 0;
    }, delayDuration);
  }, [delayDuration, setOpen]);
  reactExports.useEffect(() => {
    return () => {
      if (openTimerRef.current) {
        window.clearTimeout(openTimerRef.current);
        openTimerRef.current = 0;
      }
    };
  }, []);
  return /* @__PURE__ */ jsxRuntimeExports.jsx(Root2$6, { ...popperScope, children: /* @__PURE__ */ jsxRuntimeExports.jsx(
    TooltipContextProvider,
    {
      scope: __scopeTooltip,
      contentId,
      open,
      stateAttribute,
      trigger,
      onTriggerChange: setTrigger,
      onTriggerEnter: reactExports.useCallback(() => {
        if (providerContext.isOpenDelayedRef.current) handleDelayedOpen();
        else handleOpen();
      }, [providerContext.isOpenDelayedRef, handleDelayedOpen, handleOpen]),
      onTriggerLeave: reactExports.useCallback(() => {
        if (disableHoverableContent) {
          handleClose();
        } else {
          window.clearTimeout(openTimerRef.current);
          openTimerRef.current = 0;
        }
      }, [handleClose, disableHoverableContent]),
      onOpen: handleOpen,
      onClose: handleClose,
      disableHoverableContent,
      children
    }
  ) });
};
Tooltip$1.displayName = TOOLTIP_NAME;
var TRIGGER_NAME$5 = "TooltipTrigger";
var TooltipTrigger$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeTooltip, ...triggerProps } = props;
    const context = useTooltipContext(TRIGGER_NAME$5, __scopeTooltip);
    const providerContext = useTooltipProviderContext(TRIGGER_NAME$5, __scopeTooltip);
    const popperScope = usePopperScope$2(__scopeTooltip);
    const ref = reactExports.useRef(null);
    const composedRefs = useComposedRefs(forwardedRef, ref, context.onTriggerChange);
    const isPointerDownRef = reactExports.useRef(false);
    const hasPointerMoveOpenedRef = reactExports.useRef(false);
    const handlePointerUp = reactExports.useCallback(() => isPointerDownRef.current = false, []);
    reactExports.useEffect(() => {
      return () => document.removeEventListener("pointerup", handlePointerUp);
    }, [handlePointerUp]);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(Anchor, { asChild: true, ...popperScope, children: /* @__PURE__ */ jsxRuntimeExports.jsx(
      Primitive.button,
      {
        "aria-describedby": context.open ? context.contentId : void 0,
        "data-state": context.stateAttribute,
        ...triggerProps,
        ref: composedRefs,
        onPointerMove: composeEventHandlers(props.onPointerMove, (event) => {
          if (event.pointerType === "touch") return;
          if (!hasPointerMoveOpenedRef.current && !providerContext.isPointerInTransitRef.current) {
            context.onTriggerEnter();
            hasPointerMoveOpenedRef.current = true;
          }
        }),
        onPointerLeave: composeEventHandlers(props.onPointerLeave, () => {
          context.onTriggerLeave();
          hasPointerMoveOpenedRef.current = false;
        }),
        onPointerDown: composeEventHandlers(props.onPointerDown, () => {
          if (context.open) {
            context.onClose();
          }
          isPointerDownRef.current = true;
          document.addEventListener("pointerup", handlePointerUp, { once: true });
        }),
        onFocus: composeEventHandlers(props.onFocus, () => {
          if (!isPointerDownRef.current) context.onOpen();
        }),
        onBlur: composeEventHandlers(props.onBlur, context.onClose),
        onClick: composeEventHandlers(props.onClick, context.onClose)
      }
    ) });
  }
);
TooltipTrigger$1.displayName = TRIGGER_NAME$5;
var PORTAL_NAME$3 = "TooltipPortal";
var [PortalProvider$1, usePortalContext$1] = createTooltipContext(PORTAL_NAME$3, {
  forceMount: void 0
});
var CONTENT_NAME$4 = "TooltipContent";
var TooltipContent$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const portalContext = usePortalContext$1(CONTENT_NAME$4, props.__scopeTooltip);
    const { forceMount = portalContext.forceMount, side = "top", ...contentProps } = props;
    const context = useTooltipContext(CONTENT_NAME$4, props.__scopeTooltip);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(Presence, { present: forceMount || context.open, children: context.disableHoverableContent ? /* @__PURE__ */ jsxRuntimeExports.jsx(TooltipContentImpl, { side, ...contentProps, ref: forwardedRef }) : /* @__PURE__ */ jsxRuntimeExports.jsx(TooltipContentHoverable, { side, ...contentProps, ref: forwardedRef }) });
  }
);
var TooltipContentHoverable = reactExports.forwardRef((props, forwardedRef) => {
  const context = useTooltipContext(CONTENT_NAME$4, props.__scopeTooltip);
  const providerContext = useTooltipProviderContext(CONTENT_NAME$4, props.__scopeTooltip);
  const ref = reactExports.useRef(null);
  const composedRefs = useComposedRefs(forwardedRef, ref);
  const [pointerGraceArea, setPointerGraceArea] = reactExports.useState(null);
  const { trigger, onClose } = context;
  const content = ref.current;
  const { onPointerInTransitChange } = providerContext;
  const handleRemoveGraceArea = reactExports.useCallback(() => {
    setPointerGraceArea(null);
    onPointerInTransitChange(false);
  }, [onPointerInTransitChange]);
  const handleCreateGraceArea = reactExports.useCallback(
    (event, hoverTarget) => {
      const currentTarget = event.currentTarget;
      const exitPoint = { x: event.clientX, y: event.clientY };
      const exitSide = getExitSideFromRect(exitPoint, currentTarget.getBoundingClientRect());
      const paddedExitPoints = getPaddedExitPoints(exitPoint, exitSide);
      const hoverTargetPoints = getPointsFromRect(hoverTarget.getBoundingClientRect());
      const graceArea = getHull([...paddedExitPoints, ...hoverTargetPoints]);
      setPointerGraceArea(graceArea);
      onPointerInTransitChange(true);
    },
    [onPointerInTransitChange]
  );
  reactExports.useEffect(() => {
    return () => handleRemoveGraceArea();
  }, [handleRemoveGraceArea]);
  reactExports.useEffect(() => {
    if (trigger && content) {
      const handleTriggerLeave = (event) => handleCreateGraceArea(event, content);
      const handleContentLeave = (event) => handleCreateGraceArea(event, trigger);
      trigger.addEventListener("pointerleave", handleTriggerLeave);
      content.addEventListener("pointerleave", handleContentLeave);
      return () => {
        trigger.removeEventListener("pointerleave", handleTriggerLeave);
        content.removeEventListener("pointerleave", handleContentLeave);
      };
    }
  }, [trigger, content, handleCreateGraceArea, handleRemoveGraceArea]);
  reactExports.useEffect(() => {
    if (pointerGraceArea) {
      const handleTrackPointerGrace = (event) => {
        const target = event.target;
        const pointerPosition = { x: event.clientX, y: event.clientY };
        const hasEnteredTarget = trigger?.contains(target) || content?.contains(target);
        const isPointerOutsideGraceArea = !isPointInPolygon(pointerPosition, pointerGraceArea);
        if (hasEnteredTarget) {
          handleRemoveGraceArea();
        } else if (isPointerOutsideGraceArea) {
          handleRemoveGraceArea();
          onClose();
        }
      };
      document.addEventListener("pointermove", handleTrackPointerGrace);
      return () => document.removeEventListener("pointermove", handleTrackPointerGrace);
    }
  }, [trigger, content, pointerGraceArea, onClose, handleRemoveGraceArea]);
  return /* @__PURE__ */ jsxRuntimeExports.jsx(TooltipContentImpl, { ...props, ref: composedRefs });
});
var [VisuallyHiddenContentContextProvider, useVisuallyHiddenContentContext] = createTooltipContext(TOOLTIP_NAME, { isInside: false });
var Slottable$1 = createSlottable("TooltipContent");
var TooltipContentImpl = reactExports.forwardRef(
  (props, forwardedRef) => {
    const {
      __scopeTooltip,
      children,
      "aria-label": ariaLabel,
      onEscapeKeyDown,
      onPointerDownOutside,
      ...contentProps
    } = props;
    const context = useTooltipContext(CONTENT_NAME$4, __scopeTooltip);
    const popperScope = usePopperScope$2(__scopeTooltip);
    const { onClose } = context;
    reactExports.useEffect(() => {
      document.addEventListener(TOOLTIP_OPEN, onClose);
      return () => document.removeEventListener(TOOLTIP_OPEN, onClose);
    }, [onClose]);
    reactExports.useEffect(() => {
      if (context.trigger) {
        const handleScroll = (event) => {
          const target = event.target;
          if (target?.contains(context.trigger)) onClose();
        };
        window.addEventListener("scroll", handleScroll, { capture: true });
        return () => window.removeEventListener("scroll", handleScroll, { capture: true });
      }
    }, [context.trigger, onClose]);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      DismissableLayer,
      {
        asChild: true,
        disableOutsidePointerEvents: false,
        onEscapeKeyDown,
        onPointerDownOutside,
        onFocusOutside: (event) => event.preventDefault(),
        onDismiss: onClose,
        children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
          Content$1,
          {
            "data-state": context.stateAttribute,
            ...popperScope,
            ...contentProps,
            ref: forwardedRef,
            style: {
              ...contentProps.style,
              // re-namespace exposed content custom properties
              ...{
                "--radix-tooltip-content-transform-origin": "var(--radix-popper-transform-origin)",
                "--radix-tooltip-content-available-width": "var(--radix-popper-available-width)",
                "--radix-tooltip-content-available-height": "var(--radix-popper-available-height)",
                "--radix-tooltip-trigger-width": "var(--radix-popper-anchor-width)",
                "--radix-tooltip-trigger-height": "var(--radix-popper-anchor-height)"
              }
            },
            children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Slottable$1, { children }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(VisuallyHiddenContentContextProvider, { scope: __scopeTooltip, isInside: true, children: /* @__PURE__ */ jsxRuntimeExports.jsx(Root$4, { id: context.contentId, role: "tooltip", children: ariaLabel || children }) })
            ]
          }
        )
      }
    );
  }
);
TooltipContent$1.displayName = CONTENT_NAME$4;
var ARROW_NAME$2 = "TooltipArrow";
var TooltipArrow = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeTooltip, ...arrowProps } = props;
    const popperScope = usePopperScope$2(__scopeTooltip);
    const visuallyHiddenContentContext = useVisuallyHiddenContentContext(
      ARROW_NAME$2,
      __scopeTooltip
    );
    return visuallyHiddenContentContext.isInside ? null : /* @__PURE__ */ jsxRuntimeExports.jsx(Arrow, { ...popperScope, ...arrowProps, ref: forwardedRef });
  }
);
TooltipArrow.displayName = ARROW_NAME$2;
function getExitSideFromRect(point, rect) {
  const top = Math.abs(rect.top - point.y);
  const bottom = Math.abs(rect.bottom - point.y);
  const right = Math.abs(rect.right - point.x);
  const left = Math.abs(rect.left - point.x);
  switch (Math.min(top, bottom, right, left)) {
    case left:
      return "left";
    case right:
      return "right";
    case top:
      return "top";
    case bottom:
      return "bottom";
    default:
      throw new Error("unreachable");
  }
}
function getPaddedExitPoints(exitPoint, exitSide, padding = 5) {
  const paddedExitPoints = [];
  switch (exitSide) {
    case "top":
      paddedExitPoints.push(
        { x: exitPoint.x - padding, y: exitPoint.y + padding },
        { x: exitPoint.x + padding, y: exitPoint.y + padding }
      );
      break;
    case "bottom":
      paddedExitPoints.push(
        { x: exitPoint.x - padding, y: exitPoint.y - padding },
        { x: exitPoint.x + padding, y: exitPoint.y - padding }
      );
      break;
    case "left":
      paddedExitPoints.push(
        { x: exitPoint.x + padding, y: exitPoint.y - padding },
        { x: exitPoint.x + padding, y: exitPoint.y + padding }
      );
      break;
    case "right":
      paddedExitPoints.push(
        { x: exitPoint.x - padding, y: exitPoint.y - padding },
        { x: exitPoint.x - padding, y: exitPoint.y + padding }
      );
      break;
  }
  return paddedExitPoints;
}
function getPointsFromRect(rect) {
  const { top, right, bottom, left } = rect;
  return [
    { x: left, y: top },
    { x: right, y: top },
    { x: right, y: bottom },
    { x: left, y: bottom }
  ];
}
function isPointInPolygon(point, polygon) {
  const { x, y } = point;
  let inside = false;
  for (let i2 = 0, j2 = polygon.length - 1; i2 < polygon.length; j2 = i2++) {
    const ii = polygon[i2];
    const jj = polygon[j2];
    const xi = ii.x;
    const yi = ii.y;
    const xj = jj.x;
    const yj = jj.y;
    const intersect = yi > y !== yj > y && x < (xj - xi) * (y - yi) / (yj - yi) + xi;
    if (intersect) inside = !inside;
  }
  return inside;
}
function getHull(points) {
  const newPoints = points.slice();
  newPoints.sort((a, b) => {
    if (a.x < b.x) return -1;
    else if (a.x > b.x) return 1;
    else if (a.y < b.y) return -1;
    else if (a.y > b.y) return 1;
    else return 0;
  });
  return getHullPresorted(newPoints);
}
function getHullPresorted(points) {
  if (points.length <= 1) return points.slice();
  const upperHull = [];
  for (let i2 = 0; i2 < points.length; i2++) {
    const p2 = points[i2];
    while (upperHull.length >= 2) {
      const q = upperHull[upperHull.length - 1];
      const r2 = upperHull[upperHull.length - 2];
      if ((q.x - r2.x) * (p2.y - r2.y) >= (q.y - r2.y) * (p2.x - r2.x)) upperHull.pop();
      else break;
    }
    upperHull.push(p2);
  }
  upperHull.pop();
  const lowerHull = [];
  for (let i2 = points.length - 1; i2 >= 0; i2--) {
    const p2 = points[i2];
    while (lowerHull.length >= 2) {
      const q = lowerHull[lowerHull.length - 1];
      const r2 = lowerHull[lowerHull.length - 2];
      if ((q.x - r2.x) * (p2.y - r2.y) >= (q.y - r2.y) * (p2.x - r2.x)) lowerHull.pop();
      else break;
    }
    lowerHull.push(p2);
  }
  lowerHull.pop();
  if (upperHull.length === 1 && lowerHull.length === 1 && upperHull[0].x === lowerHull[0].x && upperHull[0].y === lowerHull[0].y) {
    return upperHull;
  } else {
    return upperHull.concat(lowerHull);
  }
}
var Provider = TooltipProvider$1;
var Root3 = Tooltip$1;
var Trigger$3 = TooltipTrigger$1;
var Content2$3 = TooltipContent$1;
const TooltipProvider = Provider;
const Tooltip = Root3;
const TooltipTrigger = Trigger$3;
const TooltipContent = reactExports.forwardRef(({ className, sideOffset = 4, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  Content2$3,
  {
    ref,
    sideOffset,
    className: cn(
      "z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className
    ),
    ...props
  }
));
TooltipContent.displayName = Content2$3.displayName;
var Subscribable = class {
  constructor() {
    this.listeners = /* @__PURE__ */ new Set();
    this.subscribe = this.subscribe.bind(this);
  }
  subscribe(listener) {
    this.listeners.add(listener);
    this.onSubscribe();
    return () => {
      this.listeners.delete(listener);
      this.onUnsubscribe();
    };
  }
  hasListeners() {
    return this.listeners.size > 0;
  }
  onSubscribe() {
  }
  onUnsubscribe() {
  }
};
var isServer = typeof window === "undefined" || "Deno" in globalThis;
function noop() {
}
function functionalUpdate(updater, input) {
  return typeof updater === "function" ? updater(input) : updater;
}
function isValidTimeout(value) {
  return typeof value === "number" && value >= 0 && value !== Infinity;
}
function timeUntilStale(updatedAt, staleTime) {
  return Math.max(updatedAt + (staleTime || 0) - Date.now(), 0);
}
function resolveStaleTime(staleTime, query) {
  return typeof staleTime === "function" ? staleTime(query) : staleTime;
}
function resolveEnabled(enabled, query) {
  return typeof enabled === "function" ? enabled(query) : enabled;
}
function matchQuery(filters, query) {
  const {
    type: type2 = "all",
    exact,
    fetchStatus,
    predicate,
    queryKey,
    stale
  } = filters;
  if (queryKey) {
    if (exact) {
      if (query.queryHash !== hashQueryKeyByOptions(queryKey, query.options)) {
        return false;
      }
    } else if (!partialMatchKey(query.queryKey, queryKey)) {
      return false;
    }
  }
  if (type2 !== "all") {
    const isActive = query.isActive();
    if (type2 === "active" && !isActive) {
      return false;
    }
    if (type2 === "inactive" && isActive) {
      return false;
    }
  }
  if (typeof stale === "boolean" && query.isStale() !== stale) {
    return false;
  }
  if (fetchStatus && fetchStatus !== query.state.fetchStatus) {
    return false;
  }
  if (predicate && !predicate(query)) {
    return false;
  }
  return true;
}
function matchMutation(filters, mutation) {
  const { exact, status, predicate, mutationKey } = filters;
  if (mutationKey) {
    if (!mutation.options.mutationKey) {
      return false;
    }
    if (exact) {
      if (hashKey(mutation.options.mutationKey) !== hashKey(mutationKey)) {
        return false;
      }
    } else if (!partialMatchKey(mutation.options.mutationKey, mutationKey)) {
      return false;
    }
  }
  if (status && mutation.state.status !== status) {
    return false;
  }
  if (predicate && !predicate(mutation)) {
    return false;
  }
  return true;
}
function hashQueryKeyByOptions(queryKey, options) {
  const hashFn = options?.queryKeyHashFn || hashKey;
  return hashFn(queryKey);
}
function hashKey(queryKey) {
  return JSON.stringify(
    queryKey,
    (_, val) => isPlainObject$1(val) ? Object.keys(val).sort().reduce((result, key) => {
      result[key] = val[key];
      return result;
    }, {}) : val
  );
}
function partialMatchKey(a, b) {
  if (a === b) {
    return true;
  }
  if (typeof a !== typeof b) {
    return false;
  }
  if (a && b && typeof a === "object" && typeof b === "object") {
    return Object.keys(b).every((key) => partialMatchKey(a[key], b[key]));
  }
  return false;
}
function replaceEqualDeep(a, b) {
  if (a === b) {
    return a;
  }
  const array = isPlainArray(a) && isPlainArray(b);
  if (array || isPlainObject$1(a) && isPlainObject$1(b)) {
    const aItems = array ? a : Object.keys(a);
    const aSize = aItems.length;
    const bItems = array ? b : Object.keys(b);
    const bSize = bItems.length;
    const copy = array ? [] : {};
    const aItemsSet = new Set(aItems);
    let equalItems = 0;
    for (let i2 = 0; i2 < bSize; i2++) {
      const key = array ? i2 : bItems[i2];
      if ((!array && aItemsSet.has(key) || array) && a[key] === void 0 && b[key] === void 0) {
        copy[key] = void 0;
        equalItems++;
      } else {
        copy[key] = replaceEqualDeep(a[key], b[key]);
        if (copy[key] === a[key] && a[key] !== void 0) {
          equalItems++;
        }
      }
    }
    return aSize === bSize && equalItems === aSize ? a : copy;
  }
  return b;
}
function isPlainArray(value) {
  return Array.isArray(value) && value.length === Object.keys(value).length;
}
function isPlainObject$1(o2) {
  if (!hasObjectPrototype(o2)) {
    return false;
  }
  const ctor = o2.constructor;
  if (ctor === void 0) {
    return true;
  }
  const prot = ctor.prototype;
  if (!hasObjectPrototype(prot)) {
    return false;
  }
  if (!prot.hasOwnProperty("isPrototypeOf")) {
    return false;
  }
  if (Object.getPrototypeOf(o2) !== Object.prototype) {
    return false;
  }
  return true;
}
function hasObjectPrototype(o2) {
  return Object.prototype.toString.call(o2) === "[object Object]";
}
function sleep(timeout) {
  return new Promise((resolve) => {
    setTimeout(resolve, timeout);
  });
}
function replaceData(prevData, data, options) {
  if (typeof options.structuralSharing === "function") {
    return options.structuralSharing(prevData, data);
  } else if (options.structuralSharing !== false) {
    return replaceEqualDeep(prevData, data);
  }
  return data;
}
function addToEnd(items, item, max = 0) {
  const newItems = [...items, item];
  return max && newItems.length > max ? newItems.slice(1) : newItems;
}
function addToStart(items, item, max = 0) {
  const newItems = [item, ...items];
  return max && newItems.length > max ? newItems.slice(0, -1) : newItems;
}
var skipToken = Symbol();
function ensureQueryFn(options, fetchOptions) {
  if (!options.queryFn && fetchOptions?.initialPromise) {
    return () => fetchOptions.initialPromise;
  }
  if (!options.queryFn || options.queryFn === skipToken) {
    return () => Promise.reject(new Error(`Missing queryFn: '${options.queryHash}'`));
  }
  return options.queryFn;
}
var FocusManager = (_a = class extends Subscribable {
  constructor() {
    super();
    __privateAdd(this, _focused);
    __privateAdd(this, _cleanup);
    __privateAdd(this, _setup);
    __privateSet(this, _setup, (onFocus) => {
      if (!isServer && window.addEventListener) {
        const listener = () => onFocus();
        window.addEventListener("visibilitychange", listener, false);
        return () => {
          window.removeEventListener("visibilitychange", listener);
        };
      }
      return;
    });
  }
  onSubscribe() {
    if (!__privateGet(this, _cleanup)) {
      this.setEventListener(__privateGet(this, _setup));
    }
  }
  onUnsubscribe() {
    var _a2;
    if (!this.hasListeners()) {
      (_a2 = __privateGet(this, _cleanup)) == null ? void 0 : _a2.call(this);
      __privateSet(this, _cleanup, void 0);
    }
  }
  setEventListener(setup) {
    var _a2;
    __privateSet(this, _setup, setup);
    (_a2 = __privateGet(this, _cleanup)) == null ? void 0 : _a2.call(this);
    __privateSet(this, _cleanup, setup((focused) => {
      if (typeof focused === "boolean") {
        this.setFocused(focused);
      } else {
        this.onFocus();
      }
    }));
  }
  setFocused(focused) {
    const changed = __privateGet(this, _focused) !== focused;
    if (changed) {
      __privateSet(this, _focused, focused);
      this.onFocus();
    }
  }
  onFocus() {
    const isFocused = this.isFocused();
    this.listeners.forEach((listener) => {
      listener(isFocused);
    });
  }
  isFocused() {
    if (typeof __privateGet(this, _focused) === "boolean") {
      return __privateGet(this, _focused);
    }
    return globalThis.document?.visibilityState !== "hidden";
  }
}, _focused = new WeakMap(), _cleanup = new WeakMap(), _setup = new WeakMap(), _a);
var focusManager = new FocusManager();
var OnlineManager = (_b = class extends Subscribable {
  constructor() {
    super();
    __privateAdd(this, _online, true);
    __privateAdd(this, _cleanup2);
    __privateAdd(this, _setup2);
    __privateSet(this, _setup2, (onOnline) => {
      if (!isServer && window.addEventListener) {
        const onlineListener = () => onOnline(true);
        const offlineListener = () => onOnline(false);
        window.addEventListener("online", onlineListener, false);
        window.addEventListener("offline", offlineListener, false);
        return () => {
          window.removeEventListener("online", onlineListener);
          window.removeEventListener("offline", offlineListener);
        };
      }
      return;
    });
  }
  onSubscribe() {
    if (!__privateGet(this, _cleanup2)) {
      this.setEventListener(__privateGet(this, _setup2));
    }
  }
  onUnsubscribe() {
    var _a2;
    if (!this.hasListeners()) {
      (_a2 = __privateGet(this, _cleanup2)) == null ? void 0 : _a2.call(this);
      __privateSet(this, _cleanup2, void 0);
    }
  }
  setEventListener(setup) {
    var _a2;
    __privateSet(this, _setup2, setup);
    (_a2 = __privateGet(this, _cleanup2)) == null ? void 0 : _a2.call(this);
    __privateSet(this, _cleanup2, setup(this.setOnline.bind(this)));
  }
  setOnline(online) {
    const changed = __privateGet(this, _online) !== online;
    if (changed) {
      __privateSet(this, _online, online);
      this.listeners.forEach((listener) => {
        listener(online);
      });
    }
  }
  isOnline() {
    return __privateGet(this, _online);
  }
}, _online = new WeakMap(), _cleanup2 = new WeakMap(), _setup2 = new WeakMap(), _b);
var onlineManager = new OnlineManager();
function pendingThenable() {
  let resolve;
  let reject;
  const thenable = new Promise((_resolve, _reject) => {
    resolve = _resolve;
    reject = _reject;
  });
  thenable.status = "pending";
  thenable.catch(() => {
  });
  function finalize(data) {
    Object.assign(thenable, data);
    delete thenable.resolve;
    delete thenable.reject;
  }
  thenable.resolve = (value) => {
    finalize({
      status: "fulfilled",
      value
    });
    resolve(value);
  };
  thenable.reject = (reason) => {
    finalize({
      status: "rejected",
      reason
    });
    reject(reason);
  };
  return thenable;
}
function defaultRetryDelay(failureCount) {
  return Math.min(1e3 * 2 ** failureCount, 3e4);
}
function canFetch(networkMode) {
  return (networkMode ?? "online") === "online" ? onlineManager.isOnline() : true;
}
var CancelledError = class extends Error {
  constructor(options) {
    super("CancelledError");
    this.revert = options?.revert;
    this.silent = options?.silent;
  }
};
function isCancelledError(value) {
  return value instanceof CancelledError;
}
function createRetryer(config) {
  let isRetryCancelled = false;
  let failureCount = 0;
  let isResolved = false;
  let continueFn;
  const thenable = pendingThenable();
  const cancel = (cancelOptions) => {
    if (!isResolved) {
      reject(new CancelledError(cancelOptions));
      config.abort?.();
    }
  };
  const cancelRetry = () => {
    isRetryCancelled = true;
  };
  const continueRetry = () => {
    isRetryCancelled = false;
  };
  const canContinue = () => focusManager.isFocused() && (config.networkMode === "always" || onlineManager.isOnline()) && config.canRun();
  const canStart = () => canFetch(config.networkMode) && config.canRun();
  const resolve = (value) => {
    if (!isResolved) {
      isResolved = true;
      config.onSuccess?.(value);
      continueFn?.();
      thenable.resolve(value);
    }
  };
  const reject = (value) => {
    if (!isResolved) {
      isResolved = true;
      config.onError?.(value);
      continueFn?.();
      thenable.reject(value);
    }
  };
  const pause = () => {
    return new Promise((continueResolve) => {
      continueFn = (value) => {
        if (isResolved || canContinue()) {
          continueResolve(value);
        }
      };
      config.onPause?.();
    }).then(() => {
      continueFn = void 0;
      if (!isResolved) {
        config.onContinue?.();
      }
    });
  };
  const run = () => {
    if (isResolved) {
      return;
    }
    let promiseOrValue;
    const initialPromise = failureCount === 0 ? config.initialPromise : void 0;
    try {
      promiseOrValue = initialPromise ?? config.fn();
    } catch (error) {
      promiseOrValue = Promise.reject(error);
    }
    Promise.resolve(promiseOrValue).then(resolve).catch((error) => {
      if (isResolved) {
        return;
      }
      const retry = config.retry ?? (isServer ? 0 : 3);
      const retryDelay = config.retryDelay ?? defaultRetryDelay;
      const delay = typeof retryDelay === "function" ? retryDelay(failureCount, error) : retryDelay;
      const shouldRetry = retry === true || typeof retry === "number" && failureCount < retry || typeof retry === "function" && retry(failureCount, error);
      if (isRetryCancelled || !shouldRetry) {
        reject(error);
        return;
      }
      failureCount++;
      config.onFail?.(failureCount, error);
      sleep(delay).then(() => {
        return canContinue() ? void 0 : pause();
      }).then(() => {
        if (isRetryCancelled) {
          reject(error);
        } else {
          run();
        }
      });
    });
  };
  return {
    promise: thenable,
    cancel,
    continue: () => {
      continueFn?.();
      return thenable;
    },
    cancelRetry,
    continueRetry,
    canStart,
    start: () => {
      if (canStart()) {
        run();
      } else {
        pause().then(run);
      }
      return thenable;
    }
  };
}
var defaultScheduler = (cb) => setTimeout(cb, 0);
function createNotifyManager() {
  let queue = [];
  let transactions = 0;
  let notifyFn = (callback) => {
    callback();
  };
  let batchNotifyFn = (callback) => {
    callback();
  };
  let scheduleFn = defaultScheduler;
  const schedule = (callback) => {
    if (transactions) {
      queue.push(callback);
    } else {
      scheduleFn(() => {
        notifyFn(callback);
      });
    }
  };
  const flush = () => {
    const originalQueue = queue;
    queue = [];
    if (originalQueue.length) {
      scheduleFn(() => {
        batchNotifyFn(() => {
          originalQueue.forEach((callback) => {
            notifyFn(callback);
          });
        });
      });
    }
  };
  return {
    batch: (callback) => {
      let result;
      transactions++;
      try {
        result = callback();
      } finally {
        transactions--;
        if (!transactions) {
          flush();
        }
      }
      return result;
    },
    /**
     * All calls to the wrapped function will be batched.
     */
    batchCalls: (callback) => {
      return (...args) => {
        schedule(() => {
          callback(...args);
        });
      };
    },
    schedule,
    /**
     * Use this method to set a custom notify function.
     * This can be used to for example wrap notifications with `React.act` while running tests.
     */
    setNotifyFunction: (fn) => {
      notifyFn = fn;
    },
    /**
     * Use this method to set a custom function to batch notifications together into a single tick.
     * By default React Query will use the batch function provided by ReactDOM or React Native.
     */
    setBatchNotifyFunction: (fn) => {
      batchNotifyFn = fn;
    },
    setScheduler: (fn) => {
      scheduleFn = fn;
    }
  };
}
var notifyManager = createNotifyManager();
var Removable = (_c = class {
  constructor() {
    __privateAdd(this, _gcTimeout);
  }
  destroy() {
    this.clearGcTimeout();
  }
  scheduleGc() {
    this.clearGcTimeout();
    if (isValidTimeout(this.gcTime)) {
      __privateSet(this, _gcTimeout, setTimeout(() => {
        this.optionalRemove();
      }, this.gcTime));
    }
  }
  updateGcTime(newGcTime) {
    this.gcTime = Math.max(
      this.gcTime || 0,
      newGcTime ?? (isServer ? Infinity : 5 * 60 * 1e3)
    );
  }
  clearGcTimeout() {
    if (__privateGet(this, _gcTimeout)) {
      clearTimeout(__privateGet(this, _gcTimeout));
      __privateSet(this, _gcTimeout, void 0);
    }
  }
}, _gcTimeout = new WeakMap(), _c);
var Query = (_d = class extends Removable {
  constructor(config) {
    super();
    __privateAdd(this, _Query_instances);
    __privateAdd(this, _initialState);
    __privateAdd(this, _revertState);
    __privateAdd(this, _cache);
    __privateAdd(this, _client);
    __privateAdd(this, _retryer);
    __privateAdd(this, _defaultOptions);
    __privateAdd(this, _abortSignalConsumed);
    __privateSet(this, _abortSignalConsumed, false);
    __privateSet(this, _defaultOptions, config.defaultOptions);
    this.setOptions(config.options);
    this.observers = [];
    __privateSet(this, _client, config.client);
    __privateSet(this, _cache, __privateGet(this, _client).getQueryCache());
    this.queryKey = config.queryKey;
    this.queryHash = config.queryHash;
    __privateSet(this, _initialState, getDefaultState$1(this.options));
    this.state = config.state ?? __privateGet(this, _initialState);
    this.scheduleGc();
  }
  get meta() {
    return this.options.meta;
  }
  get promise() {
    return __privateGet(this, _retryer)?.promise;
  }
  setOptions(options) {
    this.options = { ...__privateGet(this, _defaultOptions), ...options };
    this.updateGcTime(this.options.gcTime);
  }
  optionalRemove() {
    if (!this.observers.length && this.state.fetchStatus === "idle") {
      __privateGet(this, _cache).remove(this);
    }
  }
  setData(newData, options) {
    const data = replaceData(this.state.data, newData, this.options);
    __privateMethod(this, _Query_instances, dispatch_fn).call(this, {
      data,
      type: "success",
      dataUpdatedAt: options?.updatedAt,
      manual: options?.manual
    });
    return data;
  }
  setState(state, setStateOptions) {
    __privateMethod(this, _Query_instances, dispatch_fn).call(this, { type: "setState", state, setStateOptions });
  }
  cancel(options) {
    const promise = __privateGet(this, _retryer)?.promise;
    __privateGet(this, _retryer)?.cancel(options);
    return promise ? promise.then(noop).catch(noop) : Promise.resolve();
  }
  destroy() {
    super.destroy();
    this.cancel({ silent: true });
  }
  reset() {
    this.destroy();
    this.setState(__privateGet(this, _initialState));
  }
  isActive() {
    return this.observers.some(
      (observer) => resolveEnabled(observer.options.enabled, this) !== false
    );
  }
  isDisabled() {
    if (this.getObserversCount() > 0) {
      return !this.isActive();
    }
    return this.options.queryFn === skipToken || this.state.dataUpdateCount + this.state.errorUpdateCount === 0;
  }
  isStatic() {
    if (this.getObserversCount() > 0) {
      return this.observers.some(
        (observer) => resolveStaleTime(observer.options.staleTime, this) === "static"
      );
    }
    return false;
  }
  isStale() {
    if (this.getObserversCount() > 0) {
      return this.observers.some(
        (observer) => observer.getCurrentResult().isStale
      );
    }
    return this.state.data === void 0 || this.state.isInvalidated;
  }
  isStaleByTime(staleTime = 0) {
    if (this.state.data === void 0) {
      return true;
    }
    if (staleTime === "static") {
      return false;
    }
    if (this.state.isInvalidated) {
      return true;
    }
    return !timeUntilStale(this.state.dataUpdatedAt, staleTime);
  }
  onFocus() {
    const observer = this.observers.find((x) => x.shouldFetchOnWindowFocus());
    observer?.refetch({ cancelRefetch: false });
    __privateGet(this, _retryer)?.continue();
  }
  onOnline() {
    const observer = this.observers.find((x) => x.shouldFetchOnReconnect());
    observer?.refetch({ cancelRefetch: false });
    __privateGet(this, _retryer)?.continue();
  }
  addObserver(observer) {
    if (!this.observers.includes(observer)) {
      this.observers.push(observer);
      this.clearGcTimeout();
      __privateGet(this, _cache).notify({ type: "observerAdded", query: this, observer });
    }
  }
  removeObserver(observer) {
    if (this.observers.includes(observer)) {
      this.observers = this.observers.filter((x) => x !== observer);
      if (!this.observers.length) {
        if (__privateGet(this, _retryer)) {
          if (__privateGet(this, _abortSignalConsumed)) {
            __privateGet(this, _retryer).cancel({ revert: true });
          } else {
            __privateGet(this, _retryer).cancelRetry();
          }
        }
        this.scheduleGc();
      }
      __privateGet(this, _cache).notify({ type: "observerRemoved", query: this, observer });
    }
  }
  getObserversCount() {
    return this.observers.length;
  }
  invalidate() {
    if (!this.state.isInvalidated) {
      __privateMethod(this, _Query_instances, dispatch_fn).call(this, { type: "invalidate" });
    }
  }
  fetch(options, fetchOptions) {
    if (this.state.fetchStatus !== "idle") {
      if (this.state.data !== void 0 && fetchOptions?.cancelRefetch) {
        this.cancel({ silent: true });
      } else if (__privateGet(this, _retryer)) {
        __privateGet(this, _retryer).continueRetry();
        return __privateGet(this, _retryer).promise;
      }
    }
    if (options) {
      this.setOptions(options);
    }
    if (!this.options.queryFn) {
      const observer = this.observers.find((x) => x.options.queryFn);
      if (observer) {
        this.setOptions(observer.options);
      }
    }
    const abortController = new AbortController();
    const addSignalProperty = (object) => {
      Object.defineProperty(object, "signal", {
        enumerable: true,
        get: () => {
          __privateSet(this, _abortSignalConsumed, true);
          return abortController.signal;
        }
      });
    };
    const fetchFn = () => {
      const queryFn = ensureQueryFn(this.options, fetchOptions);
      const createQueryFnContext = () => {
        const queryFnContext2 = {
          client: __privateGet(this, _client),
          queryKey: this.queryKey,
          meta: this.meta
        };
        addSignalProperty(queryFnContext2);
        return queryFnContext2;
      };
      const queryFnContext = createQueryFnContext();
      __privateSet(this, _abortSignalConsumed, false);
      if (this.options.persister) {
        return this.options.persister(
          queryFn,
          queryFnContext,
          this
        );
      }
      return queryFn(queryFnContext);
    };
    const createFetchContext = () => {
      const context2 = {
        fetchOptions,
        options: this.options,
        queryKey: this.queryKey,
        client: __privateGet(this, _client),
        state: this.state,
        fetchFn
      };
      addSignalProperty(context2);
      return context2;
    };
    const context = createFetchContext();
    this.options.behavior?.onFetch(context, this);
    __privateSet(this, _revertState, this.state);
    if (this.state.fetchStatus === "idle" || this.state.fetchMeta !== context.fetchOptions?.meta) {
      __privateMethod(this, _Query_instances, dispatch_fn).call(this, { type: "fetch", meta: context.fetchOptions?.meta });
    }
    const onError = (error) => {
      if (!(isCancelledError(error) && error.silent)) {
        __privateMethod(this, _Query_instances, dispatch_fn).call(this, {
          type: "error",
          error
        });
      }
      if (!isCancelledError(error)) {
        __privateGet(this, _cache).config.onError?.(
          error,
          this
        );
        __privateGet(this, _cache).config.onSettled?.(
          this.state.data,
          error,
          this
        );
      }
      this.scheduleGc();
    };
    __privateSet(this, _retryer, createRetryer({
      initialPromise: fetchOptions?.initialPromise,
      fn: context.fetchFn,
      abort: abortController.abort.bind(abortController),
      onSuccess: (data) => {
        if (data === void 0) {
          onError(new Error(`${this.queryHash} data is undefined`));
          return;
        }
        try {
          this.setData(data);
        } catch (error) {
          onError(error);
          return;
        }
        __privateGet(this, _cache).config.onSuccess?.(data, this);
        __privateGet(this, _cache).config.onSettled?.(
          data,
          this.state.error,
          this
        );
        this.scheduleGc();
      },
      onError,
      onFail: (failureCount, error) => {
        __privateMethod(this, _Query_instances, dispatch_fn).call(this, { type: "failed", failureCount, error });
      },
      onPause: () => {
        __privateMethod(this, _Query_instances, dispatch_fn).call(this, { type: "pause" });
      },
      onContinue: () => {
        __privateMethod(this, _Query_instances, dispatch_fn).call(this, { type: "continue" });
      },
      retry: context.options.retry,
      retryDelay: context.options.retryDelay,
      networkMode: context.options.networkMode,
      canRun: () => true
    }));
    return __privateGet(this, _retryer).start();
  }
}, _initialState = new WeakMap(), _revertState = new WeakMap(), _cache = new WeakMap(), _client = new WeakMap(), _retryer = new WeakMap(), _defaultOptions = new WeakMap(), _abortSignalConsumed = new WeakMap(), _Query_instances = new WeakSet(), dispatch_fn = function(action) {
  const reducer2 = (state) => {
    switch (action.type) {
      case "failed":
        return {
          ...state,
          fetchFailureCount: action.failureCount,
          fetchFailureReason: action.error
        };
      case "pause":
        return {
          ...state,
          fetchStatus: "paused"
        };
      case "continue":
        return {
          ...state,
          fetchStatus: "fetching"
        };
      case "fetch":
        return {
          ...state,
          ...fetchState(state.data, this.options),
          fetchMeta: action.meta ?? null
        };
      case "success":
        __privateSet(this, _revertState, void 0);
        return {
          ...state,
          data: action.data,
          dataUpdateCount: state.dataUpdateCount + 1,
          dataUpdatedAt: action.dataUpdatedAt ?? Date.now(),
          error: null,
          isInvalidated: false,
          status: "success",
          ...!action.manual && {
            fetchStatus: "idle",
            fetchFailureCount: 0,
            fetchFailureReason: null
          }
        };
      case "error":
        const error = action.error;
        if (isCancelledError(error) && error.revert && __privateGet(this, _revertState)) {
          return { ...__privateGet(this, _revertState), fetchStatus: "idle" };
        }
        return {
          ...state,
          error,
          errorUpdateCount: state.errorUpdateCount + 1,
          errorUpdatedAt: Date.now(),
          fetchFailureCount: state.fetchFailureCount + 1,
          fetchFailureReason: error,
          fetchStatus: "idle",
          status: "error"
        };
      case "invalidate":
        return {
          ...state,
          isInvalidated: true
        };
      case "setState":
        return {
          ...state,
          ...action.state
        };
    }
  };
  this.state = reducer2(this.state);
  notifyManager.batch(() => {
    this.observers.forEach((observer) => {
      observer.onQueryUpdate();
    });
    __privateGet(this, _cache).notify({ query: this, type: "updated", action });
  });
}, _d);
function fetchState(data, options) {
  return {
    fetchFailureCount: 0,
    fetchFailureReason: null,
    fetchStatus: canFetch(options.networkMode) ? "fetching" : "paused",
    ...data === void 0 && {
      error: null,
      status: "pending"
    }
  };
}
function getDefaultState$1(options) {
  const data = typeof options.initialData === "function" ? options.initialData() : options.initialData;
  const hasData = data !== void 0;
  const initialDataUpdatedAt = hasData ? typeof options.initialDataUpdatedAt === "function" ? options.initialDataUpdatedAt() : options.initialDataUpdatedAt : 0;
  return {
    data,
    dataUpdateCount: 0,
    dataUpdatedAt: hasData ? initialDataUpdatedAt ?? Date.now() : 0,
    error: null,
    errorUpdateCount: 0,
    errorUpdatedAt: 0,
    fetchFailureCount: 0,
    fetchFailureReason: null,
    fetchMeta: null,
    isInvalidated: false,
    status: hasData ? "success" : "pending",
    fetchStatus: "idle"
  };
}
var QueryCache = (_e2 = class extends Subscribable {
  constructor(config = {}) {
    super();
    __privateAdd(this, _queries);
    this.config = config;
    __privateSet(this, _queries, /* @__PURE__ */ new Map());
  }
  build(client, options, state) {
    const queryKey = options.queryKey;
    const queryHash = options.queryHash ?? hashQueryKeyByOptions(queryKey, options);
    let query = this.get(queryHash);
    if (!query) {
      query = new Query({
        client,
        queryKey,
        queryHash,
        options: client.defaultQueryOptions(options),
        state,
        defaultOptions: client.getQueryDefaults(queryKey)
      });
      this.add(query);
    }
    return query;
  }
  add(query) {
    if (!__privateGet(this, _queries).has(query.queryHash)) {
      __privateGet(this, _queries).set(query.queryHash, query);
      this.notify({
        type: "added",
        query
      });
    }
  }
  remove(query) {
    const queryInMap = __privateGet(this, _queries).get(query.queryHash);
    if (queryInMap) {
      query.destroy();
      if (queryInMap === query) {
        __privateGet(this, _queries).delete(query.queryHash);
      }
      this.notify({ type: "removed", query });
    }
  }
  clear() {
    notifyManager.batch(() => {
      this.getAll().forEach((query) => {
        this.remove(query);
      });
    });
  }
  get(queryHash) {
    return __privateGet(this, _queries).get(queryHash);
  }
  getAll() {
    return [...__privateGet(this, _queries).values()];
  }
  find(filters) {
    const defaultedFilters = { exact: true, ...filters };
    return this.getAll().find(
      (query) => matchQuery(defaultedFilters, query)
    );
  }
  findAll(filters = {}) {
    const queries = this.getAll();
    return Object.keys(filters).length > 0 ? queries.filter((query) => matchQuery(filters, query)) : queries;
  }
  notify(event) {
    notifyManager.batch(() => {
      this.listeners.forEach((listener) => {
        listener(event);
      });
    });
  }
  onFocus() {
    notifyManager.batch(() => {
      this.getAll().forEach((query) => {
        query.onFocus();
      });
    });
  }
  onOnline() {
    notifyManager.batch(() => {
      this.getAll().forEach((query) => {
        query.onOnline();
      });
    });
  }
}, _queries = new WeakMap(), _e2);
var Mutation = (_f = class extends Removable {
  constructor(config) {
    super();
    __privateAdd(this, _Mutation_instances);
    __privateAdd(this, _observers);
    __privateAdd(this, _mutationCache);
    __privateAdd(this, _retryer2);
    this.mutationId = config.mutationId;
    __privateSet(this, _mutationCache, config.mutationCache);
    __privateSet(this, _observers, []);
    this.state = config.state || getDefaultState();
    this.setOptions(config.options);
    this.scheduleGc();
  }
  setOptions(options) {
    this.options = options;
    this.updateGcTime(this.options.gcTime);
  }
  get meta() {
    return this.options.meta;
  }
  addObserver(observer) {
    if (!__privateGet(this, _observers).includes(observer)) {
      __privateGet(this, _observers).push(observer);
      this.clearGcTimeout();
      __privateGet(this, _mutationCache).notify({
        type: "observerAdded",
        mutation: this,
        observer
      });
    }
  }
  removeObserver(observer) {
    __privateSet(this, _observers, __privateGet(this, _observers).filter((x) => x !== observer));
    this.scheduleGc();
    __privateGet(this, _mutationCache).notify({
      type: "observerRemoved",
      mutation: this,
      observer
    });
  }
  optionalRemove() {
    if (!__privateGet(this, _observers).length) {
      if (this.state.status === "pending") {
        this.scheduleGc();
      } else {
        __privateGet(this, _mutationCache).remove(this);
      }
    }
  }
  continue() {
    return __privateGet(this, _retryer2)?.continue() ?? // continuing a mutation assumes that variables are set, mutation must have been dehydrated before
    this.execute(this.state.variables);
  }
  async execute(variables) {
    const onContinue = () => {
      __privateMethod(this, _Mutation_instances, dispatch_fn2).call(this, { type: "continue" });
    };
    __privateSet(this, _retryer2, createRetryer({
      fn: () => {
        if (!this.options.mutationFn) {
          return Promise.reject(new Error("No mutationFn found"));
        }
        return this.options.mutationFn(variables);
      },
      onFail: (failureCount, error) => {
        __privateMethod(this, _Mutation_instances, dispatch_fn2).call(this, { type: "failed", failureCount, error });
      },
      onPause: () => {
        __privateMethod(this, _Mutation_instances, dispatch_fn2).call(this, { type: "pause" });
      },
      onContinue,
      retry: this.options.retry ?? 0,
      retryDelay: this.options.retryDelay,
      networkMode: this.options.networkMode,
      canRun: () => __privateGet(this, _mutationCache).canRun(this)
    }));
    const restored = this.state.status === "pending";
    const isPaused = !__privateGet(this, _retryer2).canStart();
    try {
      if (restored) {
        onContinue();
      } else {
        __privateMethod(this, _Mutation_instances, dispatch_fn2).call(this, { type: "pending", variables, isPaused });
        await __privateGet(this, _mutationCache).config.onMutate?.(
          variables,
          this
        );
        const context = await this.options.onMutate?.(variables);
        if (context !== this.state.context) {
          __privateMethod(this, _Mutation_instances, dispatch_fn2).call(this, {
            type: "pending",
            context,
            variables,
            isPaused
          });
        }
      }
      const data = await __privateGet(this, _retryer2).start();
      await __privateGet(this, _mutationCache).config.onSuccess?.(
        data,
        variables,
        this.state.context,
        this
      );
      await this.options.onSuccess?.(data, variables, this.state.context);
      await __privateGet(this, _mutationCache).config.onSettled?.(
        data,
        null,
        this.state.variables,
        this.state.context,
        this
      );
      await this.options.onSettled?.(data, null, variables, this.state.context);
      __privateMethod(this, _Mutation_instances, dispatch_fn2).call(this, { type: "success", data });
      return data;
    } catch (error) {
      try {
        await __privateGet(this, _mutationCache).config.onError?.(
          error,
          variables,
          this.state.context,
          this
        );
        await this.options.onError?.(
          error,
          variables,
          this.state.context
        );
        await __privateGet(this, _mutationCache).config.onSettled?.(
          void 0,
          error,
          this.state.variables,
          this.state.context,
          this
        );
        await this.options.onSettled?.(
          void 0,
          error,
          variables,
          this.state.context
        );
        throw error;
      } finally {
        __privateMethod(this, _Mutation_instances, dispatch_fn2).call(this, { type: "error", error });
      }
    } finally {
      __privateGet(this, _mutationCache).runNext(this);
    }
  }
}, _observers = new WeakMap(), _mutationCache = new WeakMap(), _retryer2 = new WeakMap(), _Mutation_instances = new WeakSet(), dispatch_fn2 = function(action) {
  const reducer2 = (state) => {
    switch (action.type) {
      case "failed":
        return {
          ...state,
          failureCount: action.failureCount,
          failureReason: action.error
        };
      case "pause":
        return {
          ...state,
          isPaused: true
        };
      case "continue":
        return {
          ...state,
          isPaused: false
        };
      case "pending":
        return {
          ...state,
          context: action.context,
          data: void 0,
          failureCount: 0,
          failureReason: null,
          error: null,
          isPaused: action.isPaused,
          status: "pending",
          variables: action.variables,
          submittedAt: Date.now()
        };
      case "success":
        return {
          ...state,
          data: action.data,
          failureCount: 0,
          failureReason: null,
          error: null,
          status: "success",
          isPaused: false
        };
      case "error":
        return {
          ...state,
          data: void 0,
          error: action.error,
          failureCount: state.failureCount + 1,
          failureReason: action.error,
          isPaused: false,
          status: "error"
        };
    }
  };
  this.state = reducer2(this.state);
  notifyManager.batch(() => {
    __privateGet(this, _observers).forEach((observer) => {
      observer.onMutationUpdate(action);
    });
    __privateGet(this, _mutationCache).notify({
      mutation: this,
      type: "updated",
      action
    });
  });
}, _f);
function getDefaultState() {
  return {
    context: void 0,
    data: void 0,
    error: null,
    failureCount: 0,
    failureReason: null,
    isPaused: false,
    status: "idle",
    variables: void 0,
    submittedAt: 0
  };
}
var MutationCache = (_g = class extends Subscribable {
  constructor(config = {}) {
    super();
    __privateAdd(this, _mutations);
    __privateAdd(this, _scopes);
    __privateAdd(this, _mutationId);
    this.config = config;
    __privateSet(this, _mutations, /* @__PURE__ */ new Set());
    __privateSet(this, _scopes, /* @__PURE__ */ new Map());
    __privateSet(this, _mutationId, 0);
  }
  build(client, options, state) {
    const mutation = new Mutation({
      mutationCache: this,
      mutationId: ++__privateWrapper(this, _mutationId)._,
      options: client.defaultMutationOptions(options),
      state
    });
    this.add(mutation);
    return mutation;
  }
  add(mutation) {
    __privateGet(this, _mutations).add(mutation);
    const scope = scopeFor(mutation);
    if (typeof scope === "string") {
      const scopedMutations = __privateGet(this, _scopes).get(scope);
      if (scopedMutations) {
        scopedMutations.push(mutation);
      } else {
        __privateGet(this, _scopes).set(scope, [mutation]);
      }
    }
    this.notify({ type: "added", mutation });
  }
  remove(mutation) {
    if (__privateGet(this, _mutations).delete(mutation)) {
      const scope = scopeFor(mutation);
      if (typeof scope === "string") {
        const scopedMutations = __privateGet(this, _scopes).get(scope);
        if (scopedMutations) {
          if (scopedMutations.length > 1) {
            const index = scopedMutations.indexOf(mutation);
            if (index !== -1) {
              scopedMutations.splice(index, 1);
            }
          } else if (scopedMutations[0] === mutation) {
            __privateGet(this, _scopes).delete(scope);
          }
        }
      }
    }
    this.notify({ type: "removed", mutation });
  }
  canRun(mutation) {
    const scope = scopeFor(mutation);
    if (typeof scope === "string") {
      const mutationsWithSameScope = __privateGet(this, _scopes).get(scope);
      const firstPendingMutation = mutationsWithSameScope?.find(
        (m2) => m2.state.status === "pending"
      );
      return !firstPendingMutation || firstPendingMutation === mutation;
    } else {
      return true;
    }
  }
  runNext(mutation) {
    const scope = scopeFor(mutation);
    if (typeof scope === "string") {
      const foundMutation = __privateGet(this, _scopes).get(scope)?.find((m2) => m2 !== mutation && m2.state.isPaused);
      return foundMutation?.continue() ?? Promise.resolve();
    } else {
      return Promise.resolve();
    }
  }
  clear() {
    notifyManager.batch(() => {
      __privateGet(this, _mutations).forEach((mutation) => {
        this.notify({ type: "removed", mutation });
      });
      __privateGet(this, _mutations).clear();
      __privateGet(this, _scopes).clear();
    });
  }
  getAll() {
    return Array.from(__privateGet(this, _mutations));
  }
  find(filters) {
    const defaultedFilters = { exact: true, ...filters };
    return this.getAll().find(
      (mutation) => matchMutation(defaultedFilters, mutation)
    );
  }
  findAll(filters = {}) {
    return this.getAll().filter((mutation) => matchMutation(filters, mutation));
  }
  notify(event) {
    notifyManager.batch(() => {
      this.listeners.forEach((listener) => {
        listener(event);
      });
    });
  }
  resumePausedMutations() {
    const pausedMutations = this.getAll().filter((x) => x.state.isPaused);
    return notifyManager.batch(
      () => Promise.all(
        pausedMutations.map((mutation) => mutation.continue().catch(noop))
      )
    );
  }
}, _mutations = new WeakMap(), _scopes = new WeakMap(), _mutationId = new WeakMap(), _g);
function scopeFor(mutation) {
  return mutation.options.scope?.id;
}
function infiniteQueryBehavior(pages) {
  return {
    onFetch: (context, query) => {
      const options = context.options;
      const direction = context.fetchOptions?.meta?.fetchMore?.direction;
      const oldPages = context.state.data?.pages || [];
      const oldPageParams = context.state.data?.pageParams || [];
      let result = { pages: [], pageParams: [] };
      let currentPage = 0;
      const fetchFn = async () => {
        let cancelled = false;
        const addSignalProperty = (object) => {
          Object.defineProperty(object, "signal", {
            enumerable: true,
            get: () => {
              if (context.signal.aborted) {
                cancelled = true;
              } else {
                context.signal.addEventListener("abort", () => {
                  cancelled = true;
                });
              }
              return context.signal;
            }
          });
        };
        const queryFn = ensureQueryFn(context.options, context.fetchOptions);
        const fetchPage = async (data, param, previous) => {
          if (cancelled) {
            return Promise.reject();
          }
          if (param == null && data.pages.length) {
            return Promise.resolve(data);
          }
          const createQueryFnContext = () => {
            const queryFnContext2 = {
              client: context.client,
              queryKey: context.queryKey,
              pageParam: param,
              direction: previous ? "backward" : "forward",
              meta: context.options.meta
            };
            addSignalProperty(queryFnContext2);
            return queryFnContext2;
          };
          const queryFnContext = createQueryFnContext();
          const page = await queryFn(queryFnContext);
          const { maxPages } = context.options;
          const addTo = previous ? addToStart : addToEnd;
          return {
            pages: addTo(data.pages, page, maxPages),
            pageParams: addTo(data.pageParams, param, maxPages)
          };
        };
        if (direction && oldPages.length) {
          const previous = direction === "backward";
          const pageParamFn = previous ? getPreviousPageParam : getNextPageParam;
          const oldData = {
            pages: oldPages,
            pageParams: oldPageParams
          };
          const param = pageParamFn(options, oldData);
          result = await fetchPage(oldData, param, previous);
        } else {
          const remainingPages = pages ?? oldPages.length;
          do {
            const param = currentPage === 0 ? oldPageParams[0] ?? options.initialPageParam : getNextPageParam(options, result);
            if (currentPage > 0 && param == null) {
              break;
            }
            result = await fetchPage(result, param);
            currentPage++;
          } while (currentPage < remainingPages);
        }
        return result;
      };
      if (context.options.persister) {
        context.fetchFn = () => {
          return context.options.persister?.(
            fetchFn,
            {
              client: context.client,
              queryKey: context.queryKey,
              meta: context.options.meta,
              signal: context.signal
            },
            query
          );
        };
      } else {
        context.fetchFn = fetchFn;
      }
    }
  };
}
function getNextPageParam(options, { pages, pageParams }) {
  const lastIndex = pages.length - 1;
  return pages.length > 0 ? options.getNextPageParam(
    pages[lastIndex],
    pages,
    pageParams[lastIndex],
    pageParams
  ) : void 0;
}
function getPreviousPageParam(options, { pages, pageParams }) {
  return pages.length > 0 ? options.getPreviousPageParam?.(pages[0], pages, pageParams[0], pageParams) : void 0;
}
var QueryClient = (_h = class {
  constructor(config = {}) {
    __privateAdd(this, _queryCache);
    __privateAdd(this, _mutationCache2);
    __privateAdd(this, _defaultOptions2);
    __privateAdd(this, _queryDefaults);
    __privateAdd(this, _mutationDefaults);
    __privateAdd(this, _mountCount);
    __privateAdd(this, _unsubscribeFocus);
    __privateAdd(this, _unsubscribeOnline);
    __privateSet(this, _queryCache, config.queryCache || new QueryCache());
    __privateSet(this, _mutationCache2, config.mutationCache || new MutationCache());
    __privateSet(this, _defaultOptions2, config.defaultOptions || {});
    __privateSet(this, _queryDefaults, /* @__PURE__ */ new Map());
    __privateSet(this, _mutationDefaults, /* @__PURE__ */ new Map());
    __privateSet(this, _mountCount, 0);
  }
  mount() {
    __privateWrapper(this, _mountCount)._++;
    if (__privateGet(this, _mountCount) !== 1) return;
    __privateSet(this, _unsubscribeFocus, focusManager.subscribe(async (focused) => {
      if (focused) {
        await this.resumePausedMutations();
        __privateGet(this, _queryCache).onFocus();
      }
    }));
    __privateSet(this, _unsubscribeOnline, onlineManager.subscribe(async (online) => {
      if (online) {
        await this.resumePausedMutations();
        __privateGet(this, _queryCache).onOnline();
      }
    }));
  }
  unmount() {
    var _a2, _b2;
    __privateWrapper(this, _mountCount)._--;
    if (__privateGet(this, _mountCount) !== 0) return;
    (_a2 = __privateGet(this, _unsubscribeFocus)) == null ? void 0 : _a2.call(this);
    __privateSet(this, _unsubscribeFocus, void 0);
    (_b2 = __privateGet(this, _unsubscribeOnline)) == null ? void 0 : _b2.call(this);
    __privateSet(this, _unsubscribeOnline, void 0);
  }
  isFetching(filters) {
    return __privateGet(this, _queryCache).findAll({ ...filters, fetchStatus: "fetching" }).length;
  }
  isMutating(filters) {
    return __privateGet(this, _mutationCache2).findAll({ ...filters, status: "pending" }).length;
  }
  /**
   * Imperative (non-reactive) way to retrieve data for a QueryKey.
   * Should only be used in callbacks or functions where reading the latest data is necessary, e.g. for optimistic updates.
   *
   * Hint: Do not use this function inside a component, because it won't receive updates.
   * Use `useQuery` to create a `QueryObserver` that subscribes to changes.
   */
  getQueryData(queryKey) {
    const options = this.defaultQueryOptions({ queryKey });
    return __privateGet(this, _queryCache).get(options.queryHash)?.state.data;
  }
  ensureQueryData(options) {
    const defaultedOptions = this.defaultQueryOptions(options);
    const query = __privateGet(this, _queryCache).build(this, defaultedOptions);
    const cachedData = query.state.data;
    if (cachedData === void 0) {
      return this.fetchQuery(options);
    }
    if (options.revalidateIfStale && query.isStaleByTime(resolveStaleTime(defaultedOptions.staleTime, query))) {
      void this.prefetchQuery(defaultedOptions);
    }
    return Promise.resolve(cachedData);
  }
  getQueriesData(filters) {
    return __privateGet(this, _queryCache).findAll(filters).map(({ queryKey, state }) => {
      const data = state.data;
      return [queryKey, data];
    });
  }
  setQueryData(queryKey, updater, options) {
    const defaultedOptions = this.defaultQueryOptions({ queryKey });
    const query = __privateGet(this, _queryCache).get(
      defaultedOptions.queryHash
    );
    const prevData = query?.state.data;
    const data = functionalUpdate(updater, prevData);
    if (data === void 0) {
      return void 0;
    }
    return __privateGet(this, _queryCache).build(this, defaultedOptions).setData(data, { ...options, manual: true });
  }
  setQueriesData(filters, updater, options) {
    return notifyManager.batch(
      () => __privateGet(this, _queryCache).findAll(filters).map(({ queryKey }) => [
        queryKey,
        this.setQueryData(queryKey, updater, options)
      ])
    );
  }
  getQueryState(queryKey) {
    const options = this.defaultQueryOptions({ queryKey });
    return __privateGet(this, _queryCache).get(
      options.queryHash
    )?.state;
  }
  removeQueries(filters) {
    const queryCache = __privateGet(this, _queryCache);
    notifyManager.batch(() => {
      queryCache.findAll(filters).forEach((query) => {
        queryCache.remove(query);
      });
    });
  }
  resetQueries(filters, options) {
    const queryCache = __privateGet(this, _queryCache);
    return notifyManager.batch(() => {
      queryCache.findAll(filters).forEach((query) => {
        query.reset();
      });
      return this.refetchQueries(
        {
          type: "active",
          ...filters
        },
        options
      );
    });
  }
  cancelQueries(filters, cancelOptions = {}) {
    const defaultedCancelOptions = { revert: true, ...cancelOptions };
    const promises = notifyManager.batch(
      () => __privateGet(this, _queryCache).findAll(filters).map((query) => query.cancel(defaultedCancelOptions))
    );
    return Promise.all(promises).then(noop).catch(noop);
  }
  invalidateQueries(filters, options = {}) {
    return notifyManager.batch(() => {
      __privateGet(this, _queryCache).findAll(filters).forEach((query) => {
        query.invalidate();
      });
      if (filters?.refetchType === "none") {
        return Promise.resolve();
      }
      return this.refetchQueries(
        {
          ...filters,
          type: filters?.refetchType ?? filters?.type ?? "active"
        },
        options
      );
    });
  }
  refetchQueries(filters, options = {}) {
    const fetchOptions = {
      ...options,
      cancelRefetch: options.cancelRefetch ?? true
    };
    const promises = notifyManager.batch(
      () => __privateGet(this, _queryCache).findAll(filters).filter((query) => !query.isDisabled() && !query.isStatic()).map((query) => {
        let promise = query.fetch(void 0, fetchOptions);
        if (!fetchOptions.throwOnError) {
          promise = promise.catch(noop);
        }
        return query.state.fetchStatus === "paused" ? Promise.resolve() : promise;
      })
    );
    return Promise.all(promises).then(noop);
  }
  fetchQuery(options) {
    const defaultedOptions = this.defaultQueryOptions(options);
    if (defaultedOptions.retry === void 0) {
      defaultedOptions.retry = false;
    }
    const query = __privateGet(this, _queryCache).build(this, defaultedOptions);
    return query.isStaleByTime(
      resolveStaleTime(defaultedOptions.staleTime, query)
    ) ? query.fetch(defaultedOptions) : Promise.resolve(query.state.data);
  }
  prefetchQuery(options) {
    return this.fetchQuery(options).then(noop).catch(noop);
  }
  fetchInfiniteQuery(options) {
    options.behavior = infiniteQueryBehavior(options.pages);
    return this.fetchQuery(options);
  }
  prefetchInfiniteQuery(options) {
    return this.fetchInfiniteQuery(options).then(noop).catch(noop);
  }
  ensureInfiniteQueryData(options) {
    options.behavior = infiniteQueryBehavior(options.pages);
    return this.ensureQueryData(options);
  }
  resumePausedMutations() {
    if (onlineManager.isOnline()) {
      return __privateGet(this, _mutationCache2).resumePausedMutations();
    }
    return Promise.resolve();
  }
  getQueryCache() {
    return __privateGet(this, _queryCache);
  }
  getMutationCache() {
    return __privateGet(this, _mutationCache2);
  }
  getDefaultOptions() {
    return __privateGet(this, _defaultOptions2);
  }
  setDefaultOptions(options) {
    __privateSet(this, _defaultOptions2, options);
  }
  setQueryDefaults(queryKey, options) {
    __privateGet(this, _queryDefaults).set(hashKey(queryKey), {
      queryKey,
      defaultOptions: options
    });
  }
  getQueryDefaults(queryKey) {
    const defaults = [...__privateGet(this, _queryDefaults).values()];
    const result = {};
    defaults.forEach((queryDefault) => {
      if (partialMatchKey(queryKey, queryDefault.queryKey)) {
        Object.assign(result, queryDefault.defaultOptions);
      }
    });
    return result;
  }
  setMutationDefaults(mutationKey, options) {
    __privateGet(this, _mutationDefaults).set(hashKey(mutationKey), {
      mutationKey,
      defaultOptions: options
    });
  }
  getMutationDefaults(mutationKey) {
    const defaults = [...__privateGet(this, _mutationDefaults).values()];
    const result = {};
    defaults.forEach((queryDefault) => {
      if (partialMatchKey(mutationKey, queryDefault.mutationKey)) {
        Object.assign(result, queryDefault.defaultOptions);
      }
    });
    return result;
  }
  defaultQueryOptions(options) {
    if (options._defaulted) {
      return options;
    }
    const defaultedOptions = {
      ...__privateGet(this, _defaultOptions2).queries,
      ...this.getQueryDefaults(options.queryKey),
      ...options,
      _defaulted: true
    };
    if (!defaultedOptions.queryHash) {
      defaultedOptions.queryHash = hashQueryKeyByOptions(
        defaultedOptions.queryKey,
        defaultedOptions
      );
    }
    if (defaultedOptions.refetchOnReconnect === void 0) {
      defaultedOptions.refetchOnReconnect = defaultedOptions.networkMode !== "always";
    }
    if (defaultedOptions.throwOnError === void 0) {
      defaultedOptions.throwOnError = !!defaultedOptions.suspense;
    }
    if (!defaultedOptions.networkMode && defaultedOptions.persister) {
      defaultedOptions.networkMode = "offlineFirst";
    }
    if (defaultedOptions.queryFn === skipToken) {
      defaultedOptions.enabled = false;
    }
    return defaultedOptions;
  }
  defaultMutationOptions(options) {
    if (options?._defaulted) {
      return options;
    }
    return {
      ...__privateGet(this, _defaultOptions2).mutations,
      ...options?.mutationKey && this.getMutationDefaults(options.mutationKey),
      ...options,
      _defaulted: true
    };
  }
  clear() {
    __privateGet(this, _queryCache).clear();
    __privateGet(this, _mutationCache2).clear();
  }
}, _queryCache = new WeakMap(), _mutationCache2 = new WeakMap(), _defaultOptions2 = new WeakMap(), _queryDefaults = new WeakMap(), _mutationDefaults = new WeakMap(), _mountCount = new WeakMap(), _unsubscribeFocus = new WeakMap(), _unsubscribeOnline = new WeakMap(), _h);
var QueryClientContext = reactExports.createContext(
  void 0
);
var QueryClientProvider = ({
  client,
  children
}) => {
  reactExports.useEffect(() => {
    client.mount();
    return () => {
      client.unmount();
    };
  }, [client]);
  return /* @__PURE__ */ jsxRuntimeExports.jsx(QueryClientContext.Provider, { value: client, children });
};
const scriptRel = "modulepreload";
const assetsURL = function(dep) {
  return "/" + dep;
};
const seen = {};
const __vitePreload = function preload(baseModule, deps, importerUrl) {
  let promise = Promise.resolve();
  if (deps && deps.length > 0) {
    document.getElementsByTagName("link");
    const cspNonceMeta = document.querySelector(
      "meta[property=csp-nonce]"
    );
    const cspNonce = cspNonceMeta?.nonce || cspNonceMeta?.getAttribute("nonce");
    promise = Promise.allSettled(
      deps.map((dep) => {
        dep = assetsURL(dep);
        if (dep in seen) return;
        seen[dep] = true;
        const isCss = dep.endsWith(".css");
        const cssSelector = isCss ? '[rel="stylesheet"]' : "";
        if (document.querySelector(`link[href="${dep}"]${cssSelector}`)) {
          return;
        }
        const link = document.createElement("link");
        link.rel = isCss ? "stylesheet" : scriptRel;
        if (!isCss) {
          link.as = "script";
        }
        link.crossOrigin = "";
        link.href = dep;
        if (cspNonce) {
          link.setAttribute("nonce", cspNonce);
        }
        document.head.appendChild(link);
        if (isCss) {
          return new Promise((res, rej) => {
            link.addEventListener("load", res);
            link.addEventListener(
              "error",
              () => rej(new Error(`Unable to preload CSS for ${dep}`))
            );
          });
        }
      })
    );
  }
  function handlePreloadError(err) {
    const e = new Event("vite:preloadError", {
      cancelable: true
    });
    e.payload = err;
    window.dispatchEvent(e);
    if (!e.defaultPrevented) {
      throw err;
    }
  }
  return promise.then((res) => {
    for (const item of res || []) {
      if (item.status !== "rejected") continue;
      handlePreloadError(item.reason);
    }
    return baseModule().catch(handlePreloadError);
  });
};
const API_BASE_URL = "https://parking-vercel22.vercel.app/";
class ApiClient {
  constructor(baseURL = API_BASE_URL) {
    __publicField(this, "baseURL");
    const normalizedURL = baseURL.trim().replace(/\/+$/, "");
    if ((normalizedURL.includes("localhost") || normalizedURL.includes("127.0.0.1")) && !normalizedURL.includes("/apitest")) {
      this.baseURL = normalizedURL.endsWith("/api") ? normalizedURL : `${normalizedURL}/api`;
    } else {
      this.baseURL = normalizedURL;
    }
  }
  /**
   * Get authentication token from localStorage
   */
  getAuthToken() {
    try {
      return localStorage.getItem("auth_token");
    } catch (error) {
      console.error("Error getting auth token:", error);
      return null;
    }
  }
  /**
   * Build query string from params
   */
  buildQueryString(params) {
    const queryParams = new URLSearchParams();
    Object.entries(params).forEach(([key, value]) => {
      if (value !== void 0 && value !== null && value !== "") {
        queryParams.append(key, String(value));
      }
    });
    const queryString = queryParams.toString();
    return queryString ? `?${queryString}` : "";
  }
  /**
   * Make API request
   */
  async request(endpoint, options = {}) {
    const token = this.getAuthToken();
    const headers = {
      "Content-Type": "application/json",
      ...options.headers
    };
    if (token) {
      headers["Authorization"] = `Bearer ${token}`;
    }
    const url = `${this.baseURL}${endpoint}`;
    try {
      const response = await fetch(url, {
        ...options,
        headers
      });
      const data = await response.json();
      if (!response.ok) {
        const error = {
          success: false,
          statusCode: response.status,
          message: data.message || "Request failed",
          error: data.error,
          timestamp: data.timestamp || (/* @__PURE__ */ new Date()).toISOString(),
          path: data.path
        };
        throw error;
      }
      if (data.success !== void 0) {
        return data;
      } else {
        return {
          success: true,
          statusCode: response.status,
          message: "Success",
          data,
          timestamp: (/* @__PURE__ */ new Date()).toISOString()
        };
      }
    } catch (error) {
      if (error instanceof Error && "statusCode" in error) {
        throw error;
      }
      throw {
        success: false,
        statusCode: 0,
        message: error instanceof Error ? error.message : "Network error",
        timestamp: (/* @__PURE__ */ new Date()).toISOString()
      };
    }
  }
  /**
   * GET request
   */
  async get(endpoint, params) {
    const queryString = params ? this.buildQueryString(params) : "";
    return this.request(`${endpoint}${queryString}`, {
      method: "GET"
    });
  }
  /**
   * POST request
   */
  async post(endpoint, body) {
    return this.request(endpoint, {
      method: "POST",
      body: body ? JSON.stringify(body) : void 0
    });
  }
  /**
   * PUT request
   */
  async put(endpoint, body) {
    return this.request(endpoint, {
      method: "PUT",
      body: body ? JSON.stringify(body) : void 0
    });
  }
  /**
   * PATCH request
   */
  async patch(endpoint, body) {
    return this.request(endpoint, {
      method: "PATCH",
      body: body ? JSON.stringify(body) : void 0
    });
  }
  /**
   * DELETE request
   */
  async delete(endpoint) {
    return this.request(endpoint, {
      method: "DELETE"
    });
  }
}
const apiClient = new ApiClient();
const apiClient$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  apiClient
}, Symbol.toStringTag, { value: "Module" }));
class AuthAPI {
  /**
   * Store authentication token in localStorage
   */
  static setToken(token) {
    localStorage.setItem(this.TOKEN_KEY, token);
  }
  /**
   * Get authentication token from localStorage
   */
  static getToken() {
    return localStorage.getItem(this.TOKEN_KEY);
  }
  /**
   * Remove authentication token from localStorage
   */
  static removeToken() {
    try {
      localStorage.removeItem(this.TOKEN_KEY);
      localStorage.removeItem(this.USER_KEY);
      localStorage.removeItem(this.PROFILE_KEY);
      localStorage.removeItem(this.CONTRACTOR_KEY);
      localStorage.removeItem(this.ATTENDANT_KEY);
      console.log("All authentication data cleared from localStorage");
    } catch (error) {
      console.error("Error clearing localStorage:", error);
      try {
        localStorage.clear();
      } catch (clearError) {
        console.error("Error clearing all localStorage:", clearError);
      }
    }
  }
  /**
   * Clear all authentication data (alias for removeToken for clarity)
   */
  static clearAllAuthData() {
    this.removeToken();
  }
  /**
   * Store user data in localStorage
   */
  static setUser(user) {
    localStorage.setItem(this.USER_KEY, JSON.stringify(user));
  }
  /**
   * Get user data from localStorage
   */
  static getUser() {
    const userStr = localStorage.getItem(this.USER_KEY);
    return userStr ? JSON.parse(userStr) : null;
  }
  /**
   * Store profile data in localStorage
   */
  static setProfile(profile) {
    localStorage.setItem(this.PROFILE_KEY, JSON.stringify(profile));
  }
  /**
   * Get profile data from localStorage
   */
  static getProfile() {
    const profileStr = localStorage.getItem(this.PROFILE_KEY);
    return profileStr ? JSON.parse(profileStr) : null;
  }
  /**
   * Store contractor data in localStorage
   */
  static setContractor(contractor) {
    localStorage.setItem(this.CONTRACTOR_KEY, JSON.stringify(contractor));
  }
  /**
   * Get contractor data from localStorage
   */
  static getContractor() {
    const contractorStr = localStorage.getItem(this.CONTRACTOR_KEY);
    return contractorStr ? JSON.parse(contractorStr) : null;
  }
  /**
   * Store attendant data in localStorage
   */
  static setAttendant(attendant) {
    localStorage.setItem(this.ATTENDANT_KEY, JSON.stringify(attendant));
  }
  /**
   * Get attendant data from localStorage
   */
  static getAttendant() {
    const attendantStr = localStorage.getItem(this.ATTENDANT_KEY);
    return attendantStr ? JSON.parse(attendantStr) : null;
  }
  /**
   * Login user with email and password
   */
  static async login(email, password) {
    const API_BASE_URL2 = "https://parking-vercel22.vercel.app/";
    const response = await fetch(`${API_BASE_URL2}/auth/login`, {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ email, password })
    });
    const responseData = await response.json();
    if (!response.ok) {
      throw new Error(responseData.message || "Login failed");
    }
    const loginData = responseData.data || responseData;
    if (!loginData.access_token || !loginData.user) {
      throw new Error("Invalid login response format");
    }
    this.setToken(loginData.access_token);
    this.setUser(loginData.user);
    return loginData;
  }
  /**
   * Fetch current user profile from API
   */
  static async fetchProfile() {
    const response = await apiClient.get("/auth/profile");
    return response.data;
  }
  /**
   * Get profile by user ID
   */
  static async getProfileById(userId) {
    const response = await apiClient.get(`/profiles/getOne/${userId}`);
    return response.data;
  }
  /**
   * Check if user is authenticated
   */
  static isAuthenticated() {
    return this.getToken() !== null;
  }
}
__publicField(AuthAPI, "TOKEN_KEY", "auth_token");
__publicField(AuthAPI, "USER_KEY", "auth_user");
__publicField(AuthAPI, "PROFILE_KEY", "auth_profile");
__publicField(AuthAPI, "CONTRACTOR_KEY", "auth_contractor");
__publicField(AuthAPI, "ATTENDANT_KEY", "auth_attendant");
const authApi = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  AuthAPI
}, Symbol.toStringTag, { value: "Module" }));
const AuthContext = reactExports.createContext(void 0);
const useAuth = () => {
  const context = reactExports.useContext(AuthContext);
  if (context === void 0) {
    throw new Error("useAuth must be used within an AuthProvider");
  }
  return context;
};
const AuthProvider = ({ children }) => {
  const [user, setUser] = reactExports.useState(null);
  const [profile, setProfile] = reactExports.useState(null);
  const [session, setSession] = reactExports.useState(null);
  const [loading, setLoading] = reactExports.useState(true);
  const { toast: toast2 } = useToast();
  const fetchProfile = async (userId) => {
    try {
      const data = await AuthAPI.getProfileById(userId);
      if (data) {
        AuthAPI.setProfile(data);
        if (data.role === "contractor") {
          const now = /* @__PURE__ */ new Date();
          const profileData = data;
          const endDate = profileData.subscription_end_date ? new Date(profileData.subscription_end_date) : null;
          const isExpired = endDate && endDate < now;
          const isSuspended = profileData.subscription_status === "expired" || profileData.subscription_status === "suspended";
          if (isExpired || isSuspended) {
            const daysRemaining = endDate ? Math.ceil((endDate.getTime() - now.getTime()) / (1e3 * 60 * 60 * 24)) : 0;
            const message = isExpired ? `Your subscription has expired. Please recharge to continue using the service.` : `Your subscription will expire in ${Math.max(0, daysRemaining)} days. Please recharge to avoid service interruption.`;
            toast2({
              variant: "destructive",
              title: "Subscription Expired",
              description: message
            });
          }
          try {
            const { ContractorAPI: ContractorAPI2 } = await __vitePreload(async () => {
              const { ContractorAPI: ContractorAPI3 } = await Promise.resolve().then(() => contractorApi);
              return { ContractorAPI: ContractorAPI3 };
            }, true ? void 0 : void 0);
            const contractor = await ContractorAPI2.getContractorByUserId(userId);
            if (contractor) {
              AuthAPI.setContractor(contractor);
            }
          } catch (error) {
            console.error("Failed to fetch contractor data:", error);
          }
        } else if (data.role === "attendant") {
          try {
            const { AttendantAPI: AttendantAPI2 } = await __vitePreload(async () => {
              const { AttendantAPI: AttendantAPI3 } = await Promise.resolve().then(() => attendantApi);
              return { AttendantAPI: AttendantAPI3 };
            }, true ? void 0 : void 0);
            const attendant = await AttendantAPI2.getAttendantByUserId(userId);
            if (attendant) {
              AuthAPI.setAttendant(attendant);
            }
          } catch (error) {
            console.error("Failed to fetch attendant data:", error);
          }
        }
        setProfile(data);
        if (data.is_first_login) {
          console.log("First-time login detected, user will be redirected to onboarding");
        }
        return { data, error: null };
      }
      return { data: null, error: { code: "PROFILE_NOT_FOUND", message: "Profile not found" } };
    } catch (error) {
      console.error("Fetch profile error:", error);
      throw error;
    }
  };
  reactExports.useEffect(() => {
    let isMounted = true;
    console.log("AuthProvider: Initializing authentication...");
    const checkAuth = async () => {
      try {
        const token = AuthAPI.getToken();
        const storedUser = AuthAPI.getUser();
        if (token && storedUser) {
          console.log("AuthProvider: Found existing session for user:", storedUser.id);
          setSession({ access_token: token });
          setUser(storedUser);
          const storedProfile = AuthAPI.getProfile();
          if (storedProfile) {
            console.log("AuthProvider: Found stored profile");
            setProfile(storedProfile);
            if (storedProfile.role === "contractor") {
              const storedContractor = AuthAPI.getContractor();
              if (storedContractor) {
                console.log("AuthProvider: Found stored contractor data");
              }
            } else if (storedProfile.role === "attendant") {
              const storedAttendant = AuthAPI.getAttendant();
              if (storedAttendant) {
                console.log("AuthProvider: Found stored attendant data");
              }
            }
          }
          try {
            await fetchProfile(storedUser.id);
          } catch (error) {
            console.error("AuthProvider: Failed to fetch profile, using stored data", error);
            if (!storedProfile) {
              const tempProfile = {
                id: storedUser.id,
                user_name: storedUser.user_name || storedUser.email || "User",
                email: storedUser.email || "",
                role: storedUser.role,
                status: "active",
                is_first_login: false
              };
              setProfile(tempProfile);
              AuthAPI.setProfile(tempProfile);
            } else {
              setProfile(storedProfile);
            }
          }
        } else {
          console.log("AuthProvider: No existing session found");
          setSession(null);
          setUser(null);
          setProfile(null);
        }
      } catch (error) {
        console.error("AuthProvider: Error checking auth:", error);
        setSession(null);
        setUser(null);
        setProfile(null);
      } finally {
        if (isMounted) {
          setLoading(false);
        }
      }
    };
    checkAuth();
    const timeoutId = setTimeout(() => {
      if (isMounted) {
        console.log("Auth loading timeout - setting loading to false");
        setLoading(false);
      }
    }, 2e3);
    return () => {
      isMounted = false;
      clearTimeout(timeoutId);
    };
  }, []);
  const signIn = async (email, password, role) => {
    try {
      console.log("SignIn: Starting sign in process for:", email, "with role:", role);
      const loginResponse = await AuthAPI.login(email, password);
      console.log("SignIn: NestJS auth response:", { userId: loginResponse.user?.id });
      setUser(loginResponse.user);
      setSession({ access_token: loginResponse.access_token });
      let finalProfile = null;
      try {
        console.log("SignIn: Fetching profile");
        const profileResult = await fetchProfile(loginResponse.user.id);
        console.log("SignIn: Profile fetched successfully");
        if (profileResult.data) {
          finalProfile = profileResult.data;
          setProfile(finalProfile);
        }
      } catch (error) {
        console.log("SignIn: Profile fetch failed, using user data");
        const tempProfile = {
          id: loginResponse.user.id,
          user_name: loginResponse.user.user_name,
          email: loginResponse.user.email,
          role: loginResponse.user.role,
          status: "active",
          is_first_login: false
        };
        finalProfile = tempProfile;
        setProfile(tempProfile);
        AuthAPI.setProfile(tempProfile);
      }
      if (role && finalProfile) {
        const userRole = finalProfile.role?.toLowerCase()?.trim();
        const expectedRole = role.toLowerCase().trim();
        const userName = finalProfile.user_name?.toLowerCase() || loginResponse.user.user_name?.toLowerCase() || "";
        const userEmail = finalProfile.email?.toLowerCase() || loginResponse.user.email?.toLowerCase() || "";
        console.log("SignIn: Checking role match", {
          userRole,
          expectedRole,
          profileRole: finalProfile.role,
          loginUserRole: loginResponse.user.role,
          userName,
          userEmail
        });
        let roleMatches = userRole === expectedRole;
        if (!roleMatches && expectedRole === "super_admin") {
          const isSuperAdminByName = userName.includes("super admin") || userName.includes("admin");
          const isSuperAdminByEmail = userEmail.includes("admin@") || userEmail.includes("@admin");
          if (isSuperAdminByName || isSuperAdminByEmail) {
            console.log("SignIn: Role mismatch but user appears to be super admin based on name/email, allowing access");
            roleMatches = true;
            finalProfile.role = "super_admin";
            setProfile(finalProfile);
            AuthAPI.setProfile(finalProfile);
          }
        }
        if (!roleMatches) {
          console.log("SignIn: Role mismatch detected", {
            userRole,
            expectedRole,
            hasRole: !!userRole,
            userName,
            userEmail
          });
          AuthAPI.removeToken();
          setUser(null);
          setSession(null);
          setProfile(null);
          toast2({
            variant: "destructive",
            title: "Access Denied",
            description: "You don't have permission to access this area"
          });
          return { error: { message: "Invalid role" }, success: false };
        }
        console.log("SignIn: Role check passed");
      }
      if (loginResponse.user.role === "attendant") {
        console.log("SignIn: Checking device restriction for attendant");
        setTimeout(async () => {
          try {
            const deviceFingerprint = generateDeviceFingerprint();
            const { AttendantAPI: AttendantAPI2 } = await __vitePreload(async () => {
              const { AttendantAPI: AttendantAPI3 } = await Promise.resolve().then(() => attendantApi);
              return { AttendantAPI: AttendantAPI3 };
            }, true ? void 0 : void 0);
            const wasLoggedIn = await AttendantAPI2.isAttendantLoggedIn(loginResponse.user.id);
            const isAllowed = await AttendantAPI2.checkDeviceRestriction(loginResponse.user.id, deviceFingerprint);
            if (!isAllowed && wasLoggedIn) {
              console.log("Device restriction: Different device detected, allowing login with warning");
              await AttendantAPI2.updateDeviceFingerprint(loginResponse.user.id, deviceFingerprint);
              toast2({
                variant: "default",
                title: "Device Switch Detected",
                description: "You were logged in on another device. This device is now active."
              });
            } else {
              await AttendantAPI2.updateDeviceFingerprint(loginResponse.user.id, deviceFingerprint);
              console.log("Device restriction: Login allowed, device fingerprint updated");
            }
          } catch (deviceError) {
            console.error("Device restriction check failed:", deviceError);
          }
        }, 100);
      }
      setLoading(false);
      toast2({
        title: "Welcome back!",
        description: `Signed in as ${loginResponse.user.user_name}`
      });
      console.log("SignIn: Sign in process completed successfully");
      return { error: null, success: true };
    } catch (error) {
      console.error("SignIn: Unexpected error:", error);
      const errorMessage = error?.message || "An unexpected error occurred";
      toast2({
        variant: "destructive",
        title: "Sign In Error",
        description: errorMessage
      });
      return { error: { message: errorMessage }, success: false };
    }
  };
  const generateDeviceFingerprint = () => {
    const canvas = document.createElement("canvas");
    const ctx = canvas.getContext("2d");
    if (ctx) {
      ctx.textBaseline = "top";
      ctx.font = "14px Arial";
      ctx.fillText("Device fingerprint", 2, 2);
    }
    const fingerprint = [
      navigator.userAgent,
      navigator.language,
      screen.width + "x" + screen.height,
      (/* @__PURE__ */ new Date()).getTimezoneOffset(),
      canvas.toDataURL()
    ].join("|");
    let hash = 0;
    for (let i2 = 0; i2 < fingerprint.length; i2++) {
      const char = fingerprint.charCodeAt(i2);
      hash = (hash << 5) - hash + char;
      hash = hash & hash;
    }
    return hash.toString();
  };
  const signUp = async (email, password, userData) => {
    toast2({
      variant: "destructive",
      title: "Sign Up Not Available",
      description: "User registration is managed by administrators. Please contact your administrator to create an account."
    });
    return {
      success: false,
      error: {
        code: "SIGNUP_NOT_AVAILABLE",
        message: "User registration is managed by administrators",
        details: "Please contact your administrator to create an account"
      }
    };
  };
  const signOut = async () => {
    try {
      console.log("SignOut: Starting logout process...");
      if (profile?.role === "attendant" && user) {
        try {
          const { AttendantAPI: AttendantAPI2 } = await __vitePreload(async () => {
            const { AttendantAPI: AttendantAPI3 } = await Promise.resolve().then(() => attendantApi);
            return { AttendantAPI: AttendantAPI3 };
          }, true ? void 0 : void 0);
          await AttendantAPI2.updateDeviceFingerprint(user.id, "");
          console.log("SignOut: Device fingerprint cleared on logout");
        } catch (error) {
          console.error("SignOut: Failed to clear device fingerprint:", error);
        }
      }
      console.log("SignOut: Clearing all localStorage data...");
      AuthAPI.clearAllAuthData();
      setUser(null);
      setProfile(null);
      setSession(null);
      console.log("SignOut: All data cleared successfully");
      toast2({
        title: "Signed Out",
        description: "You have been signed out successfully"
      });
      setTimeout(() => {
        window.location.href = "/";
      }, 100);
    } catch (error) {
      console.error("SignOut error:", error);
      try {
        AuthAPI.clearAllAuthData();
      } catch (clearError) {
        console.error("SignOut: Error clearing localStorage:", clearError);
        try {
          localStorage.clear();
        } catch (finalError) {
          console.error("SignOut: Failed to clear localStorage completely:", finalError);
        }
      }
      setUser(null);
      setProfile(null);
      setSession(null);
      toast2({
        title: "Signed Out",
        description: "You have been signed out successfully"
      });
      window.location.href = "/";
    }
  };
  const resetPassword = async (email) => {
    try {
      toast2({
        variant: "destructive",
        title: "Password Reset",
        description: "Password reset functionality will be available soon. Please contact administrator."
      });
      return {
        success: false,
        error: {
          code: "NOT_IMPLEMENTED",
          message: "Password reset functionality is not yet implemented",
          details: "Please contact administrator for password reset"
        }
      };
    } catch (error) {
      console.error("Password reset error:", error);
      toast2({
        variant: "destructive",
        title: "Password Reset Error",
        description: "An unexpected error occurred"
      });
      return {
        success: false,
        error: {
          code: "UNKNOWN",
          message: "An unexpected error occurred",
          details: error instanceof Error ? error.message : "Unknown error"
        }
      };
    }
  };
  const updateProfile = async (updates) => {
    if (!user) return {
      error: {
        code: "NO_USER",
        message: "No user logged in"
      },
      success: false
    };
    try {
      const { apiClient: apiClient2 } = await __vitePreload(async () => {
        const { apiClient: apiClient3 } = await Promise.resolve().then(() => apiClient$1);
        return { apiClient: apiClient3 };
      }, true ? void 0 : void 0);
      const response = await apiClient2.post(`/profiles/update/${user.id}`, updates);
      if (response.data) {
        setProfile(response.data);
        AuthAPI.setProfile(response.data);
        toast2({
          title: "Profile Updated",
          description: "Your profile has been updated successfully"
        });
        return { error: void 0, success: true };
      } else {
        throw new Error("Failed to update profile");
      }
    } catch (error) {
      const errorMessage = error?.message || "Failed to update profile";
      toast2({
        variant: "destructive",
        title: "Update Error",
        description: errorMessage
      });
      return {
        error: {
          code: error?.statusCode || "UPDATE_ERROR",
          message: errorMessage,
          details: error?.message
        },
        success: false
      };
    }
  };
  const value = {
    user,
    profile,
    session,
    loading,
    signIn,
    signUp,
    signOut,
    updateProfile,
    resetPassword
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsx(AuthContext.Provider, { value, children });
};
const alertVariants = cva(
  "relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",
  {
    variants: {
      variant: {
        default: "bg-background text-foreground",
        destructive: "border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"
      }
    },
    defaultVariants: {
      variant: "default"
    }
  }
);
const Alert = reactExports.forwardRef(({ className, variant, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx("div", { ref, role: "alert", className: cn(alertVariants({ variant }), className), ...props }));
Alert.displayName = "Alert";
const AlertTitle = reactExports.forwardRef(
  ({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx("h5", { ref, className: cn("mb-1 font-medium leading-none tracking-tight", className), ...props })
);
AlertTitle.displayName = "AlertTitle";
const AlertDescription = reactExports.forwardRef(
  ({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx("div", { ref, className: cn("text-sm [&_p]:leading-relaxed", className), ...props })
);
AlertDescription.displayName = "AlertDescription";
const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        destructive: "bg-destructive text-destructive-foreground hover:bg-destructive/90",
        outline: "border border-input bg-background hover:bg-accent hover:text-accent-foreground",
        secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline"
      },
      size: {
        default: "h-10 px-4 py-2",
        sm: "h-9 rounded-md px-3",
        lg: "h-11 rounded-md px-8",
        icon: "h-10 w-10"
      }
    },
    defaultVariants: {
      variant: "default",
      size: "default"
    }
  }
);
const Button = reactExports.forwardRef(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot$2 : "button";
    return /* @__PURE__ */ jsxRuntimeExports.jsx(Comp, { className: cn(buttonVariants({ variant, size, className })), ref, ...props });
  }
);
Button.displayName = "Button";
class HydrationErrorBoundary extends reactExports.Component {
  constructor(props) {
    super(props);
    __publicField(this, "handleRetry", () => {
      this.setState({ hasError: false, error: void 0 });
      window.location.reload();
    });
    this.state = { hasError: false };
  }
  static getDerivedStateFromError(error) {
    const isHydrationError = error.message.includes("hydration") || error.message.includes("Text content does not match") || error.message.includes("Expected server HTML to contain");
    if (isHydrationError) {
      console.warn("Hydration error caught and handled:", error.message);
      return { hasError: true, error };
    }
    throw error;
  }
  componentDidCatch(error, errorInfo) {
    console.error("HydrationErrorBoundary caught an error:", error, errorInfo);
  }
  render() {
    if (this.state.hasError) {
      if (this.props.fallback) {
        return this.props.fallback;
      }
      return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "min-h-screen flex items-center justify-center bg-background p-4", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "max-w-md w-full", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Alert, { className: "border-yellow-200 bg-yellow-50", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(TriangleAlert, { className: "h-4 w-4 text-yellow-600" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(AlertDescription, { className: "space-y-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "font-semibold text-yellow-800", children: "Display Issue Detected" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-yellow-700 mt-1", children: "There was a minor display issue. This usually happens on mobile devices during page refresh." })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(
            Button,
            {
              onClick: this.handleRetry,
              variant: "outline",
              size: "sm",
              className: "w-full",
              children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(RefreshCw, { className: "h-4 w-4 mr-2" }),
                "Refresh Page"
              ]
            }
          )
        ] })
      ] }) }) });
    }
    return this.props.children;
  }
}
function MobileRouter({ children }) {
  const location = useLocation();
  const navigate = useNavigate();
  const { user, profile, loading } = useAuth();
  reactExports.useEffect(() => {
    const handleMobileRefresh = () => {
      if (user && profile && location.pathname.startsWith("/dashboard")) {
        console.log("MobileRouter: User authenticated, allowing dashboard access");
        return;
      }
      if (!user && location.pathname.startsWith("/dashboard")) {
        console.log("MobileRouter: User not authenticated, redirecting to login");
        navigate("/login", { replace: true });
        return;
      }
      if (user && profile && location.pathname !== "/" && !location.pathname.startsWith("/dashboard") && !location.pathname.startsWith("/login") && !location.pathname.startsWith("/onboarding")) {
        console.log("MobileRouter: Invalid route, redirecting to dashboard");
        navigate("/dashboard", { replace: true });
        return;
      }
    };
    if (!loading) {
      handleMobileRefresh();
    }
  }, [location.pathname, user, profile, loading, navigate]);
  if (loading) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex min-h-screen items-center justify-center", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "animate-spin rounded-full h-12 w-12 border-b-2 border-parkflow-blue" }) });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment, { children });
}
const FirstLoginHandler = ({ children }) => {
  const { profile, loading } = useAuth();
  const navigate = useNavigate();
  const location = useLocation();
  reactExports.useEffect(() => {
    if (!loading && profile && location.pathname !== "/onboarding") {
      if (profile.is_first_login) {
        console.log("First-time login detected, redirecting to onboarding");
        navigate("/onboarding", { replace: true });
      }
    }
  }, [profile, loading, navigate, location.pathname]);
  if (!loading && profile?.is_first_login && location.pathname !== "/onboarding") {
    return null;
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment, { children });
};
var shim$1 = { exports: {} };
var useSyncExternalStoreShim_production = {};
/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var React = reactExports;
function is(x, y) {
  return x === y && (0 !== x || 1 / x === 1 / y) || x !== x && y !== y;
}
var objectIs = "function" === typeof Object.is ? Object.is : is, useState = React.useState, useEffect = React.useEffect, useLayoutEffect = React.useLayoutEffect, useDebugValue = React.useDebugValue;
function useSyncExternalStore$2(subscribe2, getSnapshot) {
  var value = getSnapshot(), _useState = useState({ inst: { value, getSnapshot } }), inst = _useState[0].inst, forceUpdate = _useState[1];
  useLayoutEffect(
    function() {
      inst.value = value;
      inst.getSnapshot = getSnapshot;
      checkIfSnapshotChanged(inst) && forceUpdate({ inst });
    },
    [subscribe2, value, getSnapshot]
  );
  useEffect(
    function() {
      checkIfSnapshotChanged(inst) && forceUpdate({ inst });
      return subscribe2(function() {
        checkIfSnapshotChanged(inst) && forceUpdate({ inst });
      });
    },
    [subscribe2]
  );
  useDebugValue(value);
  return value;
}
function checkIfSnapshotChanged(inst) {
  var latestGetSnapshot = inst.getSnapshot;
  inst = inst.value;
  try {
    var nextValue = latestGetSnapshot();
    return !objectIs(inst, nextValue);
  } catch (error) {
    return true;
  }
}
function useSyncExternalStore$1(subscribe2, getSnapshot) {
  return getSnapshot();
}
var shim = "undefined" === typeof window || "undefined" === typeof window.document || "undefined" === typeof window.document.createElement ? useSyncExternalStore$1 : useSyncExternalStore$2;
useSyncExternalStoreShim_production.useSyncExternalStore = void 0 !== React.useSyncExternalStore ? React.useSyncExternalStore : shim;
{
  shim$1.exports = useSyncExternalStoreShim_production;
}
var shimExports = shim$1.exports;
function useIsHydrated() {
  return shimExports.useSyncExternalStore(
    subscribe,
    () => true,
    () => false
  );
}
function subscribe() {
  return () => {
  };
}
var AVATAR_NAME = "Avatar";
var [createAvatarContext, createAvatarScope] = createContextScope(AVATAR_NAME);
var [AvatarProvider, useAvatarContext] = createAvatarContext(AVATAR_NAME);
var Avatar$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeAvatar, ...avatarProps } = props;
    const [imageLoadingStatus, setImageLoadingStatus] = reactExports.useState("idle");
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      AvatarProvider,
      {
        scope: __scopeAvatar,
        imageLoadingStatus,
        onImageLoadingStatusChange: setImageLoadingStatus,
        children: /* @__PURE__ */ jsxRuntimeExports.jsx(Primitive.span, { ...avatarProps, ref: forwardedRef })
      }
    );
  }
);
Avatar$1.displayName = AVATAR_NAME;
var IMAGE_NAME = "AvatarImage";
var AvatarImage$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeAvatar, src: src2, onLoadingStatusChange = () => {
    }, ...imageProps } = props;
    const context = useAvatarContext(IMAGE_NAME, __scopeAvatar);
    const imageLoadingStatus = useImageLoadingStatus(src2, imageProps);
    const handleLoadingStatusChange = useCallbackRef((status) => {
      onLoadingStatusChange(status);
      context.onImageLoadingStatusChange(status);
    });
    useLayoutEffect2(() => {
      if (imageLoadingStatus !== "idle") {
        handleLoadingStatusChange(imageLoadingStatus);
      }
    }, [imageLoadingStatus, handleLoadingStatusChange]);
    return imageLoadingStatus === "loaded" ? /* @__PURE__ */ jsxRuntimeExports.jsx(Primitive.img, { ...imageProps, ref: forwardedRef, src: src2 }) : null;
  }
);
AvatarImage$1.displayName = IMAGE_NAME;
var FALLBACK_NAME = "AvatarFallback";
var AvatarFallback$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeAvatar, delayMs, ...fallbackProps } = props;
    const context = useAvatarContext(FALLBACK_NAME, __scopeAvatar);
    const [canRender, setCanRender] = reactExports.useState(delayMs === void 0);
    reactExports.useEffect(() => {
      if (delayMs !== void 0) {
        const timerId = window.setTimeout(() => setCanRender(true), delayMs);
        return () => window.clearTimeout(timerId);
      }
    }, [delayMs]);
    return canRender && context.imageLoadingStatus !== "loaded" ? /* @__PURE__ */ jsxRuntimeExports.jsx(Primitive.span, { ...fallbackProps, ref: forwardedRef }) : null;
  }
);
AvatarFallback$1.displayName = FALLBACK_NAME;
function resolveLoadingStatus(image, src2) {
  if (!image) {
    return "idle";
  }
  if (!src2) {
    return "error";
  }
  if (image.src !== src2) {
    image.src = src2;
  }
  return image.complete && image.naturalWidth > 0 ? "loaded" : "loading";
}
function useImageLoadingStatus(src2, { referrerPolicy, crossOrigin }) {
  const isHydrated = useIsHydrated();
  const imageRef = reactExports.useRef(null);
  const image = (() => {
    if (!isHydrated) return null;
    if (!imageRef.current) {
      imageRef.current = new window.Image();
    }
    return imageRef.current;
  })();
  const [loadingStatus, setLoadingStatus] = reactExports.useState(
    () => resolveLoadingStatus(image, src2)
  );
  useLayoutEffect2(() => {
    setLoadingStatus(resolveLoadingStatus(image, src2));
  }, [image, src2]);
  useLayoutEffect2(() => {
    const updateStatus = (status) => () => {
      setLoadingStatus(status);
    };
    if (!image) return;
    const handleLoad = updateStatus("loaded");
    const handleError = updateStatus("error");
    image.addEventListener("load", handleLoad);
    image.addEventListener("error", handleError);
    if (referrerPolicy) {
      image.referrerPolicy = referrerPolicy;
    }
    if (typeof crossOrigin === "string") {
      image.crossOrigin = crossOrigin;
    }
    return () => {
      image.removeEventListener("load", handleLoad);
      image.removeEventListener("error", handleError);
    };
  }, [image, crossOrigin, referrerPolicy]);
  return loadingStatus;
}
var Root$3 = Avatar$1;
var Image = AvatarImage$1;
var Fallback = AvatarFallback$1;
const Avatar = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  Root$3,
  {
    ref,
    className: cn("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full", className),
    ...props
  }
));
Avatar.displayName = Root$3.displayName;
const AvatarImage = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(Image, { ref, className: cn("aspect-square h-full w-full", className), ...props }));
AvatarImage.displayName = Image.displayName;
const AvatarFallback = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  Fallback,
  {
    ref,
    className: cn("flex h-full w-full items-center justify-center rounded-full bg-muted", className),
    ...props
  }
));
AvatarFallback.displayName = Fallback.displayName;
const DropdownMenu = Root2$7;
const DropdownMenuTrigger = Trigger$4;
const DropdownMenuSubTrigger = reactExports.forwardRef(({ className, inset, children, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
  SubTrigger2,
  {
    ref,
    className: cn(
      "flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",
      inset && "pl-8",
      className
    ),
    ...props,
    children: [
      children,
      /* @__PURE__ */ jsxRuntimeExports.jsx(ChevronRight, { className: "ml-auto h-4 w-4" })
    ]
  }
));
DropdownMenuSubTrigger.displayName = SubTrigger2.displayName;
const DropdownMenuSubContent = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  SubContent2,
  {
    ref,
    className: cn(
      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className
    ),
    ...props
  }
));
DropdownMenuSubContent.displayName = SubContent2.displayName;
const DropdownMenuContent = reactExports.forwardRef(({ className, sideOffset = 4, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(Portal2$1, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(
  Content2$4,
  {
    ref,
    sideOffset,
    className: cn(
      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className
    ),
    ...props
  }
) }));
DropdownMenuContent.displayName = Content2$4.displayName;
const DropdownMenuItem = reactExports.forwardRef(({ className, inset, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  Item2$1,
  {
    ref,
    className: cn(
      "relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      inset && "pl-8",
      className
    ),
    ...props
  }
));
DropdownMenuItem.displayName = Item2$1.displayName;
const DropdownMenuCheckboxItem = reactExports.forwardRef(({ className, children, checked, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
  CheckboxItem2,
  {
    ref,
    className: cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      className
    ),
    checked,
    ...props,
    children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "absolute left-2 flex h-3.5 w-3.5 items-center justify-center", children: /* @__PURE__ */ jsxRuntimeExports.jsx(ItemIndicator2, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(Check, { className: "h-4 w-4" }) }) }),
      children
    ]
  }
));
DropdownMenuCheckboxItem.displayName = CheckboxItem2.displayName;
const DropdownMenuRadioItem = reactExports.forwardRef(({ className, children, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
  RadioItem2,
  {
    ref,
    className: cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      className
    ),
    ...props,
    children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "absolute left-2 flex h-3.5 w-3.5 items-center justify-center", children: /* @__PURE__ */ jsxRuntimeExports.jsx(ItemIndicator2, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(Circle, { className: "h-2 w-2 fill-current" }) }) }),
      children
    ]
  }
));
DropdownMenuRadioItem.displayName = RadioItem2.displayName;
const DropdownMenuLabel = reactExports.forwardRef(({ className, inset, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  Label2,
  {
    ref,
    className: cn("px-2 py-1.5 text-sm font-semibold", inset && "pl-8", className),
    ...props
  }
));
DropdownMenuLabel.displayName = Label2.displayName;
const DropdownMenuSeparator = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(Separator2, { ref, className: cn("-mx-1 my-1 h-px bg-muted", className), ...props }));
DropdownMenuSeparator.displayName = Separator2.displayName;
const badgeVariants = cva(
  "inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",
  {
    variants: {
      variant: {
        default: "border-transparent bg-primary text-primary-foreground hover:bg-primary/80",
        secondary: "border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",
        destructive: "border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",
        outline: "text-foreground"
      }
    },
    defaultVariants: {
      variant: "default"
    }
  }
);
function Badge({ className, variant, ...props }) {
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: cn(badgeVariants({ variant }), className), ...props });
}
function Navbar({ onMobileMenuToggle }) {
  const { profile, signOut } = useAuth();
  const navigate = useNavigate();
  const [notifications] = reactExports.useState([
    { id: 1, message: "New vehicle checked in at Location A", time: "2 min ago" },
    { id: 2, message: "Payment received for KA01AB1234", time: "5 min ago" }
  ]);
  const handleSignOut = async () => {
    await signOut();
  };
  const getRoleColor = (role) => {
    switch (role) {
      case "super_admin":
        return "bg-parkflow-red text-white";
      case "contractor":
        return "bg-parkflow-blue text-white";
      case "attendant":
        return "bg-parkflow-green text-white";
      default:
        return "bg-muted";
    }
  };
  const getRoleLabel = (role) => {
    switch (role) {
      case "super_admin":
        return "Super Admin";
      case "contractor":
        return "Contractor";
      case "attendant":
        return "Attendant";
      default:
        return role;
    }
  };
  if (!profile) return null;
  return /* @__PURE__ */ jsxRuntimeExports.jsx("nav", { className: "sticky top-0 z-50 w-full border-b bg-white/50 backdrop-blur-xl supports-[backdrop-filter]:bg-white/30", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex h-14 sm:h-16 items-center justify-between px-3 sm:px-4 lg:px-6", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2 sm:space-x-4 min-w-0 flex-1", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-1 sm:space-x-2 min-w-0", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Car, { className: "h-5 w-5 sm:h-6 sm:w-6 lg:h-8 lg:w-8 text-parkflow-blue flex-shrink-0" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-base sm:text-lg lg:text-xl xl:text-2xl font-bold text-parkflow-blue truncate", children: "ParkFlow" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { className: `${getRoleColor(profile.role || "")} text-xs sm:text-sm hidden sm:inline-flex flex-shrink-0`, children: getRoleLabel(profile.role || "") })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-1 sm:space-x-2 lg:space-x-4", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        Button,
        {
          variant: "ghost",
          size: "icon",
          className: "lg:hidden relative z-50 h-8 w-8 sm:h-9 sm:w-9",
          onClick: (e) => {
            e.preventDefault();
            e.stopPropagation();
            if (onMobileMenuToggle) {
              onMobileMenuToggle();
            }
          },
          children: /* @__PURE__ */ jsxRuntimeExports.jsx(Menu, { className: "h-4 w-4 sm:h-5 sm:w-5" })
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(DropdownMenu, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(DropdownMenuTrigger, { asChild: true, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { variant: "ghost", size: "icon", className: "relative h-8 w-8 sm:h-9 sm:w-9", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Bell, { className: "h-4 w-4 sm:h-5 sm:w-5" }),
          notifications.length > 0 && /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "absolute -top-1 -right-1 h-3 w-3 bg-parkflow-red rounded-full text-xs text-white flex items-center justify-center", children: notifications.length })
        ] }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(DropdownMenuContent, { align: "end", className: "w-72 sm:w-80", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(DropdownMenuLabel, { className: "text-sm", children: "Notifications" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(DropdownMenuSeparator, {}),
          notifications.map((notification) => /* @__PURE__ */ jsxRuntimeExports.jsxs(DropdownMenuItem, { className: "flex flex-col items-start p-3 sm:p-4", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs sm:text-sm", children: notification.message }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-muted-foreground mt-1", children: notification.time })
          ] }, notification.id))
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(DropdownMenu, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(DropdownMenuTrigger, { asChild: true, children: /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "ghost", className: "relative h-8 w-8 sm:h-9 sm:w-9 lg:h-10 lg:w-10 rounded-full", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Avatar, { className: "h-8 w-8 sm:h-9 sm:w-9 lg:h-10 lg:w-10", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(AvatarImage, { src: "", alt: profile.user_name || profile.email || "User" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(AvatarFallback, { className: "bg-parkflow-blue text-white text-xs sm:text-sm", children: (profile.user_name || profile.email || "U").charAt(0).toUpperCase() })
        ] }) }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(DropdownMenuContent, { className: "w-48 sm:w-56", align: "end", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(DropdownMenuLabel, { className: "font-normal", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col space-y-1", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs sm:text-sm font-medium leading-none truncate", children: profile.user_name || profile.email || "User" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs leading-none text-muted-foreground truncate", children: profile.email || "No email" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { className: `${getRoleColor(profile.role || "")} w-fit mt-2 text-xs`, variant: "secondary", children: getRoleLabel(profile.role || "") })
          ] }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(DropdownMenuSeparator, {}),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(DropdownMenuItem, { onClick: () => navigate("/dashboard/profile"), className: "text-xs sm:text-sm", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(User, { className: "mr-2 h-4 w-4" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Profile" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(DropdownMenuItem, { onClick: () => navigate("/dashboard/settings"), className: "text-xs sm:text-sm", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Settings$1, { className: "mr-2 h-4 w-4" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Settings" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(DropdownMenuSeparator, {}),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(DropdownMenuItem, { onClick: handleSignOut, className: "text-xs sm:text-sm", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(LogOut, { className: "mr-2 h-4 w-4" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Sign out" })
          ] })
        ] })
      ] })
    ] })
  ] }) });
}
const navigation = [
  {
    title: "Dashboard",
    href: "/dashboard",
    icon: LayoutDashboard,
    roles: ["super_admin", "contractor", "attendant"]
  },
  {
    title: "Contractors",
    href: "/dashboard/contractors",
    icon: Building,
    roles: ["super_admin"]
  },
  {
    title: "Subscriptions",
    href: "/dashboard/subscriptions",
    icon: CreditCard,
    roles: ["super_admin"]
  },
  {
    title: "Locations",
    href: "/dashboard/locations",
    icon: MapPin,
    roles: ["super_admin", "contractor"]
  },
  {
    title: "Attendants",
    href: "/dashboard/attendants",
    icon: Users,
    roles: ["super_admin", "contractor"]
  },
  {
    title: "Vehicles",
    href: "/dashboard/vehicles",
    icon: Car,
    roles: ["super_admin", "contractor", "attendant"]
  },
  {
    title: "QR Scanner",
    href: "/dashboard/qr-scanner",
    icon: QrCode,
    roles: ["attendant"]
  },
  {
    title: "Check In/Out",
    href: "/dashboard/check-inout",
    icon: UserPlus,
    roles: ["attendant"]
  },
  {
    title: "Logs",
    href: "/dashboard/logs",
    icon: Activity,
    roles: ["super_admin", "contractor", "attendant"]
  },
  {
    title: "Income",
    href: "/dashboard/income",
    icon: ChartColumn,
    roles: ["super_admin", "contractor"]
  },
  {
    title: "Reports",
    href: "/dashboard/reports",
    icon: FileText,
    roles: ["super_admin", "contractor"]
  },
  {
    title: "Settings",
    href: "/dashboard/settings",
    icon: Settings$1,
    roles: ["super_admin", "contractor", "attendant"]
  }
];
function Sidebar({ className, isMobileOpen, onMobileClose }) {
  const { profile } = useAuth();
  const location = useLocation();
  const navigate = useNavigate();
  if (!profile) return null;
  const filteredNavigation = navigation.filter(
    (item) => item.roles.includes(profile.role)
  );
  const handleNavigation = (href) => {
    navigate(href);
    if (onMobileClose) {
      onMobileClose();
    }
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: cn("hidden lg:flex w-64 flex-col bg-gradient-to-b from-indigo-900 via-purple-900 to-indigo-800 text-white/90", className), children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex-1 overflow-y-auto py-4 sm:py-6", children: /* @__PURE__ */ jsxRuntimeExports.jsx("nav", { className: "grid items-start px-2 sm:px-3 text-xs sm:text-sm font-medium", children: filteredNavigation.map((item) => {
        const Icon2 = item.icon;
        const isActive = location.pathname === item.href || item.href !== "/dashboard" && location.pathname.startsWith(item.href);
        return /* @__PURE__ */ jsxRuntimeExports.jsxs(
          Button,
          {
            variant: isActive ? "secondary" : "ghost",
            className: cn(
              "w-full justify-start mb-1 rounded-lg text-xs sm:text-sm py-2 px-2 sm:px-3",
              isActive ? "bg-white/15 text-white hover:bg-white/20" : "text-white/80 hover:bg-white/10 hover:text-white"
            ),
            onClick: () => handleNavigation(item.href),
            children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Icon2, { className: "mr-2 h-3 w-3 sm:h-4 sm:w-4 flex-shrink-0" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "truncate", children: item.title }),
              item.badge && /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "ml-auto rounded-full bg-parkflow-blue px-1.5 py-0.5 text-xs text-white flex-shrink-0", children: item.badge })
            ]
          },
          item.href
        );
      }) }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "mt-auto p-2 sm:p-4", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "rounded-lg bg-white/10 p-3 sm:p-4 text-center shadow-sm text-white", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs sm:text-sm font-medium", children: "ParkFlow Pro" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-white/70 mt-1", children: profile.role === "super_admin" ? "System Administrator" : profile.role === "contractor" ? "Contractor Panel" : "Attendant Panel" })
      ] }) })
    ] }),
    isMobileOpen && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "fixed inset-0 z-50 lg:hidden", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "fixed inset-0 bg-black/50", onClick: onMobileClose }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "fixed left-0 top-0 h-full w-64 sm:w-72 bg-gradient-to-b from-indigo-900 via-purple-900 to-indigo-800 text-white/90", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between p-3 sm:p-4 border-b border-white/10", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-base sm:text-lg font-semibold", children: "Menu" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Button,
            {
              variant: "ghost",
              size: "icon",
              onClick: onMobileClose,
              className: "text-white/80 hover:text-white hover:bg-white/10 h-8 w-8",
              children: /* @__PURE__ */ jsxRuntimeExports.jsx(X$1, { className: "h-4 w-4" })
            }
          )
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex-1 overflow-y-auto py-3 sm:py-4", children: /* @__PURE__ */ jsxRuntimeExports.jsx("nav", { className: "grid items-start px-2 sm:px-3 text-sm font-medium", children: filteredNavigation.map((item) => {
          const Icon2 = item.icon;
          const isActive = location.pathname === item.href || item.href !== "/dashboard" && location.pathname.startsWith(item.href);
          return /* @__PURE__ */ jsxRuntimeExports.jsxs(
            Button,
            {
              variant: isActive ? "secondary" : "ghost",
              className: cn(
                "w-full justify-start mb-1 rounded-lg text-sm py-2 px-2 sm:px-3",
                isActive ? "bg-white/15 text-white hover:bg-white/20" : "text-white/80 hover:bg-white/10 hover:text-white"
              ),
              onClick: () => handleNavigation(item.href),
              children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Icon2, { className: "mr-2 h-4 w-4 flex-shrink-0" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "truncate", children: item.title }),
                item.badge && /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "ml-auto rounded-full bg-parkflow-blue px-1.5 py-0.5 text-xs text-white flex-shrink-0", children: item.badge })
              ]
            },
            item.href
          );
        }) }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "p-3 sm:p-4 border-t border-white/10", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "rounded-lg bg-white/10 p-3 sm:p-4 text-center shadow-sm text-white", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs sm:text-sm font-medium", children: "ParkFlow Pro" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-white/70 mt-1", children: profile.role === "super_admin" ? "System Administrator" : profile.role === "contractor" ? "Contractor Panel" : "Attendant Panel" })
        ] }) })
      ] })
    ] })
  ] });
}
function convertToPaginationPayload(params) {
  const {
    page = 1,
    pageSize = 10,
    search = "",
    sortBy = "created_on",
    sortOrder = "desc"
  } = params;
  const whereClause = [];
  if (search) {
    whereClause.push({
      key: "all",
      value: search,
      operator: "LIKE"
    });
  }
  return {
    curPage: page,
    perPage: pageSize,
    sortBy,
    direction: sortOrder,
    whereClause
  };
}
class AttendantAPI {
  // ===== SUPER ADMIN ATTENDANT MANAGEMENT =====
  // Super Admin - Get all attendants with pagination
  static async getAllAttendants(params = {}) {
    const paginationPayload = convertToPaginationPayload(params);
    const response = await apiClient.post("/attendants/paginated", paginationPayload);
    return {
      data: response.data.data,
      count: response.data.count,
      curPage: response.data.curPage,
      perPage: response.data.perPage,
      totalPages: response.data.totalPages,
      // Legacy fields for backward compatibility
      page: response.data.curPage,
      pageSize: response.data.perPage
    };
  }
  // Get attendants by contractor (for contractor dashboard)
  static async getAttendantsByContractor(contractorUserId, params = {}) {
    const {
      page = 1,
      pageSize = 10,
      search = "",
      sortBy = "created_on",
      sortOrder = "desc"
    } = params;
    const response = await apiClient.get(`/attendants/contractor/${contractorUserId}`, {
      page,
      pageSize,
      search,
      sortBy,
      sortOrder
    });
    return response.data;
  }
  // Super Admin - Create attendant
  static async createAttendant(data) {
    const response = await apiClient.post("/attendants", {
      user_name: data.user_name,
      email: data.email,
      password: data.password,
      phone_number: data.phone_number,
      location_id: data.location_id,
      contractor_id: data.contractor_id,
      status: "active"
    });
    return response.data;
  }
  // Super Admin - Update attendant
  static async updateAttendant(id, data) {
    const updateData = {};
    if (data.user_name) updateData.user_name = data.user_name;
    if (data.email) updateData.email = data.email;
    if (data.password) updateData.password = data.password;
    if (data.phone_number !== void 0) updateData.phone_number = data.phone_number;
    if (data.location_id !== void 0) updateData.location_id = data.location_id;
    if (data.status) updateData.status = data.status;
    const response = await apiClient.post(`/attendants/update/${id}`, updateData);
    return response.data;
  }
  // Super Admin - Delete attendant (soft delete)
  static async deleteAttendant(id) {
    await apiClient.get(`/attendants/delete/${id}`);
  }
  // Super Admin - Get attendant statistics
  static async getAttendantStats(attendantId) {
    if (attendantId) {
      const response = await apiClient.get(`/attendants/${attendantId}/stats`);
      return response.data;
    } else {
      const response = await apiClient.get("/attendants/stats/overall");
      return response.data;
    }
  }
  // ===== ATTENDANT MANAGEMENT =====
  // Get attendant by user ID (for attendant dashboard)
  static async getAttendantByUserId(userId) {
    const response = await apiClient.get(`/attendants/user/${userId}`);
    return response.data;
  }
  // Get attendant by ID
  static async getAttendantById(id) {
    const response = await apiClient.get(`/attendants/${id}`);
    return response.data;
  }
  // Get all locations assigned to an attendant
  static async getAttendantLocations(attendantId) {
    const response = await apiClient.get(`/attendants/${attendantId}/locations`);
    return response.data || [];
  }
  // ===== VEHICLE MANAGEMENT (Location-restricted) =====
  // Add Vehicle (only for assigned location)
  static async addVehicle(data, attendantUserId) {
    const attendant = await this.getAttendantByUserId(attendantUserId);
    if (!attendant.location_id || attendant.location_id !== data.location_id) {
      throw new Error("You are not authorized to add vehicles to this location");
    }
    const { data: existingVehicle, error: checkError } = await supabase.from("vehicles").select("id, plate_number, status, location_id, parking_locations:location_id (locations_name)").eq("plate_number", data.plate_number).eq("status", "checked_in").single();
    if (checkError && checkError.code !== "PGRST116") {
      throw new Error(`Error checking existing vehicle: ${checkError.message}`);
    }
    if (existingVehicle) {
      const locationName = existingVehicle.parking_locations?.locations_name || "Unknown Location";
      throw new Error(`Vehicle ${data.plate_number} is already parked at ${locationName}. Please check out the vehicle first before checking in again.`);
    }
    const checkInTime = (/* @__PURE__ */ new Date()).toISOString();
    const { data: result, error } = await supabase.from("vehicles").insert({
      plate_number: data.plate_number,
      vehicle_type: data.vehicle_type,
      location_id: data.location_id,
      contractor_id: data.contractor_id,
      check_in_time: checkInTime,
      payment_status: "pending",
      created_by: attendantUserId
    }).select(`
        *,
        parking_locations (
          locations_name,
          address
        )
      `).single();
    if (error) throw error;
    return result;
  }
  // Update Vehicle (only for assigned location)
  static async updateVehicle(vehicleId, data, attendantUserId) {
    const { data: vehicle, error: vehicleError } = await supabase.from("vehicles").select("location_id").eq("id", vehicleId).eq("is_deleted", false).single();
    if (vehicleError) throw vehicleError;
    const attendant = await this.getAttendantByUserId(attendantUserId);
    if (!attendant.location_id || attendant.location_id !== vehicle.location_id) {
      throw new Error("You are not authorized to update vehicles in this location");
    }
    const { data: result, error } = await supabase.from("vehicles").update({
      ...data,
      updated_by: attendantUserId
    }).eq("id", vehicleId).select(`
        *,
        parking_locations (
          locations_name,
          address
        )
      `).single();
    if (error) throw error;
    return result;
  }
  // Exit Vehicle (mark exit) (only for assigned location)
  static async exitVehicle(vehicleId, attendantUserId) {
    const { data: vehicle, error: vehicleError } = await supabase.from("vehicles").select("location_id, check_in_time, vehicle_type").eq("id", vehicleId).eq("is_deleted", false).single();
    if (vehicleError) throw vehicleError;
    const attendant = await this.getAttendantByUserId(attendantUserId);
    if (!attendant.location_id || attendant.location_id !== vehicle.location_id) {
      throw new Error("You are not authorized to exit vehicles from this location");
    }
    const checkOutTime = (/* @__PURE__ */ new Date()).toISOString();
    const checkInTime = new Date(vehicle.check_in_time);
    const hours = Math.ceil((new Date(checkOutTime).getTime() - checkInTime.getTime()) / (1e3 * 60 * 60));
    const { data: contractor, error: contractorError } = await supabase.from("contractors").select("rates_2wheeler, rates_4wheeler").eq("id", attendant.contractor_id).single();
    let paymentAmount = 0;
    let hourlyRate = 0;
    if (contractorError) {
      console.error("Error fetching contractor rates:", contractorError);
      const defaultRates = {
        "2wheeler": { upTo2Hours: 2, upTo6Hours: 5, upTo12Hours: 8, upTo24Hours: 12 },
        "4wheeler": { upTo2Hours: 5, upTo6Hours: 10, upTo12Hours: 18, upTo24Hours: 30 }
      };
      const rates = defaultRates[vehicle.vehicle_type] || defaultRates["4wheeler"];
      if (hours <= 2) {
        paymentAmount = rates.upTo2Hours;
      } else if (hours <= 6) {
        paymentAmount = rates.upTo6Hours;
      } else if (hours <= 12) {
        paymentAmount = rates.upTo12Hours;
      } else if (hours <= 24) {
        paymentAmount = rates.upTo24Hours;
      } else {
        const days = Math.floor(hours / 24);
        const remainingHours = hours % 24;
        paymentAmount = days * rates.upTo24Hours + remainingHours * (rates.upTo24Hours / 24);
      }
      hourlyRate = paymentAmount / hours;
    } else {
      const rates = vehicle.vehicle_type === "2wheeler" ? contractor.rates_2wheeler : contractor.rates_4wheeler;
      if (hours <= 2) {
        paymentAmount = rates.upTo2Hours;
      } else if (hours <= 6) {
        paymentAmount = rates.upTo6Hours;
      } else if (hours <= 12) {
        paymentAmount = rates.upTo12Hours;
      } else if (hours <= 24) {
        paymentAmount = rates.upTo24Hours;
      } else {
        const days = Math.floor(hours / 24);
        const remainingHours = hours % 24;
        paymentAmount = days * rates.upTo24Hours + remainingHours * (rates.upTo24Hours / 24);
      }
      hourlyRate = paymentAmount / hours;
    }
    const { data: result, error } = await supabase.from("vehicles").update({
      check_out_time: checkOutTime,
      payment_amount: paymentAmount,
      payment_status: "completed",
      updated_by: attendantUserId
    }).eq("id", vehicleId).select(`
        *,
        parking_locations (
          locations_name,
          address
        )
      `).single();
    if (error) throw error;
    try {
      const { error: paymentRecordError } = await supabase.from("payments").insert({
        vehicle_id: vehicleId,
        location_id: vehicle.location_id,
        contractor_id: attendant.contractor_id,
        attendant_id: attendant.id,
        amount: paymentAmount,
        payment_method: "cash",
        // Default for attendant exit
        payment_status: "completed",
        duration_hours: hours,
        hourly_rate: hourlyRate
      });
      if (paymentRecordError) {
        console.error("Payment record creation error:", paymentRecordError);
        console.warn("Payment record could not be created, but vehicle exit was successful");
      } else {
        console.log("Payment record created successfully in payments table");
      }
    } catch (error2) {
      console.error("Error creating payment record:", error2);
    }
    return result;
  }
  // View Vehicle list (restricted to assigned location)
  static async getVehiclesByLocation(attendantUserId) {
    const attendant = await this.getAttendantByUserId(attendantUserId);
    if (!attendant.location_id) {
      throw new Error("No location assigned to this attendant");
    }
    const { data, error } = await supabase.from("vehicles").select(`
        *,
        parking_locations (
          locations_name,
          address
        )
      `).eq("location_id", attendant.location_id).eq("is_deleted", false).order("created_on", { ascending: false });
    if (error) throw error;
    return data || [];
  }
  // Filter Vehicles by Date Range (restricted to assigned location)
  static async getVehiclesByDateRange(attendantUserId, startDate, endDate) {
    const attendant = await this.getAttendantByUserId(attendantUserId);
    if (!attendant.location_id) {
      throw new Error("No location assigned to this attendant");
    }
    const { data, error } = await supabase.from("vehicles").select(`
        *,
        parking_locations (
          locations_name,
          address
        )
      `).eq("location_id", attendant.location_id).eq("is_deleted", false).gte("created_on", startDate).lte("created_on", endDate).order("created_on", { ascending: false });
    if (error) throw error;
    return data || [];
  }
  // Get all vehicles handled by attendant
  static async getVehiclesByAttendant(attendantUserId) {
    const { data, error } = await supabase.from("vehicles").select(`
        *,
        parking_locations (
          locations_name,
          address
        )
      `).eq("created_by", attendantUserId).eq("is_deleted", false).order("created_on", { ascending: false });
    if (error) throw error;
    return data || [];
  }
  // ===== STATISTICS =====
  // Get attendant statistics for specific attendant
  static async getAttendantStatsByUser(attendantUserId) {
    const today = (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
    const attendant = await this.getAttendantByUserId(attendantUserId);
    if (!attendant.location_id) {
      return {
        totalVehicles: 0,
        todayVehicles: 0,
        totalRevenue: 0,
        todayRevenue: 0,
        activeVehicles: 0
      };
    }
    const [totalVehiclesResult, todayVehiclesResult, activeVehiclesResult] = await Promise.all([
      supabase.from("vehicles").select("payment_amount", { count: "exact" }).eq("location_id", attendant.location_id).eq("is_deleted", false),
      supabase.from("vehicles").select("payment_amount", { count: "exact" }).eq("location_id", attendant.location_id).gte("created_on", today).eq("is_deleted", false),
      supabase.from("vehicles").select("payment_amount", { count: "exact" }).eq("location_id", attendant.location_id).is("check_out_time", null).eq("is_deleted", false)
    ]);
    const totalRevenue = totalVehiclesResult.data?.reduce((sum, v2) => sum + (v2.payment_amount || 0), 0) || 0;
    const todayRevenue = todayVehiclesResult.data?.reduce((sum, v2) => sum + (v2.payment_amount || 0), 0) || 0;
    return {
      totalVehicles: totalVehiclesResult.count || 0,
      todayVehicles: todayVehiclesResult.count || 0,
      totalRevenue,
      todayRevenue,
      activeVehicles: activeVehiclesResult.count || 0
    };
  }
  // ===== DEVICE RESTRICTION =====
  // Check if attendant is already logged in on another device
  static async checkDeviceRestriction(attendantUserId, deviceFingerprint) {
    try {
      const { data, error } = await supabase.from("profiles").select("device_fingerprint").eq("id", attendantUserId).single();
      if (error) {
        console.error("Device restriction check error:", error);
        return true;
      }
      if (!data?.device_fingerprint || data.device_fingerprint === "") {
        console.log("Device restriction: No previous device fingerprint, allowing login");
        return true;
      }
      if (data.device_fingerprint === deviceFingerprint) {
        console.log("Device restriction: Same device detected, allowing login");
        return true;
      }
      console.log("Device restriction: Different device detected, allowing login with warning");
      return true;
    } catch (error) {
      console.error("Device restriction check failed:", error);
      return true;
    }
  }
  // Update device fingerprint for attendant
  static async updateDeviceFingerprint(attendantUserId, deviceFingerprint) {
    try {
      const { error } = await supabase.from("profiles").update({ device_fingerprint: deviceFingerprint }).eq("id", attendantUserId);
      if (error) {
        console.error("Failed to update device fingerprint:", error);
      } else {
        console.log("Device fingerprint updated successfully");
      }
    } catch (error) {
      console.error("Device fingerprint update failed:", error);
    }
  }
  // Check if attendant is currently logged in (has active session)
  static async isAttendantLoggedIn(attendantUserId) {
    try {
      const { data, error } = await supabase.from("profiles").select("device_fingerprint").eq("id", attendantUserId).single();
      if (error) {
        console.error("Check login status error:", error);
        return false;
      }
      return !!(data?.device_fingerprint && data.device_fingerprint !== "");
    } catch (error) {
      console.error("Check login status failed:", error);
      return false;
    }
  }
  // ===== QR CODE GENERATION =====
  // Generate QR code data for vehicle entry
  static generateVehicleQRCode(vehicleData) {
    const qrData = {
      type: "vehicle_entry",
      plate_number: vehicleData.plate_number,
      vehicle_type: vehicleData.vehicle_type,
      location_id: vehicleData.location_id,
      timestamp: (/* @__PURE__ */ new Date()).toISOString()
    };
    return JSON.stringify(qrData);
  }
  // Generate QR code data for vehicle exit
  static generateExitQRCode(vehicleId) {
    const qrData = {
      type: "vehicle_exit",
      vehicle_id: vehicleId,
      timestamp: (/* @__PURE__ */ new Date()).toISOString()
    };
    return JSON.stringify(qrData);
  }
}
const attendantApi = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  AttendantAPI
}, Symbol.toStringTag, { value: "Module" }));
class LocationAPI {
  // Super Admin only - Create location
  static async createLocation(data) {
    const response = await apiClient.post("/locations", {
      locations_name: data.locations_name,
      address: data.address,
      city: data.city,
      state: data.state,
      pincode: data.pincode,
      total_slots: data.total_slots,
      contractor_id: data.contractor_id,
      status: data.status || "active"
    });
    return response.data;
  }
  // Super Admin only - Get all locations
  static async getAllLocations() {
    const response = await apiClient.get("/locations");
    return response.data || [];
  }
  // Get location by ID
  static async getLocationById(id) {
    const response = await apiClient.get(`/locations/${id}`);
    return response.data;
  }
  // Super Admin only - Get paginated locations
  static async getPaginatedLocations(params = {}) {
    const paginationPayload = convertToPaginationPayload(params);
    const response = await apiClient.post("/locations/paginated", paginationPayload);
    return {
      data: response.data.data,
      count: response.data.count,
      curPage: response.data.curPage,
      perPage: response.data.perPage,
      totalPages: response.data.totalPages,
      // Legacy fields for backward compatibility
      page: response.data.curPage,
      pageSize: response.data.perPage
    };
  }
  // Get locations for contractor
  static async getContractorLocations(userId) {
    const response = await apiClient.get(`/locations/contractor/${userId}`);
    return response.data || [];
  }
  // Get locations for attendant
  static async getAttendantLocations(attendantId) {
    const response = await apiClient.get(`/locations/attendant/${attendantId}`);
    return response.data || [];
  }
  // Update location
  static async updateLocation(id, data) {
    const response = await apiClient.post(`/locations/update/${id}`, data);
    return response.data;
  }
  // Delete location (soft delete)
  static async deleteLocation(id) {
    await apiClient.get(`/locations/delete/${id}`);
  }
  // Get location statistics
  static async getLocationStats(locationId) {
    const response = await apiClient.get(`/locations/${locationId}/stats`);
    return response.data;
  }
  // Assign location to attendant
  static async assignLocationToAttendant(attendantId, locationId) {
    await apiClient.post(`/locations/${locationId}/assign-attendant`, {
      attendantId
    });
  }
  // Remove location assignment from attendant
  static async removeLocationFromAttendant(locationId, attendantId) {
    await apiClient.get(`/locations/delete/${locationId}/attendant/${attendantId}`);
  }
}
const locationApi = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  LocationAPI
}, Symbol.toStringTag, { value: "Module" }));
class ContractorAPI {
  // Get all contractors (for super admin)
  static async getAllContractors() {
    const response = await apiClient.get("/contractors");
    return response.data || [];
  }
  // Get contractors with pagination
  static async getContractorsPaginated(params = {}) {
    const paginationPayload = convertToPaginationPayload(params);
    const response = await apiClient.post("/contractors/paginated", paginationPayload);
    return {
      data: response.data.data,
      count: response.data.count,
      curPage: response.data.curPage,
      perPage: response.data.perPage,
      totalPages: response.data.totalPages,
      // Legacy fields for backward compatibility
      page: response.data.curPage,
      pageSize: response.data.perPage
    };
  }
  // Get contractor by user ID (for contractor dashboard)
  static async getContractorByUserId(userId) {
    const response = await apiClient.get(`/contractors/user/${userId}`);
    return response.data;
  }
  // Get contractor by ID
  static async getContractorById(id) {
    const response = await apiClient.get(`/contractors/${id}`);
    return response.data;
  }
  // Create contractor
  static async createContractor(data) {
    const response = await apiClient.post("/contractors", data);
    return response.data;
  }
  // Update contractor
  static async updateContractor(id, data) {
    const response = await apiClient.post(`/contractors/update/${id}`, data);
    return response.data;
  }
  // Delete contractor (soft delete)
  static async deleteContractor(id) {
    await apiClient.get(`/contractors/delete/${id}`);
  }
  // Get all locations under a contractor
  static async getContractorLocations(contractorId) {
    const response = await apiClient.get(`/contractors/${contractorId}/locations`);
    return response.data || [];
  }
  // Get all attendants under a contractor
  static async getContractorAttendants(contractorId) {
    const response = await apiClient.get(`/contractors/${contractorId}/attendants`);
    return response.data || [];
  }
  // Get all vehicles under a contractor
  static async getContractorVehicles(contractorId) {
    const response = await apiClient.get(`/contractors/${contractorId}/vehicles`);
    return response.data || [];
  }
  // Get contractor payments
  static async getContractorPayments(contractorId) {
    const response = await apiClient.get(`/contractors/${contractorId}/payments`);
    return response.data || [];
  }
  // Get contractor statistics
  static async getContractorStats(contractorId) {
    const response = await apiClient.get(`/contractors/${contractorId}/stats`);
    return response.data;
  }
  // Get day-wise revenue for contractor
  static async getContractorDayWiseRevenue(contractorId, days = 30) {
    const response = await apiClient.get(`/contractors/${contractorId}/revenue/day-wise`, {
      days
    });
    return response.data;
  }
  // Get month-wise revenue for contractor
  static async getContractorMonthWiseRevenue(contractorId, months = 12) {
    const response = await apiClient.get(`/contractors/${contractorId}/revenue/month-wise`, {
      months
    });
    return response.data;
  }
}
const contractorApi = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  ContractorAPI
}, Symbol.toStringTag, { value: "Module" }));
async function checkAttendantContractorSubscription(attendantUserId) {
  try {
    const attendant = await AttendantAPI.getAttendantByUserId(attendantUserId);
    if (!attendant || !attendant.location_id) {
      return {
        isExpired: true,
        isSuspended: true,
        daysRemaining: 0,
        endDate: null,
        status: "unknown"
      };
    }
    const location = await LocationAPI.getLocationById(attendant.location_id);
    if (!location || !location.contractor_id) {
      return {
        isExpired: true,
        isSuspended: true,
        daysRemaining: 0,
        endDate: null,
        status: "unknown"
      };
    }
    const contractor = await ContractorAPI.getContractorById(location.contractor_id);
    if (!contractor || !contractor.profiles) {
      return {
        isExpired: true,
        isSuspended: true,
        daysRemaining: 0,
        endDate: null,
        status: "unknown"
      };
    }
    const contractorProfile = contractor.profiles;
    const now = /* @__PURE__ */ new Date();
    const endDate = contractorProfile.subscription_end_date ? new Date(contractorProfile.subscription_end_date) : null;
    const isExpired = endDate && endDate < now;
    const isSuspended = contractorProfile.subscription_status === "expired" || contractorProfile.subscription_status === "suspended";
    const daysRemaining = endDate ? Math.ceil((endDate.getTime() - now.getTime()) / (1e3 * 60 * 60 * 24)) : 0;
    return {
      isExpired: isExpired || false,
      isSuspended: isSuspended || false,
      daysRemaining: Math.max(0, daysRemaining),
      endDate,
      status: contractorProfile.subscription_status || "unknown"
    };
  } catch (error) {
    console.error("Error checking attendant contractor subscription:", error);
    return {
      isExpired: true,
      isSuspended: true,
      daysRemaining: 0,
      endDate: null,
      status: "error"
    };
  }
}
function getAttendantExpiryMessage(subscriptionStatus) {
  if (subscriptionStatus.isExpired) {
    return "Your contractor's subscription has expired. Please contact your contractor to recharge.";
  } else if (subscriptionStatus.daysRemaining <= 7) {
    return `Your contractor's subscription will expire in ${subscriptionStatus.daysRemaining} days. Please contact your contractor to recharge.`;
  }
  return "";
}
function SubscriptionExpiryWarning({ className = "" }) {
  const { profile } = useAuth();
  const [subscriptionStatus, setSubscriptionStatus] = reactExports.useState(null);
  const [isVisible, setIsVisible] = reactExports.useState(true);
  reactExports.useEffect(() => {
    if (profile?.role === "attendant") {
      checkAttendantContractorSubscription(profile.id).then(setSubscriptionStatus);
    }
  }, [profile]);
  if (profile?.role !== "attendant" || !subscriptionStatus) {
    return null;
  }
  if (!subscriptionStatus.isExpired && !subscriptionStatus.isSuspended && subscriptionStatus.daysRemaining > 7) {
    return null;
  }
  const message = getAttendantExpiryMessage(subscriptionStatus);
  if (!message) {
    return null;
  }
  const isExpired = subscriptionStatus.isExpired || subscriptionStatus.isSuspended;
  const alertVariant = isExpired ? "destructive" : "default";
  if (!isVisible) {
    return null;
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(Alert, { className: `${alertVariant === "destructive" ? "border-red-200 bg-red-50" : "border-yellow-200 bg-yellow-50"} ${className}`, children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(TriangleAlert, { className: "h-4 w-4" }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(AlertDescription, { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "flex-1", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: isExpired ? "Contractor Subscription Expired!" : "Contractor Subscription Expiring Soon!" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("br", {}),
        message
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        Button,
        {
          variant: "ghost",
          size: "sm",
          onClick: () => setIsVisible(false),
          className: "ml-2 h-6 w-6 p-0",
          children: /* @__PURE__ */ jsxRuntimeExports.jsx(X$1, { className: "h-4 w-4" })
        }
      )
    ] })
  ] });
}
function DashboardLayout() {
  const { user, profile, loading } = useAuth();
  const [isMobileSidebarOpen, setIsMobileSidebarOpen] = reactExports.useState(false);
  console.log("DashboardLayout: loading =", loading, "user =", user?.id, "profile =", profile?.id);
  if (loading) {
    console.log("DashboardLayout: Showing loading spinner");
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex min-h-screen items-center justify-center", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "animate-spin rounded-full h-12 w-12 border-b-2 border-parkflow-blue" }) });
  }
  if (!user || !profile) {
    console.log("DashboardLayout: No user or profile, redirecting to role selection");
    return /* @__PURE__ */ jsxRuntimeExports.jsx(Navigate, { to: "/", replace: true });
  }
  if (profile.status === "inactive") {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex min-h-screen items-center justify-center bg-background", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-2xl font-bold text-parkflow-red mb-4", children: "Account Inactive" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Your account is currently inactive. Please contact your administrator to activate your account." })
    ] }) });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsx(FirstLoginHandler, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "min-h-screen bg-[radial-gradient(900px_450px_at_70%_20%,theme(colors.indigo.200)/20,transparent_60%),linear-gradient(to_bottom_right,theme(colors.slate.50),theme(colors.slate.100))]", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(Navbar, { onMobileMenuToggle: () => setIsMobileSidebarOpen(!isMobileSidebarOpen) }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex min-h-[calc(100vh-3.5rem)] sm:min-h-[calc(100vh-4rem)]", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        Sidebar,
        {
          className: "sticky top-14 sm:top-16 h-[calc(100vh-3.5rem)] sm:h-[calc(100vh-4rem)] hidden lg:flex",
          isMobileOpen: isMobileSidebarOpen,
          onMobileClose: () => setIsMobileSidebarOpen(false)
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx("main", { className: "flex-1 overflow-hidden", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "p-2 sm:p-3 lg:p-4 xl:p-6", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(SubscriptionExpiryWarning, { className: "mb-4" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(Outlet, {})
      ] }) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Toaster$1, {})
  ] }) });
}
const RoleSelection = () => {
  const navigate = useNavigate();
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 flex items-center justify-center p-4 sm:p-6 relative overflow-hidden", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-gradient-to-br from-indigo-900/90 via-purple-900/80 to-pink-900/90" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-purple-600/20 via-transparent to-transparent" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-[radial-gradient(ellipse_at_bottom_left,_var(--tw-gradient-stops))] from-indigo-600/20 via-transparent to-transparent" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-pink-600/10 via-transparent to-transparent" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute top-20 left-20 w-72 h-72 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full blur-3xl animate-pulse" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute bottom-20 right-20 w-96 h-96 bg-gradient-to-r from-indigo-500/20 to-blue-500/20 rounded-full blur-3xl animate-pulse delay-1000" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-gradient-to-r from-pink-500/10 to-purple-500/10 rounded-full blur-3xl animate-pulse delay-500" }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "max-w-5xl w-full grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8 items-center relative z-10", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-white space-y-4 sm:space-y-6 text-center md:text-left relative z-10", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3 sm:space-y-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-center md:justify-start space-x-2 sm:space-x-3", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-purple-500 via-indigo-500 to-blue-500 rounded-lg flex items-center justify-center shadow-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-base sm:text-lg", children: "CAR" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-3xl sm:text-4xl font-bold bg-gradient-to-r from-purple-300 via-indigo-300 to-blue-300 bg-clip-text text-transparent", children: "ParkFlow" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-base sm:text-lg text-white/80 font-light", children: "Smart Parking Management Made Easy" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2 sm:space-y-3", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-center md:justify-start space-x-2 sm:space-x-3 text-white/90", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-4 h-4 sm:w-5 sm:h-5 bg-gradient-to-r from-emerald-400 to-emerald-500 rounded-full flex items-center justify-center shadow-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-white text-xs font-bold", children: "" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm sm:text-base", children: "Real-time Parking Analytics" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-center md:justify-start space-x-2 sm:space-x-3 text-white/90", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-4 h-4 sm:w-5 sm:h-5 bg-gradient-to-r from-emerald-400 to-emerald-500 rounded-full flex items-center justify-center shadow-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-white text-xs font-bold", children: "" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm sm:text-base", children: "Secure Role-based Access" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-center md:justify-start space-x-2 sm:space-x-3 text-white/90", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-4 h-4 sm:w-5 sm:h-5 bg-gradient-to-r from-emerald-400 to-emerald-500 rounded-full flex items-center justify-center shadow-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-white text-xs font-bold", children: "" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm sm:text-base", children: "Scalable Multi-location Management" })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-full max-w-md mx-auto", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-white/10 backdrop-blur-xl border border-white/20 shadow-2xl rounded-3xl overflow-hidden", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-gradient-to-r from-purple-600 via-indigo-600 to-blue-600 p-4 sm:p-6 text-white text-center relative", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-gradient-to-r from-purple-600/80 via-indigo-600/80 to-blue-600/80" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative z-10", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-xl sm:text-2xl font-bold mb-1", children: "Welcome to ParkFlow" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-purple-100 text-xs sm:text-sm", children: "Select a role to sign in to your dashboard" })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "p-4 sm:p-6 space-y-3 sm:space-y-4 bg-white/5 backdrop-blur-sm", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2 sm:space-y-3", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs(
              "button",
              {
                className: "w-full flex items-center justify-center space-x-2 p-3 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-semibold rounded-xl transition-all duration-300 shadow-xl hover:shadow-2xl transform hover:scale-[1.02]",
                onClick: () => navigate("/login?role=contractor"),
                children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm", children: "" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs sm:text-sm", children: "Continue as Contractor" })
                ]
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(
              "button",
              {
                className: "w-full flex items-center justify-center space-x-2 p-3 bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white font-semibold rounded-xl transition-all duration-300 shadow-xl hover:shadow-2xl transform hover:scale-[1.02]",
                onClick: () => navigate("/login?role=attendant"),
                children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm", children: "" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs sm:text-sm", children: "Continue as Attendant" })
                ]
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(
              "button",
              {
                className: "w-full flex items-center justify-center space-x-2 p-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-semibold rounded-xl transition-all duration-300 shadow-xl hover:shadow-2xl transform hover:scale-[1.02]",
                onClick: () => navigate("/superadmin-verification"),
                children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm", children: "" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs sm:text-sm", children: "Continue as Super Admin" })
                ]
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-center space-x-4 sm:space-x-6 pt-2 sm:pt-3 text-white/70 text-xs", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "flex items-center space-x-1", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-green-400", children: "" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "SSL Secured" })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "flex items-center space-x-1", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-blue-400", children: "" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "MFA Supported" })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-center text-xs text-white/60 leading-relaxed", children: [
            "By clicking continue, you agree to our",
            " ",
            /* @__PURE__ */ jsxRuntimeExports.jsx(Link, { to: "/terms-of-service", className: "text-purple-300 hover:text-purple-200 underline", children: "Terms of Service" }),
            " ",
            "and",
            " ",
            /* @__PURE__ */ jsxRuntimeExports.jsx(Link, { to: "/privacy-policy", className: "text-purple-300 hover:text-purple-200 underline", children: "Privacy Policy" }),
            "."
          ] })
        ] })
      ] }) })
    ] })
  ] });
};
const Input = reactExports.forwardRef(
  ({ className, type: type2, ...props }, ref) => {
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      "input",
      {
        type: type2,
        className: cn(
          "flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
          className
        ),
        ref,
        ...props
      }
    );
  }
);
Input.displayName = "Input";
var NAME$1 = "Label";
var Label$2 = reactExports.forwardRef((props, forwardedRef) => {
  return /* @__PURE__ */ jsxRuntimeExports.jsx(
    Primitive.label,
    {
      ...props,
      ref: forwardedRef,
      onMouseDown: (event) => {
        const target = event.target;
        if (target.closest("button, input, select, textarea")) return;
        props.onMouseDown?.(event);
        if (!event.defaultPrevented && event.detail > 1) event.preventDefault();
      }
    }
  );
});
Label$2.displayName = NAME$1;
var Root$2 = Label$2;
const labelVariants = cva("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70");
const Label$1 = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(Root$2, { ref, className: cn(labelVariants(), className), ...props }));
Label$1.displayName = Root$2.displayName;
const Card = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx("div", { ref, className: cn("rounded-lg border bg-card text-card-foreground shadow-sm", className), ...props }));
Card.displayName = "Card";
const CardHeader = reactExports.forwardRef(
  ({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx("div", { ref, className: cn("flex flex-col space-y-1.5 p-6", className), ...props })
);
CardHeader.displayName = "CardHeader";
const CardTitle = reactExports.forwardRef(
  ({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { ref, className: cn("text-2xl font-semibold leading-none tracking-tight", className), ...props })
);
CardTitle.displayName = "CardTitle";
const CardDescription = reactExports.forwardRef(
  ({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx("p", { ref, className: cn("text-sm text-muted-foreground", className), ...props })
);
CardDescription.displayName = "CardDescription";
const CardContent = reactExports.forwardRef(
  ({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx("div", { ref, className: cn("p-6 pt-0", className), ...props })
);
CardContent.displayName = "CardContent";
const CardFooter = reactExports.forwardRef(
  ({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx("div", { ref, className: cn("flex items-center p-6 pt-0", className), ...props })
);
CardFooter.displayName = "CardFooter";
function usePrevious(value) {
  const ref = reactExports.useRef({ value, previous: value });
  return reactExports.useMemo(() => {
    if (ref.current.value !== value) {
      ref.current.previous = ref.current.value;
      ref.current.value = value;
    }
    return ref.current.previous;
  }, [value]);
}
var CHECKBOX_NAME = "Checkbox";
var [createCheckboxContext, createCheckboxScope] = createContextScope(CHECKBOX_NAME);
var [CheckboxProviderImpl, useCheckboxContext] = createCheckboxContext(CHECKBOX_NAME);
function CheckboxProvider(props) {
  const {
    __scopeCheckbox,
    checked: checkedProp,
    children,
    defaultChecked,
    disabled,
    form,
    name: name2,
    onCheckedChange,
    required,
    value = "on",
    // @ts-expect-error
    internal_do_not_use_render
  } = props;
  const [checked, setChecked] = useControllableState({
    prop: checkedProp,
    defaultProp: defaultChecked ?? false,
    onChange: onCheckedChange,
    caller: CHECKBOX_NAME
  });
  const [control, setControl] = reactExports.useState(null);
  const [bubbleInput, setBubbleInput] = reactExports.useState(null);
  const hasConsumerStoppedPropagationRef = reactExports.useRef(false);
  const isFormControl = control ? !!form || !!control.closest("form") : (
    // We set this to true by default so that events bubble to forms without JS (SSR)
    true
  );
  const context = {
    checked,
    disabled,
    setChecked,
    control,
    setControl,
    name: name2,
    form,
    value,
    hasConsumerStoppedPropagationRef,
    required,
    defaultChecked: isIndeterminate(defaultChecked) ? false : defaultChecked,
    isFormControl,
    bubbleInput,
    setBubbleInput
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsx(
    CheckboxProviderImpl,
    {
      scope: __scopeCheckbox,
      ...context,
      children: isFunction$1(internal_do_not_use_render) ? internal_do_not_use_render(context) : children
    }
  );
}
var TRIGGER_NAME$4 = "CheckboxTrigger";
var CheckboxTrigger = reactExports.forwardRef(
  ({ __scopeCheckbox, onKeyDown, onClick, ...checkboxProps }, forwardedRef) => {
    const {
      control,
      value,
      disabled,
      checked,
      required,
      setControl,
      setChecked,
      hasConsumerStoppedPropagationRef,
      isFormControl,
      bubbleInput
    } = useCheckboxContext(TRIGGER_NAME$4, __scopeCheckbox);
    const composedRefs = useComposedRefs(forwardedRef, setControl);
    const initialCheckedStateRef = reactExports.useRef(checked);
    reactExports.useEffect(() => {
      const form = control?.form;
      if (form) {
        const reset = () => setChecked(initialCheckedStateRef.current);
        form.addEventListener("reset", reset);
        return () => form.removeEventListener("reset", reset);
      }
    }, [control, setChecked]);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      Primitive.button,
      {
        type: "button",
        role: "checkbox",
        "aria-checked": isIndeterminate(checked) ? "mixed" : checked,
        "aria-required": required,
        "data-state": getState$2(checked),
        "data-disabled": disabled ? "" : void 0,
        disabled,
        value,
        ...checkboxProps,
        ref: composedRefs,
        onKeyDown: composeEventHandlers(onKeyDown, (event) => {
          if (event.key === "Enter") event.preventDefault();
        }),
        onClick: composeEventHandlers(onClick, (event) => {
          setChecked((prevChecked) => isIndeterminate(prevChecked) ? true : !prevChecked);
          if (bubbleInput && isFormControl) {
            hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();
            if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();
          }
        })
      }
    );
  }
);
CheckboxTrigger.displayName = TRIGGER_NAME$4;
var Checkbox$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const {
      __scopeCheckbox,
      name: name2,
      checked,
      defaultChecked,
      required,
      disabled,
      value,
      onCheckedChange,
      form,
      ...checkboxProps
    } = props;
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      CheckboxProvider,
      {
        __scopeCheckbox,
        checked,
        defaultChecked,
        disabled,
        required,
        onCheckedChange,
        name: name2,
        form,
        value,
        internal_do_not_use_render: ({ isFormControl }) => /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            CheckboxTrigger,
            {
              ...checkboxProps,
              ref: forwardedRef,
              __scopeCheckbox
            }
          ),
          isFormControl && /* @__PURE__ */ jsxRuntimeExports.jsx(
            CheckboxBubbleInput,
            {
              __scopeCheckbox
            }
          )
        ] })
      }
    );
  }
);
Checkbox$1.displayName = CHECKBOX_NAME;
var INDICATOR_NAME$1 = "CheckboxIndicator";
var CheckboxIndicator = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeCheckbox, forceMount, ...indicatorProps } = props;
    const context = useCheckboxContext(INDICATOR_NAME$1, __scopeCheckbox);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      Presence,
      {
        present: forceMount || isIndeterminate(context.checked) || context.checked === true,
        children: /* @__PURE__ */ jsxRuntimeExports.jsx(
          Primitive.span,
          {
            "data-state": getState$2(context.checked),
            "data-disabled": context.disabled ? "" : void 0,
            ...indicatorProps,
            ref: forwardedRef,
            style: { pointerEvents: "none", ...props.style }
          }
        )
      }
    );
  }
);
CheckboxIndicator.displayName = INDICATOR_NAME$1;
var BUBBLE_INPUT_NAME$2 = "CheckboxBubbleInput";
var CheckboxBubbleInput = reactExports.forwardRef(
  ({ __scopeCheckbox, ...props }, forwardedRef) => {
    const {
      control,
      hasConsumerStoppedPropagationRef,
      checked,
      defaultChecked,
      required,
      disabled,
      name: name2,
      value,
      form,
      bubbleInput,
      setBubbleInput
    } = useCheckboxContext(BUBBLE_INPUT_NAME$2, __scopeCheckbox);
    const composedRefs = useComposedRefs(forwardedRef, setBubbleInput);
    const prevChecked = usePrevious(checked);
    const controlSize = useSize(control);
    reactExports.useEffect(() => {
      const input = bubbleInput;
      if (!input) return;
      const inputProto = window.HTMLInputElement.prototype;
      const descriptor = Object.getOwnPropertyDescriptor(
        inputProto,
        "checked"
      );
      const setChecked = descriptor.set;
      const bubbles = !hasConsumerStoppedPropagationRef.current;
      if (prevChecked !== checked && setChecked) {
        const event = new Event("click", { bubbles });
        input.indeterminate = isIndeterminate(checked);
        setChecked.call(input, isIndeterminate(checked) ? false : checked);
        input.dispatchEvent(event);
      }
    }, [bubbleInput, prevChecked, checked, hasConsumerStoppedPropagationRef]);
    const defaultCheckedRef = reactExports.useRef(isIndeterminate(checked) ? false : checked);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      Primitive.input,
      {
        type: "checkbox",
        "aria-hidden": true,
        defaultChecked: defaultChecked ?? defaultCheckedRef.current,
        required,
        disabled,
        name: name2,
        value,
        form,
        ...props,
        tabIndex: -1,
        ref: composedRefs,
        style: {
          ...props.style,
          ...controlSize,
          position: "absolute",
          pointerEvents: "none",
          opacity: 0,
          margin: 0,
          // We transform because the input is absolutely positioned but we have
          // rendered it **after** the button. This pulls it back to sit on top
          // of the button.
          transform: "translateX(-100%)"
        }
      }
    );
  }
);
CheckboxBubbleInput.displayName = BUBBLE_INPUT_NAME$2;
function isFunction$1(value) {
  return typeof value === "function";
}
function isIndeterminate(checked) {
  return checked === "indeterminate";
}
function getState$2(checked) {
  return isIndeterminate(checked) ? "indeterminate" : checked ? "checked" : "unchecked";
}
const Checkbox = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  Checkbox$1,
  {
    ref,
    className: cn(
      "peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
      className
    ),
    ...props,
    children: /* @__PURE__ */ jsxRuntimeExports.jsx(CheckboxIndicator, { className: cn("flex items-center justify-center text-current"), children: /* @__PURE__ */ jsxRuntimeExports.jsx(Check, { className: "h-4 w-4" }) })
  }
));
Checkbox.displayName = Checkbox$1.displayName;
function Login() {
  const [email, setEmail] = reactExports.useState("");
  const [password, setPassword] = reactExports.useState("");
  const [showPassword, setShowPassword] = reactExports.useState(false);
  const [rememberMe, setRememberMe] = reactExports.useState(false);
  const [loading, setLoading] = reactExports.useState(false);
  const { signIn, user, profile, signOut } = useAuth();
  const navigate = useNavigate();
  const [searchParams] = useSearchParams();
  const role = searchParams.get("role") || "";
  reactExports.useEffect(() => {
    console.log("Login useEffect triggered:", { user: user?.id, profile: profile?.id, role, loading });
    if (user && profile && profile.status === "active") {
      console.log("Login: User and profile found, checking role...");
      if (role && profile.role !== role) {
        console.log("Role mismatch detected:", { expected: role, actual: profile.role });
        setLoading(false);
        return;
      }
      if (role === "attendant") {
        console.log("Attendant role requires explicit login, not auto-redirecting");
        setLoading(false);
        return;
      }
      console.log("Login: All checks passed, navigating to dashboard...");
      setLoading(false);
      navigate("/dashboard", { replace: true });
    } else {
      console.log("Login: Not ready for navigation yet:", {
        hasUser: !!user,
        hasProfile: !!profile,
        profileStatus: profile?.status
      });
    }
  }, [user, profile, navigate, role, loading]);
  const handleSignOut = async () => {
    await signOut();
    setEmail("");
    setPassword("");
  };
  const handleSubmit = async (e) => {
    e.preventDefault();
    setLoading(true);
    console.log("Login: Starting login process...", { email, role });
    try {
      const result = await signIn(email, password, role);
      console.log("Login: Sign in result:", result);
      if (result && !result.error) {
        console.log("Login: Sign in successful");
        if (role === "attendant") {
          console.log("Login: Manually navigating to dashboard for attendant");
          setLoading(false);
          navigate("/dashboard", { replace: true });
        } else {
          console.log("Login: Navigation will be handled by useEffect");
          setTimeout(() => {
            console.log("Login: Timeout reached, resetting loading state");
            setLoading(false);
          }, 3e3);
        }
      } else {
        console.log("Login: Sign in failed:", result?.error);
        setLoading(false);
      }
    } catch (error) {
      console.error("Login: Unexpected error during sign in:", error);
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 flex items-center justify-center p-4 relative overflow-hidden", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-gradient-to-br from-indigo-900/90 via-purple-900/80 to-pink-900/90" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-purple-600/20 via-transparent to-transparent" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-[radial-gradient(ellipse_at_bottom_left,_var(--tw-gradient-stops))] from-indigo-600/20 via-transparent to-transparent" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-pink-600/10 via-transparent to-transparent" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute top-20 left-20 w-72 h-72 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full blur-3xl animate-pulse" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute bottom-20 right-20 w-96 h-96 bg-gradient-to-r from-indigo-500/20 to-blue-500/20 rounded-full blur-3xl animate-pulse delay-1000" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-gradient-to-r from-pink-500/10 to-purple-500/10 rounded-full blur-3xl animate-pulse delay-500" }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "max-w-6xl w-full grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 items-center relative z-10", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-white space-y-6 sm:space-y-8 text-center lg:text-left relative z-10", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3 sm:space-y-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-center lg:justify-start space-x-2 sm:space-x-3", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-r from-purple-500 via-indigo-500 to-blue-500 rounded-xl flex items-center justify-center shadow-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xl sm:text-2xl", children: "CAR" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-4xl sm:text-5xl font-bold bg-gradient-to-r from-purple-300 via-indigo-300 to-blue-300 bg-clip-text text-transparent", children: "ParkFlow" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-lg sm:text-xl text-white/80 font-light", children: "Smart Parking Management Made Easy" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3 sm:space-y-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-center lg:justify-start space-x-2 sm:space-x-3 text-white/90", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-5 h-5 sm:w-6 sm:h-6 bg-gradient-to-r from-emerald-400 to-emerald-500 rounded-full flex items-center justify-center shadow-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-white text-xs sm:text-sm", children: "" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-base sm:text-lg", children: "Real-time Parking Analytics" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-center lg:justify-start space-x-2 sm:space-x-3 text-white/90", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-5 h-5 sm:w-6 sm:h-6 bg-gradient-to-r from-emerald-400 to-emerald-500 rounded-full flex items-center justify-center shadow-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-white text-xs sm:text-sm", children: "" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-base sm:text-lg", children: "Secure Role-based Access" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-center lg:justify-start space-x-2 sm:space-x-3 text-white/90", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-5 h-5 sm:w-6 sm:h-6 bg-gradient-to-r from-emerald-400 to-emerald-500 rounded-full flex items-center justify-center shadow-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-white text-xs sm:text-sm", children: "" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-base sm:text-lg", children: "Scalable Multi-location Management" })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-full max-w-md mx-auto", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "bg-white/10 backdrop-blur-xl border border-white/20 shadow-2xl rounded-3xl overflow-hidden", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-gradient-to-r from-purple-600 via-indigo-600 to-blue-600 p-4 sm:p-6 text-white relative", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-gradient-to-r from-purple-600/80 via-indigo-600/80 to-blue-600/80" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "relative z-10", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-xl sm:text-2xl font-bold", children: role ? `${role === "contractor" ? "Contractor" : "Attendant"} Login` : "Sign In" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-purple-100 text-xs sm:text-sm mt-1", children: role ? `Enter your credentials to access the ${role} dashboard` : "Enter your credentials to access your dashboard" })
          ] }) })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "p-6 sm:p-8 bg-white/5 backdrop-blur-sm", children: [
          user && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "mb-4 sm:mb-6 p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex-1 min-w-0", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-xs sm:text-sm font-medium text-blue-900 truncate", children: [
                "Active Session: ",
                user.email
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-xs text-blue-700", children: [
                "Role: ",
                profile?.role || "Unknown",
                " | Status: ",
                profile?.status || "Unknown"
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Button,
              {
                variant: "ghost",
                size: "sm",
                onClick: handleSignOut,
                className: "text-blue-600 hover:text-blue-700 flex-shrink-0 ml-2",
                children: /* @__PURE__ */ jsxRuntimeExports.jsx(LogOut, { className: "h-4 w-4" })
              }
            )
          ] }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("form", { onSubmit: handleSubmit, className: "space-y-4 sm:space-y-6", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "email", className: "text-white font-medium text-sm sm:text-base", children: "Email" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Input,
                {
                  id: "email",
                  type: "email",
                  placeholder: "Enter your email",
                  value: email,
                  onChange: (e) => setEmail(e.target.value),
                  required: true,
                  className: "h-10 sm:h-12 bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-purple-400 focus:ring-purple-400 backdrop-blur-sm"
                }
              )
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "password", className: "text-white font-medium text-sm sm:text-base", children: "Password" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Input,
                  {
                    id: "password",
                    type: showPassword ? "text" : "password",
                    placeholder: "Enter your password",
                    value: password,
                    onChange: (e) => setPassword(e.target.value),
                    required: true,
                    className: "h-10 sm:h-12 bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-purple-400 focus:ring-purple-400 backdrop-blur-sm pr-12"
                  }
                ),
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Button,
                  {
                    type: "button",
                    variant: "ghost",
                    size: "icon",
                    className: "absolute right-2 top-1/2 -translate-y-1/2 h-8 w-8 text-white/60 hover:text-white hover:bg-white/10",
                    onClick: () => setShowPassword(!showPassword),
                    children: showPassword ? /* @__PURE__ */ jsxRuntimeExports.jsx(EyeOff, { className: "h-4 w-4" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Eye, { className: "h-4 w-4" })
                  }
                )
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Checkbox,
                {
                  id: "remember",
                  checked: rememberMe,
                  onCheckedChange: (checked) => setRememberMe(checked),
                  className: "border-white/30 data-[state=checked]:bg-purple-500 data-[state=checked]:border-purple-500"
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "remember", className: "text-xs sm:text-sm text-white/80", children: "Remember me" })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Button,
              {
                type: "submit",
                className: "w-full h-10 sm:h-12 bg-gradient-to-r from-purple-600 via-indigo-600 to-blue-600 hover:from-purple-700 hover:via-indigo-700 hover:to-blue-700 text-white font-semibold rounded-xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-[1.02]",
                disabled: loading,
                children: loading ? "Signing in..." : "Sign In"
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center space-y-2 sm:space-y-3", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs(
                Button,
                {
                  variant: "ghost",
                  onClick: () => navigate("/"),
                  className: "text-xs sm:text-sm text-white/70 hover:text-white hover:bg-white/10",
                  children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowLeft, { className: "h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2" }),
                    "Back to Role Selection"
                  ]
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-1 sm:space-y-2", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Link,
                  {
                    to: "/forgot-password",
                    className: "text-xs sm:text-sm text-purple-300 hover:text-purple-200 hover:underline block",
                    children: "Forgot your password?"
                  }
                ),
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Link,
                  {
                    to: "/register",
                    className: "text-xs sm:text-sm text-white/70 hover:text-white hover:underline block",
                    children: "Need an account? Request Access"
                  }
                )
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-xs text-white/60 leading-relaxed pt-1 sm:pt-2", children: [
                "By clicking continue, you agree to our",
                " ",
                /* @__PURE__ */ jsxRuntimeExports.jsx(Link, { to: "/terms-of-service", className: "text-purple-300 hover:text-purple-200 underline", children: "Terms of Service" }),
                " ",
                "and",
                " ",
                /* @__PURE__ */ jsxRuntimeExports.jsx(Link, { to: "/privacy-policy", className: "text-purple-300 hover:text-purple-200 underline", children: "Privacy Policy" }),
                "."
              ] })
            ] })
          ] })
        ] })
      ] }) })
    ] })
  ] });
}
function SuperAdminLogin() {
  const [email, setEmail] = reactExports.useState("");
  const [password, setPassword] = reactExports.useState("");
  const [showPassword, setShowPassword] = reactExports.useState(false);
  const [loading, setLoading] = reactExports.useState(false);
  const { signIn, user, profile } = useAuth();
  const navigate = useNavigate();
  reactExports.useEffect(() => {
    console.log("SuperAdminLogin: useEffect triggered", { user: !!user, profile: !!profile, profileRole: profile?.role });
    if (user && profile) {
      console.log("SuperAdminLogin: User authenticated, role:", profile.role);
      if (profile.role === "super_admin") {
        console.log("SuperAdminLogin: Redirecting to dashboard");
        navigate("/dashboard");
      } else {
        console.log("SuperAdminLogin: User is not super admin, redirecting to role selection");
        navigate("/");
      }
    } else {
      console.log("SuperAdminLogin: No user or profile, staying on login page");
    }
  }, [user, profile, navigate]);
  const handleSubmit = async (e) => {
    e.preventDefault();
    setLoading(true);
    await signIn(email, password, "super_admin");
    setLoading(false);
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 flex items-center justify-center p-4 relative overflow-hidden", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-gradient-to-br from-indigo-900/90 via-purple-900/80 to-pink-900/90" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-purple-600/20 via-transparent to-transparent" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-[radial-gradient(ellipse_at_bottom_left,_var(--tw-gradient-stops))] from-indigo-600/20 via-transparent to-transparent" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-pink-600/10 via-transparent to-transparent" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute top-20 left-20 w-72 h-72 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full blur-3xl animate-pulse" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute bottom-20 right-20 w-96 h-96 bg-gradient-to-r from-indigo-500/20 to-blue-500/20 rounded-full blur-3xl animate-pulse delay-1000" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-gradient-to-r from-pink-500/10 to-purple-500/10 rounded-full blur-3xl animate-pulse delay-500" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-full max-w-md relative z-10", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-white/10 backdrop-blur-xl border border-white/20 shadow-2xl rounded-3xl overflow-hidden", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-gradient-to-r from-purple-600 via-indigo-600 to-pink-600 p-6 text-white text-center relative", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-gradient-to-r from-purple-600/80 via-indigo-600/80 to-pink-600/80" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative z-10", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-center space-x-3 mb-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center shadow-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xl", children: "" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-bold", children: "Super Admin Login" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-purple-100 text-sm", children: "Enter your credentials to access the admin dashboard" })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "p-8 bg-white/5 backdrop-blur-sm", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("form", { onSubmit: handleSubmit, className: "space-y-6", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "email", className: "text-white font-medium", children: "Email" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Input,
            {
              id: "email",
              type: "email",
              placeholder: "admin@parkflow.com",
              value: email,
              onChange: (e) => setEmail(e.target.value),
              required: true,
              className: "h-12 bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-purple-400 focus:ring-purple-400 backdrop-blur-sm"
            }
          )
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "password", className: "text-white font-medium", children: "Password" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "password",
                type: showPassword ? "text" : "password",
                placeholder: "Enter your password",
                value: password,
                onChange: (e) => setPassword(e.target.value),
                required: true,
                className: "h-12 bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-purple-400 focus:ring-purple-400 backdrop-blur-sm pr-12"
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Button,
              {
                type: "button",
                variant: "ghost",
                size: "icon",
                className: "absolute right-2 top-1/2 -translate-y-1/2 h-8 w-8 text-white/60 hover:text-white hover:bg-white/10",
                onClick: () => setShowPassword(!showPassword),
                children: showPassword ? /* @__PURE__ */ jsxRuntimeExports.jsx(EyeOff, { className: "h-4 w-4" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Eye, { className: "h-4 w-4" })
              }
            )
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Button,
          {
            type: "submit",
            className: "w-full h-12 bg-gradient-to-r from-purple-600 via-indigo-600 to-pink-600 hover:from-purple-700 hover:via-indigo-700 hover:to-pink-700 text-white font-semibold rounded-xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-[1.02]",
            disabled: loading,
            children: loading ? "Signing in..." : "Sign In"
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center space-y-3", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Link,
            {
              to: "/forgot-password",
              className: "text-sm text-purple-300 hover:text-purple-200 hover:underline block",
              children: "Forgot your password?"
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Link,
            {
              to: "/",
              className: "text-sm text-white/70 hover:text-white hover:underline block",
              children: "Return to Role Selection"
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-xs text-white/60 leading-relaxed pt-2", children: [
            "By clicking continue, you agree to our",
            " ",
            /* @__PURE__ */ jsxRuntimeExports.jsx(Link, { to: "/terms-of-service", className: "text-purple-300 hover:text-purple-200 underline", children: "Terms of Service" }),
            " ",
            "and",
            " ",
            /* @__PURE__ */ jsxRuntimeExports.jsx(Link, { to: "/privacy-policy", className: "text-purple-300 hover:text-purple-200 underline", children: "Privacy Policy" }),
            "."
          ] })
        ] })
      ] }) })
    ] }) })
  ] });
}
function clamp(value, [min, max]) {
  return Math.min(max, Math.max(min, value));
}
var OPEN_KEYS = [" ", "Enter", "ArrowUp", "ArrowDown"];
var SELECTION_KEYS = [" ", "Enter"];
var SELECT_NAME = "Select";
var [Collection, useCollection, createCollectionScope] = createCollection(SELECT_NAME);
var [createSelectContext, createSelectScope] = createContextScope(SELECT_NAME, [
  createCollectionScope,
  createPopperScope
]);
var usePopperScope$1 = createPopperScope();
var [SelectProvider, useSelectContext] = createSelectContext(SELECT_NAME);
var [SelectNativeOptionsProvider, useSelectNativeOptionsContext] = createSelectContext(SELECT_NAME);
var Select$1 = (props) => {
  const {
    __scopeSelect,
    children,
    open: openProp,
    defaultOpen,
    onOpenChange,
    value: valueProp,
    defaultValue,
    onValueChange,
    dir,
    name: name2,
    autoComplete,
    disabled,
    required,
    form
  } = props;
  const popperScope = usePopperScope$1(__scopeSelect);
  const [trigger, setTrigger] = reactExports.useState(null);
  const [valueNode, setValueNode] = reactExports.useState(null);
  const [valueNodeHasChildren, setValueNodeHasChildren] = reactExports.useState(false);
  const direction = useDirection(dir);
  const [open, setOpen] = useControllableState({
    prop: openProp,
    defaultProp: defaultOpen ?? false,
    onChange: onOpenChange,
    caller: SELECT_NAME
  });
  const [value, setValue] = useControllableState({
    prop: valueProp,
    defaultProp: defaultValue,
    onChange: onValueChange,
    caller: SELECT_NAME
  });
  const triggerPointerDownPosRef = reactExports.useRef(null);
  const isFormControl = trigger ? form || !!trigger.closest("form") : true;
  const [nativeOptionsSet, setNativeOptionsSet] = reactExports.useState(/* @__PURE__ */ new Set());
  const nativeSelectKey = Array.from(nativeOptionsSet).map((option) => option.props.value).join(";");
  return /* @__PURE__ */ jsxRuntimeExports.jsx(Root2$6, { ...popperScope, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
    SelectProvider,
    {
      required,
      scope: __scopeSelect,
      trigger,
      onTriggerChange: setTrigger,
      valueNode,
      onValueNodeChange: setValueNode,
      valueNodeHasChildren,
      onValueNodeHasChildrenChange: setValueNodeHasChildren,
      contentId: useId(),
      value,
      onValueChange: setValue,
      open,
      onOpenChange: setOpen,
      dir: direction,
      triggerPointerDownPosRef,
      disabled,
      children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Collection.Provider, { scope: __scopeSelect, children: /* @__PURE__ */ jsxRuntimeExports.jsx(
          SelectNativeOptionsProvider,
          {
            scope: props.__scopeSelect,
            onNativeOptionAdd: reactExports.useCallback((option) => {
              setNativeOptionsSet((prev) => new Set(prev).add(option));
            }, []),
            onNativeOptionRemove: reactExports.useCallback((option) => {
              setNativeOptionsSet((prev) => {
                const optionsSet = new Set(prev);
                optionsSet.delete(option);
                return optionsSet;
              });
            }, []),
            children
          }
        ) }),
        isFormControl ? /* @__PURE__ */ jsxRuntimeExports.jsxs(
          SelectBubbleInput,
          {
            "aria-hidden": true,
            required,
            tabIndex: -1,
            name: name2,
            autoComplete,
            value,
            onChange: (event) => setValue(event.target.value),
            disabled,
            form,
            children: [
              value === void 0 ? /* @__PURE__ */ jsxRuntimeExports.jsx("option", { value: "" }) : null,
              Array.from(nativeOptionsSet)
            ]
          },
          nativeSelectKey
        ) : null
      ]
    }
  ) });
};
Select$1.displayName = SELECT_NAME;
var TRIGGER_NAME$3 = "SelectTrigger";
var SelectTrigger$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeSelect, disabled = false, ...triggerProps } = props;
    const popperScope = usePopperScope$1(__scopeSelect);
    const context = useSelectContext(TRIGGER_NAME$3, __scopeSelect);
    const isDisabled = context.disabled || disabled;
    const composedRefs = useComposedRefs(forwardedRef, context.onTriggerChange);
    const getItems = useCollection(__scopeSelect);
    const pointerTypeRef = reactExports.useRef("touch");
    const [searchRef, handleTypeaheadSearch, resetTypeahead] = useTypeaheadSearch((search) => {
      const enabledItems = getItems().filter((item) => !item.disabled);
      const currentItem = enabledItems.find((item) => item.value === context.value);
      const nextItem = findNextItem(enabledItems, search, currentItem);
      if (nextItem !== void 0) {
        context.onValueChange(nextItem.value);
      }
    });
    const handleOpen = (pointerEvent) => {
      if (!isDisabled) {
        context.onOpenChange(true);
        resetTypeahead();
      }
      if (pointerEvent) {
        context.triggerPointerDownPosRef.current = {
          x: Math.round(pointerEvent.pageX),
          y: Math.round(pointerEvent.pageY)
        };
      }
    };
    return /* @__PURE__ */ jsxRuntimeExports.jsx(Anchor, { asChild: true, ...popperScope, children: /* @__PURE__ */ jsxRuntimeExports.jsx(
      Primitive.button,
      {
        type: "button",
        role: "combobox",
        "aria-controls": context.contentId,
        "aria-expanded": context.open,
        "aria-required": context.required,
        "aria-autocomplete": "none",
        dir: context.dir,
        "data-state": context.open ? "open" : "closed",
        disabled: isDisabled,
        "data-disabled": isDisabled ? "" : void 0,
        "data-placeholder": shouldShowPlaceholder(context.value) ? "" : void 0,
        ...triggerProps,
        ref: composedRefs,
        onClick: composeEventHandlers(triggerProps.onClick, (event) => {
          event.currentTarget.focus();
          if (pointerTypeRef.current !== "mouse") {
            handleOpen(event);
          }
        }),
        onPointerDown: composeEventHandlers(triggerProps.onPointerDown, (event) => {
          pointerTypeRef.current = event.pointerType;
          const target = event.target;
          if (target.hasPointerCapture(event.pointerId)) {
            target.releasePointerCapture(event.pointerId);
          }
          if (event.button === 0 && event.ctrlKey === false && event.pointerType === "mouse") {
            handleOpen(event);
            event.preventDefault();
          }
        }),
        onKeyDown: composeEventHandlers(triggerProps.onKeyDown, (event) => {
          const isTypingAhead = searchRef.current !== "";
          const isModifierKey = event.ctrlKey || event.altKey || event.metaKey;
          if (!isModifierKey && event.key.length === 1) handleTypeaheadSearch(event.key);
          if (isTypingAhead && event.key === " ") return;
          if (OPEN_KEYS.includes(event.key)) {
            handleOpen();
            event.preventDefault();
          }
        })
      }
    ) });
  }
);
SelectTrigger$1.displayName = TRIGGER_NAME$3;
var VALUE_NAME = "SelectValue";
var SelectValue$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeSelect, className, style, children, placeholder = "", ...valueProps } = props;
    const context = useSelectContext(VALUE_NAME, __scopeSelect);
    const { onValueNodeHasChildrenChange } = context;
    const hasChildren = children !== void 0;
    const composedRefs = useComposedRefs(forwardedRef, context.onValueNodeChange);
    useLayoutEffect2(() => {
      onValueNodeHasChildrenChange(hasChildren);
    }, [onValueNodeHasChildrenChange, hasChildren]);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      Primitive.span,
      {
        ...valueProps,
        ref: composedRefs,
        style: { pointerEvents: "none" },
        children: shouldShowPlaceholder(context.value) ? /* @__PURE__ */ jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment, { children: placeholder }) : children
      }
    );
  }
);
SelectValue$1.displayName = VALUE_NAME;
var ICON_NAME = "SelectIcon";
var SelectIcon = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeSelect, children, ...iconProps } = props;
    return /* @__PURE__ */ jsxRuntimeExports.jsx(Primitive.span, { "aria-hidden": true, ...iconProps, ref: forwardedRef, children: children || "" });
  }
);
SelectIcon.displayName = ICON_NAME;
var PORTAL_NAME$2 = "SelectPortal";
var SelectPortal = (props) => {
  return /* @__PURE__ */ jsxRuntimeExports.jsx(Portal$2, { asChild: true, ...props });
};
SelectPortal.displayName = PORTAL_NAME$2;
var CONTENT_NAME$3 = "SelectContent";
var SelectContent$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const context = useSelectContext(CONTENT_NAME$3, props.__scopeSelect);
    const [fragment, setFragment] = reactExports.useState();
    useLayoutEffect2(() => {
      setFragment(new DocumentFragment());
    }, []);
    if (!context.open) {
      const frag = fragment;
      return frag ? reactDomExports.createPortal(
        /* @__PURE__ */ jsxRuntimeExports.jsx(SelectContentProvider, { scope: props.__scopeSelect, children: /* @__PURE__ */ jsxRuntimeExports.jsx(Collection.Slot, { scope: props.__scopeSelect, children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { children: props.children }) }) }),
        frag
      ) : null;
    }
    return /* @__PURE__ */ jsxRuntimeExports.jsx(SelectContentImpl, { ...props, ref: forwardedRef });
  }
);
SelectContent$1.displayName = CONTENT_NAME$3;
var CONTENT_MARGIN = 10;
var [SelectContentProvider, useSelectContentContext] = createSelectContext(CONTENT_NAME$3);
var CONTENT_IMPL_NAME = "SelectContentImpl";
var Slot$1 = createSlot("SelectContent.RemoveScroll");
var SelectContentImpl = reactExports.forwardRef(
  (props, forwardedRef) => {
    const {
      __scopeSelect,
      position = "item-aligned",
      onCloseAutoFocus,
      onEscapeKeyDown,
      onPointerDownOutside,
      //
      // PopperContent props
      side,
      sideOffset,
      align,
      alignOffset,
      arrowPadding,
      collisionBoundary,
      collisionPadding,
      sticky,
      hideWhenDetached,
      avoidCollisions,
      //
      ...contentProps
    } = props;
    const context = useSelectContext(CONTENT_NAME$3, __scopeSelect);
    const [content, setContent] = reactExports.useState(null);
    const [viewport, setViewport] = reactExports.useState(null);
    const composedRefs = useComposedRefs(forwardedRef, (node) => setContent(node));
    const [selectedItem, setSelectedItem] = reactExports.useState(null);
    const [selectedItemText, setSelectedItemText] = reactExports.useState(
      null
    );
    const getItems = useCollection(__scopeSelect);
    const [isPositioned, setIsPositioned] = reactExports.useState(false);
    const firstValidItemFoundRef = reactExports.useRef(false);
    reactExports.useEffect(() => {
      if (content) return hideOthers(content);
    }, [content]);
    useFocusGuards();
    const focusFirst = reactExports.useCallback(
      (candidates) => {
        const [firstItem, ...restItems] = getItems().map((item) => item.ref.current);
        const [lastItem] = restItems.slice(-1);
        const PREVIOUSLY_FOCUSED_ELEMENT = document.activeElement;
        for (const candidate of candidates) {
          if (candidate === PREVIOUSLY_FOCUSED_ELEMENT) return;
          candidate?.scrollIntoView({ block: "nearest" });
          if (candidate === firstItem && viewport) viewport.scrollTop = 0;
          if (candidate === lastItem && viewport) viewport.scrollTop = viewport.scrollHeight;
          candidate?.focus();
          if (document.activeElement !== PREVIOUSLY_FOCUSED_ELEMENT) return;
        }
      },
      [getItems, viewport]
    );
    const focusSelectedItem = reactExports.useCallback(
      () => focusFirst([selectedItem, content]),
      [focusFirst, selectedItem, content]
    );
    reactExports.useEffect(() => {
      if (isPositioned) {
        focusSelectedItem();
      }
    }, [isPositioned, focusSelectedItem]);
    const { onOpenChange, triggerPointerDownPosRef } = context;
    reactExports.useEffect(() => {
      if (content) {
        let pointerMoveDelta = { x: 0, y: 0 };
        const handlePointerMove = (event) => {
          pointerMoveDelta = {
            x: Math.abs(Math.round(event.pageX) - (triggerPointerDownPosRef.current?.x ?? 0)),
            y: Math.abs(Math.round(event.pageY) - (triggerPointerDownPosRef.current?.y ?? 0))
          };
        };
        const handlePointerUp = (event) => {
          if (pointerMoveDelta.x <= 10 && pointerMoveDelta.y <= 10) {
            event.preventDefault();
          } else {
            if (!content.contains(event.target)) {
              onOpenChange(false);
            }
          }
          document.removeEventListener("pointermove", handlePointerMove);
          triggerPointerDownPosRef.current = null;
        };
        if (triggerPointerDownPosRef.current !== null) {
          document.addEventListener("pointermove", handlePointerMove);
          document.addEventListener("pointerup", handlePointerUp, { capture: true, once: true });
        }
        return () => {
          document.removeEventListener("pointermove", handlePointerMove);
          document.removeEventListener("pointerup", handlePointerUp, { capture: true });
        };
      }
    }, [content, onOpenChange, triggerPointerDownPosRef]);
    reactExports.useEffect(() => {
      const close = () => onOpenChange(false);
      window.addEventListener("blur", close);
      window.addEventListener("resize", close);
      return () => {
        window.removeEventListener("blur", close);
        window.removeEventListener("resize", close);
      };
    }, [onOpenChange]);
    const [searchRef, handleTypeaheadSearch] = useTypeaheadSearch((search) => {
      const enabledItems = getItems().filter((item) => !item.disabled);
      const currentItem = enabledItems.find((item) => item.ref.current === document.activeElement);
      const nextItem = findNextItem(enabledItems, search, currentItem);
      if (nextItem) {
        setTimeout(() => nextItem.ref.current.focus());
      }
    });
    const itemRefCallback = reactExports.useCallback(
      (node, value, disabled) => {
        const isFirstValidItem = !firstValidItemFoundRef.current && !disabled;
        const isSelectedItem = context.value !== void 0 && context.value === value;
        if (isSelectedItem || isFirstValidItem) {
          setSelectedItem(node);
          if (isFirstValidItem) firstValidItemFoundRef.current = true;
        }
      },
      [context.value]
    );
    const handleItemLeave = reactExports.useCallback(() => content?.focus(), [content]);
    const itemTextRefCallback = reactExports.useCallback(
      (node, value, disabled) => {
        const isFirstValidItem = !firstValidItemFoundRef.current && !disabled;
        const isSelectedItem = context.value !== void 0 && context.value === value;
        if (isSelectedItem || isFirstValidItem) {
          setSelectedItemText(node);
        }
      },
      [context.value]
    );
    const SelectPosition = position === "popper" ? SelectPopperPosition : SelectItemAlignedPosition;
    const popperContentProps = SelectPosition === SelectPopperPosition ? {
      side,
      sideOffset,
      align,
      alignOffset,
      arrowPadding,
      collisionBoundary,
      collisionPadding,
      sticky,
      hideWhenDetached,
      avoidCollisions
    } : {};
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      SelectContentProvider,
      {
        scope: __scopeSelect,
        content,
        viewport,
        onViewportChange: setViewport,
        itemRefCallback,
        selectedItem,
        onItemLeave: handleItemLeave,
        itemTextRefCallback,
        focusSelectedItem,
        selectedItemText,
        position,
        isPositioned,
        searchRef,
        children: /* @__PURE__ */ jsxRuntimeExports.jsx(ReactRemoveScroll, { as: Slot$1, allowPinchZoom: true, children: /* @__PURE__ */ jsxRuntimeExports.jsx(
          FocusScope,
          {
            asChild: true,
            trapped: context.open,
            onMountAutoFocus: (event) => {
              event.preventDefault();
            },
            onUnmountAutoFocus: composeEventHandlers(onCloseAutoFocus, (event) => {
              context.trigger?.focus({ preventScroll: true });
              event.preventDefault();
            }),
            children: /* @__PURE__ */ jsxRuntimeExports.jsx(
              DismissableLayer,
              {
                asChild: true,
                disableOutsidePointerEvents: true,
                onEscapeKeyDown,
                onPointerDownOutside,
                onFocusOutside: (event) => event.preventDefault(),
                onDismiss: () => context.onOpenChange(false),
                children: /* @__PURE__ */ jsxRuntimeExports.jsx(
                  SelectPosition,
                  {
                    role: "listbox",
                    id: context.contentId,
                    "data-state": context.open ? "open" : "closed",
                    dir: context.dir,
                    onContextMenu: (event) => event.preventDefault(),
                    ...contentProps,
                    ...popperContentProps,
                    onPlaced: () => setIsPositioned(true),
                    ref: composedRefs,
                    style: {
                      // flex layout so we can place the scroll buttons properly
                      display: "flex",
                      flexDirection: "column",
                      // reset the outline by default as the content MAY get focused
                      outline: "none",
                      ...contentProps.style
                    },
                    onKeyDown: composeEventHandlers(contentProps.onKeyDown, (event) => {
                      const isModifierKey = event.ctrlKey || event.altKey || event.metaKey;
                      if (event.key === "Tab") event.preventDefault();
                      if (!isModifierKey && event.key.length === 1) handleTypeaheadSearch(event.key);
                      if (["ArrowUp", "ArrowDown", "Home", "End"].includes(event.key)) {
                        const items = getItems().filter((item) => !item.disabled);
                        let candidateNodes = items.map((item) => item.ref.current);
                        if (["ArrowUp", "End"].includes(event.key)) {
                          candidateNodes = candidateNodes.slice().reverse();
                        }
                        if (["ArrowUp", "ArrowDown"].includes(event.key)) {
                          const currentElement = event.target;
                          const currentIndex = candidateNodes.indexOf(currentElement);
                          candidateNodes = candidateNodes.slice(currentIndex + 1);
                        }
                        setTimeout(() => focusFirst(candidateNodes));
                        event.preventDefault();
                      }
                    })
                  }
                )
              }
            )
          }
        ) })
      }
    );
  }
);
SelectContentImpl.displayName = CONTENT_IMPL_NAME;
var ITEM_ALIGNED_POSITION_NAME = "SelectItemAlignedPosition";
var SelectItemAlignedPosition = reactExports.forwardRef((props, forwardedRef) => {
  const { __scopeSelect, onPlaced, ...popperProps } = props;
  const context = useSelectContext(CONTENT_NAME$3, __scopeSelect);
  const contentContext = useSelectContentContext(CONTENT_NAME$3, __scopeSelect);
  const [contentWrapper, setContentWrapper] = reactExports.useState(null);
  const [content, setContent] = reactExports.useState(null);
  const composedRefs = useComposedRefs(forwardedRef, (node) => setContent(node));
  const getItems = useCollection(__scopeSelect);
  const shouldExpandOnScrollRef = reactExports.useRef(false);
  const shouldRepositionRef = reactExports.useRef(true);
  const { viewport, selectedItem, selectedItemText, focusSelectedItem } = contentContext;
  const position = reactExports.useCallback(() => {
    if (context.trigger && context.valueNode && contentWrapper && content && viewport && selectedItem && selectedItemText) {
      const triggerRect = context.trigger.getBoundingClientRect();
      const contentRect = content.getBoundingClientRect();
      const valueNodeRect = context.valueNode.getBoundingClientRect();
      const itemTextRect = selectedItemText.getBoundingClientRect();
      if (context.dir !== "rtl") {
        const itemTextOffset = itemTextRect.left - contentRect.left;
        const left = valueNodeRect.left - itemTextOffset;
        const leftDelta = triggerRect.left - left;
        const minContentWidth = triggerRect.width + leftDelta;
        const contentWidth = Math.max(minContentWidth, contentRect.width);
        const rightEdge = window.innerWidth - CONTENT_MARGIN;
        const clampedLeft = clamp(left, [
          CONTENT_MARGIN,
          // Prevents the content from going off the starting edge of the
          // viewport. It may still go off the ending edge, but this can be
          // controlled by the user since they may want to manage overflow in a
          // specific way.
          // https://github.com/radix-ui/primitives/issues/2049
          Math.max(CONTENT_MARGIN, rightEdge - contentWidth)
        ]);
        contentWrapper.style.minWidth = minContentWidth + "px";
        contentWrapper.style.left = clampedLeft + "px";
      } else {
        const itemTextOffset = contentRect.right - itemTextRect.right;
        const right = window.innerWidth - valueNodeRect.right - itemTextOffset;
        const rightDelta = window.innerWidth - triggerRect.right - right;
        const minContentWidth = triggerRect.width + rightDelta;
        const contentWidth = Math.max(minContentWidth, contentRect.width);
        const leftEdge = window.innerWidth - CONTENT_MARGIN;
        const clampedRight = clamp(right, [
          CONTENT_MARGIN,
          Math.max(CONTENT_MARGIN, leftEdge - contentWidth)
        ]);
        contentWrapper.style.minWidth = minContentWidth + "px";
        contentWrapper.style.right = clampedRight + "px";
      }
      const items = getItems();
      const availableHeight = window.innerHeight - CONTENT_MARGIN * 2;
      const itemsHeight = viewport.scrollHeight;
      const contentStyles = window.getComputedStyle(content);
      const contentBorderTopWidth = parseInt(contentStyles.borderTopWidth, 10);
      const contentPaddingTop = parseInt(contentStyles.paddingTop, 10);
      const contentBorderBottomWidth = parseInt(contentStyles.borderBottomWidth, 10);
      const contentPaddingBottom = parseInt(contentStyles.paddingBottom, 10);
      const fullContentHeight = contentBorderTopWidth + contentPaddingTop + itemsHeight + contentPaddingBottom + contentBorderBottomWidth;
      const minContentHeight = Math.min(selectedItem.offsetHeight * 5, fullContentHeight);
      const viewportStyles = window.getComputedStyle(viewport);
      const viewportPaddingTop = parseInt(viewportStyles.paddingTop, 10);
      const viewportPaddingBottom = parseInt(viewportStyles.paddingBottom, 10);
      const topEdgeToTriggerMiddle = triggerRect.top + triggerRect.height / 2 - CONTENT_MARGIN;
      const triggerMiddleToBottomEdge = availableHeight - topEdgeToTriggerMiddle;
      const selectedItemHalfHeight = selectedItem.offsetHeight / 2;
      const itemOffsetMiddle = selectedItem.offsetTop + selectedItemHalfHeight;
      const contentTopToItemMiddle = contentBorderTopWidth + contentPaddingTop + itemOffsetMiddle;
      const itemMiddleToContentBottom = fullContentHeight - contentTopToItemMiddle;
      const willAlignWithoutTopOverflow = contentTopToItemMiddle <= topEdgeToTriggerMiddle;
      if (willAlignWithoutTopOverflow) {
        const isLastItem = items.length > 0 && selectedItem === items[items.length - 1].ref.current;
        contentWrapper.style.bottom = "0px";
        const viewportOffsetBottom = content.clientHeight - viewport.offsetTop - viewport.offsetHeight;
        const clampedTriggerMiddleToBottomEdge = Math.max(
          triggerMiddleToBottomEdge,
          selectedItemHalfHeight + // viewport might have padding bottom, include it to avoid a scrollable viewport
          (isLastItem ? viewportPaddingBottom : 0) + viewportOffsetBottom + contentBorderBottomWidth
        );
        const height = contentTopToItemMiddle + clampedTriggerMiddleToBottomEdge;
        contentWrapper.style.height = height + "px";
      } else {
        const isFirstItem = items.length > 0 && selectedItem === items[0].ref.current;
        contentWrapper.style.top = "0px";
        const clampedTopEdgeToTriggerMiddle = Math.max(
          topEdgeToTriggerMiddle,
          contentBorderTopWidth + viewport.offsetTop + // viewport might have padding top, include it to avoid a scrollable viewport
          (isFirstItem ? viewportPaddingTop : 0) + selectedItemHalfHeight
        );
        const height = clampedTopEdgeToTriggerMiddle + itemMiddleToContentBottom;
        contentWrapper.style.height = height + "px";
        viewport.scrollTop = contentTopToItemMiddle - topEdgeToTriggerMiddle + viewport.offsetTop;
      }
      contentWrapper.style.margin = `${CONTENT_MARGIN}px 0`;
      contentWrapper.style.minHeight = minContentHeight + "px";
      contentWrapper.style.maxHeight = availableHeight + "px";
      onPlaced?.();
      requestAnimationFrame(() => shouldExpandOnScrollRef.current = true);
    }
  }, [
    getItems,
    context.trigger,
    context.valueNode,
    contentWrapper,
    content,
    viewport,
    selectedItem,
    selectedItemText,
    context.dir,
    onPlaced
  ]);
  useLayoutEffect2(() => position(), [position]);
  const [contentZIndex, setContentZIndex] = reactExports.useState();
  useLayoutEffect2(() => {
    if (content) setContentZIndex(window.getComputedStyle(content).zIndex);
  }, [content]);
  const handleScrollButtonChange = reactExports.useCallback(
    (node) => {
      if (node && shouldRepositionRef.current === true) {
        position();
        focusSelectedItem?.();
        shouldRepositionRef.current = false;
      }
    },
    [position, focusSelectedItem]
  );
  return /* @__PURE__ */ jsxRuntimeExports.jsx(
    SelectViewportProvider,
    {
      scope: __scopeSelect,
      contentWrapper,
      shouldExpandOnScrollRef,
      onScrollButtonChange: handleScrollButtonChange,
      children: /* @__PURE__ */ jsxRuntimeExports.jsx(
        "div",
        {
          ref: setContentWrapper,
          style: {
            display: "flex",
            flexDirection: "column",
            position: "fixed",
            zIndex: contentZIndex
          },
          children: /* @__PURE__ */ jsxRuntimeExports.jsx(
            Primitive.div,
            {
              ...popperProps,
              ref: composedRefs,
              style: {
                // When we get the height of the content, it includes borders. If we were to set
                // the height without having `boxSizing: 'border-box'` it would be too big.
                boxSizing: "border-box",
                // We need to ensure the content doesn't get taller than the wrapper
                maxHeight: "100%",
                ...popperProps.style
              }
            }
          )
        }
      )
    }
  );
});
SelectItemAlignedPosition.displayName = ITEM_ALIGNED_POSITION_NAME;
var POPPER_POSITION_NAME = "SelectPopperPosition";
var SelectPopperPosition = reactExports.forwardRef((props, forwardedRef) => {
  const {
    __scopeSelect,
    align = "start",
    collisionPadding = CONTENT_MARGIN,
    ...popperProps
  } = props;
  const popperScope = usePopperScope$1(__scopeSelect);
  return /* @__PURE__ */ jsxRuntimeExports.jsx(
    Content$1,
    {
      ...popperScope,
      ...popperProps,
      ref: forwardedRef,
      align,
      collisionPadding,
      style: {
        // Ensure border-box for floating-ui calculations
        boxSizing: "border-box",
        ...popperProps.style,
        // re-namespace exposed content custom properties
        ...{
          "--radix-select-content-transform-origin": "var(--radix-popper-transform-origin)",
          "--radix-select-content-available-width": "var(--radix-popper-available-width)",
          "--radix-select-content-available-height": "var(--radix-popper-available-height)",
          "--radix-select-trigger-width": "var(--radix-popper-anchor-width)",
          "--radix-select-trigger-height": "var(--radix-popper-anchor-height)"
        }
      }
    }
  );
});
SelectPopperPosition.displayName = POPPER_POSITION_NAME;
var [SelectViewportProvider, useSelectViewportContext] = createSelectContext(CONTENT_NAME$3, {});
var VIEWPORT_NAME$1 = "SelectViewport";
var SelectViewport = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeSelect, nonce, ...viewportProps } = props;
    const contentContext = useSelectContentContext(VIEWPORT_NAME$1, __scopeSelect);
    const viewportContext = useSelectViewportContext(VIEWPORT_NAME$1, __scopeSelect);
    const composedRefs = useComposedRefs(forwardedRef, contentContext.onViewportChange);
    const prevScrollTopRef = reactExports.useRef(0);
    return /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        "style",
        {
          dangerouslySetInnerHTML: {
            __html: `[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}`
          },
          nonce
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Collection.Slot, { scope: __scopeSelect, children: /* @__PURE__ */ jsxRuntimeExports.jsx(
        Primitive.div,
        {
          "data-radix-select-viewport": "",
          role: "presentation",
          ...viewportProps,
          ref: composedRefs,
          style: {
            // we use position: 'relative' here on the `viewport` so that when we call
            // `selectedItem.offsetTop` in calculations, the offset is relative to the viewport
            // (independent of the scrollUpButton).
            position: "relative",
            flex: 1,
            // Viewport should only be scrollable in the vertical direction.
            // This won't work in vertical writing modes, so we'll need to
            // revisit this if/when that is supported
            // https://developer.chrome.com/blog/vertical-form-controls
            overflow: "hidden auto",
            ...viewportProps.style
          },
          onScroll: composeEventHandlers(viewportProps.onScroll, (event) => {
            const viewport = event.currentTarget;
            const { contentWrapper, shouldExpandOnScrollRef } = viewportContext;
            if (shouldExpandOnScrollRef?.current && contentWrapper) {
              const scrolledBy = Math.abs(prevScrollTopRef.current - viewport.scrollTop);
              if (scrolledBy > 0) {
                const availableHeight = window.innerHeight - CONTENT_MARGIN * 2;
                const cssMinHeight = parseFloat(contentWrapper.style.minHeight);
                const cssHeight = parseFloat(contentWrapper.style.height);
                const prevHeight = Math.max(cssMinHeight, cssHeight);
                if (prevHeight < availableHeight) {
                  const nextHeight = prevHeight + scrolledBy;
                  const clampedNextHeight = Math.min(availableHeight, nextHeight);
                  const heightDiff = nextHeight - clampedNextHeight;
                  contentWrapper.style.height = clampedNextHeight + "px";
                  if (contentWrapper.style.bottom === "0px") {
                    viewport.scrollTop = heightDiff > 0 ? heightDiff : 0;
                    contentWrapper.style.justifyContent = "flex-end";
                  }
                }
              }
            }
            prevScrollTopRef.current = viewport.scrollTop;
          })
        }
      ) })
    ] });
  }
);
SelectViewport.displayName = VIEWPORT_NAME$1;
var GROUP_NAME = "SelectGroup";
var [SelectGroupContextProvider, useSelectGroupContext] = createSelectContext(GROUP_NAME);
var SelectGroup = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeSelect, ...groupProps } = props;
    const groupId = useId();
    return /* @__PURE__ */ jsxRuntimeExports.jsx(SelectGroupContextProvider, { scope: __scopeSelect, id: groupId, children: /* @__PURE__ */ jsxRuntimeExports.jsx(Primitive.div, { role: "group", "aria-labelledby": groupId, ...groupProps, ref: forwardedRef }) });
  }
);
SelectGroup.displayName = GROUP_NAME;
var LABEL_NAME = "SelectLabel";
var SelectLabel$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeSelect, ...labelProps } = props;
    const groupContext = useSelectGroupContext(LABEL_NAME, __scopeSelect);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(Primitive.div, { id: groupContext.id, ...labelProps, ref: forwardedRef });
  }
);
SelectLabel$1.displayName = LABEL_NAME;
var ITEM_NAME$1 = "SelectItem";
var [SelectItemContextProvider, useSelectItemContext] = createSelectContext(ITEM_NAME$1);
var SelectItem$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const {
      __scopeSelect,
      value,
      disabled = false,
      textValue: textValueProp,
      ...itemProps
    } = props;
    const context = useSelectContext(ITEM_NAME$1, __scopeSelect);
    const contentContext = useSelectContentContext(ITEM_NAME$1, __scopeSelect);
    const isSelected = context.value === value;
    const [textValue, setTextValue] = reactExports.useState(textValueProp ?? "");
    const [isFocused, setIsFocused] = reactExports.useState(false);
    const composedRefs = useComposedRefs(
      forwardedRef,
      (node) => contentContext.itemRefCallback?.(node, value, disabled)
    );
    const textId = useId();
    const pointerTypeRef = reactExports.useRef("touch");
    const handleSelect = () => {
      if (!disabled) {
        context.onValueChange(value);
        context.onOpenChange(false);
      }
    };
    if (value === "") {
      throw new Error(
        "A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder."
      );
    }
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      SelectItemContextProvider,
      {
        scope: __scopeSelect,
        value,
        disabled,
        textId,
        isSelected,
        onItemTextChange: reactExports.useCallback((node) => {
          setTextValue((prevTextValue) => prevTextValue || (node?.textContent ?? "").trim());
        }, []),
        children: /* @__PURE__ */ jsxRuntimeExports.jsx(
          Collection.ItemSlot,
          {
            scope: __scopeSelect,
            value,
            disabled,
            textValue,
            children: /* @__PURE__ */ jsxRuntimeExports.jsx(
              Primitive.div,
              {
                role: "option",
                "aria-labelledby": textId,
                "data-highlighted": isFocused ? "" : void 0,
                "aria-selected": isSelected && isFocused,
                "data-state": isSelected ? "checked" : "unchecked",
                "aria-disabled": disabled || void 0,
                "data-disabled": disabled ? "" : void 0,
                tabIndex: disabled ? void 0 : -1,
                ...itemProps,
                ref: composedRefs,
                onFocus: composeEventHandlers(itemProps.onFocus, () => setIsFocused(true)),
                onBlur: composeEventHandlers(itemProps.onBlur, () => setIsFocused(false)),
                onClick: composeEventHandlers(itemProps.onClick, () => {
                  if (pointerTypeRef.current !== "mouse") handleSelect();
                }),
                onPointerUp: composeEventHandlers(itemProps.onPointerUp, () => {
                  if (pointerTypeRef.current === "mouse") handleSelect();
                }),
                onPointerDown: composeEventHandlers(itemProps.onPointerDown, (event) => {
                  pointerTypeRef.current = event.pointerType;
                }),
                onPointerMove: composeEventHandlers(itemProps.onPointerMove, (event) => {
                  pointerTypeRef.current = event.pointerType;
                  if (disabled) {
                    contentContext.onItemLeave?.();
                  } else if (pointerTypeRef.current === "mouse") {
                    event.currentTarget.focus({ preventScroll: true });
                  }
                }),
                onPointerLeave: composeEventHandlers(itemProps.onPointerLeave, (event) => {
                  if (event.currentTarget === document.activeElement) {
                    contentContext.onItemLeave?.();
                  }
                }),
                onKeyDown: composeEventHandlers(itemProps.onKeyDown, (event) => {
                  const isTypingAhead = contentContext.searchRef?.current !== "";
                  if (isTypingAhead && event.key === " ") return;
                  if (SELECTION_KEYS.includes(event.key)) handleSelect();
                  if (event.key === " ") event.preventDefault();
                })
              }
            )
          }
        )
      }
    );
  }
);
SelectItem$1.displayName = ITEM_NAME$1;
var ITEM_TEXT_NAME = "SelectItemText";
var SelectItemText = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeSelect, className, style, ...itemTextProps } = props;
    const context = useSelectContext(ITEM_TEXT_NAME, __scopeSelect);
    const contentContext = useSelectContentContext(ITEM_TEXT_NAME, __scopeSelect);
    const itemContext = useSelectItemContext(ITEM_TEXT_NAME, __scopeSelect);
    const nativeOptionsContext = useSelectNativeOptionsContext(ITEM_TEXT_NAME, __scopeSelect);
    const [itemTextNode, setItemTextNode] = reactExports.useState(null);
    const composedRefs = useComposedRefs(
      forwardedRef,
      (node) => setItemTextNode(node),
      itemContext.onItemTextChange,
      (node) => contentContext.itemTextRefCallback?.(node, itemContext.value, itemContext.disabled)
    );
    const textContent = itemTextNode?.textContent;
    const nativeOption = reactExports.useMemo(
      () => /* @__PURE__ */ jsxRuntimeExports.jsx("option", { value: itemContext.value, disabled: itemContext.disabled, children: textContent }, itemContext.value),
      [itemContext.disabled, itemContext.value, textContent]
    );
    const { onNativeOptionAdd, onNativeOptionRemove } = nativeOptionsContext;
    useLayoutEffect2(() => {
      onNativeOptionAdd(nativeOption);
      return () => onNativeOptionRemove(nativeOption);
    }, [onNativeOptionAdd, onNativeOptionRemove, nativeOption]);
    return /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(Primitive.span, { id: itemContext.textId, ...itemTextProps, ref: composedRefs }),
      itemContext.isSelected && context.valueNode && !context.valueNodeHasChildren ? reactDomExports.createPortal(itemTextProps.children, context.valueNode) : null
    ] });
  }
);
SelectItemText.displayName = ITEM_TEXT_NAME;
var ITEM_INDICATOR_NAME = "SelectItemIndicator";
var SelectItemIndicator = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeSelect, ...itemIndicatorProps } = props;
    const itemContext = useSelectItemContext(ITEM_INDICATOR_NAME, __scopeSelect);
    return itemContext.isSelected ? /* @__PURE__ */ jsxRuntimeExports.jsx(Primitive.span, { "aria-hidden": true, ...itemIndicatorProps, ref: forwardedRef }) : null;
  }
);
SelectItemIndicator.displayName = ITEM_INDICATOR_NAME;
var SCROLL_UP_BUTTON_NAME = "SelectScrollUpButton";
var SelectScrollUpButton$1 = reactExports.forwardRef((props, forwardedRef) => {
  const contentContext = useSelectContentContext(SCROLL_UP_BUTTON_NAME, props.__scopeSelect);
  const viewportContext = useSelectViewportContext(SCROLL_UP_BUTTON_NAME, props.__scopeSelect);
  const [canScrollUp, setCanScrollUp] = reactExports.useState(false);
  const composedRefs = useComposedRefs(forwardedRef, viewportContext.onScrollButtonChange);
  useLayoutEffect2(() => {
    if (contentContext.viewport && contentContext.isPositioned) {
      let handleScroll2 = function() {
        const canScrollUp2 = viewport.scrollTop > 0;
        setCanScrollUp(canScrollUp2);
      };
      const viewport = contentContext.viewport;
      handleScroll2();
      viewport.addEventListener("scroll", handleScroll2);
      return () => viewport.removeEventListener("scroll", handleScroll2);
    }
  }, [contentContext.viewport, contentContext.isPositioned]);
  return canScrollUp ? /* @__PURE__ */ jsxRuntimeExports.jsx(
    SelectScrollButtonImpl,
    {
      ...props,
      ref: composedRefs,
      onAutoScroll: () => {
        const { viewport, selectedItem } = contentContext;
        if (viewport && selectedItem) {
          viewport.scrollTop = viewport.scrollTop - selectedItem.offsetHeight;
        }
      }
    }
  ) : null;
});
SelectScrollUpButton$1.displayName = SCROLL_UP_BUTTON_NAME;
var SCROLL_DOWN_BUTTON_NAME = "SelectScrollDownButton";
var SelectScrollDownButton$1 = reactExports.forwardRef((props, forwardedRef) => {
  const contentContext = useSelectContentContext(SCROLL_DOWN_BUTTON_NAME, props.__scopeSelect);
  const viewportContext = useSelectViewportContext(SCROLL_DOWN_BUTTON_NAME, props.__scopeSelect);
  const [canScrollDown, setCanScrollDown] = reactExports.useState(false);
  const composedRefs = useComposedRefs(forwardedRef, viewportContext.onScrollButtonChange);
  useLayoutEffect2(() => {
    if (contentContext.viewport && contentContext.isPositioned) {
      let handleScroll2 = function() {
        const maxScroll = viewport.scrollHeight - viewport.clientHeight;
        const canScrollDown2 = Math.ceil(viewport.scrollTop) < maxScroll;
        setCanScrollDown(canScrollDown2);
      };
      const viewport = contentContext.viewport;
      handleScroll2();
      viewport.addEventListener("scroll", handleScroll2);
      return () => viewport.removeEventListener("scroll", handleScroll2);
    }
  }, [contentContext.viewport, contentContext.isPositioned]);
  return canScrollDown ? /* @__PURE__ */ jsxRuntimeExports.jsx(
    SelectScrollButtonImpl,
    {
      ...props,
      ref: composedRefs,
      onAutoScroll: () => {
        const { viewport, selectedItem } = contentContext;
        if (viewport && selectedItem) {
          viewport.scrollTop = viewport.scrollTop + selectedItem.offsetHeight;
        }
      }
    }
  ) : null;
});
SelectScrollDownButton$1.displayName = SCROLL_DOWN_BUTTON_NAME;
var SelectScrollButtonImpl = reactExports.forwardRef((props, forwardedRef) => {
  const { __scopeSelect, onAutoScroll, ...scrollIndicatorProps } = props;
  const contentContext = useSelectContentContext("SelectScrollButton", __scopeSelect);
  const autoScrollTimerRef = reactExports.useRef(null);
  const getItems = useCollection(__scopeSelect);
  const clearAutoScrollTimer = reactExports.useCallback(() => {
    if (autoScrollTimerRef.current !== null) {
      window.clearInterval(autoScrollTimerRef.current);
      autoScrollTimerRef.current = null;
    }
  }, []);
  reactExports.useEffect(() => {
    return () => clearAutoScrollTimer();
  }, [clearAutoScrollTimer]);
  useLayoutEffect2(() => {
    const activeItem = getItems().find((item) => item.ref.current === document.activeElement);
    activeItem?.ref.current?.scrollIntoView({ block: "nearest" });
  }, [getItems]);
  return /* @__PURE__ */ jsxRuntimeExports.jsx(
    Primitive.div,
    {
      "aria-hidden": true,
      ...scrollIndicatorProps,
      ref: forwardedRef,
      style: { flexShrink: 0, ...scrollIndicatorProps.style },
      onPointerDown: composeEventHandlers(scrollIndicatorProps.onPointerDown, () => {
        if (autoScrollTimerRef.current === null) {
          autoScrollTimerRef.current = window.setInterval(onAutoScroll, 50);
        }
      }),
      onPointerMove: composeEventHandlers(scrollIndicatorProps.onPointerMove, () => {
        contentContext.onItemLeave?.();
        if (autoScrollTimerRef.current === null) {
          autoScrollTimerRef.current = window.setInterval(onAutoScroll, 50);
        }
      }),
      onPointerLeave: composeEventHandlers(scrollIndicatorProps.onPointerLeave, () => {
        clearAutoScrollTimer();
      })
    }
  );
});
var SEPARATOR_NAME = "SelectSeparator";
var SelectSeparator$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeSelect, ...separatorProps } = props;
    return /* @__PURE__ */ jsxRuntimeExports.jsx(Primitive.div, { "aria-hidden": true, ...separatorProps, ref: forwardedRef });
  }
);
SelectSeparator$1.displayName = SEPARATOR_NAME;
var ARROW_NAME$1 = "SelectArrow";
var SelectArrow = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeSelect, ...arrowProps } = props;
    const popperScope = usePopperScope$1(__scopeSelect);
    const context = useSelectContext(ARROW_NAME$1, __scopeSelect);
    const contentContext = useSelectContentContext(ARROW_NAME$1, __scopeSelect);
    return context.open && contentContext.position === "popper" ? /* @__PURE__ */ jsxRuntimeExports.jsx(Arrow, { ...popperScope, ...arrowProps, ref: forwardedRef }) : null;
  }
);
SelectArrow.displayName = ARROW_NAME$1;
var BUBBLE_INPUT_NAME$1 = "SelectBubbleInput";
var SelectBubbleInput = reactExports.forwardRef(
  ({ __scopeSelect, value, ...props }, forwardedRef) => {
    const ref = reactExports.useRef(null);
    const composedRefs = useComposedRefs(forwardedRef, ref);
    const prevValue = usePrevious(value);
    reactExports.useEffect(() => {
      const select = ref.current;
      if (!select) return;
      const selectProto = window.HTMLSelectElement.prototype;
      const descriptor = Object.getOwnPropertyDescriptor(
        selectProto,
        "value"
      );
      const setValue = descriptor.set;
      if (prevValue !== value && setValue) {
        const event = new Event("change", { bubbles: true });
        setValue.call(select, value);
        select.dispatchEvent(event);
      }
    }, [prevValue, value]);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      Primitive.select,
      {
        ...props,
        style: { ...VISUALLY_HIDDEN_STYLES, ...props.style },
        ref: composedRefs,
        defaultValue: value
      }
    );
  }
);
SelectBubbleInput.displayName = BUBBLE_INPUT_NAME$1;
function shouldShowPlaceholder(value) {
  return value === "" || value === void 0;
}
function useTypeaheadSearch(onSearchChange) {
  const handleSearchChange = useCallbackRef(onSearchChange);
  const searchRef = reactExports.useRef("");
  const timerRef = reactExports.useRef(0);
  const handleTypeaheadSearch = reactExports.useCallback(
    (key) => {
      const search = searchRef.current + key;
      handleSearchChange(search);
      (function updateSearch(value) {
        searchRef.current = value;
        window.clearTimeout(timerRef.current);
        if (value !== "") timerRef.current = window.setTimeout(() => updateSearch(""), 1e3);
      })(search);
    },
    [handleSearchChange]
  );
  const resetTypeahead = reactExports.useCallback(() => {
    searchRef.current = "";
    window.clearTimeout(timerRef.current);
  }, []);
  reactExports.useEffect(() => {
    return () => window.clearTimeout(timerRef.current);
  }, []);
  return [searchRef, handleTypeaheadSearch, resetTypeahead];
}
function findNextItem(items, search, currentItem) {
  const isRepeated = search.length > 1 && Array.from(search).every((char) => char === search[0]);
  const normalizedSearch = isRepeated ? search[0] : search;
  const currentItemIndex = currentItem ? items.indexOf(currentItem) : -1;
  let wrappedItems = wrapArray(items, Math.max(currentItemIndex, 0));
  const excludeCurrentItem = normalizedSearch.length === 1;
  if (excludeCurrentItem) wrappedItems = wrappedItems.filter((v2) => v2 !== currentItem);
  const nextItem = wrappedItems.find(
    (item) => item.textValue.toLowerCase().startsWith(normalizedSearch.toLowerCase())
  );
  return nextItem !== currentItem ? nextItem : void 0;
}
function wrapArray(array, startIndex) {
  return array.map((_, index) => array[(startIndex + index) % array.length]);
}
var Root2$4 = Select$1;
var Trigger$2 = SelectTrigger$1;
var Value = SelectValue$1;
var Icon = SelectIcon;
var Portal$1 = SelectPortal;
var Content2$2 = SelectContent$1;
var Viewport$1 = SelectViewport;
var Label = SelectLabel$1;
var Item = SelectItem$1;
var ItemText = SelectItemText;
var ItemIndicator = SelectItemIndicator;
var ScrollUpButton = SelectScrollUpButton$1;
var ScrollDownButton = SelectScrollDownButton$1;
var Separator$2 = SelectSeparator$1;
const Select = Root2$4;
const SelectValue = Value;
const SelectTrigger = reactExports.forwardRef(({ className, children, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
  Trigger$2,
  {
    ref,
    className: cn(
      "flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",
      className
    ),
    ...props,
    children: [
      children,
      /* @__PURE__ */ jsxRuntimeExports.jsx(Icon, { asChild: true, children: /* @__PURE__ */ jsxRuntimeExports.jsx(ChevronDown, { className: "h-4 w-4 opacity-50" }) })
    ]
  }
));
SelectTrigger.displayName = Trigger$2.displayName;
const SelectScrollUpButton = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  ScrollUpButton,
  {
    ref,
    className: cn("flex cursor-default items-center justify-center py-1", className),
    ...props,
    children: /* @__PURE__ */ jsxRuntimeExports.jsx(ChevronUp, { className: "h-4 w-4" })
  }
));
SelectScrollUpButton.displayName = ScrollUpButton.displayName;
const SelectScrollDownButton = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  ScrollDownButton,
  {
    ref,
    className: cn("flex cursor-default items-center justify-center py-1", className),
    ...props,
    children: /* @__PURE__ */ jsxRuntimeExports.jsx(ChevronDown, { className: "h-4 w-4" })
  }
));
SelectScrollDownButton.displayName = ScrollDownButton.displayName;
const SelectContent = reactExports.forwardRef(({ className, children, position = "popper", ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(Portal$1, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
  Content2$2,
  {
    ref,
    className: cn(
      "relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      position === "popper" && "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
      className
    ),
    position,
    ...props,
    children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(SelectScrollUpButton, {}),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        Viewport$1,
        {
          className: cn(
            "p-1",
            position === "popper" && "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"
          ),
          children
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(SelectScrollDownButton, {})
    ]
  }
) }));
SelectContent.displayName = Content2$2.displayName;
const SelectLabel = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(Label, { ref, className: cn("py-1.5 pl-8 pr-2 text-sm font-semibold", className), ...props }));
SelectLabel.displayName = Label.displayName;
const SelectItem = reactExports.forwardRef(({ className, children, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
  Item,
  {
    ref,
    className: cn(
      "relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      className
    ),
    ...props,
    children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "absolute left-2 flex h-3.5 w-3.5 items-center justify-center", children: /* @__PURE__ */ jsxRuntimeExports.jsx(ItemIndicator, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(Check, { className: "h-4 w-4" }) }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(ItemText, { children })
    ]
  }
));
SelectItem.displayName = Item.displayName;
const SelectSeparator = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(Separator$2, { ref, className: cn("-mx-1 my-1 h-px bg-muted", className), ...props }));
SelectSeparator.displayName = Separator$2.displayName;
function Register() {
  const [formData, setFormData] = reactExports.useState({
    user_name: "",
    email: "",
    password: "",
    confirmPassword: "",
    phone_number: "",
    role: "",
    contractor_name: "",
    attendant_name: ""
  });
  const [showPassword, setShowPassword] = reactExports.useState(false);
  const [showConfirmPassword, setShowConfirmPassword] = reactExports.useState(false);
  const [loading, setLoading] = reactExports.useState(false);
  const { signUp } = useAuth();
  const navigate = useNavigate();
  const handleInputChange = (field, value) => {
    setFormData((prev) => ({ ...prev, [field]: value }));
  };
  const handleSubmit = async (e) => {
    e.preventDefault();
    if (formData.password !== formData.confirmPassword) {
      alert("Passwords don't match!");
      return;
    }
    if (!formData.role) {
      alert("Please select a role!");
      return;
    }
    setLoading(true);
    const userData = {
      user_name: formData.user_name,
      email: formData.email,
      phone_number: formData.phone_number,
      role: formData.role,
      contractor_name: formData.role === "contractor" ? formData.contractor_name : void 0,
      attendant_name: formData.role === "attendant" ? formData.attendant_name : void 0
    };
    const response = await signUp(formData.email, formData.password, userData);
    if (response.success) {
      navigate("/login");
    } else {
      console.error("Signup failed:", response.error);
    }
    setLoading(false);
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 p-4 relative overflow-hidden", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-gradient-to-br from-indigo-900/90 via-purple-900/80 to-pink-900/90" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-purple-600/20 via-transparent to-transparent" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-[radial-gradient(ellipse_at_bottom_left,_var(--tw-gradient-stops))] from-indigo-600/20 via-transparent to-transparent" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-pink-600/10 via-transparent to-transparent" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute top-20 left-20 w-72 h-72 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full blur-3xl animate-pulse" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute bottom-20 right-20 w-96 h-96 bg-gradient-to-r from-indigo-500/20 to-blue-500/20 rounded-full blur-3xl animate-pulse delay-1000" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-gradient-to-r from-pink-500/10 to-purple-500/10 rounded-full blur-3xl animate-pulse delay-500" }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "w-full max-w-md sm:max-w-lg space-y-4 sm:space-y-6 relative z-10", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-center space-x-2 mb-3 sm:mb-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-emerald-400 to-emerald-500 rounded-lg flex items-center justify-center shadow-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsx(UserPlus, { className: "h-4 w-4 sm:h-5 sm:w-5 text-white" }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-blue-400 to-blue-500 rounded-lg flex items-center justify-center shadow-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Car, { className: "h-4 w-4 sm:h-5 sm:w-5 text-white" }) })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-2xl sm:text-3xl font-bold bg-gradient-to-r from-purple-300 via-indigo-300 to-blue-300 bg-clip-text text-transparent", children: "ParkFlow" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-emerald-300 font-medium mt-1 sm:mt-2 text-sm sm:text-base", children: "Request Access" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-white/80 text-xs sm:text-sm px-4", children: "Create an account to join the parking management system" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "bg-white/10 backdrop-blur-xl border border-white/20 shadow-2xl rounded-3xl overflow-hidden", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { className: "pb-4 sm:pb-6 bg-gradient-to-r from-purple-600 via-indigo-600 to-blue-600 text-white relative", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-gradient-to-r from-purple-600/80 via-indigo-600/80 to-blue-600/80" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative z-10", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { className: "text-lg sm:text-xl", children: "Create Account" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { className: "text-purple-100 text-sm", children: "Fill in your details to request system access" })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { className: "px-4 sm:px-6 pb-4 sm:pb-6 bg-white/5 backdrop-blur-sm", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("form", { onSubmit: handleSubmit, className: "space-y-3 sm:space-y-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "role", className: "text-white font-medium", children: "Role *" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(
              Select,
              {
                value: formData.role,
                onValueChange: (value) => handleInputChange("role", value),
                children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { className: "bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-purple-400 focus:ring-purple-400 backdrop-blur-sm", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { placeholder: "Select your role" }) }),
                  /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectContent, { children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "contractor", children: "Contractor" }),
                    /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "attendant", children: "Attendant" })
                  ] })
                ]
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "user_name", className: "text-white font-medium", children: "Full Name *" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "user_name",
                placeholder: "Enter your full name",
                value: formData.user_name,
                onChange: (e) => handleInputChange("user_name", e.target.value),
                required: true,
                className: "bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-purple-400 focus:ring-purple-400 backdrop-blur-sm"
              }
            )
          ] }),
          formData.role === "contractor" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "contractor_name", className: "text-white font-medium", children: "Company/Business Name" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "contractor_name",
                placeholder: "Enter your company name",
                value: formData.contractor_name,
                onChange: (e) => handleInputChange("contractor_name", e.target.value),
                className: "bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-purple-400 focus:ring-purple-400 backdrop-blur-sm"
              }
            )
          ] }),
          formData.role === "attendant" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "attendant_name", className: "text-white font-medium", children: "Display Name" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "attendant_name",
                placeholder: "Enter your display name",
                value: formData.attendant_name,
                onChange: (e) => handleInputChange("attendant_name", e.target.value),
                className: "bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-purple-400 focus:ring-purple-400 backdrop-blur-sm"
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "email", className: "text-white font-medium", children: "Email *" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "email",
                type: "email",
                placeholder: "Enter your email",
                value: formData.email,
                onChange: (e) => handleInputChange("email", e.target.value),
                required: true,
                className: "bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-purple-400 focus:ring-purple-400 backdrop-blur-sm"
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "phone_number", className: "text-white font-medium", children: "Phone Number" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "phone_number",
                type: "tel",
                placeholder: "Enter your phone number",
                value: formData.phone_number,
                onChange: (e) => handleInputChange("phone_number", e.target.value),
                className: "bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-purple-400 focus:ring-purple-400 backdrop-blur-sm"
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "password", className: "text-white font-medium", children: "Password *" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Input,
                {
                  id: "password",
                  type: showPassword ? "text" : "password",
                  placeholder: "Create a password",
                  value: formData.password,
                  onChange: (e) => handleInputChange("password", e.target.value),
                  required: true,
                  className: "bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-purple-400 focus:ring-purple-400 backdrop-blur-sm pr-12"
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Button,
                {
                  type: "button",
                  variant: "ghost",
                  size: "icon",
                  className: "absolute right-2 top-1/2 -translate-y-1/2 h-6 w-6 text-white/60 hover:text-white hover:bg-white/10",
                  onClick: () => setShowPassword(!showPassword),
                  children: showPassword ? /* @__PURE__ */ jsxRuntimeExports.jsx(EyeOff, { className: "h-4 w-4" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Eye, { className: "h-4 w-4" })
                }
              )
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "confirmPassword", className: "text-white font-medium", children: "Confirm Password *" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Input,
                {
                  id: "confirmPassword",
                  type: showConfirmPassword ? "text" : "password",
                  placeholder: "Confirm your password",
                  value: formData.confirmPassword,
                  onChange: (e) => handleInputChange("confirmPassword", e.target.value),
                  required: true,
                  className: "bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-purple-400 focus:ring-purple-400 backdrop-blur-sm pr-12"
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Button,
                {
                  type: "button",
                  variant: "ghost",
                  size: "icon",
                  className: "absolute right-2 top-1/2 -translate-y-1/2 h-6 w-6 text-white/60 hover:text-white hover:bg-white/10",
                  onClick: () => setShowConfirmPassword(!showConfirmPassword),
                  children: showConfirmPassword ? /* @__PURE__ */ jsxRuntimeExports.jsx(EyeOff, { className: "h-4 w-4" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Eye, { className: "h-4 w-4" })
                }
              )
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Button,
            {
              type: "submit",
              className: "w-full bg-gradient-to-r from-purple-600 via-indigo-600 to-blue-600 hover:from-purple-700 hover:via-indigo-700 hover:to-blue-700 text-white font-semibold rounded-xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-[1.02]",
              disabled: loading,
              children: loading ? "Creating Account..." : "Request Access"
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-blue-500/20 border border-blue-400/30 p-3 rounded-lg backdrop-blur-sm", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-blue-200 font-medium text-center", children: " Account Activation Required" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-white/80 mt-1 text-center", children: "Your account will need to be activated by an administrator before you can sign in" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-center", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
            Link,
            {
              to: "/login",
              className: "text-sm text-white/70 hover:text-white hover:underline",
              children: "Already have an account? Sign in"
            }
          ) })
        ] }) })
      ] })
    ] })
  ] });
}
function ForgotPassword() {
  const [email, setEmail] = reactExports.useState("");
  const [loading, setLoading] = reactExports.useState(false);
  const [emailSent, setEmailSent] = reactExports.useState(false);
  const { resetPassword } = useAuth();
  const navigate = useNavigate();
  const handleSubmit = async (e) => {
    e.preventDefault();
    setLoading(true);
    const { success } = await resetPassword(email);
    if (success) {
      setEmailSent(true);
    }
    setLoading(false);
  };
  if (emailSent) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "min-h-screen flex items-center justify-center bg-gradient-to-br from-parkflow-red/10 via-background to-parkflow-blue/10 p-4", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "w-full max-w-md space-y-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-center space-x-2 mb-4", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Car, { className: "h-10 w-10 text-parkflow-blue" }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-3xl font-bold text-parkflow-blue", children: "ParkFlow" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-bold text-foreground mt-2", children: "Check Your Email" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground text-sm", children: "We've sent password reset instructions to your email" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { className: "shadow-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { className: "pt-6", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center space-y-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center", children: /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, { className: "h-8 w-8 text-green-600" }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-semibold text-foreground mb-2", children: "Email Sent Successfully!" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-sm text-muted-foreground mb-4", children: [
            "We've sent password reset instructions to ",
            /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: email })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-muted-foreground", children: "Please check your email and follow the instructions to reset your password. If you don't see the email, check your spam folder." })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs(
            Button,
            {
              onClick: () => setEmailSent(false),
              variant: "outline",
              className: "w-full",
              children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Mail, { className: "h-4 w-4 mr-2" }),
                "Send Another Email"
              ]
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(
            Button,
            {
              onClick: () => navigate("/login"),
              variant: "ghost",
              className: "w-full",
              children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowLeft, { className: "h-4 w-4 mr-2" }),
                "Back to Login"
              ]
            }
          )
        ] })
      ] }) }) })
    ] }) });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "min-h-screen flex items-center justify-center bg-gradient-to-br from-parkflow-red/10 via-background to-parkflow-blue/10 p-4", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "w-full max-w-md space-y-6", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-center space-x-2 mb-4", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Car, { className: "h-10 w-10 text-parkflow-blue" }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-3xl font-bold text-parkflow-blue", children: "ParkFlow" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-bold text-foreground mt-2", children: "Forgot Password" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground text-sm", children: "Enter your email address and we'll send you instructions to reset your password" })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "shadow-lg", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { children: "Reset Password" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Enter your email address to receive password reset instructions" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("form", { onSubmit: handleSubmit, className: "space-y-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "email", children: "Email Address" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Input,
            {
              id: "email",
              type: "email",
              placeholder: "Enter your email address",
              value: email,
              onChange: (e) => setEmail(e.target.value),
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Button,
          {
            type: "submit",
            className: "w-full",
            disabled: loading,
            children: loading ? "Sending..." : "Send Reset Instructions"
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-center", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
          Link,
          {
            to: "/login",
            className: "text-sm text-muted-foreground hover:underline flex items-center justify-center",
            children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowLeft, { className: "h-4 w-4 mr-2" }),
              "Back to Login"
            ]
          }
        ) })
      ] }) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { className: "bg-muted/50", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "pt-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "font-medium mb-2 text-center", children: "Need Help?" }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-xs space-y-1 text-muted-foreground text-center", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { children: " Make sure you enter the email address associated with your account" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { children: " Check your spam folder if you don't receive the email" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { children: " Contact your administrator if you continue to have issues" })
      ] })
    ] }) })
  ] }) });
}
function ResetPasswordSimple() {
  const [password, setPassword] = reactExports.useState("");
  const [confirmPassword, setConfirmPassword] = reactExports.useState("");
  const [showPassword, setShowPassword] = reactExports.useState(false);
  const [showConfirmPassword, setShowConfirmPassword] = reactExports.useState(false);
  const [loading, setLoading] = reactExports.useState(false);
  const [success, setSuccess] = reactExports.useState(false);
  const [error, setError] = reactExports.useState("");
  const navigate = useNavigate();
  reactExports.useEffect(() => {
    const checkAuth = async () => {
      const { AuthAPI: AuthAPI2 } = await __vitePreload(async () => {
        const { AuthAPI: AuthAPI3 } = await Promise.resolve().then(() => authApi);
        return { AuthAPI: AuthAPI3 };
      }, true ? void 0 : void 0);
      const isAuthenticated = AuthAPI2.isAuthenticated();
      if (!isAuthenticated) {
        setError("No active session found. Please request a new password reset.");
      }
    };
    checkAuth();
  }, []);
  const handleSubmit = async (e) => {
    e.preventDefault();
    setLoading(true);
    setError("");
    if (password !== confirmPassword) {
      setError("Passwords do not match");
      setLoading(false);
      return;
    }
    if (password.length < 6) {
      setError("Password must be at least 6 characters long");
      setLoading(false);
      return;
    }
    try {
      const { AuthAPI: AuthAPI2 } = await __vitePreload(async () => {
        const { AuthAPI: AuthAPI3 } = await Promise.resolve().then(() => authApi);
        return { AuthAPI: AuthAPI3 };
      }, true ? void 0 : void 0);
      const user = AuthAPI2.getUser();
      if (!user?.id) throw new Error("User not authenticated");
      const { apiClient: apiClient2 } = await __vitePreload(async () => {
        const { apiClient: apiClient3 } = await Promise.resolve().then(() => apiClient$1);
        return { apiClient: apiClient3 };
      }, true ? void 0 : void 0);
      const response = await apiClient2.post(`/profiles/updatePassword/${user.id}`, {
        newPassword: password
      });
      if (!response.success) {
        throw new Error(response.message || "Failed to update password");
      }
      setSuccess(true);
    } catch (error2) {
      console.error("Password reset error:", error2);
      setError(error2 instanceof Error ? error2.message : "An error occurred while resetting your password");
    } finally {
      setLoading(false);
    }
  };
  if (success) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "min-h-screen flex items-center justify-center bg-gradient-to-br from-parkflow-red/10 via-background to-parkflow-blue/10 p-4", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "w-full max-w-md space-y-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-center space-x-2 mb-4", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Car, { className: "h-10 w-10 text-parkflow-blue" }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-3xl font-bold text-parkflow-blue", children: "ParkFlow" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-bold text-foreground mt-2", children: "Password Reset Successful" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground text-sm", children: "Your password has been updated successfully" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { className: "shadow-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { className: "pt-6", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center space-y-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center", children: /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, { className: "h-8 w-8 text-green-600" }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-semibold text-foreground mb-2", children: "Password Updated!" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-muted-foreground mb-4", children: "Your password has been successfully updated. You can now log in with your new password." })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(
          Button,
          {
            onClick: () => navigate("/login"),
            className: "w-full",
            children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowLeft, { className: "h-4 w-4 mr-2" }),
              "Go to Login"
            ]
          }
        )
      ] }) }) })
    ] }) });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "min-h-screen flex items-center justify-center bg-gradient-to-br from-parkflow-red/10 via-background to-parkflow-blue/10 p-4", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "w-full max-w-md space-y-6", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-center space-x-2 mb-4", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Car, { className: "h-10 w-10 text-parkflow-blue" }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-3xl font-bold text-parkflow-blue", children: "ParkFlow" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-bold text-foreground mt-2", children: "Reset Password" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground text-sm", children: "Enter your new password below" })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "shadow-lg", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { children: "Set New Password" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Enter a strong password for your account" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("form", { onSubmit: handleSubmit, className: "space-y-4", children: [
        error && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "bg-red-50 border border-red-200 rounded-lg p-3", children: /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-red-600", children: error }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "password", children: "New Password" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "password",
                type: showPassword ? "text" : "password",
                placeholder: "Enter your new password",
                value: password,
                onChange: (e) => setPassword(e.target.value),
                required: true
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Button,
              {
                type: "button",
                variant: "ghost",
                size: "icon",
                className: "absolute right-2 top-1/2 -translate-y-1/2 h-6 w-6",
                onClick: () => setShowPassword(!showPassword),
                children: showPassword ? /* @__PURE__ */ jsxRuntimeExports.jsx(EyeOff, { className: "h-4 w-4" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Eye, { className: "h-4 w-4" })
              }
            )
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "confirmPassword", children: "Confirm New Password" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "confirmPassword",
                type: showConfirmPassword ? "text" : "password",
                placeholder: "Confirm your new password",
                value: confirmPassword,
                onChange: (e) => setConfirmPassword(e.target.value),
                required: true
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Button,
              {
                type: "button",
                variant: "ghost",
                size: "icon",
                className: "absolute right-2 top-1/2 -translate-y-1/2 h-6 w-6",
                onClick: () => setShowConfirmPassword(!showConfirmPassword),
                children: showConfirmPassword ? /* @__PURE__ */ jsxRuntimeExports.jsx(EyeOff, { className: "h-4 w-4" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Eye, { className: "h-4 w-4" })
              }
            )
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Button,
          {
            type: "submit",
            className: "w-full",
            disabled: loading,
            children: loading ? "Updating Password..." : "Update Password"
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-center", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
          Button,
          {
            type: "button",
            variant: "ghost",
            onClick: () => navigate("/login"),
            className: "text-sm text-muted-foreground hover:text-foreground",
            children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowLeft, { className: "h-4 w-4 mr-2" }),
              "Back to Login"
            ]
          }
        ) })
      ] }) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { className: "bg-muted/50", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "pt-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "font-medium mb-2 text-center", children: "Password Requirements" }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-xs space-y-1 text-muted-foreground text-center", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { children: " At least 6 characters long" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { children: " Use a combination of letters, numbers, and symbols" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { children: " Avoid using common passwords or personal information" })
      ] })
    ] }) })
  ] }) });
}
const formatDate = (dateString, options) => {
  if (!dateString) return "N/A";
  try {
    const date = new Date(dateString);
    if (isNaN(date.getTime())) return "N/A";
    const {
      includeTime = false,
      includeSeconds = false,
      format = "short"
    } = options || {};
    const formatOptions = {
      day: "2-digit",
      month: "2-digit",
      year: "2-digit",
      timeZone: "Asia/Kolkata"
      // Indian timezone
    };
    if (includeTime) {
      formatOptions.hour = "2-digit";
      formatOptions.minute = "2-digit";
      formatOptions.hour12 = true;
    }
    if (includeSeconds) {
      formatOptions.second = "2-digit";
    }
    if (format === "medium") {
      formatOptions.month = "short";
    } else if (format === "long") {
      formatOptions.month = "long";
    }
    return date.toLocaleDateString("en-IN", formatOptions);
  } catch (error) {
    console.warn("Date formatting error:", error);
    return "N/A";
  }
};
const formatDateTime$1 = (dateString) => {
  if (!dateString) return "N/A";
  try {
    return formatDate(dateString, {
      includeTime: true,
      includeSeconds: true
    });
  } catch (error) {
    console.warn("DateTime formatting error:", error);
    return "N/A";
  }
};
const formatTimeAgo = (dateString) => {
  if (!dateString) return "N/A";
  try {
    const now = /* @__PURE__ */ new Date();
    const date = new Date(dateString);
    if (isNaN(date.getTime())) return "N/A";
    const diffInMinutes = Math.floor((now.getTime() - date.getTime()) / (1e3 * 60));
    if (diffInMinutes < 1) return "Just now";
    if (diffInMinutes < 60) return `${diffInMinutes}m ago`;
    const diffInHours = Math.floor(diffInMinutes / 60);
    if (diffInHours < 24) return `${diffInHours}h ago`;
    const diffInDays = Math.floor(diffInHours / 24);
    return `${diffInDays}d ago`;
  } catch (error) {
    console.warn("TimeAgo formatting error:", error);
    return "N/A";
  }
};
const formatCurrency = (amount) => {
  try {
    if (typeof amount !== "number" || isNaN(amount)) return "0.00";
    return new Intl.NumberFormat("en-IN", {
      style: "currency",
      currency: "INR",
      minimumFractionDigits: 2
    }).format(amount);
  } catch (error) {
    console.warn("Currency formatting error:", error);
    return "0.00";
  }
};
function TermsOfService() {
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "container mx-auto px-4 py-8", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "max-w-4xl mx-auto", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "mb-8", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(
        Button,
        {
          variant: "ghost",
          onClick: () => window.history.back(),
          className: "text-white hover:text-blue-300 mb-4",
          children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowLeft, { className: "h-4 w-4 mr-2" }),
            "Back"
          ]
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-4xl font-bold text-white mb-2", children: "Terms of Service" }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-slate-300", children: [
        "Last updated: ",
        (/* @__PURE__ */ new Date()).toLocaleDateString()
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8 space-y-8", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "1. Acceptance of Terms" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-slate-600 leading-relaxed", children: "By accessing and using ParkFlow's smart parking management system, you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service." })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "2. Description of Service" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-slate-600 leading-relaxed mb-4", children: "ParkFlow provides a comprehensive smart parking management platform that includes:" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", { className: "list-disc list-inside text-slate-600 space-y-2 ml-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "Real-time parking space monitoring and analytics" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "Role-based access control for contractors, attendants, and administrators" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "Multi-location parking management capabilities" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "Vehicle tracking and payment processing" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "Reporting and dashboard functionalities" })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "3. User Accounts and Responsibilities" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4 text-slate-600", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Account Creation:" }),
            " You must provide accurate and complete information when creating your account. You are responsible for maintaining the confidentiality of your account credentials."
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Role-Based Access:" }),
            " Access to different features is determined by your assigned role (Contractor, Attendant, or Super Admin). You may only access features appropriate to your role."
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Prohibited Activities:" }),
            " You agree not to:"
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", { className: "list-disc list-inside ml-4 space-y-1", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "Attempt to gain unauthorized access to other users' accounts or system areas" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "Use the service for any illegal or unauthorized purpose" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "Interfere with or disrupt the service or servers connected to the service" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "Share your account credentials with others" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "Manipulate or falsify parking data or reports" })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "4. Data and Privacy" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-slate-600 leading-relaxed", children: "Your use of ParkFlow is also governed by our Privacy Policy. We collect and process data necessary for providing parking management services, including vehicle information, payment data, and usage analytics. We implement appropriate security measures to protect your data." })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "5. Payment Terms" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4 text-slate-600", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Service Fees:" }),
            " ParkFlow may charge fees for premium features or usage beyond certain limits. All fees are clearly displayed before purchase."
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Payment Processing:" }),
            " We use secure third-party payment processors. You are responsible for all charges incurred under your account."
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Refunds:" }),
            " Refund policies are determined on a case-by-case basis and must be requested within 30 days of the original transaction."
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "6. Service Availability" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-slate-600 leading-relaxed", children: 'While we strive to maintain high service availability, ParkFlow is provided "as is" and we do not guarantee uninterrupted access. We may perform maintenance, updates, or modifications that temporarily affect service availability.' })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "7. Limitation of Liability" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-slate-600 leading-relaxed", children: "ParkFlow shall not be liable for any indirect, incidental, special, consequential, or punitive damages, including but not limited to loss of profits, data, or business opportunities, arising from your use of the service." })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "8. Termination" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-slate-600 leading-relaxed", children: "We may terminate or suspend your account immediately, without prior notice, for conduct that we believe violates these Terms of Service or is harmful to other users, us, or third parties, or for any other reason at our sole discretion." })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "9. Changes to Terms" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-slate-600 leading-relaxed", children: "We reserve the right to modify these terms at any time. We will notify users of any material changes via email or through the service. Your continued use of the service after such modifications constitutes acceptance of the updated terms." })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "10. Contact Information" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-slate-600 leading-relaxed", children: "If you have any questions about these Terms of Service, please contact us at:" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "mt-4 p-4 bg-slate-50 rounded-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-slate-700", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Email:" }),
          " legal@parkflow.com",
          /* @__PURE__ */ jsxRuntimeExports.jsx("br", {}),
          /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Address:" }),
          " ParkFlow Legal Department",
          /* @__PURE__ */ jsxRuntimeExports.jsx("br", {}),
          "123 Smart Parking Ave, Tech City, TC 12345"
        ] }) })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "pt-8 border-t border-slate-200", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-sm text-slate-500 text-center", children: [
        "These Terms of Service are effective as of ",
        formatDate(/* @__PURE__ */ new Date()),
        " and will remain in effect except with respect to any changes in their provisions in the future."
      ] }) })
    ] })
  ] }) }) });
}
function PrivacyPolicy() {
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "container mx-auto px-4 py-8", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "max-w-4xl mx-auto", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "mb-8", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(
        Button,
        {
          variant: "ghost",
          onClick: () => window.history.back(),
          className: "text-white hover:text-blue-300 mb-4",
          children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowLeft, { className: "h-4 w-4 mr-2" }),
            "Back"
          ]
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-4xl font-bold text-white mb-2", children: "Privacy Policy" }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-slate-300", children: [
        "Last updated: ",
        (/* @__PURE__ */ new Date()).toLocaleDateString()
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8 space-y-8", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "1. Introduction" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-slate-600 leading-relaxed", children: 'ParkFlow ("we," "our," or "us") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our smart parking management platform.' })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "2. Information We Collect" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-xl font-semibold text-slate-700 mb-3", children: "Personal Information" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", { className: "list-disc list-inside text-slate-600 space-y-2 ml-4", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("li", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Account Information:" }),
                " Name, email address, phone number, role designation"
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("li", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Vehicle Information:" }),
                " License plate numbers, vehicle type, entry/exit times"
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("li", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Payment Information:" }),
                " Billing details, payment methods (processed securely through third-party providers)"
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("li", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Location Data:" }),
                " Parking location coordinates, facility information"
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-xl font-semibold text-slate-700 mb-3", children: "Usage Information" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", { className: "list-disc list-inside text-slate-600 space-y-2 ml-4", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "System access logs and timestamps" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "Feature usage patterns and preferences" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "Device information and browser type" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "IP addresses and geolocation data" })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-xl font-semibold text-slate-700 mb-3", children: "Parking Analytics Data" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", { className: "list-disc list-inside text-slate-600 space-y-2 ml-4", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "Occupancy rates and parking duration statistics" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "Revenue and transaction data" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "System performance metrics" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "User behavior patterns (anonymized)" })
            ] })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "3. How We Use Your Information" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4 text-slate-600", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Service Provision:" }),
            " To provide and maintain our parking management services, process transactions, and manage user accounts."
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Communication:" }),
            " To send service-related notifications, updates, and respond to your inquiries."
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Analytics:" }),
            " To analyze usage patterns, improve our services, and generate parking management reports."
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Security:" }),
            " To monitor for fraudulent activity, ensure system security, and prevent unauthorized access."
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Compliance:" }),
            " To comply with legal obligations and regulatory requirements."
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "4. Information Sharing and Disclosure" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4 text-slate-600", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { children: "We do not sell, trade, or rent your personal information to third parties. We may share information in the following circumstances:" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "ml-4 space-y-3", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Service Providers:" }),
              " With trusted third-party vendors who assist in operating our platform (payment processors, cloud hosting providers, analytics services)."
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Business Partners:" }),
              " With parking facility owners and operators as necessary to provide services."
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Legal Requirements:" }),
              " When required by law, court order, or to protect our rights and safety."
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Business Transfers:" }),
              " In connection with a merger, acquisition, or sale of assets."
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Consent:" }),
              " When you have given explicit consent for specific sharing purposes."
            ] })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "5. Data Security" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4 text-slate-600", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { children: "We implement comprehensive security measures to protect your information:" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", { className: "list-disc list-inside ml-4 space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "End-to-end encryption for data transmission" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "Secure data storage with access controls" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "Regular security audits and vulnerability assessments" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "Multi-factor authentication for administrative access" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "Employee training on data protection best practices" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: "Incident response procedures for data breaches" })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "6. Data Retention" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-slate-600 leading-relaxed", children: "We retain your personal information for as long as necessary to provide our services and fulfill the purposes outlined in this policy. Parking transaction data is typically retained for 7 years for accounting and legal compliance purposes. Account information is retained until you request deletion or close your account." })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "7. Your Rights and Choices" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4 text-slate-600", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { children: "Depending on your location, you may have the following rights regarding your personal information:" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", { className: "list-disc list-inside ml-4 space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("li", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Access:" }),
              " Request access to your personal information we hold"
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("li", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Correction:" }),
              " Request correction of inaccurate or incomplete information"
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("li", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Deletion:" }),
              " Request deletion of your personal information"
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("li", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Portability:" }),
              " Request a copy of your data in a portable format"
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("li", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Restriction:" }),
              " Request restriction of processing in certain circumstances"
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("li", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Objection:" }),
              " Object to processing based on legitimate interests"
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "mt-4", children: "To exercise these rights, please contact us at privacy@parkflow.com" })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "8. Cookies and Tracking Technologies" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-slate-600 leading-relaxed", children: "We use cookies and similar tracking technologies to enhance your experience, analyze usage patterns, and improve our services. You can control cookie preferences through your browser settings, though some features may not function properly if cookies are disabled." })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "9. International Data Transfers" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-slate-600 leading-relaxed", children: "Your information may be transferred to and processed in countries other than your own. We ensure appropriate safeguards are in place to protect your information in accordance with applicable data protection laws." })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "10. Children's Privacy" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-slate-600 leading-relaxed", children: "Our services are not intended for individuals under 16 years of age. We do not knowingly collect personal information from children under 16. If we become aware that we have collected such information, we will take steps to delete it promptly." })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "11. Changes to This Privacy Policy" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-slate-600 leading-relaxed", children: 'We may update this Privacy Policy from time to time. We will notify you of any material changes by posting the new policy on our website and updating the "Last updated" date. We encourage you to review this policy periodically.' })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("section", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-semibold text-slate-800 mb-4", children: "12. Contact Us" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-slate-600 leading-relaxed mb-4", children: "If you have any questions about this Privacy Policy or our data practices, please contact us:" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "p-4 bg-slate-50 rounded-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-slate-700", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Privacy Officer:" }),
          " privacy@parkflow.com",
          /* @__PURE__ */ jsxRuntimeExports.jsx("br", {}),
          /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "General Inquiries:" }),
          " support@parkflow.com",
          /* @__PURE__ */ jsxRuntimeExports.jsx("br", {}),
          /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Address:" }),
          " ParkFlow Privacy Department",
          /* @__PURE__ */ jsxRuntimeExports.jsx("br", {}),
          "123 Smart Parking Ave, Tech City, TC 12345",
          /* @__PURE__ */ jsxRuntimeExports.jsx("br", {}),
          /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Phone:" }),
          " +1 (555) 123-PARK"
        ] }) })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "pt-8 border-t border-slate-200", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-sm text-slate-500 text-center", children: [
        "This Privacy Policy is effective as of ",
        (/* @__PURE__ */ new Date()).toLocaleDateString(),
        " and will remain in effect except with respect to any changes in its provisions in the future."
      ] }) })
    ] })
  ] }) }) });
}
function SuperAdminVerification() {
  const [otp, setOtp] = reactExports.useState("");
  const [loading, setLoading] = reactExports.useState(false);
  const [error, setError] = reactExports.useState("");
  const [attempts, setAttempts] = reactExports.useState(0);
  const navigate = useNavigate();
  const STATIC_OTP = "123456";
  const MAX_ATTEMPTS = 3;
  const verifyOTP = async (e) => {
    e.preventDefault();
    setLoading(true);
    setError("");
    try {
      if (otp.toUpperCase() === STATIC_OTP) {
        console.log("SuperAdminVerification: OTP is valid, navigating to superadminlogin");
        navigate("/superadminlogin");
      } else {
        const newAttempts = attempts + 1;
        setAttempts(newAttempts);
        if (newAttempts >= MAX_ATTEMPTS) {
          setError("Too many failed attempts. Redirecting to Role Selection...");
          setTimeout(() => {
            navigate("/");
          }, 2e3);
        } else {
          setError(`Invalid OTP. ${MAX_ATTEMPTS - newAttempts} attempts remaining.`);
        }
      }
    } catch (err) {
      setError("An error occurred during verification. Please try again.");
      console.error("OTP verification error:", err);
    }
    setLoading(false);
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 flex items-center justify-center p-4 relative overflow-hidden", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-gradient-to-br from-indigo-900/90 via-purple-900/80 to-pink-900/90" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-purple-600/20 via-transparent to-transparent" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-[radial-gradient(ellipse_at_bottom_left,_var(--tw-gradient-stops))] from-indigo-600/20 via-transparent to-transparent" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-pink-600/10 via-transparent to-transparent" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute top-20 left-20 w-72 h-72 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full blur-3xl animate-pulse" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute bottom-20 right-20 w-96 h-96 bg-gradient-to-r from-indigo-500/20 to-blue-500/20 rounded-full blur-3xl animate-pulse delay-1000" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-gradient-to-r from-pink-500/10 to-purple-500/10 rounded-full blur-3xl animate-pulse delay-500" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-full max-w-md relative z-10", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-white/10 backdrop-blur-xl border border-white/20 shadow-2xl rounded-3xl overflow-hidden", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-gradient-to-r from-purple-600 via-indigo-600 to-pink-600 p-6 text-white text-center relative", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 bg-gradient-to-r from-purple-600/80 via-indigo-600/80 to-pink-600/80" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative z-10", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-center space-x-3 mb-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center shadow-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Shield, { className: "w-5 h-5" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-bold", children: "Super Admin Verification" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-purple-100 text-sm", children: "Enter the 6-digit verification code to access Super Admin" })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "p-8 bg-white/5 backdrop-blur-sm", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("form", { onSubmit: verifyOTP, className: "space-y-6", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "otp", className: "text-white font-medium", children: "Verification Code" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "otp",
                type: "text",
                placeholder: "Enter 6-digit code",
                value: otp,
                onChange: (e) => setOtp(e.target.value.toUpperCase().replace(/[^A-Z0-9]/g, "").slice(0, 6)),
                required: true,
                className: "h-12 text-center text-lg tracking-widest bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-purple-400 focus:ring-purple-400 backdrop-blur-sm",
                maxLength: 6
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-white/60 text-center", children: "Enter the 6-character verification code" })
          ] }),
          error && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "p-3 bg-red-500/20 border border-red-400/30 rounded-lg backdrop-blur-sm", children: /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-red-200 text-sm", children: error }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Button,
            {
              type: "submit",
              className: "w-full h-12 bg-gradient-to-r from-purple-600 via-indigo-600 to-pink-600 hover:from-purple-700 hover:via-indigo-700 hover:to-pink-700 text-white font-semibold rounded-xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-[1.02]",
              disabled: loading || otp.length !== 6,
              children: loading ? "Verifying..." : "Verify & Continue"
            }
          )
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-center mt-6", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
          Button,
          {
            variant: "ghost",
            onClick: () => navigate("/"),
            className: "text-sm text-white/70 hover:text-white hover:bg-white/10",
            children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowLeft, { className: "h-4 w-4 mr-2" }),
              "Back to Role Selection"
            ]
          }
        ) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "mt-6 p-4 bg-yellow-500/20 border border-yellow-400/30 rounded-lg backdrop-blur-sm", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-xs text-yellow-200 text-center", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("strong", { children: "Development Mode:" }),
          " Use code ",
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "bg-yellow-500/30 px-1 rounded font-mono text-yellow-100", children: "123456" }),
          " for testing"
        ] }) })
      ] })
    ] }) })
  ] });
}
function OnboardingPage() {
  const { profile, updateProfile, user, signOut } = useAuth();
  useNavigate();
  const { toast: toast2 } = useToast();
  const [currentStep, setCurrentStep] = reactExports.useState(1);
  const [loading, setLoading] = reactExports.useState(false);
  const [showPassword, setShowPassword] = reactExports.useState(false);
  const [formData, setFormData] = reactExports.useState({
    newPassword: "",
    confirmPassword: "",
    acceptTerms: false,
    enableNotifications: true
  });
  const steps = [
    { id: 1, title: "Welcome", description: "Get started with ParkFlow" },
    { id: 2, title: "Security", description: "Set up your password" },
    { id: 3, title: "Preferences", description: "Configure your settings" },
    { id: 4, title: "Complete", description: "You're all set!" }
  ];
  const handlePasswordChange = async () => {
    if (formData.newPassword !== formData.confirmPassword) {
      toast2({
        variant: "destructive",
        title: "Password Mismatch",
        description: "Passwords do not match. Please try again."
      });
      return;
    }
    if (formData.newPassword.length < 8) {
      toast2({
        variant: "destructive",
        title: "Weak Password",
        description: "Password must be at least 8 characters long."
      });
      return;
    }
    setLoading(true);
    try {
      const { apiClient: apiClient2 } = await __vitePreload(async () => {
        const { apiClient: apiClient3 } = await Promise.resolve().then(() => apiClient$1);
        return { apiClient: apiClient3 };
      }, true ? void 0 : void 0);
      const { AuthAPI: AuthAPI2 } = await __vitePreload(async () => {
        const { AuthAPI: AuthAPI3 } = await Promise.resolve().then(() => authApi);
        return { AuthAPI: AuthAPI3 };
      }, true ? void 0 : void 0);
      if (!user?.id) throw new Error("User not authenticated");
      await apiClient2.post(`/profiles/updatePassword/${user.id}`, {
        newPassword: formData.newPassword
      });
      try {
        const updatedProfile = await AuthAPI2.fetchProfile();
        if (updatedProfile) {
          await updateProfile(updatedProfile);
          console.log("Profile refreshed after password update, is_first_login:", updatedProfile.is_first_login);
        }
      } catch (profileError) {
        console.error("Error refreshing profile:", profileError);
      }
      toast2({
        title: "Password Updated",
        description: "Your password has been successfully updated."
      });
      setCurrentStep(3);
    } catch (error) {
      console.error("Password update error:", error);
      toast2({
        variant: "destructive",
        title: "Error",
        description: "Failed to update password. Please try again."
      });
    } finally {
      setLoading(false);
    }
  };
  const handleCompleteOnboarding = async () => {
    setLoading(true);
    try {
      const { AuthAPI: AuthAPI2 } = await __vitePreload(async () => {
        const { AuthAPI: AuthAPI3 } = await Promise.resolve().then(() => authApi);
        return { AuthAPI: AuthAPI3 };
      }, true ? void 0 : void 0);
      toast2({
        title: "Setup Complete!",
        description: "Your account setup is complete. Please login with your new password."
      });
      if (profile?.role === "attendant" && user) {
        try {
          const { AttendantAPI: AttendantAPI2 } = await __vitePreload(async () => {
            const { AttendantAPI: AttendantAPI3 } = await Promise.resolve().then(() => attendantApi);
            return { AttendantAPI: AttendantAPI3 };
          }, true ? void 0 : void 0);
          await AttendantAPI2.updateDeviceFingerprint(user.id, "");
        } catch (error) {
          console.error("Failed to clear device fingerprint:", error);
        }
      }
      AuthAPI2.removeToken();
      setTimeout(() => {
        window.location.href = "/login";
      }, 500);
    } catch (error) {
      console.error("Onboarding completion error:", error);
      toast2({
        variant: "destructive",
        title: "Error",
        description: "Failed to complete setup. Please try again."
      });
    } finally {
      setLoading(false);
    }
  };
  const getRoleFeatures = () => {
    switch (profile?.role) {
      case "attendant":
        return [
          { icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Car, { className: "h-5 w-5" }), title: "Vehicle Check-in/out", description: "Manage vehicle entries and exits" },
          { icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Clock, { className: "h-5 w-5" }), title: "Real-time Monitoring", description: "Track parking status live" },
          { icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Shield, { className: "h-5 w-5" }), title: "Secure Access", description: "Role-based permissions" }
        ];
      case "contractor":
        return [
          { icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Users, { className: "h-5 w-5" }), title: "Team Management", description: "Manage your attendants and locations" },
          { icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Car, { className: "h-5 w-5" }), title: "Location Overview", description: "Monitor all your parking locations" },
          { icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Star, { className: "h-5 w-5" }), title: "Analytics", description: "Track performance and revenue" }
        ];
      case "super_admin":
        return [
          { icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Users, { className: "h-5 w-5" }), title: "User Management", description: "Manage all users and permissions" },
          { icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Shield, { className: "h-5 w-5" }), title: "System Control", description: "Full system administration" },
          { icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Star, { className: "h-5 w-5" }), title: "Analytics", description: "Comprehensive system insights" }
        ];
      default:
        return [];
    }
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 relative overflow-hidden", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "absolute inset-0 overflow-hidden", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute -top-40 -right-40 w-80 h-80 bg-purple-500/20 rounded-full blur-3xl animate-pulse" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500/20 rounded-full blur-3xl animate-pulse delay-1000" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse delay-500" })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "relative z-10 min-h-screen flex items-center justify-center p-4", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "w-full max-w-4xl", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "mb-8", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-center space-x-4", children: steps.map((step, index) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: `
                    w-10 h-10 rounded-full flex items-center justify-center text-sm font-semibold
                    ${currentStep >= step.id ? "bg-gradient-to-r from-purple-600 to-pink-600 text-white" : "bg-white/20 text-white/60"}
                  `, children: currentStep > step.id ? /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, { className: "h-5 w-5" }) : step.id }),
          index < steps.length - 1 && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: `w-16 h-1 mx-2 ${currentStep > step.id ? "bg-gradient-to-r from-purple-600 to-pink-600" : "bg-white/20"}` })
        ] }, step.id)) }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center mt-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl font-bold text-white", children: steps[currentStep - 1].title }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-white/80", children: steps[currentStep - 1].description })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { className: "bg-white/10 backdrop-blur-xl border border-white/20 shadow-2xl rounded-3xl", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "p-8", children: [
        currentStep === 1 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center space-y-6", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-20 h-20 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Star, { className: "h-10 w-10 text-white" }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("h3", { className: "text-3xl font-bold text-white mb-2", children: [
              "Welcome to ParkFlow, ",
              profile?.user_name,
              "!"
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-white/80 text-lg", children: [
              "You're now a ",
              /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "secondary", className: "ml-2", children: profile?.role?.toUpperCase() })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4 mt-8", children: getRoleFeatures().map((feature, index) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-white/10 rounded-xl p-4 text-center", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-purple-400 mb-2 flex justify-center", children: feature.icon }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("h4", { className: "text-white font-semibold mb-1", children: feature.title }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-white/70 text-sm", children: feature.description })
          ] }, index)) }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(
            Button,
            {
              onClick: () => setCurrentStep(2),
              className: "bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-8 py-3 rounded-xl",
              children: [
                "Get Started",
                /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowRight, { className: "ml-2 h-4 w-4" })
              ]
            }
          )
        ] }),
        currentStep === 2 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center mx-auto mb-4", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Shield, { className: "h-8 w-8 text-white" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-2xl font-bold text-white mb-2", children: "Set Up Your Password" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-white/80", children: "For security, please set a strong password for your account." })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "newPassword", className: "text-white font-medium", children: "New Password" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Input,
                  {
                    id: "newPassword",
                    type: showPassword ? "text" : "password",
                    value: formData.newPassword,
                    onChange: (e) => setFormData({ ...formData, newPassword: e.target.value }),
                    className: "bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-purple-400 focus:ring-purple-400 backdrop-blur-sm",
                    placeholder: "Enter your new password"
                  }
                ),
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Button,
                  {
                    type: "button",
                    variant: "ghost",
                    size: "sm",
                    className: "absolute right-2 top-1/2 transform -translate-y-1/2 text-white/60 hover:text-white hover:bg-white/10",
                    onClick: () => setShowPassword(!showPassword),
                    children: showPassword ? /* @__PURE__ */ jsxRuntimeExports.jsx(EyeOff, { className: "h-4 w-4" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Eye, { className: "h-4 w-4" })
                  }
                )
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "confirmPassword", className: "text-white font-medium", children: "Confirm Password" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Input,
                {
                  id: "confirmPassword",
                  type: "password",
                  value: formData.confirmPassword,
                  onChange: (e) => setFormData({ ...formData, confirmPassword: e.target.value }),
                  className: "bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-purple-400 focus:ring-purple-400 backdrop-blur-sm",
                  placeholder: "Confirm your new password"
                }
              )
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-blue-500/20 border border-blue-400/30 rounded-lg p-4", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("h4", { className: "text-blue-200 font-semibold mb-2", children: "Password Requirements:" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", { className: "text-blue-100 text-sm space-y-1", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: " At least 8 characters long" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: " Mix of letters, numbers, and symbols" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: " Avoid common words or personal info" })
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Button,
              {
                variant: "ghost",
                onClick: () => setCurrentStep(1),
                className: "text-white/70 hover:text-white hover:bg-white/10",
                children: "Back"
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Button,
              {
                onClick: handlePasswordChange,
                disabled: loading || !formData.newPassword || !formData.confirmPassword,
                className: "bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white",
                children: loading ? "Updating..." : "Update Password"
              }
            )
          ] })
        ] }),
        currentStep === 3 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full flex items-center justify-center mx-auto mb-4", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Users, { className: "h-8 w-8 text-white" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-2xl font-bold text-white mb-2", children: "Configure Your Preferences" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-white/80", children: "Set up your account preferences for the best experience." })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Checkbox,
                {
                  id: "acceptTerms",
                  checked: formData.acceptTerms,
                  onCheckedChange: (checked) => setFormData({ ...formData, acceptTerms: checked }),
                  className: "border-white/30 data-[state=checked]:bg-purple-500 data-[state=checked]:border-purple-500"
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "acceptTerms", className: "text-white/80", children: "I accept the Terms of Service and Privacy Policy" })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Checkbox,
                {
                  id: "enableNotifications",
                  checked: formData.enableNotifications,
                  onCheckedChange: (checked) => setFormData({ ...formData, enableNotifications: checked }),
                  className: "border-white/30 data-[state=checked]:bg-purple-500 data-[state=checked]:border-purple-500"
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "enableNotifications", className: "text-white/80", children: "Enable notifications for important updates" })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Button,
              {
                variant: "ghost",
                onClick: () => setCurrentStep(2),
                className: "text-white/70 hover:text-white hover:bg-white/10",
                children: "Back"
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Button,
              {
                onClick: () => setCurrentStep(4),
                disabled: !formData.acceptTerms,
                className: "bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white",
                children: "Continue"
              }
            )
          ] })
        ] }),
        currentStep === 4 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center space-y-6", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-20 h-20 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center mx-auto", children: /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, { className: "h-10 w-10 text-white" }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-3xl font-bold text-white mb-2", children: "Setup Complete!" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-white/80 text-lg", children: "Your account is ready. Welcome to ParkFlow!" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-green-500/20 border border-green-400/30 rounded-lg p-4", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h4", { className: "text-green-200 font-semibold mb-2", children: "What's Next?" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", { className: "text-green-100 text-sm space-y-1", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: " Explore your personalized dashboard" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: " Complete your profile information" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: " Start using ParkFlow features" })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(
            Button,
            {
              onClick: handleCompleteOnboarding,
              disabled: loading,
              className: "bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white px-8 py-3 rounded-xl",
              children: [
                loading ? "Completing..." : "Go to Dashboard",
                /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowRight, { className: "ml-2 h-4 w-4" })
              ]
            }
          )
        ] })
      ] }) })
    ] }) })
  ] });
}
class SuperAdminAPI {
  // Get Dashboard Statistics
  static async getDashboardStats() {
    try {
      const { DashboardAPI } = await __vitePreload(async () => {
        const { DashboardAPI: DashboardAPI2 } = await import("./dashboardApi-BfrJzdLB.js");
        return { DashboardAPI: DashboardAPI2 };
      }, true ? __vite__mapDeps([0,1,2,3,4]) : void 0);
      const metrics = await DashboardAPI.getDashboardMetrics();
      return {
        totalContractors: metrics.totalContractors,
        totalLocations: metrics.totalLocations,
        totalAttendants: metrics.activeAttendants,
        totalVehicles: metrics.totalVehicles,
        totalRevenue: metrics.totalRevenue,
        todayRevenue: metrics.dailyRevenue,
        monthlyRevenue: metrics.monthlyRevenue,
        todayVehicles: 0,
        // TODO: Get from vehicle stats if needed
        monthlyVehicles: 0
        // TODO: Get from vehicle stats if needed
      };
    } catch (error) {
      console.error("Error fetching dashboard stats:", error);
      return {
        totalContractors: 0,
        totalLocations: 0,
        totalAttendants: 0,
        totalVehicles: 0,
        totalRevenue: 0,
        todayRevenue: 0,
        monthlyRevenue: 0,
        todayVehicles: 0,
        monthlyVehicles: 0
      };
    }
  }
  // Get day-wise revenue for super admin dashboard
  static async getDayWiseRevenue(days = 30) {
    try {
      const { DashboardAPI } = await __vitePreload(async () => {
        const { DashboardAPI: DashboardAPI2 } = await import("./dashboardApi-BfrJzdLB.js");
        return { DashboardAPI: DashboardAPI2 };
      }, true ? __vite__mapDeps([0,1,2,3,4]) : void 0);
      return await DashboardAPI.getDayWiseRevenue(days);
    } catch (error) {
      console.error("Error fetching day-wise revenue:", error);
      return {};
    }
  }
  // Contractor Management
  static async getAllContractors() {
    const { ContractorAPI: ContractorAPI2 } = await __vitePreload(async () => {
      const { ContractorAPI: ContractorAPI3 } = await Promise.resolve().then(() => contractorApi);
      return { ContractorAPI: ContractorAPI3 };
    }, true ? void 0 : void 0);
    return await ContractorAPI2.getAllContractors();
  }
  // Get paginated contractors with search
  static async getPaginatedContractors(params = {}) {
    const { ContractorAPI: ContractorAPI2 } = await __vitePreload(async () => {
      const { ContractorAPI: ContractorAPI3 } = await Promise.resolve().then(() => contractorApi);
      return { ContractorAPI: ContractorAPI3 };
    }, true ? void 0 : void 0);
    return await ContractorAPI2.getContractorsPaginated(params);
  }
  static async createContractor(contractorData) {
    const response = await apiClient.post("/contractors", {
      user_name: contractorData.user_name,
      email: contractorData.email,
      password: contractorData.password || "TempPassword123!",
      phone_number: contractorData.phone_number,
      company_name: contractorData.company_name,
      contact_number: contractorData.contact_number,
      allowed_locations: contractorData.allowed_locations,
      allowed_attendants_per_location: contractorData.allowed_attendants_per_location,
      status: contractorData.status || "active",
      rates_2wheeler: contractorData.rates_2wheeler,
      rates_4wheeler: contractorData.rates_4wheeler
    });
    return response.data;
  }
  static async updateContractor(contractorId, updateData) {
    const response = await apiClient.post(`/contractors/update/${contractorId}`, updateData);
    return response.data;
  }
  static async deleteContractor(contractorId) {
    await apiClient.get(`/contractors/delete/${contractorId}`);
  }
  // Get system analytics for dashboard
  static async getSystemAnalytics() {
    try {
      const { DashboardAPI } = await __vitePreload(async () => {
        const { DashboardAPI: DashboardAPI2 } = await import("./dashboardApi-BfrJzdLB.js");
        return { DashboardAPI: DashboardAPI2 };
      }, true ? __vite__mapDeps([0,1,2,3,4]) : void 0);
      const analytics = await DashboardAPI.getSystemAnalytics();
      return analytics;
    } catch (error) {
      console.error("Error fetching system analytics:", error);
      return {
        today: { vehicles: 0, revenue: 0 },
        yesterday: { vehicles: 0, revenue: 0 },
        thisMonth: { vehicles: 0, revenue: 0 },
        lastMonth: { vehicles: 0, revenue: 0 }
      };
    }
  }
  // Get all locations
  static async getAllLocations() {
    const { LocationAPI: LocationAPI2 } = await __vitePreload(async () => {
      const { LocationAPI: LocationAPI3 } = await Promise.resolve().then(() => locationApi);
      return { LocationAPI: LocationAPI3 };
    }, true ? void 0 : void 0);
    return await LocationAPI2.getAllLocations();
  }
  // Create location (Super Admin only)
  static async createLocation(data) {
    const response = await apiClient.post("/locations", {
      locations_name: data.locations_name,
      address: data.address,
      city: data.city,
      state: data.state,
      pincode: data.pincode,
      total_slots: data.total_slots,
      contractor_id: data.contractor_id,
      status: data.status || "active"
    });
    return response.data;
  }
  // Update location (Super Admin only)
  static async updateLocation(locationId, updateData) {
    const response = await apiClient.post(`/locations/update/${locationId}`, updateData);
    return response.data;
  }
  // Delete location (Super Admin only)
  static async deleteLocation(locationId) {
    await apiClient.get(`/locations/delete/${locationId}`);
  }
  // Get all attendants
  static async getAllAttendants() {
    const { AttendantAPI: AttendantAPI2 } = await __vitePreload(async () => {
      const { AttendantAPI: AttendantAPI3 } = await Promise.resolve().then(() => attendantApi);
      return { AttendantAPI: AttendantAPI3 };
    }, true ? void 0 : void 0);
    return await AttendantAPI2.getAllAttendants();
  }
  // Create attendant (Super Admin only)
  static async createAttendant(data) {
    const response = await apiClient.post("/attendants", {
      user_name: data.user_name,
      email: data.email,
      password: data.password || "TempPassword123!",
      phone_number: data.phone_number,
      location_id: data.location_id,
      contractor_id: data.contractor_id,
      status: data.status || "active"
    });
    return response.data;
  }
  // Update attendant (Super Admin only)
  static async updateAttendant(attendantId, updateData) {
    const response = await apiClient.post(`/attendants/update/${attendantId}`, updateData);
    return response.data;
  }
  // Delete attendant (Super Admin only)
  static async deleteAttendant(attendantId) {
    await apiClient.get(`/attendants/delete/${attendantId}`);
  }
}
function MetricCard({ title, value, description: description2, icon: Icon2, trend, variant = "default" }) {
  const variantStyles = {
    default: "bg-gradient-to-br from-slate-50 to-slate-100 border-slate-200",
    success: "bg-gradient-to-br from-green-50 to-green-100 border-green-200",
    warning: "bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200",
    danger: "bg-gradient-to-br from-red-50 to-red-100 border-red-200",
    info: "bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200"
  };
  const iconStyles = {
    default: "text-slate-600",
    success: "text-green-600",
    warning: "text-yellow-600",
    danger: "text-red-600",
    info: "text-blue-600"
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: `${variantStyles[variant]} hover:shadow-lg transition-all duration-200 rounded-xl border-2 hover:scale-105`, children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2 sm:pb-3", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { className: "text-xs sm:text-sm font-semibold text-slate-700", children: title }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: `p-1.5 sm:p-2 rounded-lg ${variantStyles[variant]}`, children: /* @__PURE__ */ jsxRuntimeExports.jsx(Icon2, { className: `h-4 w-4 sm:h-5 sm:w-5 ${iconStyles[variant]}` }) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "pt-0", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-2xl sm:text-3xl font-bold text-slate-900 mb-1 sm:mb-2", children: value }),
      description2 && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs sm:text-sm text-slate-600 mb-1 sm:mb-2", children: description2 }),
      trend && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-1 sm:space-x-2 text-xs sm:text-sm", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: `font-medium ${trend.value >= 0 ? "text-green-600" : "text-red-600"}`, children: [
          trend.value >= 0 ? "+" : "",
          trend.value,
          "%"
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-slate-500", children: trend.label })
      ] })
    ] })
  ] });
}
function useStateMachine(initialState, machine) {
  return reactExports.useReducer((state, event) => {
    const nextState = machine[state][event];
    return nextState ?? state;
  }, initialState);
}
var SCROLL_AREA_NAME = "ScrollArea";
var [createScrollAreaContext, createScrollAreaScope] = createContextScope(SCROLL_AREA_NAME);
var [ScrollAreaProvider, useScrollAreaContext] = createScrollAreaContext(SCROLL_AREA_NAME);
var ScrollArea$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const {
      __scopeScrollArea,
      type: type2 = "hover",
      dir,
      scrollHideDelay = 600,
      ...scrollAreaProps
    } = props;
    const [scrollArea, setScrollArea] = reactExports.useState(null);
    const [viewport, setViewport] = reactExports.useState(null);
    const [content, setContent] = reactExports.useState(null);
    const [scrollbarX, setScrollbarX] = reactExports.useState(null);
    const [scrollbarY, setScrollbarY] = reactExports.useState(null);
    const [cornerWidth, setCornerWidth] = reactExports.useState(0);
    const [cornerHeight, setCornerHeight] = reactExports.useState(0);
    const [scrollbarXEnabled, setScrollbarXEnabled] = reactExports.useState(false);
    const [scrollbarYEnabled, setScrollbarYEnabled] = reactExports.useState(false);
    const composedRefs = useComposedRefs(forwardedRef, (node) => setScrollArea(node));
    const direction = useDirection(dir);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      ScrollAreaProvider,
      {
        scope: __scopeScrollArea,
        type: type2,
        dir: direction,
        scrollHideDelay,
        scrollArea,
        viewport,
        onViewportChange: setViewport,
        content,
        onContentChange: setContent,
        scrollbarX,
        onScrollbarXChange: setScrollbarX,
        scrollbarXEnabled,
        onScrollbarXEnabledChange: setScrollbarXEnabled,
        scrollbarY,
        onScrollbarYChange: setScrollbarY,
        scrollbarYEnabled,
        onScrollbarYEnabledChange: setScrollbarYEnabled,
        onCornerWidthChange: setCornerWidth,
        onCornerHeightChange: setCornerHeight,
        children: /* @__PURE__ */ jsxRuntimeExports.jsx(
          Primitive.div,
          {
            dir: direction,
            ...scrollAreaProps,
            ref: composedRefs,
            style: {
              position: "relative",
              // Pass corner sizes as CSS vars to reduce re-renders of context consumers
              ["--radix-scroll-area-corner-width"]: cornerWidth + "px",
              ["--radix-scroll-area-corner-height"]: cornerHeight + "px",
              ...props.style
            }
          }
        )
      }
    );
  }
);
ScrollArea$1.displayName = SCROLL_AREA_NAME;
var VIEWPORT_NAME = "ScrollAreaViewport";
var ScrollAreaViewport = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeScrollArea, children, nonce, ...viewportProps } = props;
    const context = useScrollAreaContext(VIEWPORT_NAME, __scopeScrollArea);
    const ref = reactExports.useRef(null);
    const composedRefs = useComposedRefs(forwardedRef, ref, context.onViewportChange);
    return /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        "style",
        {
          dangerouslySetInnerHTML: {
            __html: `[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}`
          },
          nonce
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        Primitive.div,
        {
          "data-radix-scroll-area-viewport": "",
          ...viewportProps,
          ref: composedRefs,
          style: {
            /**
             * We don't support `visible` because the intention is to have at least one scrollbar
             * if this component is used and `visible` will behave like `auto` in that case
             * https://developer.mozilla.org/en-US/docs/Web/CSS/overflow#description
             *
             * We don't handle `auto` because the intention is for the native implementation
             * to be hidden if using this component. We just want to ensure the node is scrollable
             * so could have used either `scroll` or `auto` here. We picked `scroll` to prevent
             * the browser from having to work out whether to render native scrollbars or not,
             * we tell it to with the intention of hiding them in CSS.
             */
            overflowX: context.scrollbarXEnabled ? "scroll" : "hidden",
            overflowY: context.scrollbarYEnabled ? "scroll" : "hidden",
            ...props.style
          },
          children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { ref: context.onContentChange, style: { minWidth: "100%", display: "table" }, children })
        }
      )
    ] });
  }
);
ScrollAreaViewport.displayName = VIEWPORT_NAME;
var SCROLLBAR_NAME = "ScrollAreaScrollbar";
var ScrollAreaScrollbar = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { forceMount, ...scrollbarProps } = props;
    const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);
    const { onScrollbarXEnabledChange, onScrollbarYEnabledChange } = context;
    const isHorizontal = props.orientation === "horizontal";
    reactExports.useEffect(() => {
      isHorizontal ? onScrollbarXEnabledChange(true) : onScrollbarYEnabledChange(true);
      return () => {
        isHorizontal ? onScrollbarXEnabledChange(false) : onScrollbarYEnabledChange(false);
      };
    }, [isHorizontal, onScrollbarXEnabledChange, onScrollbarYEnabledChange]);
    return context.type === "hover" ? /* @__PURE__ */ jsxRuntimeExports.jsx(ScrollAreaScrollbarHover, { ...scrollbarProps, ref: forwardedRef, forceMount }) : context.type === "scroll" ? /* @__PURE__ */ jsxRuntimeExports.jsx(ScrollAreaScrollbarScroll, { ...scrollbarProps, ref: forwardedRef, forceMount }) : context.type === "auto" ? /* @__PURE__ */ jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto, { ...scrollbarProps, ref: forwardedRef, forceMount }) : context.type === "always" ? /* @__PURE__ */ jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible, { ...scrollbarProps, ref: forwardedRef }) : null;
  }
);
ScrollAreaScrollbar.displayName = SCROLLBAR_NAME;
var ScrollAreaScrollbarHover = reactExports.forwardRef((props, forwardedRef) => {
  const { forceMount, ...scrollbarProps } = props;
  const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);
  const [visible, setVisible] = reactExports.useState(false);
  reactExports.useEffect(() => {
    const scrollArea = context.scrollArea;
    let hideTimer = 0;
    if (scrollArea) {
      const handlePointerEnter = () => {
        window.clearTimeout(hideTimer);
        setVisible(true);
      };
      const handlePointerLeave = () => {
        hideTimer = window.setTimeout(() => setVisible(false), context.scrollHideDelay);
      };
      scrollArea.addEventListener("pointerenter", handlePointerEnter);
      scrollArea.addEventListener("pointerleave", handlePointerLeave);
      return () => {
        window.clearTimeout(hideTimer);
        scrollArea.removeEventListener("pointerenter", handlePointerEnter);
        scrollArea.removeEventListener("pointerleave", handlePointerLeave);
      };
    }
  }, [context.scrollArea, context.scrollHideDelay]);
  return /* @__PURE__ */ jsxRuntimeExports.jsx(Presence, { present: forceMount || visible, children: /* @__PURE__ */ jsxRuntimeExports.jsx(
    ScrollAreaScrollbarAuto,
    {
      "data-state": visible ? "visible" : "hidden",
      ...scrollbarProps,
      ref: forwardedRef
    }
  ) });
});
var ScrollAreaScrollbarScroll = reactExports.forwardRef((props, forwardedRef) => {
  const { forceMount, ...scrollbarProps } = props;
  const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);
  const isHorizontal = props.orientation === "horizontal";
  const debounceScrollEnd = useDebounceCallback(() => send2("SCROLL_END"), 100);
  const [state, send2] = useStateMachine("hidden", {
    hidden: {
      SCROLL: "scrolling"
    },
    scrolling: {
      SCROLL_END: "idle",
      POINTER_ENTER: "interacting"
    },
    interacting: {
      SCROLL: "interacting",
      POINTER_LEAVE: "idle"
    },
    idle: {
      HIDE: "hidden",
      SCROLL: "scrolling",
      POINTER_ENTER: "interacting"
    }
  });
  reactExports.useEffect(() => {
    if (state === "idle") {
      const hideTimer = window.setTimeout(() => send2("HIDE"), context.scrollHideDelay);
      return () => window.clearTimeout(hideTimer);
    }
  }, [state, context.scrollHideDelay, send2]);
  reactExports.useEffect(() => {
    const viewport = context.viewport;
    const scrollDirection = isHorizontal ? "scrollLeft" : "scrollTop";
    if (viewport) {
      let prevScrollPos = viewport[scrollDirection];
      const handleScroll = () => {
        const scrollPos = viewport[scrollDirection];
        const hasScrollInDirectionChanged = prevScrollPos !== scrollPos;
        if (hasScrollInDirectionChanged) {
          send2("SCROLL");
          debounceScrollEnd();
        }
        prevScrollPos = scrollPos;
      };
      viewport.addEventListener("scroll", handleScroll);
      return () => viewport.removeEventListener("scroll", handleScroll);
    }
  }, [context.viewport, isHorizontal, send2, debounceScrollEnd]);
  return /* @__PURE__ */ jsxRuntimeExports.jsx(Presence, { present: forceMount || state !== "hidden", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
    ScrollAreaScrollbarVisible,
    {
      "data-state": state === "hidden" ? "hidden" : "visible",
      ...scrollbarProps,
      ref: forwardedRef,
      onPointerEnter: composeEventHandlers(props.onPointerEnter, () => send2("POINTER_ENTER")),
      onPointerLeave: composeEventHandlers(props.onPointerLeave, () => send2("POINTER_LEAVE"))
    }
  ) });
});
var ScrollAreaScrollbarAuto = reactExports.forwardRef((props, forwardedRef) => {
  const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);
  const { forceMount, ...scrollbarProps } = props;
  const [visible, setVisible] = reactExports.useState(false);
  const isHorizontal = props.orientation === "horizontal";
  const handleResize = useDebounceCallback(() => {
    if (context.viewport) {
      const isOverflowX = context.viewport.offsetWidth < context.viewport.scrollWidth;
      const isOverflowY = context.viewport.offsetHeight < context.viewport.scrollHeight;
      setVisible(isHorizontal ? isOverflowX : isOverflowY);
    }
  }, 10);
  useResizeObserver(context.viewport, handleResize);
  useResizeObserver(context.content, handleResize);
  return /* @__PURE__ */ jsxRuntimeExports.jsx(Presence, { present: forceMount || visible, children: /* @__PURE__ */ jsxRuntimeExports.jsx(
    ScrollAreaScrollbarVisible,
    {
      "data-state": visible ? "visible" : "hidden",
      ...scrollbarProps,
      ref: forwardedRef
    }
  ) });
});
var ScrollAreaScrollbarVisible = reactExports.forwardRef((props, forwardedRef) => {
  const { orientation = "vertical", ...scrollbarProps } = props;
  const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);
  const thumbRef = reactExports.useRef(null);
  const pointerOffsetRef = reactExports.useRef(0);
  const [sizes, setSizes] = reactExports.useState({
    content: 0,
    viewport: 0,
    scrollbar: { size: 0, paddingStart: 0, paddingEnd: 0 }
  });
  const thumbRatio = getThumbRatio(sizes.viewport, sizes.content);
  const commonProps = {
    ...scrollbarProps,
    sizes,
    onSizesChange: setSizes,
    hasThumb: Boolean(thumbRatio > 0 && thumbRatio < 1),
    onThumbChange: (thumb) => thumbRef.current = thumb,
    onThumbPointerUp: () => pointerOffsetRef.current = 0,
    onThumbPointerDown: (pointerPos) => pointerOffsetRef.current = pointerPos
  };
  function getScrollPosition(pointerPos, dir) {
    return getScrollPositionFromPointer(pointerPos, pointerOffsetRef.current, sizes, dir);
  }
  if (orientation === "horizontal") {
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      ScrollAreaScrollbarX,
      {
        ...commonProps,
        ref: forwardedRef,
        onThumbPositionChange: () => {
          if (context.viewport && thumbRef.current) {
            const scrollPos = context.viewport.scrollLeft;
            const offset = getThumbOffsetFromScroll(scrollPos, sizes, context.dir);
            thumbRef.current.style.transform = `translate3d(${offset}px, 0, 0)`;
          }
        },
        onWheelScroll: (scrollPos) => {
          if (context.viewport) context.viewport.scrollLeft = scrollPos;
        },
        onDragScroll: (pointerPos) => {
          if (context.viewport) {
            context.viewport.scrollLeft = getScrollPosition(pointerPos, context.dir);
          }
        }
      }
    );
  }
  if (orientation === "vertical") {
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      ScrollAreaScrollbarY,
      {
        ...commonProps,
        ref: forwardedRef,
        onThumbPositionChange: () => {
          if (context.viewport && thumbRef.current) {
            const scrollPos = context.viewport.scrollTop;
            const offset = getThumbOffsetFromScroll(scrollPos, sizes);
            thumbRef.current.style.transform = `translate3d(0, ${offset}px, 0)`;
          }
        },
        onWheelScroll: (scrollPos) => {
          if (context.viewport) context.viewport.scrollTop = scrollPos;
        },
        onDragScroll: (pointerPos) => {
          if (context.viewport) context.viewport.scrollTop = getScrollPosition(pointerPos);
        }
      }
    );
  }
  return null;
});
var ScrollAreaScrollbarX = reactExports.forwardRef((props, forwardedRef) => {
  const { sizes, onSizesChange, ...scrollbarProps } = props;
  const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);
  const [computedStyle, setComputedStyle] = reactExports.useState();
  const ref = reactExports.useRef(null);
  const composeRefs2 = useComposedRefs(forwardedRef, ref, context.onScrollbarXChange);
  reactExports.useEffect(() => {
    if (ref.current) setComputedStyle(getComputedStyle(ref.current));
  }, [ref]);
  return /* @__PURE__ */ jsxRuntimeExports.jsx(
    ScrollAreaScrollbarImpl,
    {
      "data-orientation": "horizontal",
      ...scrollbarProps,
      ref: composeRefs2,
      sizes,
      style: {
        bottom: 0,
        left: context.dir === "rtl" ? "var(--radix-scroll-area-corner-width)" : 0,
        right: context.dir === "ltr" ? "var(--radix-scroll-area-corner-width)" : 0,
        ["--radix-scroll-area-thumb-width"]: getThumbSize(sizes) + "px",
        ...props.style
      },
      onThumbPointerDown: (pointerPos) => props.onThumbPointerDown(pointerPos.x),
      onDragScroll: (pointerPos) => props.onDragScroll(pointerPos.x),
      onWheelScroll: (event, maxScrollPos) => {
        if (context.viewport) {
          const scrollPos = context.viewport.scrollLeft + event.deltaX;
          props.onWheelScroll(scrollPos);
          if (isScrollingWithinScrollbarBounds(scrollPos, maxScrollPos)) {
            event.preventDefault();
          }
        }
      },
      onResize: () => {
        if (ref.current && context.viewport && computedStyle) {
          onSizesChange({
            content: context.viewport.scrollWidth,
            viewport: context.viewport.offsetWidth,
            scrollbar: {
              size: ref.current.clientWidth,
              paddingStart: toInt(computedStyle.paddingLeft),
              paddingEnd: toInt(computedStyle.paddingRight)
            }
          });
        }
      }
    }
  );
});
var ScrollAreaScrollbarY = reactExports.forwardRef((props, forwardedRef) => {
  const { sizes, onSizesChange, ...scrollbarProps } = props;
  const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);
  const [computedStyle, setComputedStyle] = reactExports.useState();
  const ref = reactExports.useRef(null);
  const composeRefs2 = useComposedRefs(forwardedRef, ref, context.onScrollbarYChange);
  reactExports.useEffect(() => {
    if (ref.current) setComputedStyle(getComputedStyle(ref.current));
  }, [ref]);
  return /* @__PURE__ */ jsxRuntimeExports.jsx(
    ScrollAreaScrollbarImpl,
    {
      "data-orientation": "vertical",
      ...scrollbarProps,
      ref: composeRefs2,
      sizes,
      style: {
        top: 0,
        right: context.dir === "ltr" ? 0 : void 0,
        left: context.dir === "rtl" ? 0 : void 0,
        bottom: "var(--radix-scroll-area-corner-height)",
        ["--radix-scroll-area-thumb-height"]: getThumbSize(sizes) + "px",
        ...props.style
      },
      onThumbPointerDown: (pointerPos) => props.onThumbPointerDown(pointerPos.y),
      onDragScroll: (pointerPos) => props.onDragScroll(pointerPos.y),
      onWheelScroll: (event, maxScrollPos) => {
        if (context.viewport) {
          const scrollPos = context.viewport.scrollTop + event.deltaY;
          props.onWheelScroll(scrollPos);
          if (isScrollingWithinScrollbarBounds(scrollPos, maxScrollPos)) {
            event.preventDefault();
          }
        }
      },
      onResize: () => {
        if (ref.current && context.viewport && computedStyle) {
          onSizesChange({
            content: context.viewport.scrollHeight,
            viewport: context.viewport.offsetHeight,
            scrollbar: {
              size: ref.current.clientHeight,
              paddingStart: toInt(computedStyle.paddingTop),
              paddingEnd: toInt(computedStyle.paddingBottom)
            }
          });
        }
      }
    }
  );
});
var [ScrollbarProvider, useScrollbarContext] = createScrollAreaContext(SCROLLBAR_NAME);
var ScrollAreaScrollbarImpl = reactExports.forwardRef((props, forwardedRef) => {
  const {
    __scopeScrollArea,
    sizes,
    hasThumb,
    onThumbChange,
    onThumbPointerUp,
    onThumbPointerDown,
    onThumbPositionChange,
    onDragScroll,
    onWheelScroll,
    onResize,
    ...scrollbarProps
  } = props;
  const context = useScrollAreaContext(SCROLLBAR_NAME, __scopeScrollArea);
  const [scrollbar, setScrollbar] = reactExports.useState(null);
  const composeRefs2 = useComposedRefs(forwardedRef, (node) => setScrollbar(node));
  const rectRef = reactExports.useRef(null);
  const prevWebkitUserSelectRef = reactExports.useRef("");
  const viewport = context.viewport;
  const maxScrollPos = sizes.content - sizes.viewport;
  const handleWheelScroll = useCallbackRef(onWheelScroll);
  const handleThumbPositionChange = useCallbackRef(onThumbPositionChange);
  const handleResize = useDebounceCallback(onResize, 10);
  function handleDragScroll(event) {
    if (rectRef.current) {
      const x = event.clientX - rectRef.current.left;
      const y = event.clientY - rectRef.current.top;
      onDragScroll({ x, y });
    }
  }
  reactExports.useEffect(() => {
    const handleWheel = (event) => {
      const element = event.target;
      const isScrollbarWheel = scrollbar?.contains(element);
      if (isScrollbarWheel) handleWheelScroll(event, maxScrollPos);
    };
    document.addEventListener("wheel", handleWheel, { passive: false });
    return () => document.removeEventListener("wheel", handleWheel, { passive: false });
  }, [viewport, scrollbar, maxScrollPos, handleWheelScroll]);
  reactExports.useEffect(handleThumbPositionChange, [sizes, handleThumbPositionChange]);
  useResizeObserver(scrollbar, handleResize);
  useResizeObserver(context.content, handleResize);
  return /* @__PURE__ */ jsxRuntimeExports.jsx(
    ScrollbarProvider,
    {
      scope: __scopeScrollArea,
      scrollbar,
      hasThumb,
      onThumbChange: useCallbackRef(onThumbChange),
      onThumbPointerUp: useCallbackRef(onThumbPointerUp),
      onThumbPositionChange: handleThumbPositionChange,
      onThumbPointerDown: useCallbackRef(onThumbPointerDown),
      children: /* @__PURE__ */ jsxRuntimeExports.jsx(
        Primitive.div,
        {
          ...scrollbarProps,
          ref: composeRefs2,
          style: { position: "absolute", ...scrollbarProps.style },
          onPointerDown: composeEventHandlers(props.onPointerDown, (event) => {
            const mainPointer = 0;
            if (event.button === mainPointer) {
              const element = event.target;
              element.setPointerCapture(event.pointerId);
              rectRef.current = scrollbar.getBoundingClientRect();
              prevWebkitUserSelectRef.current = document.body.style.webkitUserSelect;
              document.body.style.webkitUserSelect = "none";
              if (context.viewport) context.viewport.style.scrollBehavior = "auto";
              handleDragScroll(event);
            }
          }),
          onPointerMove: composeEventHandlers(props.onPointerMove, handleDragScroll),
          onPointerUp: composeEventHandlers(props.onPointerUp, (event) => {
            const element = event.target;
            if (element.hasPointerCapture(event.pointerId)) {
              element.releasePointerCapture(event.pointerId);
            }
            document.body.style.webkitUserSelect = prevWebkitUserSelectRef.current;
            if (context.viewport) context.viewport.style.scrollBehavior = "";
            rectRef.current = null;
          })
        }
      )
    }
  );
});
var THUMB_NAME = "ScrollAreaThumb";
var ScrollAreaThumb = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { forceMount, ...thumbProps } = props;
    const scrollbarContext = useScrollbarContext(THUMB_NAME, props.__scopeScrollArea);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(Presence, { present: forceMount || scrollbarContext.hasThumb, children: /* @__PURE__ */ jsxRuntimeExports.jsx(ScrollAreaThumbImpl, { ref: forwardedRef, ...thumbProps }) });
  }
);
var ScrollAreaThumbImpl = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeScrollArea, style, ...thumbProps } = props;
    const scrollAreaContext = useScrollAreaContext(THUMB_NAME, __scopeScrollArea);
    const scrollbarContext = useScrollbarContext(THUMB_NAME, __scopeScrollArea);
    const { onThumbPositionChange } = scrollbarContext;
    const composedRef = useComposedRefs(
      forwardedRef,
      (node) => scrollbarContext.onThumbChange(node)
    );
    const removeUnlinkedScrollListenerRef = reactExports.useRef(void 0);
    const debounceScrollEnd = useDebounceCallback(() => {
      if (removeUnlinkedScrollListenerRef.current) {
        removeUnlinkedScrollListenerRef.current();
        removeUnlinkedScrollListenerRef.current = void 0;
      }
    }, 100);
    reactExports.useEffect(() => {
      const viewport = scrollAreaContext.viewport;
      if (viewport) {
        const handleScroll = () => {
          debounceScrollEnd();
          if (!removeUnlinkedScrollListenerRef.current) {
            const listener = addUnlinkedScrollListener(viewport, onThumbPositionChange);
            removeUnlinkedScrollListenerRef.current = listener;
            onThumbPositionChange();
          }
        };
        onThumbPositionChange();
        viewport.addEventListener("scroll", handleScroll);
        return () => viewport.removeEventListener("scroll", handleScroll);
      }
    }, [scrollAreaContext.viewport, debounceScrollEnd, onThumbPositionChange]);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      Primitive.div,
      {
        "data-state": scrollbarContext.hasThumb ? "visible" : "hidden",
        ...thumbProps,
        ref: composedRef,
        style: {
          width: "var(--radix-scroll-area-thumb-width)",
          height: "var(--radix-scroll-area-thumb-height)",
          ...style
        },
        onPointerDownCapture: composeEventHandlers(props.onPointerDownCapture, (event) => {
          const thumb = event.target;
          const thumbRect = thumb.getBoundingClientRect();
          const x = event.clientX - thumbRect.left;
          const y = event.clientY - thumbRect.top;
          scrollbarContext.onThumbPointerDown({ x, y });
        }),
        onPointerUp: composeEventHandlers(props.onPointerUp, scrollbarContext.onThumbPointerUp)
      }
    );
  }
);
ScrollAreaThumb.displayName = THUMB_NAME;
var CORNER_NAME = "ScrollAreaCorner";
var ScrollAreaCorner = reactExports.forwardRef(
  (props, forwardedRef) => {
    const context = useScrollAreaContext(CORNER_NAME, props.__scopeScrollArea);
    const hasBothScrollbarsVisible = Boolean(context.scrollbarX && context.scrollbarY);
    const hasCorner = context.type !== "scroll" && hasBothScrollbarsVisible;
    return hasCorner ? /* @__PURE__ */ jsxRuntimeExports.jsx(ScrollAreaCornerImpl, { ...props, ref: forwardedRef }) : null;
  }
);
ScrollAreaCorner.displayName = CORNER_NAME;
var ScrollAreaCornerImpl = reactExports.forwardRef((props, forwardedRef) => {
  const { __scopeScrollArea, ...cornerProps } = props;
  const context = useScrollAreaContext(CORNER_NAME, __scopeScrollArea);
  const [width, setWidth] = reactExports.useState(0);
  const [height, setHeight] = reactExports.useState(0);
  const hasSize = Boolean(width && height);
  useResizeObserver(context.scrollbarX, () => {
    const height2 = context.scrollbarX?.offsetHeight || 0;
    context.onCornerHeightChange(height2);
    setHeight(height2);
  });
  useResizeObserver(context.scrollbarY, () => {
    const width2 = context.scrollbarY?.offsetWidth || 0;
    context.onCornerWidthChange(width2);
    setWidth(width2);
  });
  return hasSize ? /* @__PURE__ */ jsxRuntimeExports.jsx(
    Primitive.div,
    {
      ...cornerProps,
      ref: forwardedRef,
      style: {
        width,
        height,
        position: "absolute",
        right: context.dir === "ltr" ? 0 : void 0,
        left: context.dir === "rtl" ? 0 : void 0,
        bottom: 0,
        ...props.style
      }
    }
  ) : null;
});
function toInt(value) {
  return value ? parseInt(value, 10) : 0;
}
function getThumbRatio(viewportSize, contentSize) {
  const ratio = viewportSize / contentSize;
  return isNaN(ratio) ? 0 : ratio;
}
function getThumbSize(sizes) {
  const ratio = getThumbRatio(sizes.viewport, sizes.content);
  const scrollbarPadding = sizes.scrollbar.paddingStart + sizes.scrollbar.paddingEnd;
  const thumbSize = (sizes.scrollbar.size - scrollbarPadding) * ratio;
  return Math.max(thumbSize, 18);
}
function getScrollPositionFromPointer(pointerPos, pointerOffset, sizes, dir = "ltr") {
  const thumbSizePx = getThumbSize(sizes);
  const thumbCenter = thumbSizePx / 2;
  const offset = pointerOffset || thumbCenter;
  const thumbOffsetFromEnd = thumbSizePx - offset;
  const minPointerPos = sizes.scrollbar.paddingStart + offset;
  const maxPointerPos = sizes.scrollbar.size - sizes.scrollbar.paddingEnd - thumbOffsetFromEnd;
  const maxScrollPos = sizes.content - sizes.viewport;
  const scrollRange = dir === "ltr" ? [0, maxScrollPos] : [maxScrollPos * -1, 0];
  const interpolate = linearScale([minPointerPos, maxPointerPos], scrollRange);
  return interpolate(pointerPos);
}
function getThumbOffsetFromScroll(scrollPos, sizes, dir = "ltr") {
  const thumbSizePx = getThumbSize(sizes);
  const scrollbarPadding = sizes.scrollbar.paddingStart + sizes.scrollbar.paddingEnd;
  const scrollbar = sizes.scrollbar.size - scrollbarPadding;
  const maxScrollPos = sizes.content - sizes.viewport;
  const maxThumbPos = scrollbar - thumbSizePx;
  const scrollClampRange = dir === "ltr" ? [0, maxScrollPos] : [maxScrollPos * -1, 0];
  const scrollWithoutMomentum = clamp(scrollPos, scrollClampRange);
  const interpolate = linearScale([0, maxScrollPos], [0, maxThumbPos]);
  return interpolate(scrollWithoutMomentum);
}
function linearScale(input, output) {
  return (value) => {
    if (input[0] === input[1] || output[0] === output[1]) return output[0];
    const ratio = (output[1] - output[0]) / (input[1] - input[0]);
    return output[0] + ratio * (value - input[0]);
  };
}
function isScrollingWithinScrollbarBounds(scrollPos, maxScrollPos) {
  return scrollPos > 0 && scrollPos < maxScrollPos;
}
var addUnlinkedScrollListener = (node, handler = () => {
}) => {
  let prevPosition = { left: node.scrollLeft, top: node.scrollTop };
  let rAF = 0;
  (function loop() {
    const position = { left: node.scrollLeft, top: node.scrollTop };
    const isHorizontalScroll = prevPosition.left !== position.left;
    const isVerticalScroll = prevPosition.top !== position.top;
    if (isHorizontalScroll || isVerticalScroll) handler();
    prevPosition = position;
    rAF = window.requestAnimationFrame(loop);
  })();
  return () => window.cancelAnimationFrame(rAF);
};
function useDebounceCallback(callback, delay) {
  const handleCallback = useCallbackRef(callback);
  const debounceTimerRef = reactExports.useRef(0);
  reactExports.useEffect(() => () => window.clearTimeout(debounceTimerRef.current), []);
  return reactExports.useCallback(() => {
    window.clearTimeout(debounceTimerRef.current);
    debounceTimerRef.current = window.setTimeout(handleCallback, delay);
  }, [handleCallback, delay]);
}
function useResizeObserver(element, onResize) {
  const handleResize = useCallbackRef(onResize);
  useLayoutEffect2(() => {
    let rAF = 0;
    if (element) {
      const resizeObserver = new ResizeObserver(() => {
        cancelAnimationFrame(rAF);
        rAF = window.requestAnimationFrame(handleResize);
      });
      resizeObserver.observe(element);
      return () => {
        window.cancelAnimationFrame(rAF);
        resizeObserver.unobserve(element);
      };
    }
  }, [element, handleResize]);
}
var Root$1 = ScrollArea$1;
var Viewport = ScrollAreaViewport;
var Corner = ScrollAreaCorner;
const ScrollArea = reactExports.forwardRef(({ className, children, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsxs(Root$1, { ref, className: cn("relative overflow-hidden", className), ...props, children: [
  /* @__PURE__ */ jsxRuntimeExports.jsx(Viewport, { className: "h-full w-full rounded-[inherit]", children }),
  /* @__PURE__ */ jsxRuntimeExports.jsx(ScrollBar, {}),
  /* @__PURE__ */ jsxRuntimeExports.jsx(Corner, {})
] }));
ScrollArea.displayName = Root$1.displayName;
const ScrollBar = reactExports.forwardRef(({ className, orientation = "vertical", ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  ScrollAreaScrollbar,
  {
    ref,
    orientation,
    className: cn(
      "flex touch-none select-none transition-colors",
      orientation === "vertical" && "h-full w-2.5 border-l border-l-transparent p-[1px]",
      orientation === "horizontal" && "h-2.5 flex-col border-t border-t-transparent p-[1px]",
      className
    ),
    ...props,
    children: /* @__PURE__ */ jsxRuntimeExports.jsx(ScrollAreaThumb, { className: "relative flex-1 rounded-full bg-border" })
  }
));
ScrollBar.displayName = ScrollAreaScrollbar.displayName;
const Dialog = Root$5;
const DialogPortal = Portal$3;
const DialogOverlay = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  Overlay,
  {
    ref,
    className: cn(
      "fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className
    ),
    ...props
  }
));
DialogOverlay.displayName = Overlay.displayName;
const DialogContent = reactExports.forwardRef(({ className, children, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogPortal, { children: [
  /* @__PURE__ */ jsxRuntimeExports.jsx(DialogOverlay, {}),
  /* @__PURE__ */ jsxRuntimeExports.jsxs(
    Content$2,
    {
      ref,
      className: cn(
        "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",
        className
      ),
      ...props,
      children: [
        children,
        /* @__PURE__ */ jsxRuntimeExports.jsxs(Close$1, { className: "absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(X$1, { className: "h-4 w-4" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "sr-only", children: "Close" })
        ] })
      ]
    }
  )
] }));
DialogContent.displayName = Content$2.displayName;
const DialogHeader = ({ className, ...props }) => /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: cn("flex flex-col space-y-1.5 text-center sm:text-left", className), ...props });
DialogHeader.displayName = "DialogHeader";
const DialogFooter = ({ className, ...props }) => /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: cn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2", className), ...props });
DialogFooter.displayName = "DialogFooter";
const DialogTitle = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  Title$1,
  {
    ref,
    className: cn("text-lg font-semibold leading-none tracking-tight", className),
    ...props
  }
));
DialogTitle.displayName = Title$1.displayName;
const DialogDescription = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(Description$1, { ref, className: cn("text-sm text-muted-foreground", className), ...props }));
DialogDescription.displayName = Description$1.displayName;
var TABS_NAME = "Tabs";
var [createTabsContext, createTabsScope] = createContextScope(TABS_NAME, [
  createRovingFocusGroupScope
]);
var useRovingFocusGroupScope$1 = createRovingFocusGroupScope();
var [TabsProvider, useTabsContext] = createTabsContext(TABS_NAME);
var Tabs$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const {
      __scopeTabs,
      value: valueProp,
      onValueChange,
      defaultValue,
      orientation = "horizontal",
      dir,
      activationMode = "automatic",
      ...tabsProps
    } = props;
    const direction = useDirection(dir);
    const [value, setValue] = useControllableState({
      prop: valueProp,
      onChange: onValueChange,
      defaultProp: defaultValue ?? "",
      caller: TABS_NAME
    });
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      TabsProvider,
      {
        scope: __scopeTabs,
        baseId: useId(),
        value,
        onValueChange: setValue,
        orientation,
        dir: direction,
        activationMode,
        children: /* @__PURE__ */ jsxRuntimeExports.jsx(
          Primitive.div,
          {
            dir: direction,
            "data-orientation": orientation,
            ...tabsProps,
            ref: forwardedRef
          }
        )
      }
    );
  }
);
Tabs$1.displayName = TABS_NAME;
var TAB_LIST_NAME = "TabsList";
var TabsList$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeTabs, loop = true, ...listProps } = props;
    const context = useTabsContext(TAB_LIST_NAME, __scopeTabs);
    const rovingFocusGroupScope = useRovingFocusGroupScope$1(__scopeTabs);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      Root$6,
      {
        asChild: true,
        ...rovingFocusGroupScope,
        orientation: context.orientation,
        dir: context.dir,
        loop,
        children: /* @__PURE__ */ jsxRuntimeExports.jsx(
          Primitive.div,
          {
            role: "tablist",
            "aria-orientation": context.orientation,
            ...listProps,
            ref: forwardedRef
          }
        )
      }
    );
  }
);
TabsList$1.displayName = TAB_LIST_NAME;
var TRIGGER_NAME$2 = "TabsTrigger";
var TabsTrigger$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeTabs, value, disabled = false, ...triggerProps } = props;
    const context = useTabsContext(TRIGGER_NAME$2, __scopeTabs);
    const rovingFocusGroupScope = useRovingFocusGroupScope$1(__scopeTabs);
    const triggerId = makeTriggerId(context.baseId, value);
    const contentId = makeContentId(context.baseId, value);
    const isSelected = value === context.value;
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      Item$1,
      {
        asChild: true,
        ...rovingFocusGroupScope,
        focusable: !disabled,
        active: isSelected,
        children: /* @__PURE__ */ jsxRuntimeExports.jsx(
          Primitive.button,
          {
            type: "button",
            role: "tab",
            "aria-selected": isSelected,
            "aria-controls": contentId,
            "data-state": isSelected ? "active" : "inactive",
            "data-disabled": disabled ? "" : void 0,
            disabled,
            id: triggerId,
            ...triggerProps,
            ref: forwardedRef,
            onMouseDown: composeEventHandlers(props.onMouseDown, (event) => {
              if (!disabled && event.button === 0 && event.ctrlKey === false) {
                context.onValueChange(value);
              } else {
                event.preventDefault();
              }
            }),
            onKeyDown: composeEventHandlers(props.onKeyDown, (event) => {
              if ([" ", "Enter"].includes(event.key)) context.onValueChange(value);
            }),
            onFocus: composeEventHandlers(props.onFocus, () => {
              const isAutomaticActivation = context.activationMode !== "manual";
              if (!isSelected && !disabled && isAutomaticActivation) {
                context.onValueChange(value);
              }
            })
          }
        )
      }
    );
  }
);
TabsTrigger$1.displayName = TRIGGER_NAME$2;
var CONTENT_NAME$2 = "TabsContent";
var TabsContent$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeTabs, value, forceMount, children, ...contentProps } = props;
    const context = useTabsContext(CONTENT_NAME$2, __scopeTabs);
    const triggerId = makeTriggerId(context.baseId, value);
    const contentId = makeContentId(context.baseId, value);
    const isSelected = value === context.value;
    const isMountAnimationPreventedRef = reactExports.useRef(isSelected);
    reactExports.useEffect(() => {
      const rAF = requestAnimationFrame(() => isMountAnimationPreventedRef.current = false);
      return () => cancelAnimationFrame(rAF);
    }, []);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(Presence, { present: forceMount || isSelected, children: ({ present }) => /* @__PURE__ */ jsxRuntimeExports.jsx(
      Primitive.div,
      {
        "data-state": isSelected ? "active" : "inactive",
        "data-orientation": context.orientation,
        role: "tabpanel",
        "aria-labelledby": triggerId,
        hidden: !present,
        id: contentId,
        tabIndex: 0,
        ...contentProps,
        ref: forwardedRef,
        style: {
          ...props.style,
          animationDuration: isMountAnimationPreventedRef.current ? "0s" : void 0
        },
        children: present && children
      }
    ) });
  }
);
TabsContent$1.displayName = CONTENT_NAME$2;
function makeTriggerId(baseId, value) {
  return `${baseId}-trigger-${value}`;
}
function makeContentId(baseId, value) {
  return `${baseId}-content-${value}`;
}
var Root2$3 = Tabs$1;
var List = TabsList$1;
var Trigger$1 = TabsTrigger$1;
var Content = TabsContent$1;
const Tabs = Root2$3;
const TabsList = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  List,
  {
    ref,
    className: cn(
      "inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",
      className
    ),
    ...props
  }
));
TabsList.displayName = List.displayName;
const TabsTrigger = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  Trigger$1,
  {
    ref,
    className: cn(
      "inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",
      className
    ),
    ...props
  }
));
TabsTrigger.displayName = Trigger$1.displayName;
const TabsContent = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  Content,
  {
    ref,
    className: cn(
      "mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",
      className
    ),
    ...props
  }
));
TabsContent.displayName = Content.displayName;
const Table = reactExports.forwardRef(
  ({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "relative w-full overflow-auto", children: /* @__PURE__ */ jsxRuntimeExports.jsx("table", { ref, className: cn("w-full caption-bottom text-sm", className), ...props }) })
);
Table.displayName = "Table";
const TableHeader = reactExports.forwardRef(
  ({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx("thead", { ref, className: cn("[&_tr]:border-b", className), ...props })
);
TableHeader.displayName = "TableHeader";
const TableBody = reactExports.forwardRef(
  ({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx("tbody", { ref, className: cn("[&_tr:last-child]:border-0", className), ...props })
);
TableBody.displayName = "TableBody";
const TableFooter = reactExports.forwardRef(
  ({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx("tfoot", { ref, className: cn("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0", className), ...props })
);
TableFooter.displayName = "TableFooter";
const TableRow = reactExports.forwardRef(
  ({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
    "tr",
    {
      ref,
      className: cn("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50", className),
      ...props
    }
  )
);
TableRow.displayName = "TableRow";
const TableHead = reactExports.forwardRef(
  ({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
    "th",
    {
      ref,
      className: cn(
        "h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",
        className
      ),
      ...props
    }
  )
);
TableHead.displayName = "TableHead";
const TableCell = reactExports.forwardRef(
  ({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx("td", { ref, className: cn("p-4 align-middle [&:has([role=checkbox])]:pr-0", className), ...props })
);
TableCell.displayName = "TableCell";
const TableCaption = reactExports.forwardRef(
  ({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx("caption", { ref, className: cn("mt-4 text-sm text-muted-foreground", className), ...props })
);
TableCaption.displayName = "TableCaption";
const SuperAdminDashboard = reactExports.memo(function SuperAdminDashboard2() {
  useNavigate();
  const [stats, setStats] = reactExports.useState(null);
  const [analytics, setAnalytics] = reactExports.useState(null);
  const [loading, setLoading] = reactExports.useState(true);
  const dataFetchedRef = reactExports.useRef(false);
  const [contractors, setContractors] = reactExports.useState([]);
  const [locations, setLocations] = reactExports.useState([]);
  const [attendants, setAttendants] = reactExports.useState([]);
  reactExports.useState(false);
  reactExports.useState(false);
  reactExports.useState(false);
  reactExports.useState(false);
  reactExports.useState(false);
  reactExports.useState(false);
  reactExports.useState({
    company_name: "",
    contact_number: "",
    email: "",
    password: "",
    allowed_locations: 5,
    allowed_attendants_per_location: 3
  });
  reactExports.useState({
    locations_name: "",
    address: "",
    city: "",
    state: "",
    pincode: "",
    contractor_id: "",
    total_slots: 50
  });
  reactExports.useState({
    user_name: "",
    email: "",
    password: "",
    phone_number: "",
    location_id: ""
  });
  const { toast: toast2 } = useToast();
  const fetchDashboardData = async () => {
    try {
      setLoading(true);
      const [statsData, analyticsData, contractorsData, locationsData, attendantsData] = await Promise.all([
        SuperAdminAPI.getDashboardStats(),
        SuperAdminAPI.getSystemAnalytics(),
        SuperAdminAPI.getAllContractors(),
        SuperAdminAPI.getAllLocations(),
        SuperAdminAPI.getAllAttendants()
      ]);
      setStats(statsData);
      setAnalytics(analyticsData);
      setContractors(contractorsData);
      setLocations(locationsData);
      setAttendants(attendantsData);
    } catch (error) {
      console.error("Error fetching dashboard data:", error);
      toast2({
        variant: "destructive",
        title: "Error",
        description: "Failed to fetch dashboard data"
      });
    } finally {
      setLoading(false);
    }
  };
  reactExports.useEffect(() => {
    if (!dataFetchedRef.current) {
      console.log("SuperAdminDashboard: Initial data fetch triggered");
      dataFetchedRef.current = true;
      fetchDashboardData();
    }
  }, []);
  const calculateTrend = (current, previous) => {
    if (previous === 0) return 0;
    return Math.round((current - previous) / previous * 100);
  };
  if (loading) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-6", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "grid gap-4 md:grid-cols-2 lg:grid-cols-4", children: [...Array(4)].map((_, i2) => /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "h-4 w-20 bg-muted animate-pulse rounded" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "h-4 w-4 bg-muted animate-pulse rounded" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "h-8 w-16 bg-muted animate-pulse rounded mb-2" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "h-3 w-24 bg-muted animate-pulse rounded" })
      ] })
    ] }, i2)) }) });
  }
  const vehicleTrend = analytics?.today?.vehicles !== void 0 && analytics?.yesterday?.vehicles !== void 0 ? calculateTrend(analytics.today.vehicles, analytics.yesterday.vehicles) : 0;
  const revenueTrend = analytics?.today?.revenue !== void 0 && analytics?.yesterday?.revenue !== void 0 ? calculateTrend(analytics.today.revenue, analytics.yesterday.revenue) : 0;
  const monthlyVehicleTrend = analytics?.thisMonth?.vehicles !== void 0 && analytics?.lastMonth?.vehicles !== void 0 ? calculateTrend(analytics.thisMonth.vehicles, analytics.lastMonth.vehicles) : 0;
  const monthlyRevenueTrend = analytics?.thisMonth?.revenue !== void 0 && analytics?.lastMonth?.revenue !== void 0 ? calculateTrend(analytics.thisMonth.revenue, analytics.lastMonth.revenue) : 0;
  const showManagementTabs = false;
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4 sm:space-y-6", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-center justify-between gap-4", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-2xl sm:text-3xl font-extrabold tracking-tight bg-gradient-to-r from-amber-400 via-pink-400 to-rose-400 bg-clip-text text-transparent", children: "Super Admin Dashboard" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm sm:text-base text-slate-600", children: "Complete overview and management of your ParkFlow system" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row gap-2", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { variant: "outline", className: "bg-white/50 backdrop-blur w-full sm:w-auto", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(ChartColumn, { className: "h-4 w-4 mr-2" }),
          "Generate Reports"
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { variant: "outline", className: "bg-white/50 backdrop-blur w-full sm:w-auto", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Settings$1, { className: "h-4 w-4 mr-2" }),
          "System Settings"
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-5", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Total Contractors",
          value: stats?.totalContractors || 0,
          description: "Active businesses",
          icon: Building2,
          variant: "info"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Total Locations",
          value: stats?.totalLocations || 0,
          description: "Parking locations",
          icon: MapPin,
          variant: "success"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Total Attendants",
          value: stats?.totalAttendants || 0,
          description: "Active staff members",
          icon: Users,
          variant: "warning"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Total Vehicles",
          value: stats?.totalVehicles || 0,
          description: "Vehicles managed",
          icon: Car,
          variant: "default"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Total Revenue",
          value: `${stats?.totalRevenue?.toFixed(2) || 0}`,
          description: "All time earnings",
          icon: Banknote,
          variant: "success"
        }
      )
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Today's Vehicles",
          value: stats?.todayVehicles || 0,
          description: "Vehicles checked in today",
          icon: Car,
          variant: "info",
          trend: {
            value: vehicleTrend,
            label: "vs yesterday"
          }
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Today's Revenue",
          value: `${(stats?.todayRevenue || 0).toFixed(2)}`,
          description: "Revenue earned today",
          icon: Banknote,
          variant: "success",
          trend: {
            value: revenueTrend,
            label: "vs yesterday"
          }
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Monthly Vehicles",
          value: stats?.monthlyVehicles || 0,
          description: "This month's traffic",
          icon: TrendingUp,
          variant: "warning",
          trend: {
            value: monthlyVehicleTrend,
            label: "vs last month"
          }
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Monthly Revenue",
          value: `${(stats?.monthlyRevenue || 0).toFixed(2)}`,
          description: "This month's earnings",
          icon: TrendingUp,
          variant: "success",
          trend: {
            value: monthlyRevenueTrend,
            label: "vs last month"
          }
        }
      )
    ] }),
    showManagementTabs
  ] });
});
class LoggerService {
  async insertLog(log2) {
    try {
      const { error } = await supabase.from("system_logs").insert({
        level: log2.level,
        message: log2.message,
        details: log2.details,
        user_id: log2.user_id,
        action: log2.action,
        resource: log2.resource,
        created_at: (/* @__PURE__ */ new Date()).toISOString()
      });
      if (error) {
        console.warn("Failed to insert log into database:", error);
        console.log(`[${log2.level.toUpperCase()}] ${log2.message}`, log2.details);
      }
    } catch (error) {
      console.warn("Logger service error:", error);
      console.log(`[${log2.level.toUpperCase()}] ${log2.message}`, log2.details);
    }
  }
  info(message, details, action, resource, user_id) {
    this.insertLog({
      level: "info",
      message,
      details,
      action: action || "info",
      resource: resource || "system",
      user_id
    });
  }
  success(message, details, action, resource, user_id) {
    this.insertLog({
      level: "success",
      message,
      details,
      action: action || "success",
      resource: resource || "system",
      user_id
    });
  }
  warning(message, details, action, resource, user_id) {
    this.insertLog({
      level: "warning",
      message,
      details,
      action: action || "warning",
      resource: resource || "system",
      user_id
    });
  }
  error(message, details, action, resource, user_id) {
    this.insertLog({
      level: "error",
      message,
      details,
      action: action || "error",
      resource: resource || "system",
      user_id
    });
  }
  // Specific logging methods for common actions
  logVehicleCheckin(plateNumber, locationId, user_id) {
    this.info(
      `Vehicle ${plateNumber} checked in`,
      `Vehicle registered at location ${locationId}`,
      "vehicle_checkin",
      "vehicles",
      user_id
    );
  }
  logVehicleCheckout(plateNumber, paymentAmount, user_id) {
    this.success(
      `Vehicle ${plateNumber} checked out`,
      `Payment received: ${paymentAmount}`,
      "vehicle_checkout",
      "vehicles",
      user_id
    );
  }
  logContractorCreate(companyName, user_id) {
    this.info(
      `Contractor ${companyName} registered`,
      "New contractor added to the system",
      "contractor_create",
      "contractors",
      user_id
    );
  }
  logAttendantCreate(attendantName, user_id) {
    this.info(
      `Attendant ${attendantName} added`,
      "New attendant registered",
      "attendant_create",
      "attendants",
      user_id
    );
  }
  logLocationCreate(locationName, user_id) {
    this.info(
      `Location ${locationName} created`,
      "New parking location added",
      "location_create",
      "locations",
      user_id
    );
  }
  logPaymentReceived(amount, method, user_id) {
    this.success(
      `Payment received: ${amount}`,
      `Payment method: ${method}`,
      "payment_received",
      "payments",
      user_id
    );
  }
  logSystemError(error, details) {
    this.error(
      `System error: ${error}`,
      details,
      "system_error",
      "system"
    );
  }
  logUserLogin(userName, role) {
    this.info(
      `User ${userName} logged in`,
      `Role: ${role}`,
      "user_login",
      "authentication"
    );
  }
  logUserLogout(userName) {
    this.info(
      `User ${userName} logged out`,
      "User session ended",
      "user_logout",
      "authentication"
    );
  }
}
const logger = new LoggerService();
class VehicleAPI {
  // Attendant only - Create vehicle (check-in)
  static async createVehicle(data) {
    const response = await apiClient.post("/vehicles", {
      plate_number: data.plate_number,
      vehicle_type: data.vehicle_type,
      location_id: data.location_id,
      contractor_id: data.contractor_id,
      mobile_number: data.mobile_number,
      gate_in_id: data.gate_in_id,
      session_id: data.session_id
    });
    try {
      const { AuthAPI: AuthAPI2 } = await __vitePreload(async () => {
        const { AuthAPI: AuthAPI3 } = await Promise.resolve().then(() => authApi);
        return { AuthAPI: AuthAPI3 };
      }, true ? void 0 : void 0);
      const user = AuthAPI2.getUser();
      if (user) {
        logger.logVehicleCheckin(data.plate_number, data.location_id, user.id);
      }
    } catch (error) {
      console.error("Error logging vehicle check-in:", error);
    }
    return response.data;
  }
  // Get vehicles for super admin (all)
  static async getAllVehicles() {
    const response = await apiClient.get("/vehicles");
    return response.data || [];
  }
  // Get vehicles for contractor (from all their locations)
  static async getContractorVehicles(contractorId) {
    const response = await apiClient.get(`/vehicles/contractor/${contractorId}`);
    return response.data || [];
  }
  // Get vehicles for attendant (assigned locations)
  static async getAttendantVehicles(attendantUserId) {
    let userId = attendantUserId;
    if (!userId) {
      const { AuthAPI: AuthAPI2 } = await __vitePreload(async () => {
        const { AuthAPI: AuthAPI3 } = await Promise.resolve().then(() => authApi);
        return { AuthAPI: AuthAPI3 };
      }, true ? void 0 : void 0);
      const user = AuthAPI2.getUser();
      if (!user) throw new Error("User not authenticated");
      userId = user.id;
    }
    const response = await apiClient.get(`/vehicles/attendant/${userId}`);
    return response.data || [];
  }
  // Get vehicles by location
  static async getVehiclesByLocation(locationId) {
    const response = await apiClient.get(`/vehicles/location/${locationId}`);
    return response.data || [];
  }
  // Attendant only - Check out vehicle
  static async checkoutVehicle(vehicleId, checkoutData) {
    const response = await apiClient.post(`/vehicles/checkout/${vehicleId}`, {
      check_out_time: checkoutData.check_out_time,
      payment_amount: checkoutData.payment_amount,
      payment_method: checkoutData.payment_method
    });
    try {
      const { AuthAPI: AuthAPI2 } = await __vitePreload(async () => {
        const { AuthAPI: AuthAPI3 } = await Promise.resolve().then(() => authApi);
        return { AuthAPI: AuthAPI3 };
      }, true ? void 0 : void 0);
      const user = AuthAPI2.getUser();
      if (user) {
        logger.logVehicleCheckout(response.data.plate_number, checkoutData.payment_amount, user.id);
        logger.logPaymentReceived(checkoutData.payment_amount, checkoutData.payment_method, user.id);
      }
    } catch (error) {
      console.error("Error logging vehicle checkout:", error);
    }
    return response.data;
  }
  // Get vehicle by ID
  static async getVehicleById(id) {
    const response = await apiClient.get(`/vehicles/${id}`);
    return response.data;
  }
  // Get vehicle statistics
  static async getVehicleStats(locationId) {
    const params = locationId ? { locationId } : {};
    const response = await apiClient.get("/vehicles/stats", params);
    return response.data;
  }
  // Get vehicles by date range
  static async getVehiclesByDateRange(locationId, startDate, endDate) {
    const response = await apiClient.get("/vehicles/date-range", {
      locationId,
      startDate,
      endDate
    });
    return response.data || [];
  }
  // Update vehicle
  static async updateVehicle(id, data) {
    const response = await apiClient.post(`/vehicles/update/${id}`, data);
    return response.data;
  }
  // Delete vehicle
  static async deleteVehicle(vehicleId) {
    await apiClient.get(`/vehicles/delete/${vehicleId}`);
  }
}
const vehicleApi = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  VehicleAPI
}, Symbol.toStringTag, { value: "Module" }));
class PaymentAPI {
  // Get all payments (Super Admin)
  static async getAllPayments() {
    const response = await apiClient.get("/payments");
    return response.data || [];
  }
  // Get payments with pagination
  static async getPaymentsPaginated(params = {}) {
    const paginationPayload = convertToPaginationPayload(params);
    const response = await apiClient.post("/payments/paginated", paginationPayload);
    return {
      data: response.data.data,
      count: response.data.count,
      curPage: response.data.curPage,
      perPage: response.data.perPage,
      totalPages: response.data.totalPages,
      // Legacy fields for backward compatibility
      page: response.data.curPage,
      pageSize: response.data.perPage
    };
  }
  // Get payments for contractor
  static async getContractorPayments(contractorId, params = {}) {
    const {
      page = 1,
      pageSize = 10,
      search = "",
      sortBy = "created_at",
      sortOrder = "desc"
    } = params;
    const response = await apiClient.get(`/payments/contractor/${contractorId}`, {
      page,
      pageSize,
      search,
      sortBy,
      sortOrder
    });
    return response.data;
  }
  // Get payments for attendant
  static async getAttendantPayments(attendantId, params = {}) {
    const {
      page = 1,
      pageSize = 10,
      search = "",
      sortBy = "created_at",
      sortOrder = "desc"
    } = params;
    const response = await apiClient.get(`/payments/attendant/${attendantId}`, {
      page,
      pageSize,
      search,
      sortBy,
      sortOrder
    });
    return response.data;
  }
  // Get payments by location
  static async getLocationPayments(locationId) {
    const response = await apiClient.get(`/payments/location/${locationId}`);
    return response.data || [];
  }
  // Get payment statistics
  static async getPaymentStats(contractorId, locationId) {
    const params = {};
    if (contractorId) params.contractorId = contractorId;
    if (locationId) params.locationId = locationId;
    const response = await apiClient.get("/payments/stats", params);
    return response.data;
  }
  // Get location-wise payments
  static async getLocationWisePayments(contractorId) {
    const params = contractorId ? { contractorId } : {};
    const response = await apiClient.get("/payments/location-wise", params);
    return Array.isArray(response.data) ? response.data : [];
  }
  // Get contractor-wise payments
  static async getContractorWisePayments() {
    const response = await apiClient.get("/payments/contractor-wise");
    return Array.isArray(response.data) ? response.data : [];
  }
}
const paymentApi = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  PaymentAPI
}, Symbol.toStringTag, { value: "Module" }));
class ContractorDashboardAPI {
  // Get contractor dashboard data
  static async getContractorDashboard(userId) {
    const response = await apiClient.get(`/contractor-dashboard/${userId}`);
    return response.data;
  }
  // Get contractor statistics
  static async getContractorStats(userId) {
    const response = await apiClient.get(`/contractor-dashboard/${userId}/stats`);
    return response.data;
  }
}
class SubscriptionAPI {
  // Get all subscription plans
  static async getSubscriptionPlans() {
    const response = await apiClient.get("/subscriptions/plans");
    return response.data || [];
  }
  // Get subscription plan by ID
  static async getSubscriptionPlanById(id) {
    const response = await apiClient.get(`/subscriptions/plans/${id}`);
    return response.data;
  }
  // Get contractor's subscription details
  static async getContractorSubscription(contractorId) {
    const response = await apiClient.get(`/subscriptions/contractor/${contractorId}`);
    return response.data;
  }
  // Assign subscription to contractor
  static async assignSubscription(contractorId, planId, durationDays = 30) {
    await apiClient.post("/subscriptions/assign", {
      contractorId,
      planId,
      durationDays
    });
  }
  // Extend subscription
  static async extendSubscription(contractorId, additionalDays) {
    await apiClient.post(`/subscriptions/extend/${contractorId}`, {
      additionalDays
    });
  }
  // Check if contractor has valid subscription
  static async checkSubscriptionValidity(contractorId) {
    try {
      const subscription = await this.getContractorSubscription(contractorId);
      return subscription?.is_valid || false;
    } catch (error) {
      console.error("Error checking subscription validity:", error);
      return false;
    }
  }
  // Get subscription expiry message
  static async getExpiryMessage(contractorId) {
    const subscription = await this.getContractorSubscription(contractorId);
    if (!subscription) {
      return "No subscription found. Please contact administrator to assign a subscription plan.";
    }
    if (subscription.status === "expired") {
      return `Your subscription has expired on ${new Date(subscription.end_date).toLocaleDateString()}. Please recharge to continue using the service.`;
    }
    if (subscription.status === "suspended") {
      return "Your subscription has been suspended. Please contact administrator for assistance.";
    }
    if (subscription.days_remaining <= 7 && subscription.days_remaining > 0) {
      return `Your subscription will expire in ${subscription.days_remaining} days. Please recharge to avoid service interruption.`;
    }
    if (subscription.days_remaining <= 0) {
      return "Your subscription has expired. Please recharge to continue using the service.";
    }
    return "";
  }
  // Get contractors with expiring subscriptions
  static async getExpiringSubscriptions(daysThreshold = 7) {
    const response = await apiClient.get("/subscriptions/expiring", { days: daysThreshold });
    return response.data || [];
  }
  // Get expired subscriptions
  static async getExpiredSubscriptions() {
    const response = await apiClient.get("/subscriptions/expired");
    return response.data || [];
  }
  // Update subscription plan
  static async updateSubscriptionPlan(planId, updates) {
    const response = await apiClient.post(`/subscriptions/plans/update/${planId}`, updates);
    return response.data;
  }
  // Create new subscription plan
  static async createSubscriptionPlan(planData) {
    const response = await apiClient.post("/subscriptions/plans", planData);
    return response.data;
  }
  // Delete subscription plan (soft delete)
  static async deleteSubscriptionPlan(planId) {
    await apiClient.get(`/subscriptions/plans/delete/${planId}`);
  }
  // Get financial summary data
  static async getFinancialSummary() {
    const response = await apiClient.get("/subscriptions/financial-summary");
    return response.data;
  }
}
const ContractorDashboard = reactExports.memo(function ContractorDashboard2() {
  const { profile, user } = useAuth();
  const { toast: toast2 } = useToast();
  const dataFetchedRef = reactExports.useRef(false);
  const [stats, setStats] = reactExports.useState({
    totalLocations: 0,
    totalAttendants: 0,
    totalVehicles: 0,
    totalRevenue: 0,
    todayRevenue: 0,
    occupancyRate: 0,
    todayVehicles: 0
  });
  const [rates, setRates] = reactExports.useState({
    rates_2wheeler: {
      upTo2Hours: 2,
      upTo6Hours: 5,
      upTo12Hours: 8,
      upTo24Hours: 12
    },
    rates_4wheeler: {
      upTo2Hours: 5,
      upTo6Hours: 10,
      upTo12Hours: 18,
      upTo24Hours: 30
    }
  });
  const [ratesLoading, setRatesLoading] = reactExports.useState(false);
  const [ratesSaving, setRatesSaving] = reactExports.useState(false);
  const [showRatesEdit, setShowRatesEdit] = reactExports.useState(false);
  const [dashboardData, setDashboardData] = reactExports.useState(null);
  const [loading, setLoading] = reactExports.useState(true);
  const [error, setError] = reactExports.useState(null);
  const [recentActivity, setRecentActivity] = reactExports.useState([]);
  const [subscriptionDetails, setSubscriptionDetails] = reactExports.useState(null);
  reactExports.useState(false);
  reactExports.useState(false);
  reactExports.useState(null);
  reactExports.useState({
    name: "",
    email: "",
    phone_number: "",
    shift_start: "",
    shift_end: ""
  });
  const fetchContractorData = async () => {
    if (!user?.id) return;
    try {
      setLoading(true);
      setError(null);
      const [dashboardDataResult, statsResult, subscriptionResult] = await Promise.all([
        ContractorDashboardAPI.getContractorDashboard(user.id),
        ContractorDashboardAPI.getContractorStats(user.id),
        fetchSubscriptionDetails()
      ]);
      const safeDashboardData = {
        ...dashboardDataResult,
        assignedLocations: dashboardDataResult?.assignedLocations || []
      };
      setDashboardData(safeDashboardData);
      setStats(statsResult || {
        totalLocations: 0,
        totalAttendants: 0,
        totalVehicles: 0,
        totalRevenue: 0,
        todayRevenue: 0,
        occupancyRate: 0,
        todayVehicles: 0
      });
      setSubscriptionDetails(subscriptionResult);
    } catch (error2) {
      console.error("Error fetching contractor data:", error2);
      setError(error2 instanceof Error ? error2.message : "Failed to fetch data");
    } finally {
      setLoading(false);
    }
  };
  const fetchSubscriptionDetails = async () => {
    if (!user?.id) return null;
    try {
      const subscription = await SubscriptionAPI.getContractorSubscription(user.id);
      if (!subscription) {
        return null;
      }
      return {
        planName: subscription.plan_name || "Unknown Plan",
        price: 0,
        // Price not in subscription response, would need to fetch plan separately
        startDate: subscription.start_date || "",
        endDate: subscription.end_date || "",
        status: subscription.status || "active",
        daysRemaining: subscription.days_remaining || 0
      };
    } catch (error2) {
      console.error("Error fetching subscription details:", error2);
      return null;
    }
  };
  const fetchRates = async () => {
    if (!user?.id) return;
    try {
      setRatesLoading(true);
      const contractor = await ContractorAPI.getContractorByUserId(user.id);
      if (contractor) {
        setRates({
          rates_2wheeler: contractor.rates_2wheeler || rates.rates_2wheeler,
          rates_4wheeler: contractor.rates_4wheeler || rates.rates_4wheeler
        });
      }
    } catch (error2) {
      console.error("Error fetching rates:", error2);
      toast2({
        variant: "destructive",
        title: "Error",
        description: "Failed to fetch rates"
      });
    } finally {
      setRatesLoading(false);
    }
  };
  const handleSaveRates = async () => {
    if (!user?.id) return;
    try {
      setRatesSaving(true);
      const contractor = await ContractorAPI.getContractorByUserId(user.id);
      if (!contractor) {
        throw new Error("Contractor not found");
      }
      await apiClient.post(`/contractors/update/${contractor.id}`, {
        rates_2wheeler: rates.rates_2wheeler,
        rates_4wheeler: rates.rates_4wheeler
      });
      toast2({
        title: "Success",
        description: "Rates updated successfully"
      });
      setShowRatesEdit(false);
    } catch (error2) {
      console.error("Error saving rates:", error2);
      toast2({
        variant: "destructive",
        title: "Error",
        description: "Failed to save rates"
      });
    } finally {
      setRatesSaving(false);
    }
  };
  const handleRateChange = (vehicleType, duration, value) => {
    const numValue = parseFloat(value) || 0;
    setRates((prev) => ({
      ...prev,
      [`rates_${vehicleType}`]: {
        ...prev[`rates_${vehicleType}`],
        [duration]: numValue
      }
    }));
  };
  const fetchRecentActivity = async () => {
    if (!user?.id) return;
    try {
      const contractor = await ContractorAPI.getContractorByUserId(user.id);
      if (!contractor) return;
      const vehicles = await VehicleAPI.getContractorVehicles(contractor.id);
      const recentVehicles = vehicles.filter((v2) => !v2.is_deleted).sort((a, b) => new Date(b.check_in_time).getTime() - new Date(a.check_in_time).getTime()).slice(0, 5);
      const payments = await PaymentAPI.getContractorPayments(contractor.id, { page: 1, pageSize: 3 });
      const recentPayments = payments.data || [];
      const activities = [];
      recentVehicles?.forEach((vehicle) => {
        const timeAgo = getTimeAgo(vehicle.check_in_time);
        const locationName = vehicle.location?.locations_name || vehicle.parking_locations?.locations_name || "Unknown";
        activities.push({
          id: `vehicle-${vehicle.id}`,
          type: "vehicle_checkin",
          title: "New vehicle check-in",
          description: `Location: ${locationName}`,
          timeAgo,
          timestamp: vehicle.check_in_time,
          icon: "green"
        });
        if (vehicle.check_out_time) {
          const checkoutTimeAgo = getTimeAgo(vehicle.check_out_time);
          activities.push({
            id: `vehicle-checkout-${vehicle.id}`,
            type: "vehicle_checkout",
            title: "Vehicle check-out",
            description: `Plate: ${vehicle.plate_number}`,
            timeAgo: checkoutTimeAgo,
            timestamp: vehicle.check_out_time,
            icon: "blue"
          });
        }
      });
      recentPayments?.forEach((payment) => {
        const timeAgo = getTimeAgo(payment.created_at || payment.created_on || "");
        const plateNumber = payment.vehicle?.plate_number || "Unknown";
        activities.push({
          id: `payment-${payment.id}`,
          type: "payment",
          title: "Payment received",
          description: `${(payment.amount || 0).toFixed(2)} from Vehicle ${plateNumber}`,
          timeAgo,
          timestamp: payment.created_at || payment.created_on || "",
          icon: "orange"
        });
      });
      activities.sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());
      setRecentActivity(activities.slice(0, 5));
    } catch (error2) {
      console.error("Error fetching recent activity:", error2);
    }
  };
  const getTimeAgo = (timestamp) => {
    const now = /* @__PURE__ */ new Date();
    const time = new Date(timestamp);
    const diffInMinutes = Math.floor((now.getTime() - time.getTime()) / (1e3 * 60));
    if (diffInMinutes < 1) return "Just now";
    if (diffInMinutes < 60) return `${diffInMinutes} min ago`;
    const diffInHours = Math.floor(diffInMinutes / 60);
    if (diffInHours < 24) return `${diffInHours} hour${diffInHours > 1 ? "s" : ""} ago`;
    const diffInDays = Math.floor(diffInHours / 24);
    return `${diffInDays} day${diffInDays > 1 ? "s" : ""} ago`;
  };
  const formatDate2 = (dateString) => {
    if (!dateString) return "N/A";
    try {
      const date = new Date(dateString);
      return date.toLocaleDateString("en-US", {
        year: "numeric",
        month: "short",
        day: "numeric"
      });
    } catch (error2) {
      return "N/A";
    }
  };
  reactExports.useEffect(() => {
    if (user && !dataFetchedRef.current) {
      console.log("ContractorDashboard: Initial data fetch triggered");
      dataFetchedRef.current = true;
      fetchContractorData();
      fetchRecentActivity();
      fetchRates();
    }
  }, [user?.id]);
  if (loading) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-center h-96", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "animate-spin rounded-full h-12 w-12 border-b-2 border-parkflow-blue" }) });
  }
  if (error) {
    return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-12", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-xl font-semibold text-red-600", children: "Error" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: error })
    ] });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-3xl font-extrabold tracking-tight bg-gradient-to-r from-amber-400 via-pink-400 to-rose-400 bg-clip-text text-transparent", children: "Contractor Dashboard" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-slate-600", children: [
          "Welcome back, ",
          profile?.user_name || "Contractor",
          "! Manage your parking operations"
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex space-x-2", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { variant: "outline", className: "bg-white/50 backdrop-blur", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Eye, { className: "h-4 w-4 mr-2" }),
        "View Reports"
      ] }) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Total Locations",
          value: stats.totalLocations,
          description: "Active parking sites",
          icon: MapPin,
          variant: "success"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Active Attendants",
          value: stats.totalAttendants,
          description: "On-duty staff",
          icon: Users,
          variant: "warning"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Total Vehicles",
          value: stats.totalVehicles,
          description: "All-time processed",
          icon: Car,
          variant: "info"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Today's Vehicles",
          value: stats.todayVehicles,
          description: "Checked in today",
          icon: Car,
          variant: "default"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Today's Revenue",
          value: `${(stats.todayRevenue || 0).toFixed(2)}`,
          description: "+12% from yesterday",
          icon: Banknote,
          variant: "success"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Total Revenue",
          value: `${(stats.totalRevenue || 0).toFixed(2)}`,
          description: "Lifetime earnings",
          icon: TrendingUp,
          variant: "success"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Occupancy Rate",
          value: `${stats.occupancyRate}%`,
          description: "Current utilization",
          icon: ChartColumn,
          variant: stats.occupancyRate > 80 ? "danger" : stats.occupancyRate > 60 ? "warning" : "success"
        }
      )
    ] }),
    subscriptionDetails && /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200 rounded-xl", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center space-x-2 text-blue-900", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Crown, { className: "h-5 w-5" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Your Subscription Plan" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { className: "text-blue-700", children: "Current subscription details and status" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(
          Badge,
          {
            variant: subscriptionDetails.status === "active" ? "default" : "destructive",
            className: subscriptionDetails.status === "active" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800",
            children: [
              subscriptionDetails.status === "active" ? /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, { className: "h-3 w-3 mr-1" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(CircleAlert, { className: "h-3 w-3 mr-1" }),
              subscriptionDetails.status
            ]
          }
        )
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Crown, { className: "h-4 w-4 text-blue-600" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm font-medium text-blue-900", children: "Plan Name" })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-lg font-semibold text-blue-900", children: subscriptionDetails.planName })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Banknote, { className: "h-4 w-4 text-blue-600" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm font-medium text-blue-900", children: "Price" })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-lg font-semibold text-blue-900", children: [
              "",
              subscriptionDetails.price
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Calendar, { className: "h-4 w-4 text-blue-600" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm font-medium text-blue-900", children: "Days Remaining" })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: `text-lg font-semibold ${subscriptionDetails.daysRemaining <= 7 ? "text-red-600" : subscriptionDetails.daysRemaining <= 30 ? "text-orange-600" : "text-green-600"}`, children: [
              subscriptionDetails.daysRemaining,
              " days"
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Clock, { className: "h-4 w-4 text-blue-600" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm font-medium text-blue-900", children: "Expires On" })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-lg font-semibold text-blue-900", children: formatDate2(subscriptionDetails.endDate) })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "mt-4 p-3 bg-blue-100 rounded-lg", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2 text-blue-800", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Calendar, { className: "h-4 w-4" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-sm", children: [
              "Started on ",
              formatDate2(subscriptionDetails.startDate)
            ] })
          ] }),
          subscriptionDetails.daysRemaining <= 7 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "mt-2 flex items-center space-x-2 text-red-700", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(CircleAlert, { className: "h-4 w-4" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm font-medium", children: "Your subscription expires soon! Contact support to renew." })
          ] })
        ] })
      ] })
    ] }),
    !subscriptionDetails && /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "bg-gradient-to-r from-orange-50 to-red-50 border-orange-200 rounded-xl", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center space-x-2 text-orange-900", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(CircleAlert, { className: "h-5 w-5" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "No Active Subscription" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { className: "text-orange-700", children: "You don't have an active subscription plan" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-orange-800 mb-2", children: "Contact your administrator to get a subscription plan assigned to your account." }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-orange-600", children: "Without a subscription, you may have limited access to certain features." })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "outline", className: "border-orange-300 text-orange-700 hover:bg-orange-100", children: "Contact Support" })
      ] }) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "bg-white/40 backdrop-blur-xl border-white/30 rounded-xl", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center space-x-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Banknote, { className: "h-5 w-5" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Your Parking Rates" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Current rates assigned to your account. You can update these rates anytime." })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(
          Button,
          {
            variant: "outline",
            onClick: () => setShowRatesEdit(true),
            className: "bg-white/50 backdrop-blur",
            children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(SquarePen, { className: "h-4 w-4 mr-2" }),
              "Edit Rates"
            ]
          }
        )
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("h4", { className: "font-semibold text-sm text-muted-foreground", children: "2-Wheeler Rates" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between items-center", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm", children: "Up to 2 hours" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "font-medium", children: [
                "",
                rates.rates_2wheeler.upTo2Hours
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between items-center", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm", children: "Up to 6 hours" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "font-medium", children: [
                "",
                rates.rates_2wheeler.upTo6Hours
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between items-center", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm", children: "Up to 12 hours" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "font-medium", children: [
                "",
                rates.rates_2wheeler.upTo12Hours
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between items-center", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm", children: "Up to 24 hours" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "font-medium", children: [
                "",
                rates.rates_2wheeler.upTo24Hours
              ] })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("h4", { className: "font-semibold text-sm text-muted-foreground", children: "4-Wheeler Rates" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between items-center", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm", children: "Up to 2 hours" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "font-medium", children: [
                "",
                rates.rates_4wheeler.upTo2Hours
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between items-center", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm", children: "Up to 6 hours" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "font-medium", children: [
                "",
                rates.rates_4wheeler.upTo6Hours
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between items-center", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm", children: "Up to 12 hours" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "font-medium", children: [
                "",
                rates.rates_4wheeler.upTo12Hours
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between items-center", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm", children: "Up to 24 hours" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "font-medium", children: [
                "",
                rates.rates_4wheeler.upTo24Hours
              ] })
            ] })
          ] })
        ] })
      ] }) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "grid grid-cols-1 gap-6", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "bg-white/40 backdrop-blur-xl border-white/30 rounded-xl", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { children: "Recent Activity" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Latest system events and updates" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-4", children: recentActivity.length > 0 ? recentActivity.map((activity) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: `w-2 h-2 rounded-full ${activity.icon === "green" ? "bg-green-500" : activity.icon === "blue" ? "bg-blue-500" : activity.icon === "orange" ? "bg-orange-500" : "bg-gray-500"}` }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex-1", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm font-medium", children: activity.title }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-muted-foreground", children: activity.description })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs text-muted-foreground", children: activity.timeAgo })
      ] }, activity.id)) : /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-center py-4", children: /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-muted-foreground", children: "No recent activity" }) }) }) })
    ] }) }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "bg-white/40 backdrop-blur-xl border-white/30 rounded-xl", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { children: "Your Locations" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Manage and monitor your parking locations" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: loading ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-center p-8", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-muted-foreground", children: "Loading locations..." }) }) : error ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-center p-8", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-red-500", children: [
        "Error: ",
        error
      ] }) }) : !dashboardData?.assignedLocations || dashboardData.assignedLocations.length === 0 ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col items-center justify-center p-8 text-center", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(MapPin, { className: "h-12 w-12 text-muted-foreground mb-4" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-semibold mb-2", children: "No locations found" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground mb-4", children: "Your account has no assigned locations yet. Contact your administrator or create sample data for testing." }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-muted-foreground", children: "Contact your administrator to assign parking locations to your account." })
      ] }) : /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-4", children: dashboardData?.assignedLocations.map((location, index) => {
        const colorClass = index % 3 === 0 ? "text-blue-500" : index % 3 === 1 ? "text-green-500" : "text-orange-500";
        const statusClass = location.status === "active" ? "bg-green-50 text-green-700" : "bg-red-50 text-red-700";
        return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between p-4 border rounded-lg", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(MapPin, { className: `h-5 w-5 ${colorClass}` }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-medium", children: location.locationName }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-muted-foreground", children: location.address }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-sm text-muted-foreground", children: [
                location.totalSlots,
                " slots  ",
                location.occupancyRate,
                "% occupied"
              ] }),
              location.attendants && location.attendants.length > 0 && /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-xs text-muted-foreground", children: [
                location.attendants.length,
                " attendant(s) assigned"
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "outline", className: statusClass, children: location.status }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "ghost", size: "sm", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Eye, { className: "h-4 w-4" }) })
          ] })
        ] }, location.locationId);
      }) }) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: showRatesEdit, onOpenChange: setShowRatesEdit, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { className: "max-w-2xl", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(DialogTitle, { children: "Edit Parking Rates" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(DialogDescription, { children: "Update your parking rates for different vehicle types and durations" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("h4", { className: "font-semibold", children: "2-Wheeler Rates" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-2 gap-4", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "2wheeler-2h", children: "Up to 2 hours" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Input,
                {
                  id: "2wheeler-2h",
                  type: "number",
                  value: rates.rates_2wheeler.upTo2Hours,
                  onChange: (e) => handleRateChange("2wheeler", "upTo2Hours", e.target.value),
                  className: "pl-8"
                }
              )
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "2wheeler-6h", children: "Up to 6 hours" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Input,
                {
                  id: "2wheeler-6h",
                  type: "number",
                  value: rates.rates_2wheeler.upTo6Hours,
                  onChange: (e) => handleRateChange("2wheeler", "upTo6Hours", e.target.value),
                  className: "pl-8"
                }
              )
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "2wheeler-12h", children: "Up to 12 hours" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Input,
                {
                  id: "2wheeler-12h",
                  type: "number",
                  value: rates.rates_2wheeler.upTo12Hours,
                  onChange: (e) => handleRateChange("2wheeler", "upTo12Hours", e.target.value),
                  className: "pl-8"
                }
              )
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "2wheeler-24h", children: "Up to 24 hours" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Input,
                {
                  id: "2wheeler-24h",
                  type: "number",
                  value: rates.rates_2wheeler.upTo24Hours,
                  onChange: (e) => handleRateChange("2wheeler", "upTo24Hours", e.target.value),
                  className: "pl-8"
                }
              )
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("h4", { className: "font-semibold", children: "4-Wheeler Rates" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-2 gap-4", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "4wheeler-2h", children: "Up to 2 hours" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Input,
                {
                  id: "4wheeler-2h",
                  type: "number",
                  value: rates.rates_4wheeler.upTo2Hours,
                  onChange: (e) => handleRateChange("4wheeler", "upTo2Hours", e.target.value),
                  className: "pl-8"
                }
              )
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "4wheeler-6h", children: "Up to 6 hours" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Input,
                {
                  id: "4wheeler-6h",
                  type: "number",
                  value: rates.rates_4wheeler.upTo6Hours,
                  onChange: (e) => handleRateChange("4wheeler", "upTo6Hours", e.target.value),
                  className: "pl-8"
                }
              )
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "4wheeler-12h", children: "Up to 12 hours" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Input,
                {
                  id: "4wheeler-12h",
                  type: "number",
                  value: rates.rates_4wheeler.upTo12Hours,
                  onChange: (e) => handleRateChange("4wheeler", "upTo12Hours", e.target.value),
                  className: "pl-8"
                }
              )
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "4wheeler-24h", children: "Up to 24 hours" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Input,
                {
                  id: "4wheeler-24h",
                  type: "number",
                  value: rates.rates_4wheeler.upTo24Hours,
                  onChange: (e) => handleRateChange("4wheeler", "upTo24Hours", e.target.value),
                  className: "pl-8"
                }
              )
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-end space-x-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Button,
            {
              variant: "outline",
              onClick: () => setShowRatesEdit(false),
              disabled: ratesSaving,
              children: "Cancel"
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Button,
            {
              onClick: handleSaveRates,
              disabled: ratesSaving,
              children: ratesSaving ? "Saving..." : "Save Rates"
            }
          )
        ] })
      ] })
    ] }) })
  ] });
});
const Pagination = ({ className, ...props }) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  "nav",
  {
    role: "navigation",
    "aria-label": "pagination",
    className: cn("mx-auto flex w-full justify-center", className),
    ...props
  }
);
Pagination.displayName = "Pagination";
const PaginationContent = reactExports.forwardRef(
  ({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx("ul", { ref, className: cn("flex flex-row items-center gap-1", className), ...props })
);
PaginationContent.displayName = "PaginationContent";
const PaginationItem = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx("li", { ref, className: cn("", className), ...props }));
PaginationItem.displayName = "PaginationItem";
const PaginationLink = ({ className, isActive, size = "icon", ...props }) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  "a",
  {
    "aria-current": isActive ? "page" : void 0,
    className: cn(
      buttonVariants({
        variant: isActive ? "outline" : "ghost",
        size
      }),
      className
    ),
    ...props
  }
);
PaginationLink.displayName = "PaginationLink";
const PaginationPrevious = ({ className, ...props }) => /* @__PURE__ */ jsxRuntimeExports.jsxs(PaginationLink, { "aria-label": "Go to previous page", size: "default", className: cn("gap-1 pl-2.5", className), ...props, children: [
  /* @__PURE__ */ jsxRuntimeExports.jsx(ChevronLeft, { className: "h-4 w-4" }),
  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Previous" })
] });
PaginationPrevious.displayName = "PaginationPrevious";
const PaginationNext = ({ className, ...props }) => /* @__PURE__ */ jsxRuntimeExports.jsxs(PaginationLink, { "aria-label": "Go to next page", size: "default", className: cn("gap-1 pr-2.5", className), ...props, children: [
  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Next" }),
  /* @__PURE__ */ jsxRuntimeExports.jsx(ChevronRight, { className: "h-4 w-4" })
] });
PaginationNext.displayName = "PaginationNext";
const PaginationEllipsis = ({ className, ...props }) => /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { "aria-hidden": true, className: cn("flex h-9 w-9 items-center justify-center", className), ...props, children: [
  /* @__PURE__ */ jsxRuntimeExports.jsx(Ellipsis, { className: "h-4 w-4" }),
  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "sr-only", children: "More pages" })
] });
PaginationEllipsis.displayName = "PaginationEllipsis";
const Attendants = reactExports.memo(function Attendants2() {
  const { profile, user } = useAuth();
  const isSuperAdmin = profile?.role === "super_admin";
  const isContractor = profile?.role === "contractor";
  const isAttendant = profile?.role === "attendant";
  const [attendants, setAttendants] = reactExports.useState([]);
  const [loading, setLoading] = reactExports.useState(true);
  const [deletingId, setDeletingId] = reactExports.useState(null);
  const [showForm, setShowForm] = reactExports.useState(false);
  const [editing, setEditing] = reactExports.useState(null);
  const [contractors, setContractors] = reactExports.useState([]);
  const [locations, setLocations] = reactExports.useState([]);
  const [contractorData, setContractorData] = reactExports.useState(null);
  const [formLoading, setFormLoading] = reactExports.useState(false);
  const [form, setForm] = reactExports.useState({
    user_name: "",
    email: "",
    password: "",
    phone_number: "",
    location_id: "none",
    contractor_id: "",
    status: "active"
  });
  const [pagination, setPagination] = reactExports.useState({
    page: 1,
    pageSize: 10,
    totalPages: 0,
    totalCount: 0
  });
  const [search, setSearch] = reactExports.useState("");
  const [searchInput, setSearchInput] = reactExports.useState("");
  const [searchLoading, setSearchLoading] = reactExports.useState(false);
  const [sortBy, setSortBy] = reactExports.useState("created_on");
  const [sortOrder, setSortOrder] = reactExports.useState("desc");
  const dataFetchedRef = reactExports.useRef(false);
  const { toast: toast2 } = useToast();
  const stats = reactExports.useMemo(() => {
    return {
      totalAttendants: pagination.totalCount,
      activeAttendants: attendants.filter((a) => a.status === "active").length,
      assignedLocations: attendants.filter((a) => a.location_id).length,
      averageHours: 0
      // This would be calculated from actual work data
    };
  }, [attendants, pagination.totalCount]);
  const fetchData = async (page = pagination.page, searchTerm = search, sort = sortBy, order = sortOrder) => {
    try {
      setLoading(true);
      console.log("Fetching data...", { page, searchTerm, sort, order });
      const params = {
        page,
        pageSize: pagination.pageSize,
        search: searchTerm,
        sortBy: sort,
        sortOrder: order
      };
      console.log("Fetching attendants with params:", params);
      let attendantsResult;
      if (profile?.role === "contractor" && user?.id) {
        const { AuthAPI: AuthAPI2 } = await __vitePreload(async () => {
          const { AuthAPI: AuthAPI3 } = await Promise.resolve().then(() => authApi);
          return { AuthAPI: AuthAPI3 };
        }, true ? void 0 : void 0);
        let contractor = AuthAPI2.getContractor();
        if (!contractor) {
          try {
            contractor = await ContractorAPI.getContractorByUserId(user.id);
            if (contractor) {
              AuthAPI2.setContractor(contractor);
            }
          } catch (error) {
            console.error("Failed to fetch contractor data:", error);
            contractor = null;
          }
        } else {
          setContractorData(contractor);
        }
        const attendantsData = await AttendantAPI.getAttendantsByContractor(user.id, params);
        attendantsResult = attendantsData;
        setContractorData(contractor);
      } else if (profile?.role === "attendant" && user?.id) {
        attendantsResult = await AttendantAPI.getAttendantByUserId(user.id);
        attendantsResult = {
          data: attendantsResult ? [attendantsResult] : [],
          count: attendantsResult ? 1 : 0,
          page: 1,
          pageSize: 1,
          totalPages: 1
        };
      } else {
        attendantsResult = await AttendantAPI.getAllAttendants(params);
      }
      let consPromise, locsPromise;
      if (isContractor && user?.id) {
        consPromise = Promise.resolve([]);
        locsPromise = LocationAPI.getContractorLocations(user.id);
      } else {
        consPromise = SuperAdminAPI.getAllContractors();
        locsPromise = LocationAPI.getAllLocations();
      }
      const [cons, locs] = await Promise.all([consPromise, locsPromise]);
      console.log("Attendants result:", attendantsResult);
      console.log("Contractors:", cons);
      console.log("Locations:", locs);
      setAttendants(attendantsResult.data);
      setContractors(cons);
      setLocations(locs);
      setPagination((prev) => ({
        ...prev,
        page: attendantsResult.page,
        totalPages: attendantsResult.totalPages,
        totalCount: attendantsResult.count
      }));
    } catch (e) {
      console.error("Error fetching data:", e);
      toast2({ variant: "destructive", title: "Error", description: e?.message || "Failed to load attendants" });
    } finally {
      setLoading(false);
    }
  };
  reactExports.useEffect(() => {
    if (profile && user && !dataFetchedRef.current) {
      console.log("Attendants: Initial data fetch triggered");
      dataFetchedRef.current = true;
      fetchData();
    }
  }, [profile?.role, user?.id]);
  reactExports.useEffect(() => {
    const timer = setTimeout(() => {
      if (searchInput !== search) {
        handleSearch(searchInput);
      }
    }, 500);
    return () => clearTimeout(timer);
  }, [searchInput]);
  const handlePageChange = (page) => {
    setPagination((prev) => ({ ...prev, page }));
    fetchData(page, search, sortBy, sortOrder);
  };
  const handleSearch = async (searchTerm) => {
    setSearch(searchTerm);
    setPagination((prev) => ({ ...prev, page: 1 }));
    setSearchLoading(true);
    try {
      await fetchData(1, searchTerm, sortBy, sortOrder);
    } finally {
      setSearchLoading(false);
    }
  };
  const handleSort = (field) => {
    const newOrder = sortBy === field && sortOrder === "desc" ? "asc" : "desc";
    setSortBy(field);
    setSortOrder(newOrder);
    setPagination((prev) => ({ ...prev, page: 1 }));
    fetchData(1, search, field, newOrder);
  };
  const handlePageSizeChange = (newPageSize) => {
    setPagination((prev) => ({ ...prev, pageSize: newPageSize, page: 1 }));
    fetchData(1, search, sortBy, sortOrder);
  };
  const openCreate = async () => {
    setEditing(null);
    let initialContractorId = "";
    if (isContractor && user) {
      const { AuthAPI: AuthAPI2 } = await __vitePreload(async () => {
        const { AuthAPI: AuthAPI3 } = await Promise.resolve().then(() => authApi);
        return { AuthAPI: AuthAPI3 };
      }, true ? void 0 : void 0);
      const storedContractor = AuthAPI2.getContractor();
      if (storedContractor && storedContractor.id) {
        initialContractorId = storedContractor.id;
        setContractorData(storedContractor);
      } else if (contractorData && contractorData.id) {
        initialContractorId = contractorData.id;
      } else {
        try {
          const contractor = await ContractorAPI.getContractorByUserId(user.id);
          if (contractor && contractor.id) {
            initialContractorId = contractor.id;
            setContractorData(contractor);
          }
        } catch (error) {
          console.error("Failed to fetch contractor data:", error);
        }
      }
    }
    setForm({
      user_name: "",
      email: "",
      password: "",
      phone_number: "",
      location_id: "none",
      contractor_id: initialContractorId,
      status: "active"
    });
    setShowForm(true);
  };
  const openEdit = (attendant) => {
    setEditing(attendant);
    setForm({
      user_name: attendant.profiles?.user_name || "",
      email: attendant.profiles?.email || "",
      phone_number: attendant.profiles?.phone_number || "",
      location_id: attendant.location_id || "none",
      contractor_id: attendant.parking_locations?.contractors?.company_name ? contractors.find((c) => c.company_name === attendant.parking_locations?.contractors?.company_name)?.id || "" : "",
      status: attendant.status || "active"
    });
    setShowForm(true);
  };
  const save = async () => {
    try {
      if (!form.user_name || !form.email) {
        toast2({ variant: "destructive", title: "Validation", description: "Please fill all required fields" });
        return;
      }
      if (isContractor && user && !form.contractor_id) {
        const { AuthAPI: AuthAPI2 } = await __vitePreload(async () => {
          const { AuthAPI: AuthAPI3 } = await Promise.resolve().then(() => authApi);
          return { AuthAPI: AuthAPI3 };
        }, true ? void 0 : void 0);
        const storedContractor = AuthAPI2.getContractor();
        if (storedContractor && storedContractor.id) {
          setForm({ ...form, contractor_id: storedContractor.id });
        } else if (contractorData && contractorData.id) {
          setForm({ ...form, contractor_id: contractorData.id });
        } else {
          toast2({ variant: "destructive", title: "Error", description: "Contractor information not found. Please refresh the page." });
          return;
        }
      }
      if (!form.contractor_id) {
        toast2({ variant: "destructive", title: "Validation", description: "Contractor is required" });
        return;
      }
      setFormLoading(true);
      const formData = {
        ...form,
        location_id: form.location_id === "none" ? "" : form.location_id
      };
      if (isContractor && user && !editing && formData.location_id) {
        const { AuthAPI: AuthAPI2 } = await __vitePreload(async () => {
          const { AuthAPI: AuthAPI3 } = await Promise.resolve().then(() => authApi);
          return { AuthAPI: AuthAPI3 };
        }, true ? void 0 : void 0);
        const storedContractor = AuthAPI2.getContractor() || contractorData;
        if (storedContractor) {
          const attendantsAtLocation = attendants.filter((a) => a.location_id === formData.location_id).length;
          const allowedPerLocation = storedContractor.allowed_attendants_per_location || 0;
          if (attendantsAtLocation >= allowedPerLocation) {
            toast2({
              variant: "destructive",
              title: "Limit Reached",
              description: `You have reached the maximum limit of ${allowedPerLocation} attendants per location. Please contact admin to increase your limit.`
            });
            setFormLoading(false);
            return;
          }
        }
      }
      if (editing) {
        console.log("Updating attendant with data:", formData);
        const updatedAttendant = await SuperAdminAPI.updateAttendant(editing.id, formData);
        console.log("Updated attendant result:", updatedAttendant);
        toast2({ title: "Updated", description: "Attendant updated" });
      } else {
        if (!form.password) {
          toast2({ variant: "destructive", title: "Validation", description: "Password is required for new attendants" });
          setFormLoading(false);
          return;
        }
        console.log("Creating attendant with data:", formData);
        await SuperAdminAPI.createAttendant(formData);
        toast2({ title: "Created", description: "Attendant created successfully" });
      }
      setShowForm(false);
      setEditing(null);
      console.log("Refreshing data after update...");
      await fetchData();
    } catch (e) {
      console.error("Error saving attendant:", e);
      toast2({ variant: "destructive", title: "Error", description: e?.message || "Failed to save" });
    } finally {
      setFormLoading(false);
    }
  };
  const remove = async (id) => {
    try {
      setDeletingId(id);
      await SuperAdminAPI.deleteAttendant(id);
      toast2({ title: "Deleted", description: "Attendant deleted" });
      fetchData();
    } catch (e) {
      toast2({ variant: "destructive", title: "Error", description: e?.message || "Failed to delete" });
    } finally {
      setDeletingId(null);
    }
  };
  const currentContractor = reactExports.useMemo(() => {
    if (isContractor && user) {
      try {
        const { AuthAPI: AuthAPI2 } = require("@/services/authApi");
        return AuthAPI2.getContractor() || contractorData;
      } catch {
        return contractorData;
      }
    }
    return contractorData;
  }, [isContractor, user, contractorData]);
  const filteredLocations = reactExports.useMemo(() => {
    if (isContractor && currentContractor) {
      return locations.filter((loc) => loc.contractor_id === currentContractor.id);
    }
    if (!form.contractor_id) return [];
    return locations.filter((loc) => loc.contractor_id === form.contractor_id);
  }, [form.contractor_id, locations, isContractor, currentContractor]);
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-3xl font-bold text-foreground", children: "Attendants" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: profile?.role === "attendant" ? "View your profile and assignment details" : "Manage on-site staff and their assignments" })
      ] }),
      (isSuperAdmin || isContractor) && /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { onClick: openCreate, children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Plus, { className: "h-4 w-4 mr-2" }),
        "Add Attendant"
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-4 gap-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Total Attendants",
          value: stats.totalAttendants,
          description: "Registered staff",
          icon: Users,
          variant: "info"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Active Attendants",
          value: stats.activeAttendants,
          description: "Currently working",
          icon: CircleCheckBig,
          variant: "success"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Assigned Locations",
          value: stats.assignedLocations,
          description: "Active assignments",
          icon: MapPin,
          variant: "warning"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Average Hours",
          value: `${stats.averageHours}h`,
          description: "Per day",
          icon: Clock,
          variant: "default"
        }
      )
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { children: [
            profile?.role === "attendant" ? "Your Profile" : "Attendant List",
            search && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "ml-2 text-sm font-normal text-muted-foreground", children: [
              '(Search results for "',
              search,
              '")'
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: profile?.role === "attendant" ? "View your profile and assignment details" : "View and manage all staff members" })
        ] }),
        profile?.role !== "attendant" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row gap-2 sm:items-center", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative flex-1 sm:flex-none", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Search, { className: "absolute left-2 top-2.5 h-4 w-4 text-muted-foreground" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                placeholder: "Search attendants...",
                value: searchInput,
                onChange: (e) => setSearchInput(e.target.value),
                className: "pl-8 pr-8 w-full sm:w-64",
                disabled: searchLoading
              }
            ),
            searchLoading ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute right-2 top-2.5 h-4 w-4 animate-spin rounded-full border-2 border-gray-300 border-t-blue-600" }) : searchInput ? /* @__PURE__ */ jsxRuntimeExports.jsx(
              Button,
              {
                variant: "ghost",
                size: "sm",
                onClick: () => {
                  setSearchInput("");
                  handleSearch("");
                },
                className: "absolute right-1 top-1 h-6 w-6 p-0 hover:bg-gray-100",
                children: /* @__PURE__ */ jsxRuntimeExports.jsx(X$1, { className: "h-3 w-3" })
              }
            ) : null
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm text-muted-foreground", children: "Show:" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: pagination.pageSize.toString(), onValueChange: (value) => handlePageSizeChange(Number(value)), children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { className: "w-20", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, {}) }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectContent, { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "5", children: "5" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "10", children: "10" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "20", children: "20" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "50", children: "50" })
              ] })
            ] })
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { children: [
        loading ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-8", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-parkflow-blue mx-auto mb-4" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Loading attendants..." })
        ] }) : attendants.length === 0 ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-8", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Users, { className: "h-12 w-12 text-muted-foreground mx-auto mb-4" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-medium mb-2", children: "No attendants found" }),
          !isSuperAdmin && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Your account has no attendants yet." }),
          (isSuperAdmin || isContractor) && /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground mb-4", children: "Get started by adding your first attendant" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { onClick: openCreate, children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Plus, { className: "h-4 w-4 mr-2" }),
              "Add First Attendant"
            ] })
          ] })
        ] }) : /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Table, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(TableHeader, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(TableRow, { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
              Button,
              {
                variant: "ghost",
                onClick: () => handleSort("profiles.user_name"),
                className: "h-auto p-0 font-semibold",
                children: [
                  "Name",
                  /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowUpDown, { className: "ml-2 h-4 w-4" })
                ]
              }
            ) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
              Button,
              {
                variant: "ghost",
                onClick: () => handleSort("profiles.email"),
                className: "h-auto p-0 font-semibold",
                children: [
                  "Email",
                  /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowUpDown, { className: "ml-2 h-4 w-4" })
                ]
              }
            ) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: "Phone" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: "Location" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: "Contractor" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
              Button,
              {
                variant: "ghost",
                onClick: () => handleSort("status"),
                className: "h-auto p-0 font-semibold",
                children: [
                  "Status",
                  /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowUpDown, { className: "ml-2 h-4 w-4" })
                ]
              }
            ) }),
            (isSuperAdmin || isContractor || isAttendant) && /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: "Actions" })
          ] }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(TableBody, { children: attendants.map((attendant) => /* @__PURE__ */ jsxRuntimeExports.jsxs(TableRow, { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { className: "font-medium", children: attendant.profiles?.user_name || "-" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: attendant.profiles?.email || "-" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: attendant.profiles?.phone_number || "-" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: attendant.parking_locations?.locations_name || "Not assigned" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: attendant.parking_locations?.contractors?.company_name || "-" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: attendant.status === "active" ? "default" : "secondary", children: attendant.status || "inactive" }) }),
            (isSuperAdmin || isContractor || isAttendant) && /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex gap-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "ghost", size: "sm", onClick: () => openEdit(attendant), disabled: deletingId !== null, children: /* @__PURE__ */ jsxRuntimeExports.jsx(SquarePen, { className: "h-4 w-4" }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Button,
                {
                  variant: "ghost",
                  size: "sm",
                  onClick: () => remove(attendant.id),
                  disabled: deletingId !== null,
                  children: deletingId === attendant.id ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "animate-spin rounded-full h-4 w-4 border-b-2 border-current" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Trash2, { className: "h-4 w-4" })
                }
              )
            ] }) })
          ] }, attendant.id)) })
        ] }) }),
        profile?.role !== "attendant" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-4 border-t bg-gray-50/50", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-sm text-muted-foreground text-center sm:text-left", children: [
            "Showing ",
            (pagination.page - 1) * pagination.pageSize + 1,
            " to ",
            Math.min(pagination.page * pagination.pageSize, pagination.totalCount),
            " of ",
            pagination.totalCount,
            " results",
            /* @__PURE__ */ jsxRuntimeExports.jsx("br", {}),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-xs text-gray-500", children: [
              "Page ",
              pagination.page,
              " of ",
              pagination.totalPages,
              " | Page Size: ",
              pagination.pageSize
            ] })
          ] }),
          pagination.totalPages > 1 && /* @__PURE__ */ jsxRuntimeExports.jsx(Pagination, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(PaginationContent, { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(PaginationItem, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(
              PaginationPrevious,
              {
                onClick: () => handlePageChange(pagination.page - 1),
                className: pagination.page === 1 ? "pointer-events-none opacity-50" : "cursor-pointer hover:bg-gray-100"
              }
            ) }),
            Array.from({ length: Math.min(5, pagination.totalPages) }, (_, i2) => {
              let pageNum;
              if (pagination.totalPages <= 5) {
                pageNum = i2 + 1;
              } else if (pagination.page <= 3) {
                pageNum = i2 + 1;
              } else if (pagination.page >= pagination.totalPages - 2) {
                pageNum = pagination.totalPages - 4 + i2;
              } else {
                pageNum = pagination.page - 2 + i2;
              }
              return /* @__PURE__ */ jsxRuntimeExports.jsx(PaginationItem, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(
                PaginationLink,
                {
                  onClick: () => handlePageChange(pageNum),
                  isActive: pagination.page === pageNum,
                  className: "cursor-pointer hover:bg-gray-100",
                  children: pageNum
                }
              ) }, pageNum);
            }),
            pagination.totalPages > 5 && pagination.page < pagination.totalPages - 2 && /* @__PURE__ */ jsxRuntimeExports.jsx(PaginationItem, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(PaginationEllipsis, {}) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(PaginationItem, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(
              PaginationNext,
              {
                onClick: () => handlePageChange(pagination.page + 1),
                className: pagination.page === pagination.totalPages ? "pointer-events-none opacity-50" : "cursor-pointer hover:bg-gray-100"
              }
            ) })
          ] }) })
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: showForm, onOpenChange: setShowForm, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { className: "max-w-2xl", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(DialogTitle, { children: editing ? "Edit Attendant" : "Add Attendant" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogDescription, { children: [
          editing ? "Update attendant information" : "Create a new attendant account",
          isContractor && currentContractor && !editing && form.location_id && form.location_id !== "none" && (() => {
            const attendantsAtLocation = attendants.filter((a) => a.location_id === form.location_id).length;
            return /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "block mt-1 text-xs", children: [
              "Attendants at this location: ",
              attendantsAtLocation,
              " / ",
              currentContractor.allowed_attendants_per_location || 0,
              " allowed",
              attendantsAtLocation >= (currentContractor.allowed_attendants_per_location || 0) && /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-red-500 ml-2", children: "(Limit reached for this location)" })
            ] });
          })()
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "user_name", children: "Full Name *" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Input,
            {
              id: "user_name",
              value: form.user_name || "",
              onChange: (e) => setForm({ ...form, user_name: e.target.value }),
              placeholder: "Enter full name"
            }
          )
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "email", children: "Email *" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Input,
            {
              id: "email",
              type: "email",
              value: form.email || "",
              onChange: (e) => setForm({ ...form, email: e.target.value }),
              placeholder: "Enter email address"
            }
          )
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "phone_number", children: "Phone Number" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Input,
            {
              id: "phone_number",
              value: form.phone_number || "",
              onChange: (e) => setForm({ ...form, phone_number: e.target.value }),
              placeholder: "Enter phone number"
            }
          )
        ] }),
        !editing && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "password", children: "Password *" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Input,
            {
              id: "password",
              type: "password",
              value: form.password || "",
              onChange: (e) => setForm({ ...form, password: e.target.value }),
              placeholder: "Enter password"
            }
          )
        ] }),
        isSuperAdmin && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2 md:col-span-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { children: "Contractor *" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: form.contractor_id || "", onValueChange: (value) => setForm({ ...form, contractor_id: value, location_id: "" }), children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { placeholder: "Select contractor" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectContent, { children: contractors.length === 0 ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "px-3 py-2 text-sm text-muted-foreground", children: "No contractors found" }) : contractors.map((c) => /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: c.id, children: c.company_name || c.profiles?.user_name || c.profiles?.email }, c.id)) })
          ] })
        ] }),
        isContractor && currentContractor && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2 md:col-span-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { children: "Contractor" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Input,
            {
              value: currentContractor.company_name || currentContractor.profiles?.user_name || "Your Account",
              disabled: true,
              className: "bg-muted"
            }
          )
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { children: "Assigned Location" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: form.location_id || "none", onValueChange: (value) => setForm({ ...form, location_id: value === "none" ? "" : value }), children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { placeholder: "Select location (optional)" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectContent, { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "none", children: "No location assigned" }),
              filteredLocations.map((loc) => /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectItem, { value: loc.id, children: [
                loc.locations_name,
                " - ",
                loc.address
              ] }, loc.id))
            ] })
          ] }),
          form.contractor_id && filteredLocations.length === 0 && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-muted-foreground", children: "No locations available for selected contractor" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { children: "Status" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: form.status || "active", onValueChange: (value) => setForm({ ...form, status: value }), children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { placeholder: "Select status" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectContent, { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "active", children: "Active" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "inactive", children: "Inactive" })
            ] })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogFooter, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "outline", onClick: () => setShowForm(false), disabled: formLoading, children: "Cancel" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { onClick: save, disabled: formLoading, children: formLoading ? /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2" }),
          editing ? "Updating..." : "Creating..."
        ] }) : editing ? "Update" : "Create" })
      ] })
    ] }) })
  ] });
});
function Dashboard() {
  const { profile } = useAuth();
  if (!profile) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-center h-96", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "animate-spin rounded-full h-12 w-12 border-b-2 border-parkflow-blue" }) });
  }
  switch (profile.role) {
    case "super_admin":
      return /* @__PURE__ */ jsxRuntimeExports.jsx(SuperAdminDashboard, {});
    case "contractor":
      return /* @__PURE__ */ jsxRuntimeExports.jsx(ContractorDashboard, {});
    case "attendant":
      return /* @__PURE__ */ jsxRuntimeExports.jsx(Attendants, {});
    default:
      return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-center py-12", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("h2", { className: "text-xl font-semibold text-muted-foreground", children: [
        "Invalid role: ",
        profile.role
      ] }) });
  }
}
var isCheckBoxInput = (element) => element.type === "checkbox";
var isDateObject = (value) => value instanceof Date;
var isNullOrUndefined = (value) => value == null;
const isObjectType = (value) => typeof value === "object";
var isObject = (value) => !isNullOrUndefined(value) && !Array.isArray(value) && isObjectType(value) && !isDateObject(value);
var getEventValue = (event) => isObject(event) && event.target ? isCheckBoxInput(event.target) ? event.target.checked : event.target.value : event;
var getNodeParentName = (name2) => name2.substring(0, name2.search(/\.\d+(\.|$)/)) || name2;
var isNameInFieldArray = (names, name2) => names.has(getNodeParentName(name2));
var isPlainObject = (tempObject) => {
  const prototypeCopy = tempObject.constructor && tempObject.constructor.prototype;
  return isObject(prototypeCopy) && prototypeCopy.hasOwnProperty("isPrototypeOf");
};
var isWeb = typeof window !== "undefined" && typeof window.HTMLElement !== "undefined" && typeof document !== "undefined";
function cloneObject(data) {
  let copy;
  const isArray = Array.isArray(data);
  const isFileListInstance = typeof FileList !== "undefined" ? data instanceof FileList : false;
  if (data instanceof Date) {
    copy = new Date(data);
  } else if (!(isWeb && (data instanceof Blob || isFileListInstance)) && (isArray || isObject(data))) {
    copy = isArray ? [] : {};
    if (!isArray && !isPlainObject(data)) {
      copy = data;
    } else {
      for (const key in data) {
        if (data.hasOwnProperty(key)) {
          copy[key] = cloneObject(data[key]);
        }
      }
    }
  } else {
    return data;
  }
  return copy;
}
var isKey = (value) => /^\w*$/.test(value);
var isUndefined = (val) => val === void 0;
var compact = (value) => Array.isArray(value) ? value.filter(Boolean) : [];
var stringToPath = (input) => compact(input.replace(/["|']|\]/g, "").split(/\.|\[/));
var get = (object, path, defaultValue) => {
  if (!path || !isObject(object)) {
    return defaultValue;
  }
  const result = (isKey(path) ? [path] : stringToPath(path)).reduce((result2, key) => isNullOrUndefined(result2) ? result2 : result2[key], object);
  return isUndefined(result) || result === object ? isUndefined(object[path]) ? defaultValue : object[path] : result;
};
var isBoolean = (value) => typeof value === "boolean";
var set = (object, path, value) => {
  let index = -1;
  const tempPath = isKey(path) ? [path] : stringToPath(path);
  const length = tempPath.length;
  const lastIndex = length - 1;
  while (++index < length) {
    const key = tempPath[index];
    let newValue = value;
    if (index !== lastIndex) {
      const objValue = object[key];
      newValue = isObject(objValue) || Array.isArray(objValue) ? objValue : !isNaN(+tempPath[index + 1]) ? [] : {};
    }
    if (key === "__proto__" || key === "constructor" || key === "prototype") {
      return;
    }
    object[key] = newValue;
    object = object[key];
  }
};
const EVENTS = {
  BLUR: "blur",
  FOCUS_OUT: "focusout",
  CHANGE: "change"
};
const VALIDATION_MODE = {
  onBlur: "onBlur",
  onChange: "onChange",
  onSubmit: "onSubmit",
  onTouched: "onTouched",
  all: "all"
};
const INPUT_VALIDATION_RULES = {
  max: "max",
  min: "min",
  maxLength: "maxLength",
  minLength: "minLength",
  pattern: "pattern",
  required: "required",
  validate: "validate"
};
const HookFormContext = React$1.createContext(null);
HookFormContext.displayName = "HookFormContext";
var getProxyFormState = (formState, control, localProxyFormState, isRoot = true) => {
  const result = {
    defaultValues: control._defaultValues
  };
  for (const key in formState) {
    Object.defineProperty(result, key, {
      get: () => {
        const _key = key;
        if (control._proxyFormState[_key] !== VALIDATION_MODE.all) {
          control._proxyFormState[_key] = !isRoot || VALIDATION_MODE.all;
        }
        return formState[_key];
      }
    });
  }
  return result;
};
const useIsomorphicLayoutEffect = typeof window !== "undefined" ? React$1.useLayoutEffect : React$1.useEffect;
var isString = (value) => typeof value === "string";
var generateWatchOutput = (names, _names, formValues, isGlobal, defaultValue) => {
  if (isString(names)) {
    isGlobal && _names.watch.add(names);
    return get(formValues, names, defaultValue);
  }
  if (Array.isArray(names)) {
    return names.map((fieldName) => (isGlobal && _names.watch.add(fieldName), get(formValues, fieldName)));
  }
  isGlobal && (_names.watchAll = true);
  return formValues;
};
var isPrimitive = (value) => isNullOrUndefined(value) || !isObjectType(value);
function deepEqual(object1, object2, _internal_visited = /* @__PURE__ */ new WeakSet()) {
  if (isPrimitive(object1) || isPrimitive(object2)) {
    return object1 === object2;
  }
  if (isDateObject(object1) && isDateObject(object2)) {
    return object1.getTime() === object2.getTime();
  }
  const keys1 = Object.keys(object1);
  const keys2 = Object.keys(object2);
  if (keys1.length !== keys2.length) {
    return false;
  }
  if (_internal_visited.has(object1) || _internal_visited.has(object2)) {
    return true;
  }
  _internal_visited.add(object1);
  _internal_visited.add(object2);
  for (const key of keys1) {
    const val1 = object1[key];
    if (!keys2.includes(key)) {
      return false;
    }
    if (key !== "ref") {
      const val2 = object2[key];
      if (isDateObject(val1) && isDateObject(val2) || isObject(val1) && isObject(val2) || Array.isArray(val1) && Array.isArray(val2) ? !deepEqual(val1, val2, _internal_visited) : val1 !== val2) {
        return false;
      }
    }
  }
  return true;
}
var appendErrors = (name2, validateAllFieldCriteria, errors, type2, message) => validateAllFieldCriteria ? {
  ...errors[name2],
  types: {
    ...errors[name2] && errors[name2].types ? errors[name2].types : {},
    [type2]: message || true
  }
} : {};
var convertToArrayPayload = (value) => Array.isArray(value) ? value : [value];
var createSubject = () => {
  let _observers2 = [];
  const next = (value) => {
    for (const observer of _observers2) {
      observer.next && observer.next(value);
    }
  };
  const subscribe2 = (observer) => {
    _observers2.push(observer);
    return {
      unsubscribe: () => {
        _observers2 = _observers2.filter((o2) => o2 !== observer);
      }
    };
  };
  const unsubscribe = () => {
    _observers2 = [];
  };
  return {
    get observers() {
      return _observers2;
    },
    next,
    subscribe: subscribe2,
    unsubscribe
  };
};
var isEmptyObject = (value) => isObject(value) && !Object.keys(value).length;
var isFileInput = (element) => element.type === "file";
var isFunction = (value) => typeof value === "function";
var isHTMLElement = (value) => {
  if (!isWeb) {
    return false;
  }
  const owner = value ? value.ownerDocument : 0;
  return value instanceof (owner && owner.defaultView ? owner.defaultView.HTMLElement : HTMLElement);
};
var isMultipleSelect = (element) => element.type === `select-multiple`;
var isRadioInput = (element) => element.type === "radio";
var isRadioOrCheckbox = (ref) => isRadioInput(ref) || isCheckBoxInput(ref);
var live = (ref) => isHTMLElement(ref) && ref.isConnected;
function baseGet(object, updatePath) {
  const length = updatePath.slice(0, -1).length;
  let index = 0;
  while (index < length) {
    object = isUndefined(object) ? index++ : object[updatePath[index++]];
  }
  return object;
}
function isEmptyArray(obj) {
  for (const key in obj) {
    if (obj.hasOwnProperty(key) && !isUndefined(obj[key])) {
      return false;
    }
  }
  return true;
}
function unset(object, path) {
  const paths = Array.isArray(path) ? path : isKey(path) ? [path] : stringToPath(path);
  const childObject = paths.length === 1 ? object : baseGet(object, paths);
  const index = paths.length - 1;
  const key = paths[index];
  if (childObject) {
    delete childObject[key];
  }
  if (index !== 0 && (isObject(childObject) && isEmptyObject(childObject) || Array.isArray(childObject) && isEmptyArray(childObject))) {
    unset(object, paths.slice(0, -1));
  }
  return object;
}
var objectHasFunction = (data) => {
  for (const key in data) {
    if (isFunction(data[key])) {
      return true;
    }
  }
  return false;
};
function markFieldsDirty(data, fields = {}) {
  const isParentNodeArray = Array.isArray(data);
  if (isObject(data) || isParentNodeArray) {
    for (const key in data) {
      if (Array.isArray(data[key]) || isObject(data[key]) && !objectHasFunction(data[key])) {
        fields[key] = Array.isArray(data[key]) ? [] : {};
        markFieldsDirty(data[key], fields[key]);
      } else if (!isNullOrUndefined(data[key])) {
        fields[key] = true;
      }
    }
  }
  return fields;
}
function getDirtyFieldsFromDefaultValues(data, formValues, dirtyFieldsFromValues) {
  const isParentNodeArray = Array.isArray(data);
  if (isObject(data) || isParentNodeArray) {
    for (const key in data) {
      if (Array.isArray(data[key]) || isObject(data[key]) && !objectHasFunction(data[key])) {
        if (isUndefined(formValues) || isPrimitive(dirtyFieldsFromValues[key])) {
          dirtyFieldsFromValues[key] = Array.isArray(data[key]) ? markFieldsDirty(data[key], []) : { ...markFieldsDirty(data[key]) };
        } else {
          getDirtyFieldsFromDefaultValues(data[key], isNullOrUndefined(formValues) ? {} : formValues[key], dirtyFieldsFromValues[key]);
        }
      } else {
        dirtyFieldsFromValues[key] = !deepEqual(data[key], formValues[key]);
      }
    }
  }
  return dirtyFieldsFromValues;
}
var getDirtyFields = (defaultValues, formValues) => getDirtyFieldsFromDefaultValues(defaultValues, formValues, markFieldsDirty(formValues));
const defaultResult = {
  value: false,
  isValid: false
};
const validResult = { value: true, isValid: true };
var getCheckboxValue = (options) => {
  if (Array.isArray(options)) {
    if (options.length > 1) {
      const values = options.filter((option) => option && option.checked && !option.disabled).map((option) => option.value);
      return { value: values, isValid: !!values.length };
    }
    return options[0].checked && !options[0].disabled ? (
      // @ts-expect-error expected to work in the browser
      options[0].attributes && !isUndefined(options[0].attributes.value) ? isUndefined(options[0].value) || options[0].value === "" ? validResult : { value: options[0].value, isValid: true } : validResult
    ) : defaultResult;
  }
  return defaultResult;
};
var getFieldValueAs = (value, { valueAsNumber, valueAsDate, setValueAs }) => isUndefined(value) ? value : valueAsNumber ? value === "" ? NaN : value ? +value : value : valueAsDate && isString(value) ? new Date(value) : setValueAs ? setValueAs(value) : value;
const defaultReturn = {
  isValid: false,
  value: null
};
var getRadioValue = (options) => Array.isArray(options) ? options.reduce((previous, option) => option && option.checked && !option.disabled ? {
  isValid: true,
  value: option.value
} : previous, defaultReturn) : defaultReturn;
function getFieldValue(_f2) {
  const ref = _f2.ref;
  if (isFileInput(ref)) {
    return ref.files;
  }
  if (isRadioInput(ref)) {
    return getRadioValue(_f2.refs).value;
  }
  if (isMultipleSelect(ref)) {
    return [...ref.selectedOptions].map(({ value }) => value);
  }
  if (isCheckBoxInput(ref)) {
    return getCheckboxValue(_f2.refs).value;
  }
  return getFieldValueAs(isUndefined(ref.value) ? _f2.ref.value : ref.value, _f2);
}
var getResolverOptions = (fieldsNames, _fields, criteriaMode, shouldUseNativeValidation) => {
  const fields = {};
  for (const name2 of fieldsNames) {
    const field = get(_fields, name2);
    field && set(fields, name2, field._f);
  }
  return {
    criteriaMode,
    names: [...fieldsNames],
    fields,
    shouldUseNativeValidation
  };
};
var isRegex = (value) => value instanceof RegExp;
var getRuleValue = (rule) => isUndefined(rule) ? rule : isRegex(rule) ? rule.source : isObject(rule) ? isRegex(rule.value) ? rule.value.source : rule.value : rule;
var getValidationModes = (mode) => ({
  isOnSubmit: !mode || mode === VALIDATION_MODE.onSubmit,
  isOnBlur: mode === VALIDATION_MODE.onBlur,
  isOnChange: mode === VALIDATION_MODE.onChange,
  isOnAll: mode === VALIDATION_MODE.all,
  isOnTouch: mode === VALIDATION_MODE.onTouched
});
const ASYNC_FUNCTION = "AsyncFunction";
var hasPromiseValidation = (fieldReference) => !!fieldReference && !!fieldReference.validate && !!(isFunction(fieldReference.validate) && fieldReference.validate.constructor.name === ASYNC_FUNCTION || isObject(fieldReference.validate) && Object.values(fieldReference.validate).find((validateFunction) => validateFunction.constructor.name === ASYNC_FUNCTION));
var hasValidation = (options) => options.mount && (options.required || options.min || options.max || options.maxLength || options.minLength || options.pattern || options.validate);
var isWatched = (name2, _names, isBlurEvent) => !isBlurEvent && (_names.watchAll || _names.watch.has(name2) || [..._names.watch].some((watchName) => name2.startsWith(watchName) && /^\.\w+/.test(name2.slice(watchName.length))));
const iterateFieldsByAction = (fields, action, fieldsNames, abortEarly) => {
  for (const key of fieldsNames || Object.keys(fields)) {
    const field = get(fields, key);
    if (field) {
      const { _f: _f2, ...currentField } = field;
      if (_f2) {
        if (_f2.refs && _f2.refs[0] && action(_f2.refs[0], key) && !abortEarly) {
          return true;
        } else if (_f2.ref && action(_f2.ref, _f2.name) && !abortEarly) {
          return true;
        } else {
          if (iterateFieldsByAction(currentField, action)) {
            break;
          }
        }
      } else if (isObject(currentField)) {
        if (iterateFieldsByAction(currentField, action)) {
          break;
        }
      }
    }
  }
  return;
};
function schemaErrorLookup(errors, _fields, name2) {
  const error = get(errors, name2);
  if (error || isKey(name2)) {
    return {
      error,
      name: name2
    };
  }
  const names = name2.split(".");
  while (names.length) {
    const fieldName = names.join(".");
    const field = get(_fields, fieldName);
    const foundError = get(errors, fieldName);
    if (field && !Array.isArray(field) && name2 !== fieldName) {
      return { name: name2 };
    }
    if (foundError && foundError.type) {
      return {
        name: fieldName,
        error: foundError
      };
    }
    if (foundError && foundError.root && foundError.root.type) {
      return {
        name: `${fieldName}.root`,
        error: foundError.root
      };
    }
    names.pop();
  }
  return {
    name: name2
  };
}
var shouldRenderFormState = (formStateData, _proxyFormState, updateFormState, isRoot) => {
  updateFormState(formStateData);
  const { name: name2, ...formState } = formStateData;
  return isEmptyObject(formState) || Object.keys(formState).length >= Object.keys(_proxyFormState).length || Object.keys(formState).find((key) => _proxyFormState[key] === (!isRoot || VALIDATION_MODE.all));
};
var shouldSubscribeByName = (name2, signalName, exact) => !name2 || !signalName || name2 === signalName || convertToArrayPayload(name2).some((currentName) => currentName && (exact ? currentName === signalName : currentName.startsWith(signalName) || signalName.startsWith(currentName)));
var skipValidation = (isBlurEvent, isTouched, isSubmitted, reValidateMode, mode) => {
  if (mode.isOnAll) {
    return false;
  } else if (!isSubmitted && mode.isOnTouch) {
    return !(isTouched || isBlurEvent);
  } else if (isSubmitted ? reValidateMode.isOnBlur : mode.isOnBlur) {
    return !isBlurEvent;
  } else if (isSubmitted ? reValidateMode.isOnChange : mode.isOnChange) {
    return isBlurEvent;
  }
  return true;
};
var unsetEmptyArray = (ref, name2) => !compact(get(ref, name2)).length && unset(ref, name2);
var updateFieldArrayRootError = (errors, error, name2) => {
  const fieldArrayErrors = convertToArrayPayload(get(errors, name2));
  set(fieldArrayErrors, "root", error[name2]);
  set(errors, name2, fieldArrayErrors);
  return errors;
};
var isMessage = (value) => isString(value);
function getValidateError(result, ref, type2 = "validate") {
  if (isMessage(result) || Array.isArray(result) && result.every(isMessage) || isBoolean(result) && !result) {
    return {
      type: type2,
      message: isMessage(result) ? result : "",
      ref
    };
  }
}
var getValueAndMessage = (validationData) => isObject(validationData) && !isRegex(validationData) ? validationData : {
  value: validationData,
  message: ""
};
var validateField = async (field, disabledFieldNames, formValues, validateAllFieldCriteria, shouldUseNativeValidation, isFieldArray) => {
  const { ref, refs, required, maxLength, minLength, min, max, pattern, validate, name: name2, valueAsNumber, mount } = field._f;
  const inputValue = get(formValues, name2);
  if (!mount || disabledFieldNames.has(name2)) {
    return {};
  }
  const inputRef = refs ? refs[0] : ref;
  const setCustomValidity = (message) => {
    if (shouldUseNativeValidation && inputRef.reportValidity) {
      inputRef.setCustomValidity(isBoolean(message) ? "" : message || "");
      inputRef.reportValidity();
    }
  };
  const error = {};
  const isRadio = isRadioInput(ref);
  const isCheckBox = isCheckBoxInput(ref);
  const isRadioOrCheckbox2 = isRadio || isCheckBox;
  const isEmpty = (valueAsNumber || isFileInput(ref)) && isUndefined(ref.value) && isUndefined(inputValue) || isHTMLElement(ref) && ref.value === "" || inputValue === "" || Array.isArray(inputValue) && !inputValue.length;
  const appendErrorsCurry = appendErrors.bind(null, name2, validateAllFieldCriteria, error);
  const getMinMaxMessage = (exceedMax, maxLengthMessage, minLengthMessage, maxType = INPUT_VALIDATION_RULES.maxLength, minType = INPUT_VALIDATION_RULES.minLength) => {
    const message = exceedMax ? maxLengthMessage : minLengthMessage;
    error[name2] = {
      type: exceedMax ? maxType : minType,
      message,
      ref,
      ...appendErrorsCurry(exceedMax ? maxType : minType, message)
    };
  };
  if (isFieldArray ? !Array.isArray(inputValue) || !inputValue.length : required && (!isRadioOrCheckbox2 && (isEmpty || isNullOrUndefined(inputValue)) || isBoolean(inputValue) && !inputValue || isCheckBox && !getCheckboxValue(refs).isValid || isRadio && !getRadioValue(refs).isValid)) {
    const { value, message } = isMessage(required) ? { value: !!required, message: required } : getValueAndMessage(required);
    if (value) {
      error[name2] = {
        type: INPUT_VALIDATION_RULES.required,
        message,
        ref: inputRef,
        ...appendErrorsCurry(INPUT_VALIDATION_RULES.required, message)
      };
      if (!validateAllFieldCriteria) {
        setCustomValidity(message);
        return error;
      }
    }
  }
  if (!isEmpty && (!isNullOrUndefined(min) || !isNullOrUndefined(max))) {
    let exceedMax;
    let exceedMin;
    const maxOutput = getValueAndMessage(max);
    const minOutput = getValueAndMessage(min);
    if (!isNullOrUndefined(inputValue) && !isNaN(inputValue)) {
      const valueNumber = ref.valueAsNumber || (inputValue ? +inputValue : inputValue);
      if (!isNullOrUndefined(maxOutput.value)) {
        exceedMax = valueNumber > maxOutput.value;
      }
      if (!isNullOrUndefined(minOutput.value)) {
        exceedMin = valueNumber < minOutput.value;
      }
    } else {
      const valueDate = ref.valueAsDate || new Date(inputValue);
      const convertTimeToDate = (time) => /* @__PURE__ */ new Date((/* @__PURE__ */ new Date()).toDateString() + " " + time);
      const isTime = ref.type == "time";
      const isWeek = ref.type == "week";
      if (isString(maxOutput.value) && inputValue) {
        exceedMax = isTime ? convertTimeToDate(inputValue) > convertTimeToDate(maxOutput.value) : isWeek ? inputValue > maxOutput.value : valueDate > new Date(maxOutput.value);
      }
      if (isString(minOutput.value) && inputValue) {
        exceedMin = isTime ? convertTimeToDate(inputValue) < convertTimeToDate(minOutput.value) : isWeek ? inputValue < minOutput.value : valueDate < new Date(minOutput.value);
      }
    }
    if (exceedMax || exceedMin) {
      getMinMaxMessage(!!exceedMax, maxOutput.message, minOutput.message, INPUT_VALIDATION_RULES.max, INPUT_VALIDATION_RULES.min);
      if (!validateAllFieldCriteria) {
        setCustomValidity(error[name2].message);
        return error;
      }
    }
  }
  if ((maxLength || minLength) && !isEmpty && (isString(inputValue) || isFieldArray && Array.isArray(inputValue))) {
    const maxLengthOutput = getValueAndMessage(maxLength);
    const minLengthOutput = getValueAndMessage(minLength);
    const exceedMax = !isNullOrUndefined(maxLengthOutput.value) && inputValue.length > +maxLengthOutput.value;
    const exceedMin = !isNullOrUndefined(minLengthOutput.value) && inputValue.length < +minLengthOutput.value;
    if (exceedMax || exceedMin) {
      getMinMaxMessage(exceedMax, maxLengthOutput.message, minLengthOutput.message);
      if (!validateAllFieldCriteria) {
        setCustomValidity(error[name2].message);
        return error;
      }
    }
  }
  if (pattern && !isEmpty && isString(inputValue)) {
    const { value: patternValue, message } = getValueAndMessage(pattern);
    if (isRegex(patternValue) && !inputValue.match(patternValue)) {
      error[name2] = {
        type: INPUT_VALIDATION_RULES.pattern,
        message,
        ref,
        ...appendErrorsCurry(INPUT_VALIDATION_RULES.pattern, message)
      };
      if (!validateAllFieldCriteria) {
        setCustomValidity(message);
        return error;
      }
    }
  }
  if (validate) {
    if (isFunction(validate)) {
      const result = await validate(inputValue, formValues);
      const validateError = getValidateError(result, inputRef);
      if (validateError) {
        error[name2] = {
          ...validateError,
          ...appendErrorsCurry(INPUT_VALIDATION_RULES.validate, validateError.message)
        };
        if (!validateAllFieldCriteria) {
          setCustomValidity(validateError.message);
          return error;
        }
      }
    } else if (isObject(validate)) {
      let validationResult = {};
      for (const key in validate) {
        if (!isEmptyObject(validationResult) && !validateAllFieldCriteria) {
          break;
        }
        const validateError = getValidateError(await validate[key](inputValue, formValues), inputRef, key);
        if (validateError) {
          validationResult = {
            ...validateError,
            ...appendErrorsCurry(key, validateError.message)
          };
          setCustomValidity(validateError.message);
          if (validateAllFieldCriteria) {
            error[name2] = validationResult;
          }
        }
      }
      if (!isEmptyObject(validationResult)) {
        error[name2] = {
          ref: inputRef,
          ...validationResult
        };
        if (!validateAllFieldCriteria) {
          return error;
        }
      }
    }
  }
  setCustomValidity(true);
  return error;
};
const defaultOptions$4 = {
  mode: VALIDATION_MODE.onSubmit,
  reValidateMode: VALIDATION_MODE.onChange,
  shouldFocusError: true
};
function createFormControl(props = {}) {
  let _options = {
    ...defaultOptions$4,
    ...props
  };
  let _formState = {
    submitCount: 0,
    isDirty: false,
    isReady: false,
    isLoading: isFunction(_options.defaultValues),
    isValidating: false,
    isSubmitted: false,
    isSubmitting: false,
    isSubmitSuccessful: false,
    isValid: false,
    touchedFields: {},
    dirtyFields: {},
    validatingFields: {},
    errors: _options.errors || {},
    disabled: _options.disabled || false
  };
  let _fields = {};
  let _defaultValues = isObject(_options.defaultValues) || isObject(_options.values) ? cloneObject(_options.defaultValues || _options.values) || {} : {};
  let _formValues = _options.shouldUnregister ? {} : cloneObject(_defaultValues);
  let _state = {
    action: false,
    mount: false,
    watch: false
  };
  let _names = {
    mount: /* @__PURE__ */ new Set(),
    disabled: /* @__PURE__ */ new Set(),
    unMount: /* @__PURE__ */ new Set(),
    array: /* @__PURE__ */ new Set(),
    watch: /* @__PURE__ */ new Set()
  };
  let delayErrorCallback;
  let timer = 0;
  const _proxyFormState = {
    isDirty: false,
    dirtyFields: false,
    validatingFields: false,
    touchedFields: false,
    isValidating: false,
    isValid: false,
    errors: false
  };
  let _proxySubscribeFormState = {
    ..._proxyFormState
  };
  const _subjects = {
    array: createSubject(),
    state: createSubject()
  };
  const shouldDisplayAllAssociatedErrors = _options.criteriaMode === VALIDATION_MODE.all;
  const debounce = (callback) => (wait) => {
    clearTimeout(timer);
    timer = setTimeout(callback, wait);
  };
  const _setValid = async (shouldUpdateValid) => {
    if (!_options.disabled && (_proxyFormState.isValid || _proxySubscribeFormState.isValid || shouldUpdateValid)) {
      const isValid2 = _options.resolver ? isEmptyObject((await _runSchema()).errors) : await executeBuiltInValidation(_fields, true);
      if (isValid2 !== _formState.isValid) {
        _subjects.state.next({
          isValid: isValid2
        });
      }
    }
  };
  const _updateIsValidating = (names, isValidating) => {
    if (!_options.disabled && (_proxyFormState.isValidating || _proxyFormState.validatingFields || _proxySubscribeFormState.isValidating || _proxySubscribeFormState.validatingFields)) {
      (names || Array.from(_names.mount)).forEach((name2) => {
        if (name2) {
          isValidating ? set(_formState.validatingFields, name2, isValidating) : unset(_formState.validatingFields, name2);
        }
      });
      _subjects.state.next({
        validatingFields: _formState.validatingFields,
        isValidating: !isEmptyObject(_formState.validatingFields)
      });
    }
  };
  const _setFieldArray = (name2, values = [], method, args, shouldSetValues = true, shouldUpdateFieldsAndState = true) => {
    if (args && method && !_options.disabled) {
      _state.action = true;
      if (shouldUpdateFieldsAndState && Array.isArray(get(_fields, name2))) {
        const fieldValues = method(get(_fields, name2), args.argA, args.argB);
        shouldSetValues && set(_fields, name2, fieldValues);
      }
      if (shouldUpdateFieldsAndState && Array.isArray(get(_formState.errors, name2))) {
        const errors = method(get(_formState.errors, name2), args.argA, args.argB);
        shouldSetValues && set(_formState.errors, name2, errors);
        unsetEmptyArray(_formState.errors, name2);
      }
      if ((_proxyFormState.touchedFields || _proxySubscribeFormState.touchedFields) && shouldUpdateFieldsAndState && Array.isArray(get(_formState.touchedFields, name2))) {
        const touchedFields = method(get(_formState.touchedFields, name2), args.argA, args.argB);
        shouldSetValues && set(_formState.touchedFields, name2, touchedFields);
      }
      if (_proxyFormState.dirtyFields || _proxySubscribeFormState.dirtyFields) {
        _formState.dirtyFields = getDirtyFields(_defaultValues, _formValues);
      }
      _subjects.state.next({
        name: name2,
        isDirty: _getDirty(name2, values),
        dirtyFields: _formState.dirtyFields,
        errors: _formState.errors,
        isValid: _formState.isValid
      });
    } else {
      set(_formValues, name2, values);
    }
  };
  const updateErrors = (name2, error) => {
    set(_formState.errors, name2, error);
    _subjects.state.next({
      errors: _formState.errors
    });
  };
  const _setErrors = (errors) => {
    _formState.errors = errors;
    _subjects.state.next({
      errors: _formState.errors,
      isValid: false
    });
  };
  const updateValidAndValue = (name2, shouldSkipSetValueAs, value, ref) => {
    const field = get(_fields, name2);
    if (field) {
      const defaultValue = get(_formValues, name2, isUndefined(value) ? get(_defaultValues, name2) : value);
      isUndefined(defaultValue) || ref && ref.defaultChecked || shouldSkipSetValueAs ? set(_formValues, name2, shouldSkipSetValueAs ? defaultValue : getFieldValue(field._f)) : setFieldValue(name2, defaultValue);
      _state.mount && _setValid();
    }
  };
  const updateTouchAndDirty = (name2, fieldValue, isBlurEvent, shouldDirty, shouldRender) => {
    let shouldUpdateField = false;
    let isPreviousDirty = false;
    const output = {
      name: name2
    };
    if (!_options.disabled) {
      if (!isBlurEvent || shouldDirty) {
        if (_proxyFormState.isDirty || _proxySubscribeFormState.isDirty) {
          isPreviousDirty = _formState.isDirty;
          _formState.isDirty = output.isDirty = _getDirty();
          shouldUpdateField = isPreviousDirty !== output.isDirty;
        }
        const isCurrentFieldPristine = deepEqual(get(_defaultValues, name2), fieldValue);
        isPreviousDirty = !!get(_formState.dirtyFields, name2);
        isCurrentFieldPristine ? unset(_formState.dirtyFields, name2) : set(_formState.dirtyFields, name2, true);
        output.dirtyFields = _formState.dirtyFields;
        shouldUpdateField = shouldUpdateField || (_proxyFormState.dirtyFields || _proxySubscribeFormState.dirtyFields) && isPreviousDirty !== !isCurrentFieldPristine;
      }
      if (isBlurEvent) {
        const isPreviousFieldTouched = get(_formState.touchedFields, name2);
        if (!isPreviousFieldTouched) {
          set(_formState.touchedFields, name2, isBlurEvent);
          output.touchedFields = _formState.touchedFields;
          shouldUpdateField = shouldUpdateField || (_proxyFormState.touchedFields || _proxySubscribeFormState.touchedFields) && isPreviousFieldTouched !== isBlurEvent;
        }
      }
      shouldUpdateField && shouldRender && _subjects.state.next(output);
    }
    return shouldUpdateField ? output : {};
  };
  const shouldRenderByError = (name2, isValid2, error, fieldState) => {
    const previousFieldError = get(_formState.errors, name2);
    const shouldUpdateValid = (_proxyFormState.isValid || _proxySubscribeFormState.isValid) && isBoolean(isValid2) && _formState.isValid !== isValid2;
    if (_options.delayError && error) {
      delayErrorCallback = debounce(() => updateErrors(name2, error));
      delayErrorCallback(_options.delayError);
    } else {
      clearTimeout(timer);
      delayErrorCallback = null;
      error ? set(_formState.errors, name2, error) : unset(_formState.errors, name2);
    }
    if ((error ? !deepEqual(previousFieldError, error) : previousFieldError) || !isEmptyObject(fieldState) || shouldUpdateValid) {
      const updatedFormState = {
        ...fieldState,
        ...shouldUpdateValid && isBoolean(isValid2) ? { isValid: isValid2 } : {},
        errors: _formState.errors,
        name: name2
      };
      _formState = {
        ..._formState,
        ...updatedFormState
      };
      _subjects.state.next(updatedFormState);
    }
  };
  const _runSchema = async (name2) => {
    _updateIsValidating(name2, true);
    const result = await _options.resolver(_formValues, _options.context, getResolverOptions(name2 || _names.mount, _fields, _options.criteriaMode, _options.shouldUseNativeValidation));
    _updateIsValidating(name2);
    return result;
  };
  const executeSchemaAndUpdateState = async (names) => {
    const { errors } = await _runSchema(names);
    if (names) {
      for (const name2 of names) {
        const error = get(errors, name2);
        error ? set(_formState.errors, name2, error) : unset(_formState.errors, name2);
      }
    } else {
      _formState.errors = errors;
    }
    return errors;
  };
  const executeBuiltInValidation = async (fields, shouldOnlyCheckValid, context = {
    valid: true
  }) => {
    for (const name2 in fields) {
      const field = fields[name2];
      if (field) {
        const { _f: _f2, ...fieldValue } = field;
        if (_f2) {
          const isFieldArrayRoot = _names.array.has(_f2.name);
          const isPromiseFunction = field._f && hasPromiseValidation(field._f);
          if (isPromiseFunction && _proxyFormState.validatingFields) {
            _updateIsValidating([name2], true);
          }
          const fieldError = await validateField(field, _names.disabled, _formValues, shouldDisplayAllAssociatedErrors, _options.shouldUseNativeValidation && !shouldOnlyCheckValid, isFieldArrayRoot);
          if (isPromiseFunction && _proxyFormState.validatingFields) {
            _updateIsValidating([name2]);
          }
          if (fieldError[_f2.name]) {
            context.valid = false;
            if (shouldOnlyCheckValid) {
              break;
            }
          }
          !shouldOnlyCheckValid && (get(fieldError, _f2.name) ? isFieldArrayRoot ? updateFieldArrayRootError(_formState.errors, fieldError, _f2.name) : set(_formState.errors, _f2.name, fieldError[_f2.name]) : unset(_formState.errors, _f2.name));
        }
        !isEmptyObject(fieldValue) && await executeBuiltInValidation(fieldValue, shouldOnlyCheckValid, context);
      }
    }
    return context.valid;
  };
  const _removeUnmounted = () => {
    for (const name2 of _names.unMount) {
      const field = get(_fields, name2);
      field && (field._f.refs ? field._f.refs.every((ref) => !live(ref)) : !live(field._f.ref)) && unregister(name2);
    }
    _names.unMount = /* @__PURE__ */ new Set();
  };
  const _getDirty = (name2, data) => !_options.disabled && (name2 && data && set(_formValues, name2, data), !deepEqual(getValues(), _defaultValues));
  const _getWatch = (names, defaultValue, isGlobal) => generateWatchOutput(names, _names, {
    ..._state.mount ? _formValues : isUndefined(defaultValue) ? _defaultValues : isString(names) ? { [names]: defaultValue } : defaultValue
  }, isGlobal, defaultValue);
  const _getFieldArray = (name2) => compact(get(_state.mount ? _formValues : _defaultValues, name2, _options.shouldUnregister ? get(_defaultValues, name2, []) : []));
  const setFieldValue = (name2, value, options = {}) => {
    const field = get(_fields, name2);
    let fieldValue = value;
    if (field) {
      const fieldReference = field._f;
      if (fieldReference) {
        !fieldReference.disabled && set(_formValues, name2, getFieldValueAs(value, fieldReference));
        fieldValue = isHTMLElement(fieldReference.ref) && isNullOrUndefined(value) ? "" : value;
        if (isMultipleSelect(fieldReference.ref)) {
          [...fieldReference.ref.options].forEach((optionRef) => optionRef.selected = fieldValue.includes(optionRef.value));
        } else if (fieldReference.refs) {
          if (isCheckBoxInput(fieldReference.ref)) {
            fieldReference.refs.forEach((checkboxRef) => {
              if (!checkboxRef.defaultChecked || !checkboxRef.disabled) {
                if (Array.isArray(fieldValue)) {
                  checkboxRef.checked = !!fieldValue.find((data) => data === checkboxRef.value);
                } else {
                  checkboxRef.checked = fieldValue === checkboxRef.value || !!fieldValue;
                }
              }
            });
          } else {
            fieldReference.refs.forEach((radioRef) => radioRef.checked = radioRef.value === fieldValue);
          }
        } else if (isFileInput(fieldReference.ref)) {
          fieldReference.ref.value = "";
        } else {
          fieldReference.ref.value = fieldValue;
          if (!fieldReference.ref.type) {
            _subjects.state.next({
              name: name2,
              values: cloneObject(_formValues)
            });
          }
        }
      }
    }
    (options.shouldDirty || options.shouldTouch) && updateTouchAndDirty(name2, fieldValue, options.shouldTouch, options.shouldDirty, true);
    options.shouldValidate && trigger(name2);
  };
  const setValues = (name2, value, options) => {
    for (const fieldKey in value) {
      if (!value.hasOwnProperty(fieldKey)) {
        return;
      }
      const fieldValue = value[fieldKey];
      const fieldName = name2 + "." + fieldKey;
      const field = get(_fields, fieldName);
      (_names.array.has(name2) || isObject(fieldValue) || field && !field._f) && !isDateObject(fieldValue) ? setValues(fieldName, fieldValue, options) : setFieldValue(fieldName, fieldValue, options);
    }
  };
  const setValue = (name2, value, options = {}) => {
    const field = get(_fields, name2);
    const isFieldArray = _names.array.has(name2);
    const cloneValue = cloneObject(value);
    set(_formValues, name2, cloneValue);
    if (isFieldArray) {
      _subjects.array.next({
        name: name2,
        values: cloneObject(_formValues)
      });
      if ((_proxyFormState.isDirty || _proxyFormState.dirtyFields || _proxySubscribeFormState.isDirty || _proxySubscribeFormState.dirtyFields) && options.shouldDirty) {
        _subjects.state.next({
          name: name2,
          dirtyFields: getDirtyFields(_defaultValues, _formValues),
          isDirty: _getDirty(name2, cloneValue)
        });
      }
    } else {
      field && !field._f && !isNullOrUndefined(cloneValue) ? setValues(name2, cloneValue, options) : setFieldValue(name2, cloneValue, options);
    }
    isWatched(name2, _names) && _subjects.state.next({ ..._formState, name: name2 });
    _subjects.state.next({
      name: _state.mount ? name2 : void 0,
      values: cloneObject(_formValues)
    });
  };
  const onChange = async (event) => {
    _state.mount = true;
    const target = event.target;
    let name2 = target.name;
    let isFieldValueUpdated = true;
    const field = get(_fields, name2);
    const _updateIsFieldValueUpdated = (fieldValue) => {
      isFieldValueUpdated = Number.isNaN(fieldValue) || isDateObject(fieldValue) && isNaN(fieldValue.getTime()) || deepEqual(fieldValue, get(_formValues, name2, fieldValue));
    };
    const validationModeBeforeSubmit = getValidationModes(_options.mode);
    const validationModeAfterSubmit = getValidationModes(_options.reValidateMode);
    if (field) {
      let error;
      let isValid2;
      const fieldValue = target.type ? getFieldValue(field._f) : getEventValue(event);
      const isBlurEvent = event.type === EVENTS.BLUR || event.type === EVENTS.FOCUS_OUT;
      const shouldSkipValidation = !hasValidation(field._f) && !_options.resolver && !get(_formState.errors, name2) && !field._f.deps || skipValidation(isBlurEvent, get(_formState.touchedFields, name2), _formState.isSubmitted, validationModeAfterSubmit, validationModeBeforeSubmit);
      const watched = isWatched(name2, _names, isBlurEvent);
      set(_formValues, name2, fieldValue);
      if (isBlurEvent) {
        field._f.onBlur && field._f.onBlur(event);
        delayErrorCallback && delayErrorCallback(0);
      } else if (field._f.onChange) {
        field._f.onChange(event);
      }
      const fieldState = updateTouchAndDirty(name2, fieldValue, isBlurEvent);
      const shouldRender = !isEmptyObject(fieldState) || watched;
      !isBlurEvent && _subjects.state.next({
        name: name2,
        type: event.type,
        values: cloneObject(_formValues)
      });
      if (shouldSkipValidation) {
        if (_proxyFormState.isValid || _proxySubscribeFormState.isValid) {
          if (_options.mode === "onBlur") {
            if (isBlurEvent) {
              _setValid();
            }
          } else if (!isBlurEvent) {
            _setValid();
          }
        }
        return shouldRender && _subjects.state.next({ name: name2, ...watched ? {} : fieldState });
      }
      !isBlurEvent && watched && _subjects.state.next({ ..._formState });
      if (_options.resolver) {
        const { errors } = await _runSchema([name2]);
        _updateIsFieldValueUpdated(fieldValue);
        if (isFieldValueUpdated) {
          const previousErrorLookupResult = schemaErrorLookup(_formState.errors, _fields, name2);
          const errorLookupResult = schemaErrorLookup(errors, _fields, previousErrorLookupResult.name || name2);
          error = errorLookupResult.error;
          name2 = errorLookupResult.name;
          isValid2 = isEmptyObject(errors);
        }
      } else {
        _updateIsValidating([name2], true);
        error = (await validateField(field, _names.disabled, _formValues, shouldDisplayAllAssociatedErrors, _options.shouldUseNativeValidation))[name2];
        _updateIsValidating([name2]);
        _updateIsFieldValueUpdated(fieldValue);
        if (isFieldValueUpdated) {
          if (error) {
            isValid2 = false;
          } else if (_proxyFormState.isValid || _proxySubscribeFormState.isValid) {
            isValid2 = await executeBuiltInValidation(_fields, true);
          }
        }
      }
      if (isFieldValueUpdated) {
        field._f.deps && trigger(field._f.deps);
        shouldRenderByError(name2, isValid2, error, fieldState);
      }
    }
  };
  const _focusInput = (ref, key) => {
    if (get(_formState.errors, key) && ref.focus) {
      ref.focus();
      return 1;
    }
    return;
  };
  const trigger = async (name2, options = {}) => {
    let isValid2;
    let validationResult;
    const fieldNames = convertToArrayPayload(name2);
    if (_options.resolver) {
      const errors = await executeSchemaAndUpdateState(isUndefined(name2) ? name2 : fieldNames);
      isValid2 = isEmptyObject(errors);
      validationResult = name2 ? !fieldNames.some((name3) => get(errors, name3)) : isValid2;
    } else if (name2) {
      validationResult = (await Promise.all(fieldNames.map(async (fieldName) => {
        const field = get(_fields, fieldName);
        return await executeBuiltInValidation(field && field._f ? { [fieldName]: field } : field);
      }))).every(Boolean);
      !(!validationResult && !_formState.isValid) && _setValid();
    } else {
      validationResult = isValid2 = await executeBuiltInValidation(_fields);
    }
    _subjects.state.next({
      ...!isString(name2) || (_proxyFormState.isValid || _proxySubscribeFormState.isValid) && isValid2 !== _formState.isValid ? {} : { name: name2 },
      ..._options.resolver || !name2 ? { isValid: isValid2 } : {},
      errors: _formState.errors
    });
    options.shouldFocus && !validationResult && iterateFieldsByAction(_fields, _focusInput, name2 ? fieldNames : _names.mount);
    return validationResult;
  };
  const getValues = (fieldNames) => {
    const values = {
      ..._state.mount ? _formValues : _defaultValues
    };
    return isUndefined(fieldNames) ? values : isString(fieldNames) ? get(values, fieldNames) : fieldNames.map((name2) => get(values, name2));
  };
  const getFieldState = (name2, formState) => ({
    invalid: !!get((formState || _formState).errors, name2),
    isDirty: !!get((formState || _formState).dirtyFields, name2),
    error: get((formState || _formState).errors, name2),
    isValidating: !!get(_formState.validatingFields, name2),
    isTouched: !!get((formState || _formState).touchedFields, name2)
  });
  const clearErrors = (name2) => {
    name2 && convertToArrayPayload(name2).forEach((inputName) => unset(_formState.errors, inputName));
    _subjects.state.next({
      errors: name2 ? _formState.errors : {}
    });
  };
  const setError = (name2, error, options) => {
    const ref = (get(_fields, name2, { _f: {} })._f || {}).ref;
    const currentError = get(_formState.errors, name2) || {};
    const { ref: currentRef, message, type: type2, ...restOfErrorTree } = currentError;
    set(_formState.errors, name2, {
      ...restOfErrorTree,
      ...error,
      ref
    });
    _subjects.state.next({
      name: name2,
      errors: _formState.errors,
      isValid: false
    });
    options && options.shouldFocus && ref && ref.focus && ref.focus();
  };
  const watch = (name2, defaultValue) => isFunction(name2) ? _subjects.state.subscribe({
    next: (payload) => "values" in payload && name2(_getWatch(void 0, defaultValue), payload)
  }) : _getWatch(name2, defaultValue, true);
  const _subscribe = (props2) => _subjects.state.subscribe({
    next: (formState) => {
      if (shouldSubscribeByName(props2.name, formState.name, props2.exact) && shouldRenderFormState(formState, props2.formState || _proxyFormState, _setFormState, props2.reRenderRoot)) {
        props2.callback({
          values: { ..._formValues },
          ..._formState,
          ...formState,
          defaultValues: _defaultValues
        });
      }
    }
  }).unsubscribe;
  const subscribe2 = (props2) => {
    _state.mount = true;
    _proxySubscribeFormState = {
      ..._proxySubscribeFormState,
      ...props2.formState
    };
    return _subscribe({
      ...props2,
      formState: _proxySubscribeFormState
    });
  };
  const unregister = (name2, options = {}) => {
    for (const fieldName of name2 ? convertToArrayPayload(name2) : _names.mount) {
      _names.mount.delete(fieldName);
      _names.array.delete(fieldName);
      if (!options.keepValue) {
        unset(_fields, fieldName);
        unset(_formValues, fieldName);
      }
      !options.keepError && unset(_formState.errors, fieldName);
      !options.keepDirty && unset(_formState.dirtyFields, fieldName);
      !options.keepTouched && unset(_formState.touchedFields, fieldName);
      !options.keepIsValidating && unset(_formState.validatingFields, fieldName);
      !_options.shouldUnregister && !options.keepDefaultValue && unset(_defaultValues, fieldName);
    }
    _subjects.state.next({
      values: cloneObject(_formValues)
    });
    _subjects.state.next({
      ..._formState,
      ...!options.keepDirty ? {} : { isDirty: _getDirty() }
    });
    !options.keepIsValid && _setValid();
  };
  const _setDisabledField = ({ disabled, name: name2 }) => {
    if (isBoolean(disabled) && _state.mount || !!disabled || _names.disabled.has(name2)) {
      disabled ? _names.disabled.add(name2) : _names.disabled.delete(name2);
    }
  };
  const register = (name2, options = {}) => {
    let field = get(_fields, name2);
    const disabledIsDefined = isBoolean(options.disabled) || isBoolean(_options.disabled);
    set(_fields, name2, {
      ...field || {},
      _f: {
        ...field && field._f ? field._f : { ref: { name: name2 } },
        name: name2,
        mount: true,
        ...options
      }
    });
    _names.mount.add(name2);
    if (field) {
      _setDisabledField({
        disabled: isBoolean(options.disabled) ? options.disabled : _options.disabled,
        name: name2
      });
    } else {
      updateValidAndValue(name2, true, options.value);
    }
    return {
      ...disabledIsDefined ? { disabled: options.disabled || _options.disabled } : {},
      ..._options.progressive ? {
        required: !!options.required,
        min: getRuleValue(options.min),
        max: getRuleValue(options.max),
        minLength: getRuleValue(options.minLength),
        maxLength: getRuleValue(options.maxLength),
        pattern: getRuleValue(options.pattern)
      } : {},
      name: name2,
      onChange,
      onBlur: onChange,
      ref: (ref) => {
        if (ref) {
          register(name2, options);
          field = get(_fields, name2);
          const fieldRef = isUndefined(ref.value) ? ref.querySelectorAll ? ref.querySelectorAll("input,select,textarea")[0] || ref : ref : ref;
          const radioOrCheckbox = isRadioOrCheckbox(fieldRef);
          const refs = field._f.refs || [];
          if (radioOrCheckbox ? refs.find((option) => option === fieldRef) : fieldRef === field._f.ref) {
            return;
          }
          set(_fields, name2, {
            _f: {
              ...field._f,
              ...radioOrCheckbox ? {
                refs: [
                  ...refs.filter(live),
                  fieldRef,
                  ...Array.isArray(get(_defaultValues, name2)) ? [{}] : []
                ],
                ref: { type: fieldRef.type, name: name2 }
              } : { ref: fieldRef }
            }
          });
          updateValidAndValue(name2, false, void 0, fieldRef);
        } else {
          field = get(_fields, name2, {});
          if (field._f) {
            field._f.mount = false;
          }
          (_options.shouldUnregister || options.shouldUnregister) && !(isNameInFieldArray(_names.array, name2) && _state.action) && _names.unMount.add(name2);
        }
      }
    };
  };
  const _focusError = () => _options.shouldFocusError && iterateFieldsByAction(_fields, _focusInput, _names.mount);
  const _disableForm = (disabled) => {
    if (isBoolean(disabled)) {
      _subjects.state.next({ disabled });
      iterateFieldsByAction(_fields, (ref, name2) => {
        const currentField = get(_fields, name2);
        if (currentField) {
          ref.disabled = currentField._f.disabled || disabled;
          if (Array.isArray(currentField._f.refs)) {
            currentField._f.refs.forEach((inputRef) => {
              inputRef.disabled = currentField._f.disabled || disabled;
            });
          }
        }
      }, 0, false);
    }
  };
  const handleSubmit = (onValid, onInvalid) => async (e) => {
    let onValidError = void 0;
    if (e) {
      e.preventDefault && e.preventDefault();
      e.persist && e.persist();
    }
    let fieldValues = cloneObject(_formValues);
    _subjects.state.next({
      isSubmitting: true
    });
    if (_options.resolver) {
      const { errors, values } = await _runSchema();
      _formState.errors = errors;
      fieldValues = cloneObject(values);
    } else {
      await executeBuiltInValidation(_fields);
    }
    if (_names.disabled.size) {
      for (const name2 of _names.disabled) {
        unset(fieldValues, name2);
      }
    }
    unset(_formState.errors, "root");
    if (isEmptyObject(_formState.errors)) {
      _subjects.state.next({
        errors: {}
      });
      try {
        await onValid(fieldValues, e);
      } catch (error) {
        onValidError = error;
      }
    } else {
      if (onInvalid) {
        await onInvalid({ ..._formState.errors }, e);
      }
      _focusError();
      setTimeout(_focusError);
    }
    _subjects.state.next({
      isSubmitted: true,
      isSubmitting: false,
      isSubmitSuccessful: isEmptyObject(_formState.errors) && !onValidError,
      submitCount: _formState.submitCount + 1,
      errors: _formState.errors
    });
    if (onValidError) {
      throw onValidError;
    }
  };
  const resetField = (name2, options = {}) => {
    if (get(_fields, name2)) {
      if (isUndefined(options.defaultValue)) {
        setValue(name2, cloneObject(get(_defaultValues, name2)));
      } else {
        setValue(name2, options.defaultValue);
        set(_defaultValues, name2, cloneObject(options.defaultValue));
      }
      if (!options.keepTouched) {
        unset(_formState.touchedFields, name2);
      }
      if (!options.keepDirty) {
        unset(_formState.dirtyFields, name2);
        _formState.isDirty = options.defaultValue ? _getDirty(name2, cloneObject(get(_defaultValues, name2))) : _getDirty();
      }
      if (!options.keepError) {
        unset(_formState.errors, name2);
        _proxyFormState.isValid && _setValid();
      }
      _subjects.state.next({ ..._formState });
    }
  };
  const _reset = (formValues, keepStateOptions = {}) => {
    const updatedValues = formValues ? cloneObject(formValues) : _defaultValues;
    const cloneUpdatedValues = cloneObject(updatedValues);
    const isEmptyResetValues = isEmptyObject(formValues);
    const values = isEmptyResetValues ? _defaultValues : cloneUpdatedValues;
    if (!keepStateOptions.keepDefaultValues) {
      _defaultValues = updatedValues;
    }
    if (!keepStateOptions.keepValues) {
      if (keepStateOptions.keepDirtyValues) {
        const fieldsToCheck = /* @__PURE__ */ new Set([
          ..._names.mount,
          ...Object.keys(getDirtyFields(_defaultValues, _formValues))
        ]);
        for (const fieldName of Array.from(fieldsToCheck)) {
          get(_formState.dirtyFields, fieldName) ? set(values, fieldName, get(_formValues, fieldName)) : setValue(fieldName, get(values, fieldName));
        }
      } else {
        if (isWeb && isUndefined(formValues)) {
          for (const name2 of _names.mount) {
            const field = get(_fields, name2);
            if (field && field._f) {
              const fieldReference = Array.isArray(field._f.refs) ? field._f.refs[0] : field._f.ref;
              if (isHTMLElement(fieldReference)) {
                const form = fieldReference.closest("form");
                if (form) {
                  form.reset();
                  break;
                }
              }
            }
          }
        }
        if (keepStateOptions.keepFieldsRef) {
          for (const fieldName of _names.mount) {
            setValue(fieldName, get(values, fieldName));
          }
        } else {
          _fields = {};
        }
      }
      _formValues = _options.shouldUnregister ? keepStateOptions.keepDefaultValues ? cloneObject(_defaultValues) : {} : cloneObject(values);
      _subjects.array.next({
        values: { ...values }
      });
      _subjects.state.next({
        values: { ...values }
      });
    }
    _names = {
      mount: keepStateOptions.keepDirtyValues ? _names.mount : /* @__PURE__ */ new Set(),
      unMount: /* @__PURE__ */ new Set(),
      array: /* @__PURE__ */ new Set(),
      disabled: /* @__PURE__ */ new Set(),
      watch: /* @__PURE__ */ new Set(),
      watchAll: false,
      focus: ""
    };
    _state.mount = !_proxyFormState.isValid || !!keepStateOptions.keepIsValid || !!keepStateOptions.keepDirtyValues;
    _state.watch = !!_options.shouldUnregister;
    _subjects.state.next({
      submitCount: keepStateOptions.keepSubmitCount ? _formState.submitCount : 0,
      isDirty: isEmptyResetValues ? false : keepStateOptions.keepDirty ? _formState.isDirty : !!(keepStateOptions.keepDefaultValues && !deepEqual(formValues, _defaultValues)),
      isSubmitted: keepStateOptions.keepIsSubmitted ? _formState.isSubmitted : false,
      dirtyFields: isEmptyResetValues ? {} : keepStateOptions.keepDirtyValues ? keepStateOptions.keepDefaultValues && _formValues ? getDirtyFields(_defaultValues, _formValues) : _formState.dirtyFields : keepStateOptions.keepDefaultValues && formValues ? getDirtyFields(_defaultValues, formValues) : keepStateOptions.keepDirty ? _formState.dirtyFields : {},
      touchedFields: keepStateOptions.keepTouched ? _formState.touchedFields : {},
      errors: keepStateOptions.keepErrors ? _formState.errors : {},
      isSubmitSuccessful: keepStateOptions.keepIsSubmitSuccessful ? _formState.isSubmitSuccessful : false,
      isSubmitting: false
    });
  };
  const reset = (formValues, keepStateOptions) => _reset(isFunction(formValues) ? formValues(_formValues) : formValues, keepStateOptions);
  const setFocus = (name2, options = {}) => {
    const field = get(_fields, name2);
    const fieldReference = field && field._f;
    if (fieldReference) {
      const fieldRef = fieldReference.refs ? fieldReference.refs[0] : fieldReference.ref;
      if (fieldRef.focus) {
        fieldRef.focus();
        options.shouldSelect && isFunction(fieldRef.select) && fieldRef.select();
      }
    }
  };
  const _setFormState = (updatedFormState) => {
    _formState = {
      ..._formState,
      ...updatedFormState
    };
  };
  const _resetDefaultValues = () => isFunction(_options.defaultValues) && _options.defaultValues().then((values) => {
    reset(values, _options.resetOptions);
    _subjects.state.next({
      isLoading: false
    });
  });
  const methods = {
    control: {
      register,
      unregister,
      getFieldState,
      handleSubmit,
      setError,
      _subscribe,
      _runSchema,
      _focusError,
      _getWatch,
      _getDirty,
      _setValid,
      _setFieldArray,
      _setDisabledField,
      _setErrors,
      _getFieldArray,
      _reset,
      _resetDefaultValues,
      _removeUnmounted,
      _disableForm,
      _subjects,
      _proxyFormState,
      get _fields() {
        return _fields;
      },
      get _formValues() {
        return _formValues;
      },
      get _state() {
        return _state;
      },
      set _state(value) {
        _state = value;
      },
      get _defaultValues() {
        return _defaultValues;
      },
      get _names() {
        return _names;
      },
      set _names(value) {
        _names = value;
      },
      get _formState() {
        return _formState;
      },
      get _options() {
        return _options;
      },
      set _options(value) {
        _options = {
          ..._options,
          ...value
        };
      }
    },
    subscribe: subscribe2,
    trigger,
    register,
    handleSubmit,
    watch,
    setValue,
    getValues,
    reset,
    resetField,
    clearErrors,
    unregister,
    setError,
    setFocus,
    getFieldState
  };
  return {
    ...methods,
    formControl: methods
  };
}
function useForm(props = {}) {
  const _formControl = React$1.useRef(void 0);
  const _values = React$1.useRef(void 0);
  const [formState, updateFormState] = React$1.useState({
    isDirty: false,
    isValidating: false,
    isLoading: isFunction(props.defaultValues),
    isSubmitted: false,
    isSubmitting: false,
    isSubmitSuccessful: false,
    isValid: false,
    submitCount: 0,
    dirtyFields: {},
    touchedFields: {},
    validatingFields: {},
    errors: props.errors || {},
    disabled: props.disabled || false,
    isReady: false,
    defaultValues: isFunction(props.defaultValues) ? void 0 : props.defaultValues
  });
  if (!_formControl.current) {
    if (props.formControl) {
      _formControl.current = {
        ...props.formControl,
        formState
      };
      if (props.defaultValues && !isFunction(props.defaultValues)) {
        props.formControl.reset(props.defaultValues, props.resetOptions);
      }
    } else {
      const { formControl, ...rest } = createFormControl(props);
      _formControl.current = {
        ...rest,
        formState
      };
    }
  }
  const control = _formControl.current.control;
  control._options = props;
  useIsomorphicLayoutEffect(() => {
    const sub = control._subscribe({
      formState: control._proxyFormState,
      callback: () => updateFormState({ ...control._formState }),
      reRenderRoot: true
    });
    updateFormState((data) => ({
      ...data,
      isReady: true
    }));
    control._formState.isReady = true;
    return sub;
  }, [control]);
  React$1.useEffect(() => control._disableForm(props.disabled), [control, props.disabled]);
  React$1.useEffect(() => {
    if (props.mode) {
      control._options.mode = props.mode;
    }
    if (props.reValidateMode) {
      control._options.reValidateMode = props.reValidateMode;
    }
  }, [control, props.mode, props.reValidateMode]);
  React$1.useEffect(() => {
    if (props.errors) {
      control._setErrors(props.errors);
      control._focusError();
    }
  }, [control, props.errors]);
  React$1.useEffect(() => {
    props.shouldUnregister && control._subjects.state.next({
      values: control._getWatch()
    });
  }, [control, props.shouldUnregister]);
  React$1.useEffect(() => {
    if (control._proxyFormState.isDirty) {
      const isDirty2 = control._getDirty();
      if (isDirty2 !== formState.isDirty) {
        control._subjects.state.next({
          isDirty: isDirty2
        });
      }
    }
  }, [control, formState.isDirty]);
  React$1.useEffect(() => {
    if (props.values && !deepEqual(props.values, _values.current)) {
      control._reset(props.values, {
        keepFieldsRef: true,
        ...control._options.resetOptions
      });
      _values.current = props.values;
      updateFormState((state) => ({ ...state }));
    } else {
      control._resetDefaultValues();
    }
  }, [control, props.values]);
  React$1.useEffect(() => {
    if (!control._state.mount) {
      control._setValid();
      control._state.mount = true;
    }
    if (control._state.watch) {
      control._state.watch = false;
      control._subjects.state.next({ ...control._formState });
    }
    control._removeUnmounted();
  });
  _formControl.current.formState = getProxyFormState(formState, control);
  return _formControl.current;
}
const s = (e, s2, o2) => {
  if (e && "reportValidity" in e) {
    const r2 = get(o2, s2);
    e.setCustomValidity(r2 && r2.message || ""), e.reportValidity();
  }
}, o = (t2, e) => {
  for (const o2 in e.fields) {
    const r2 = e.fields[o2];
    r2 && r2.ref && "reportValidity" in r2.ref ? s(r2.ref, o2, t2) : r2.refs && r2.refs.forEach((e2) => s(e2, o2, t2));
  }
}, r = (s2, r2) => {
  r2.shouldUseNativeValidation && o(s2, r2);
  const f = {};
  for (const o2 in s2) {
    const n2 = get(r2.fields, o2), a = Object.assign(s2[o2] || {}, { ref: n2 && n2.ref });
    if (i(r2.names || Object.keys(s2), o2)) {
      const s3 = Object.assign({}, get(f, o2));
      set(s3, "root", a), set(f, o2, s3);
    } else set(f, o2, a);
  }
  return f;
}, i = (t2, e) => t2.some((t3) => t3.startsWith(e + "."));
var n = function(r2, e) {
  for (var n2 = {}; r2.length; ) {
    var t2 = r2[0], s2 = t2.code, i2 = t2.message, a = t2.path.join(".");
    if (!n2[a]) if ("unionErrors" in t2) {
      var u2 = t2.unionErrors[0].errors[0];
      n2[a] = { message: u2.message, type: u2.code };
    } else n2[a] = { message: i2, type: s2 };
    if ("unionErrors" in t2 && t2.unionErrors.forEach(function(e2) {
      return e2.errors.forEach(function(e3) {
        return r2.push(e3);
      });
    }), e) {
      var c = n2[a].types, f = c && c[t2.code];
      n2[a] = appendErrors(a, e, n2, s2, f ? [].concat(f, t2.message) : t2.message);
    }
    r2.shift();
  }
  return n2;
}, t = function(o$1, t2, s2) {
  return void 0 === s2 && (s2 = {}), function(i2, a, u2) {
    try {
      return Promise.resolve(function(e, n2) {
        try {
          var a2 = Promise.resolve(o$1["sync" === s2.mode ? "parse" : "parseAsync"](i2, t2)).then(function(e2) {
            return u2.shouldUseNativeValidation && o({}, u2), { errors: {}, values: s2.raw ? i2 : e2 };
          });
        } catch (r2) {
          return n2(r2);
        }
        return a2 && a2.then ? a2.then(void 0, n2) : a2;
      }(0, function(r$1) {
        if (function(r2) {
          return Array.isArray(null == r2 ? void 0 : r2.errors);
        }(r$1)) return { values: {}, errors: r(n(r$1.errors, !u2.shouldUseNativeValidation && "all" === u2.criteriaMode), u2) };
        throw r$1;
      }));
    } catch (r2) {
      return Promise.reject(r2);
    }
  };
};
var util;
(function(util2) {
  util2.assertEqual = (_) => {
  };
  function assertIs(_arg) {
  }
  util2.assertIs = assertIs;
  function assertNever(_x) {
    throw new Error();
  }
  util2.assertNever = assertNever;
  util2.arrayToEnum = (items) => {
    const obj = {};
    for (const item of items) {
      obj[item] = item;
    }
    return obj;
  };
  util2.getValidEnumValues = (obj) => {
    const validKeys = util2.objectKeys(obj).filter((k2) => typeof obj[obj[k2]] !== "number");
    const filtered = {};
    for (const k2 of validKeys) {
      filtered[k2] = obj[k2];
    }
    return util2.objectValues(filtered);
  };
  util2.objectValues = (obj) => {
    return util2.objectKeys(obj).map(function(e) {
      return obj[e];
    });
  };
  util2.objectKeys = typeof Object.keys === "function" ? (obj) => Object.keys(obj) : (object) => {
    const keys = [];
    for (const key in object) {
      if (Object.prototype.hasOwnProperty.call(object, key)) {
        keys.push(key);
      }
    }
    return keys;
  };
  util2.find = (arr, checker) => {
    for (const item of arr) {
      if (checker(item))
        return item;
    }
    return void 0;
  };
  util2.isInteger = typeof Number.isInteger === "function" ? (val) => Number.isInteger(val) : (val) => typeof val === "number" && Number.isFinite(val) && Math.floor(val) === val;
  function joinValues(array, separator = " | ") {
    return array.map((val) => typeof val === "string" ? `'${val}'` : val).join(separator);
  }
  util2.joinValues = joinValues;
  util2.jsonStringifyReplacer = (_, value) => {
    if (typeof value === "bigint") {
      return value.toString();
    }
    return value;
  };
})(util || (util = {}));
var objectUtil;
(function(objectUtil2) {
  objectUtil2.mergeShapes = (first, second) => {
    return {
      ...first,
      ...second
      // second overwrites first
    };
  };
})(objectUtil || (objectUtil = {}));
const ZodParsedType = util.arrayToEnum([
  "string",
  "nan",
  "number",
  "integer",
  "float",
  "boolean",
  "date",
  "bigint",
  "symbol",
  "function",
  "undefined",
  "null",
  "array",
  "object",
  "unknown",
  "promise",
  "void",
  "never",
  "map",
  "set"
]);
const getParsedType = (data) => {
  const t2 = typeof data;
  switch (t2) {
    case "undefined":
      return ZodParsedType.undefined;
    case "string":
      return ZodParsedType.string;
    case "number":
      return Number.isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;
    case "boolean":
      return ZodParsedType.boolean;
    case "function":
      return ZodParsedType.function;
    case "bigint":
      return ZodParsedType.bigint;
    case "symbol":
      return ZodParsedType.symbol;
    case "object":
      if (Array.isArray(data)) {
        return ZodParsedType.array;
      }
      if (data === null) {
        return ZodParsedType.null;
      }
      if (data.then && typeof data.then === "function" && data.catch && typeof data.catch === "function") {
        return ZodParsedType.promise;
      }
      if (typeof Map !== "undefined" && data instanceof Map) {
        return ZodParsedType.map;
      }
      if (typeof Set !== "undefined" && data instanceof Set) {
        return ZodParsedType.set;
      }
      if (typeof Date !== "undefined" && data instanceof Date) {
        return ZodParsedType.date;
      }
      return ZodParsedType.object;
    default:
      return ZodParsedType.unknown;
  }
};
const ZodIssueCode = util.arrayToEnum([
  "invalid_type",
  "invalid_literal",
  "custom",
  "invalid_union",
  "invalid_union_discriminator",
  "invalid_enum_value",
  "unrecognized_keys",
  "invalid_arguments",
  "invalid_return_type",
  "invalid_date",
  "invalid_string",
  "too_small",
  "too_big",
  "invalid_intersection_types",
  "not_multiple_of",
  "not_finite"
]);
class ZodError extends Error {
  get errors() {
    return this.issues;
  }
  constructor(issues) {
    super();
    this.issues = [];
    this.addIssue = (sub) => {
      this.issues = [...this.issues, sub];
    };
    this.addIssues = (subs = []) => {
      this.issues = [...this.issues, ...subs];
    };
    const actualProto = new.target.prototype;
    if (Object.setPrototypeOf) {
      Object.setPrototypeOf(this, actualProto);
    } else {
      this.__proto__ = actualProto;
    }
    this.name = "ZodError";
    this.issues = issues;
  }
  format(_mapper) {
    const mapper = _mapper || function(issue) {
      return issue.message;
    };
    const fieldErrors = { _errors: [] };
    const processError = (error) => {
      for (const issue of error.issues) {
        if (issue.code === "invalid_union") {
          issue.unionErrors.map(processError);
        } else if (issue.code === "invalid_return_type") {
          processError(issue.returnTypeError);
        } else if (issue.code === "invalid_arguments") {
          processError(issue.argumentsError);
        } else if (issue.path.length === 0) {
          fieldErrors._errors.push(mapper(issue));
        } else {
          let curr = fieldErrors;
          let i2 = 0;
          while (i2 < issue.path.length) {
            const el = issue.path[i2];
            const terminal = i2 === issue.path.length - 1;
            if (!terminal) {
              curr[el] = curr[el] || { _errors: [] };
            } else {
              curr[el] = curr[el] || { _errors: [] };
              curr[el]._errors.push(mapper(issue));
            }
            curr = curr[el];
            i2++;
          }
        }
      }
    };
    processError(this);
    return fieldErrors;
  }
  static assert(value) {
    if (!(value instanceof ZodError)) {
      throw new Error(`Not a ZodError: ${value}`);
    }
  }
  toString() {
    return this.message;
  }
  get message() {
    return JSON.stringify(this.issues, util.jsonStringifyReplacer, 2);
  }
  get isEmpty() {
    return this.issues.length === 0;
  }
  flatten(mapper = (issue) => issue.message) {
    const fieldErrors = {};
    const formErrors = [];
    for (const sub of this.issues) {
      if (sub.path.length > 0) {
        const firstEl = sub.path[0];
        fieldErrors[firstEl] = fieldErrors[firstEl] || [];
        fieldErrors[firstEl].push(mapper(sub));
      } else {
        formErrors.push(mapper(sub));
      }
    }
    return { formErrors, fieldErrors };
  }
  get formErrors() {
    return this.flatten();
  }
}
ZodError.create = (issues) => {
  const error = new ZodError(issues);
  return error;
};
const errorMap = (issue, _ctx) => {
  let message;
  switch (issue.code) {
    case ZodIssueCode.invalid_type:
      if (issue.received === ZodParsedType.undefined) {
        message = "Required";
      } else {
        message = `Expected ${issue.expected}, received ${issue.received}`;
      }
      break;
    case ZodIssueCode.invalid_literal:
      message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util.jsonStringifyReplacer)}`;
      break;
    case ZodIssueCode.unrecognized_keys:
      message = `Unrecognized key(s) in object: ${util.joinValues(issue.keys, ", ")}`;
      break;
    case ZodIssueCode.invalid_union:
      message = `Invalid input`;
      break;
    case ZodIssueCode.invalid_union_discriminator:
      message = `Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;
      break;
    case ZodIssueCode.invalid_enum_value:
      message = `Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;
      break;
    case ZodIssueCode.invalid_arguments:
      message = `Invalid function arguments`;
      break;
    case ZodIssueCode.invalid_return_type:
      message = `Invalid function return type`;
      break;
    case ZodIssueCode.invalid_date:
      message = `Invalid date`;
      break;
    case ZodIssueCode.invalid_string:
      if (typeof issue.validation === "object") {
        if ("includes" in issue.validation) {
          message = `Invalid input: must include "${issue.validation.includes}"`;
          if (typeof issue.validation.position === "number") {
            message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;
          }
        } else if ("startsWith" in issue.validation) {
          message = `Invalid input: must start with "${issue.validation.startsWith}"`;
        } else if ("endsWith" in issue.validation) {
          message = `Invalid input: must end with "${issue.validation.endsWith}"`;
        } else {
          util.assertNever(issue.validation);
        }
      } else if (issue.validation !== "regex") {
        message = `Invalid ${issue.validation}`;
      } else {
        message = "Invalid";
      }
      break;
    case ZodIssueCode.too_small:
      if (issue.type === "array")
        message = `Array must contain ${issue.exact ? "exactly" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;
      else if (issue.type === "string")
        message = `String must contain ${issue.exact ? "exactly" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;
      else if (issue.type === "number")
        message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;
      else if (issue.type === "bigint")
        message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;
      else if (issue.type === "date")
        message = `Date must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${new Date(Number(issue.minimum))}`;
      else
        message = "Invalid input";
      break;
    case ZodIssueCode.too_big:
      if (issue.type === "array")
        message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;
      else if (issue.type === "string")
        message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;
      else if (issue.type === "number")
        message = `Number must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;
      else if (issue.type === "bigint")
        message = `BigInt must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;
      else if (issue.type === "date")
        message = `Date must be ${issue.exact ? `exactly` : issue.inclusive ? `smaller than or equal to` : `smaller than`} ${new Date(Number(issue.maximum))}`;
      else
        message = "Invalid input";
      break;
    case ZodIssueCode.custom:
      message = `Invalid input`;
      break;
    case ZodIssueCode.invalid_intersection_types:
      message = `Intersection results could not be merged`;
      break;
    case ZodIssueCode.not_multiple_of:
      message = `Number must be a multiple of ${issue.multipleOf}`;
      break;
    case ZodIssueCode.not_finite:
      message = "Number must be finite";
      break;
    default:
      message = _ctx.defaultError;
      util.assertNever(issue);
  }
  return { message };
};
let overrideErrorMap = errorMap;
function getErrorMap() {
  return overrideErrorMap;
}
const makeIssue = (params) => {
  const { data, path, errorMaps, issueData } = params;
  const fullPath = [...path, ...issueData.path || []];
  const fullIssue = {
    ...issueData,
    path: fullPath
  };
  if (issueData.message !== void 0) {
    return {
      ...issueData,
      path: fullPath,
      message: issueData.message
    };
  }
  let errorMessage = "";
  const maps = errorMaps.filter((m2) => !!m2).slice().reverse();
  for (const map of maps) {
    errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;
  }
  return {
    ...issueData,
    path: fullPath,
    message: errorMessage
  };
};
function addIssueToContext(ctx, issueData) {
  const overrideMap = getErrorMap();
  const issue = makeIssue({
    issueData,
    data: ctx.data,
    path: ctx.path,
    errorMaps: [
      ctx.common.contextualErrorMap,
      // contextual error map is first priority
      ctx.schemaErrorMap,
      // then schema-bound map if available
      overrideMap,
      // then global override map
      overrideMap === errorMap ? void 0 : errorMap
      // then global default map
    ].filter((x) => !!x)
  });
  ctx.common.issues.push(issue);
}
class ParseStatus {
  constructor() {
    this.value = "valid";
  }
  dirty() {
    if (this.value === "valid")
      this.value = "dirty";
  }
  abort() {
    if (this.value !== "aborted")
      this.value = "aborted";
  }
  static mergeArray(status, results) {
    const arrayValue = [];
    for (const s2 of results) {
      if (s2.status === "aborted")
        return INVALID;
      if (s2.status === "dirty")
        status.dirty();
      arrayValue.push(s2.value);
    }
    return { status: status.value, value: arrayValue };
  }
  static async mergeObjectAsync(status, pairs) {
    const syncPairs = [];
    for (const pair of pairs) {
      const key = await pair.key;
      const value = await pair.value;
      syncPairs.push({
        key,
        value
      });
    }
    return ParseStatus.mergeObjectSync(status, syncPairs);
  }
  static mergeObjectSync(status, pairs) {
    const finalObject = {};
    for (const pair of pairs) {
      const { key, value } = pair;
      if (key.status === "aborted")
        return INVALID;
      if (value.status === "aborted")
        return INVALID;
      if (key.status === "dirty")
        status.dirty();
      if (value.status === "dirty")
        status.dirty();
      if (key.value !== "__proto__" && (typeof value.value !== "undefined" || pair.alwaysSet)) {
        finalObject[key.value] = value.value;
      }
    }
    return { status: status.value, value: finalObject };
  }
}
const INVALID = Object.freeze({
  status: "aborted"
});
const DIRTY = (value) => ({ status: "dirty", value });
const OK = (value) => ({ status: "valid", value });
const isAborted = (x) => x.status === "aborted";
const isDirty = (x) => x.status === "dirty";
const isValid = (x) => x.status === "valid";
const isAsync = (x) => typeof Promise !== "undefined" && x instanceof Promise;
var errorUtil;
(function(errorUtil2) {
  errorUtil2.errToObj = (message) => typeof message === "string" ? { message } : message || {};
  errorUtil2.toString = (message) => typeof message === "string" ? message : message?.message;
})(errorUtil || (errorUtil = {}));
class ParseInputLazyPath {
  constructor(parent, value, path, key) {
    this._cachedPath = [];
    this.parent = parent;
    this.data = value;
    this._path = path;
    this._key = key;
  }
  get path() {
    if (!this._cachedPath.length) {
      if (Array.isArray(this._key)) {
        this._cachedPath.push(...this._path, ...this._key);
      } else {
        this._cachedPath.push(...this._path, this._key);
      }
    }
    return this._cachedPath;
  }
}
const handleResult = (ctx, result) => {
  if (isValid(result)) {
    return { success: true, data: result.value };
  } else {
    if (!ctx.common.issues.length) {
      throw new Error("Validation failed but no issues detected.");
    }
    return {
      success: false,
      get error() {
        if (this._error)
          return this._error;
        const error = new ZodError(ctx.common.issues);
        this._error = error;
        return this._error;
      }
    };
  }
};
function processCreateParams(params) {
  if (!params)
    return {};
  const { errorMap: errorMap2, invalid_type_error, required_error, description: description2 } = params;
  if (errorMap2 && (invalid_type_error || required_error)) {
    throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);
  }
  if (errorMap2)
    return { errorMap: errorMap2, description: description2 };
  const customMap = (iss, ctx) => {
    const { message } = params;
    if (iss.code === "invalid_enum_value") {
      return { message: message ?? ctx.defaultError };
    }
    if (typeof ctx.data === "undefined") {
      return { message: message ?? required_error ?? ctx.defaultError };
    }
    if (iss.code !== "invalid_type")
      return { message: ctx.defaultError };
    return { message: message ?? invalid_type_error ?? ctx.defaultError };
  };
  return { errorMap: customMap, description: description2 };
}
class ZodType {
  get description() {
    return this._def.description;
  }
  _getType(input) {
    return getParsedType(input.data);
  }
  _getOrReturnCtx(input, ctx) {
    return ctx || {
      common: input.parent.common,
      data: input.data,
      parsedType: getParsedType(input.data),
      schemaErrorMap: this._def.errorMap,
      path: input.path,
      parent: input.parent
    };
  }
  _processInputParams(input) {
    return {
      status: new ParseStatus(),
      ctx: {
        common: input.parent.common,
        data: input.data,
        parsedType: getParsedType(input.data),
        schemaErrorMap: this._def.errorMap,
        path: input.path,
        parent: input.parent
      }
    };
  }
  _parseSync(input) {
    const result = this._parse(input);
    if (isAsync(result)) {
      throw new Error("Synchronous parse encountered promise.");
    }
    return result;
  }
  _parseAsync(input) {
    const result = this._parse(input);
    return Promise.resolve(result);
  }
  parse(data, params) {
    const result = this.safeParse(data, params);
    if (result.success)
      return result.data;
    throw result.error;
  }
  safeParse(data, params) {
    const ctx = {
      common: {
        issues: [],
        async: params?.async ?? false,
        contextualErrorMap: params?.errorMap
      },
      path: params?.path || [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data,
      parsedType: getParsedType(data)
    };
    const result = this._parseSync({ data, path: ctx.path, parent: ctx });
    return handleResult(ctx, result);
  }
  "~validate"(data) {
    const ctx = {
      common: {
        issues: [],
        async: !!this["~standard"].async
      },
      path: [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data,
      parsedType: getParsedType(data)
    };
    if (!this["~standard"].async) {
      try {
        const result = this._parseSync({ data, path: [], parent: ctx });
        return isValid(result) ? {
          value: result.value
        } : {
          issues: ctx.common.issues
        };
      } catch (err) {
        if (err?.message?.toLowerCase()?.includes("encountered")) {
          this["~standard"].async = true;
        }
        ctx.common = {
          issues: [],
          async: true
        };
      }
    }
    return this._parseAsync({ data, path: [], parent: ctx }).then((result) => isValid(result) ? {
      value: result.value
    } : {
      issues: ctx.common.issues
    });
  }
  async parseAsync(data, params) {
    const result = await this.safeParseAsync(data, params);
    if (result.success)
      return result.data;
    throw result.error;
  }
  async safeParseAsync(data, params) {
    const ctx = {
      common: {
        issues: [],
        contextualErrorMap: params?.errorMap,
        async: true
      },
      path: params?.path || [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data,
      parsedType: getParsedType(data)
    };
    const maybeAsyncResult = this._parse({ data, path: ctx.path, parent: ctx });
    const result = await (isAsync(maybeAsyncResult) ? maybeAsyncResult : Promise.resolve(maybeAsyncResult));
    return handleResult(ctx, result);
  }
  refine(check, message) {
    const getIssueProperties = (val) => {
      if (typeof message === "string" || typeof message === "undefined") {
        return { message };
      } else if (typeof message === "function") {
        return message(val);
      } else {
        return message;
      }
    };
    return this._refinement((val, ctx) => {
      const result = check(val);
      const setError = () => ctx.addIssue({
        code: ZodIssueCode.custom,
        ...getIssueProperties(val)
      });
      if (typeof Promise !== "undefined" && result instanceof Promise) {
        return result.then((data) => {
          if (!data) {
            setError();
            return false;
          } else {
            return true;
          }
        });
      }
      if (!result) {
        setError();
        return false;
      } else {
        return true;
      }
    });
  }
  refinement(check, refinementData) {
    return this._refinement((val, ctx) => {
      if (!check(val)) {
        ctx.addIssue(typeof refinementData === "function" ? refinementData(val, ctx) : refinementData);
        return false;
      } else {
        return true;
      }
    });
  }
  _refinement(refinement) {
    return new ZodEffects({
      schema: this,
      typeName: ZodFirstPartyTypeKind.ZodEffects,
      effect: { type: "refinement", refinement }
    });
  }
  superRefine(refinement) {
    return this._refinement(refinement);
  }
  constructor(def) {
    this.spa = this.safeParseAsync;
    this._def = def;
    this.parse = this.parse.bind(this);
    this.safeParse = this.safeParse.bind(this);
    this.parseAsync = this.parseAsync.bind(this);
    this.safeParseAsync = this.safeParseAsync.bind(this);
    this.spa = this.spa.bind(this);
    this.refine = this.refine.bind(this);
    this.refinement = this.refinement.bind(this);
    this.superRefine = this.superRefine.bind(this);
    this.optional = this.optional.bind(this);
    this.nullable = this.nullable.bind(this);
    this.nullish = this.nullish.bind(this);
    this.array = this.array.bind(this);
    this.promise = this.promise.bind(this);
    this.or = this.or.bind(this);
    this.and = this.and.bind(this);
    this.transform = this.transform.bind(this);
    this.brand = this.brand.bind(this);
    this.default = this.default.bind(this);
    this.catch = this.catch.bind(this);
    this.describe = this.describe.bind(this);
    this.pipe = this.pipe.bind(this);
    this.readonly = this.readonly.bind(this);
    this.isNullable = this.isNullable.bind(this);
    this.isOptional = this.isOptional.bind(this);
    this["~standard"] = {
      version: 1,
      vendor: "zod",
      validate: (data) => this["~validate"](data)
    };
  }
  optional() {
    return ZodOptional.create(this, this._def);
  }
  nullable() {
    return ZodNullable.create(this, this._def);
  }
  nullish() {
    return this.nullable().optional();
  }
  array() {
    return ZodArray.create(this);
  }
  promise() {
    return ZodPromise.create(this, this._def);
  }
  or(option) {
    return ZodUnion.create([this, option], this._def);
  }
  and(incoming) {
    return ZodIntersection.create(this, incoming, this._def);
  }
  transform(transform) {
    return new ZodEffects({
      ...processCreateParams(this._def),
      schema: this,
      typeName: ZodFirstPartyTypeKind.ZodEffects,
      effect: { type: "transform", transform }
    });
  }
  default(def) {
    const defaultValueFunc = typeof def === "function" ? def : () => def;
    return new ZodDefault({
      ...processCreateParams(this._def),
      innerType: this,
      defaultValue: defaultValueFunc,
      typeName: ZodFirstPartyTypeKind.ZodDefault
    });
  }
  brand() {
    return new ZodBranded({
      typeName: ZodFirstPartyTypeKind.ZodBranded,
      type: this,
      ...processCreateParams(this._def)
    });
  }
  catch(def) {
    const catchValueFunc = typeof def === "function" ? def : () => def;
    return new ZodCatch({
      ...processCreateParams(this._def),
      innerType: this,
      catchValue: catchValueFunc,
      typeName: ZodFirstPartyTypeKind.ZodCatch
    });
  }
  describe(description2) {
    const This = this.constructor;
    return new This({
      ...this._def,
      description: description2
    });
  }
  pipe(target) {
    return ZodPipeline.create(this, target);
  }
  readonly() {
    return ZodReadonly.create(this);
  }
  isOptional() {
    return this.safeParse(void 0).success;
  }
  isNullable() {
    return this.safeParse(null).success;
  }
}
const cuidRegex = /^c[^\s-]{8,}$/i;
const cuid2Regex = /^[0-9a-z]+$/;
const ulidRegex = /^[0-9A-HJKMNP-TV-Z]{26}$/i;
const uuidRegex = /^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i;
const nanoidRegex = /^[a-z0-9_-]{21}$/i;
const jwtRegex = /^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/;
const durationRegex = /^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/;
const emailRegex = /^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;
const _emojiRegex = `^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$`;
let emojiRegex;
const ipv4Regex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;
const ipv4CidrRegex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/;
const ipv6Regex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;
const ipv6CidrRegex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;
const base64Regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;
const base64urlRegex = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/;
const dateRegexSource = `((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))`;
const dateRegex = new RegExp(`^${dateRegexSource}$`);
function timeRegexSource(args) {
  let secondsRegexSource = `[0-5]\\d`;
  if (args.precision) {
    secondsRegexSource = `${secondsRegexSource}\\.\\d{${args.precision}}`;
  } else if (args.precision == null) {
    secondsRegexSource = `${secondsRegexSource}(\\.\\d+)?`;
  }
  const secondsQuantifier = args.precision ? "+" : "?";
  return `([01]\\d|2[0-3]):[0-5]\\d(:${secondsRegexSource})${secondsQuantifier}`;
}
function timeRegex(args) {
  return new RegExp(`^${timeRegexSource(args)}$`);
}
function datetimeRegex(args) {
  let regex = `${dateRegexSource}T${timeRegexSource(args)}`;
  const opts = [];
  opts.push(args.local ? `Z?` : `Z`);
  if (args.offset)
    opts.push(`([+-]\\d{2}:?\\d{2})`);
  regex = `${regex}(${opts.join("|")})`;
  return new RegExp(`^${regex}$`);
}
function isValidIP(ip, version2) {
  if ((version2 === "v4" || !version2) && ipv4Regex.test(ip)) {
    return true;
  }
  if ((version2 === "v6" || !version2) && ipv6Regex.test(ip)) {
    return true;
  }
  return false;
}
function isValidJWT(jwt, alg) {
  if (!jwtRegex.test(jwt))
    return false;
  try {
    const [header] = jwt.split(".");
    if (!header)
      return false;
    const base64 = header.replace(/-/g, "+").replace(/_/g, "/").padEnd(header.length + (4 - header.length % 4) % 4, "=");
    const decoded = JSON.parse(atob(base64));
    if (typeof decoded !== "object" || decoded === null)
      return false;
    if ("typ" in decoded && decoded?.typ !== "JWT")
      return false;
    if (!decoded.alg)
      return false;
    if (alg && decoded.alg !== alg)
      return false;
    return true;
  } catch {
    return false;
  }
}
function isValidCidr(ip, version2) {
  if ((version2 === "v4" || !version2) && ipv4CidrRegex.test(ip)) {
    return true;
  }
  if ((version2 === "v6" || !version2) && ipv6CidrRegex.test(ip)) {
    return true;
  }
  return false;
}
class ZodString extends ZodType {
  _parse(input) {
    if (this._def.coerce) {
      input.data = String(input.data);
    }
    const parsedType = this._getType(input);
    if (parsedType !== ZodParsedType.string) {
      const ctx2 = this._getOrReturnCtx(input);
      addIssueToContext(ctx2, {
        code: ZodIssueCode.invalid_type,
        expected: ZodParsedType.string,
        received: ctx2.parsedType
      });
      return INVALID;
    }
    const status = new ParseStatus();
    let ctx = void 0;
    for (const check of this._def.checks) {
      if (check.kind === "min") {
        if (input.data.length < check.value) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            code: ZodIssueCode.too_small,
            minimum: check.value,
            type: "string",
            inclusive: true,
            exact: false,
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "max") {
        if (input.data.length > check.value) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            code: ZodIssueCode.too_big,
            maximum: check.value,
            type: "string",
            inclusive: true,
            exact: false,
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "length") {
        const tooBig = input.data.length > check.value;
        const tooSmall = input.data.length < check.value;
        if (tooBig || tooSmall) {
          ctx = this._getOrReturnCtx(input, ctx);
          if (tooBig) {
            addIssueToContext(ctx, {
              code: ZodIssueCode.too_big,
              maximum: check.value,
              type: "string",
              inclusive: true,
              exact: true,
              message: check.message
            });
          } else if (tooSmall) {
            addIssueToContext(ctx, {
              code: ZodIssueCode.too_small,
              minimum: check.value,
              type: "string",
              inclusive: true,
              exact: true,
              message: check.message
            });
          }
          status.dirty();
        }
      } else if (check.kind === "email") {
        if (!emailRegex.test(input.data)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            validation: "email",
            code: ZodIssueCode.invalid_string,
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "emoji") {
        if (!emojiRegex) {
          emojiRegex = new RegExp(_emojiRegex, "u");
        }
        if (!emojiRegex.test(input.data)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            validation: "emoji",
            code: ZodIssueCode.invalid_string,
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "uuid") {
        if (!uuidRegex.test(input.data)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            validation: "uuid",
            code: ZodIssueCode.invalid_string,
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "nanoid") {
        if (!nanoidRegex.test(input.data)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            validation: "nanoid",
            code: ZodIssueCode.invalid_string,
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "cuid") {
        if (!cuidRegex.test(input.data)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            validation: "cuid",
            code: ZodIssueCode.invalid_string,
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "cuid2") {
        if (!cuid2Regex.test(input.data)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            validation: "cuid2",
            code: ZodIssueCode.invalid_string,
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "ulid") {
        if (!ulidRegex.test(input.data)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            validation: "ulid",
            code: ZodIssueCode.invalid_string,
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "url") {
        try {
          new URL(input.data);
        } catch {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            validation: "url",
            code: ZodIssueCode.invalid_string,
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "regex") {
        check.regex.lastIndex = 0;
        const testResult = check.regex.test(input.data);
        if (!testResult) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            validation: "regex",
            code: ZodIssueCode.invalid_string,
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "trim") {
        input.data = input.data.trim();
      } else if (check.kind === "includes") {
        if (!input.data.includes(check.value, check.position)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_string,
            validation: { includes: check.value, position: check.position },
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "toLowerCase") {
        input.data = input.data.toLowerCase();
      } else if (check.kind === "toUpperCase") {
        input.data = input.data.toUpperCase();
      } else if (check.kind === "startsWith") {
        if (!input.data.startsWith(check.value)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_string,
            validation: { startsWith: check.value },
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "endsWith") {
        if (!input.data.endsWith(check.value)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_string,
            validation: { endsWith: check.value },
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "datetime") {
        const regex = datetimeRegex(check);
        if (!regex.test(input.data)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_string,
            validation: "datetime",
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "date") {
        const regex = dateRegex;
        if (!regex.test(input.data)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_string,
            validation: "date",
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "time") {
        const regex = timeRegex(check);
        if (!regex.test(input.data)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_string,
            validation: "time",
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "duration") {
        if (!durationRegex.test(input.data)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            validation: "duration",
            code: ZodIssueCode.invalid_string,
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "ip") {
        if (!isValidIP(input.data, check.version)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            validation: "ip",
            code: ZodIssueCode.invalid_string,
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "jwt") {
        if (!isValidJWT(input.data, check.alg)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            validation: "jwt",
            code: ZodIssueCode.invalid_string,
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "cidr") {
        if (!isValidCidr(input.data, check.version)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            validation: "cidr",
            code: ZodIssueCode.invalid_string,
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "base64") {
        if (!base64Regex.test(input.data)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            validation: "base64",
            code: ZodIssueCode.invalid_string,
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "base64url") {
        if (!base64urlRegex.test(input.data)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            validation: "base64url",
            code: ZodIssueCode.invalid_string,
            message: check.message
          });
          status.dirty();
        }
      } else {
        util.assertNever(check);
      }
    }
    return { status: status.value, value: input.data };
  }
  _regex(regex, validation, message) {
    return this.refinement((data) => regex.test(data), {
      validation,
      code: ZodIssueCode.invalid_string,
      ...errorUtil.errToObj(message)
    });
  }
  _addCheck(check) {
    return new ZodString({
      ...this._def,
      checks: [...this._def.checks, check]
    });
  }
  email(message) {
    return this._addCheck({ kind: "email", ...errorUtil.errToObj(message) });
  }
  url(message) {
    return this._addCheck({ kind: "url", ...errorUtil.errToObj(message) });
  }
  emoji(message) {
    return this._addCheck({ kind: "emoji", ...errorUtil.errToObj(message) });
  }
  uuid(message) {
    return this._addCheck({ kind: "uuid", ...errorUtil.errToObj(message) });
  }
  nanoid(message) {
    return this._addCheck({ kind: "nanoid", ...errorUtil.errToObj(message) });
  }
  cuid(message) {
    return this._addCheck({ kind: "cuid", ...errorUtil.errToObj(message) });
  }
  cuid2(message) {
    return this._addCheck({ kind: "cuid2", ...errorUtil.errToObj(message) });
  }
  ulid(message) {
    return this._addCheck({ kind: "ulid", ...errorUtil.errToObj(message) });
  }
  base64(message) {
    return this._addCheck({ kind: "base64", ...errorUtil.errToObj(message) });
  }
  base64url(message) {
    return this._addCheck({
      kind: "base64url",
      ...errorUtil.errToObj(message)
    });
  }
  jwt(options) {
    return this._addCheck({ kind: "jwt", ...errorUtil.errToObj(options) });
  }
  ip(options) {
    return this._addCheck({ kind: "ip", ...errorUtil.errToObj(options) });
  }
  cidr(options) {
    return this._addCheck({ kind: "cidr", ...errorUtil.errToObj(options) });
  }
  datetime(options) {
    if (typeof options === "string") {
      return this._addCheck({
        kind: "datetime",
        precision: null,
        offset: false,
        local: false,
        message: options
      });
    }
    return this._addCheck({
      kind: "datetime",
      precision: typeof options?.precision === "undefined" ? null : options?.precision,
      offset: options?.offset ?? false,
      local: options?.local ?? false,
      ...errorUtil.errToObj(options?.message)
    });
  }
  date(message) {
    return this._addCheck({ kind: "date", message });
  }
  time(options) {
    if (typeof options === "string") {
      return this._addCheck({
        kind: "time",
        precision: null,
        message: options
      });
    }
    return this._addCheck({
      kind: "time",
      precision: typeof options?.precision === "undefined" ? null : options?.precision,
      ...errorUtil.errToObj(options?.message)
    });
  }
  duration(message) {
    return this._addCheck({ kind: "duration", ...errorUtil.errToObj(message) });
  }
  regex(regex, message) {
    return this._addCheck({
      kind: "regex",
      regex,
      ...errorUtil.errToObj(message)
    });
  }
  includes(value, options) {
    return this._addCheck({
      kind: "includes",
      value,
      position: options?.position,
      ...errorUtil.errToObj(options?.message)
    });
  }
  startsWith(value, message) {
    return this._addCheck({
      kind: "startsWith",
      value,
      ...errorUtil.errToObj(message)
    });
  }
  endsWith(value, message) {
    return this._addCheck({
      kind: "endsWith",
      value,
      ...errorUtil.errToObj(message)
    });
  }
  min(minLength, message) {
    return this._addCheck({
      kind: "min",
      value: minLength,
      ...errorUtil.errToObj(message)
    });
  }
  max(maxLength, message) {
    return this._addCheck({
      kind: "max",
      value: maxLength,
      ...errorUtil.errToObj(message)
    });
  }
  length(len, message) {
    return this._addCheck({
      kind: "length",
      value: len,
      ...errorUtil.errToObj(message)
    });
  }
  /**
   * Equivalent to `.min(1)`
   */
  nonempty(message) {
    return this.min(1, errorUtil.errToObj(message));
  }
  trim() {
    return new ZodString({
      ...this._def,
      checks: [...this._def.checks, { kind: "trim" }]
    });
  }
  toLowerCase() {
    return new ZodString({
      ...this._def,
      checks: [...this._def.checks, { kind: "toLowerCase" }]
    });
  }
  toUpperCase() {
    return new ZodString({
      ...this._def,
      checks: [...this._def.checks, { kind: "toUpperCase" }]
    });
  }
  get isDatetime() {
    return !!this._def.checks.find((ch) => ch.kind === "datetime");
  }
  get isDate() {
    return !!this._def.checks.find((ch) => ch.kind === "date");
  }
  get isTime() {
    return !!this._def.checks.find((ch) => ch.kind === "time");
  }
  get isDuration() {
    return !!this._def.checks.find((ch) => ch.kind === "duration");
  }
  get isEmail() {
    return !!this._def.checks.find((ch) => ch.kind === "email");
  }
  get isURL() {
    return !!this._def.checks.find((ch) => ch.kind === "url");
  }
  get isEmoji() {
    return !!this._def.checks.find((ch) => ch.kind === "emoji");
  }
  get isUUID() {
    return !!this._def.checks.find((ch) => ch.kind === "uuid");
  }
  get isNANOID() {
    return !!this._def.checks.find((ch) => ch.kind === "nanoid");
  }
  get isCUID() {
    return !!this._def.checks.find((ch) => ch.kind === "cuid");
  }
  get isCUID2() {
    return !!this._def.checks.find((ch) => ch.kind === "cuid2");
  }
  get isULID() {
    return !!this._def.checks.find((ch) => ch.kind === "ulid");
  }
  get isIP() {
    return !!this._def.checks.find((ch) => ch.kind === "ip");
  }
  get isCIDR() {
    return !!this._def.checks.find((ch) => ch.kind === "cidr");
  }
  get isBase64() {
    return !!this._def.checks.find((ch) => ch.kind === "base64");
  }
  get isBase64url() {
    return !!this._def.checks.find((ch) => ch.kind === "base64url");
  }
  get minLength() {
    let min = null;
    for (const ch of this._def.checks) {
      if (ch.kind === "min") {
        if (min === null || ch.value > min)
          min = ch.value;
      }
    }
    return min;
  }
  get maxLength() {
    let max = null;
    for (const ch of this._def.checks) {
      if (ch.kind === "max") {
        if (max === null || ch.value < max)
          max = ch.value;
      }
    }
    return max;
  }
}
ZodString.create = (params) => {
  return new ZodString({
    checks: [],
    typeName: ZodFirstPartyTypeKind.ZodString,
    coerce: params?.coerce ?? false,
    ...processCreateParams(params)
  });
};
function floatSafeRemainder(val, step) {
  const valDecCount = (val.toString().split(".")[1] || "").length;
  const stepDecCount = (step.toString().split(".")[1] || "").length;
  const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;
  const valInt = Number.parseInt(val.toFixed(decCount).replace(".", ""));
  const stepInt = Number.parseInt(step.toFixed(decCount).replace(".", ""));
  return valInt % stepInt / 10 ** decCount;
}
class ZodNumber extends ZodType {
  constructor() {
    super(...arguments);
    this.min = this.gte;
    this.max = this.lte;
    this.step = this.multipleOf;
  }
  _parse(input) {
    if (this._def.coerce) {
      input.data = Number(input.data);
    }
    const parsedType = this._getType(input);
    if (parsedType !== ZodParsedType.number) {
      const ctx2 = this._getOrReturnCtx(input);
      addIssueToContext(ctx2, {
        code: ZodIssueCode.invalid_type,
        expected: ZodParsedType.number,
        received: ctx2.parsedType
      });
      return INVALID;
    }
    let ctx = void 0;
    const status = new ParseStatus();
    for (const check of this._def.checks) {
      if (check.kind === "int") {
        if (!util.isInteger(input.data)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_type,
            expected: "integer",
            received: "float",
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "min") {
        const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;
        if (tooSmall) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            code: ZodIssueCode.too_small,
            minimum: check.value,
            type: "number",
            inclusive: check.inclusive,
            exact: false,
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "max") {
        const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;
        if (tooBig) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            code: ZodIssueCode.too_big,
            maximum: check.value,
            type: "number",
            inclusive: check.inclusive,
            exact: false,
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "multipleOf") {
        if (floatSafeRemainder(input.data, check.value) !== 0) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            code: ZodIssueCode.not_multiple_of,
            multipleOf: check.value,
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "finite") {
        if (!Number.isFinite(input.data)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            code: ZodIssueCode.not_finite,
            message: check.message
          });
          status.dirty();
        }
      } else {
        util.assertNever(check);
      }
    }
    return { status: status.value, value: input.data };
  }
  gte(value, message) {
    return this.setLimit("min", value, true, errorUtil.toString(message));
  }
  gt(value, message) {
    return this.setLimit("min", value, false, errorUtil.toString(message));
  }
  lte(value, message) {
    return this.setLimit("max", value, true, errorUtil.toString(message));
  }
  lt(value, message) {
    return this.setLimit("max", value, false, errorUtil.toString(message));
  }
  setLimit(kind, value, inclusive, message) {
    return new ZodNumber({
      ...this._def,
      checks: [
        ...this._def.checks,
        {
          kind,
          value,
          inclusive,
          message: errorUtil.toString(message)
        }
      ]
    });
  }
  _addCheck(check) {
    return new ZodNumber({
      ...this._def,
      checks: [...this._def.checks, check]
    });
  }
  int(message) {
    return this._addCheck({
      kind: "int",
      message: errorUtil.toString(message)
    });
  }
  positive(message) {
    return this._addCheck({
      kind: "min",
      value: 0,
      inclusive: false,
      message: errorUtil.toString(message)
    });
  }
  negative(message) {
    return this._addCheck({
      kind: "max",
      value: 0,
      inclusive: false,
      message: errorUtil.toString(message)
    });
  }
  nonpositive(message) {
    return this._addCheck({
      kind: "max",
      value: 0,
      inclusive: true,
      message: errorUtil.toString(message)
    });
  }
  nonnegative(message) {
    return this._addCheck({
      kind: "min",
      value: 0,
      inclusive: true,
      message: errorUtil.toString(message)
    });
  }
  multipleOf(value, message) {
    return this._addCheck({
      kind: "multipleOf",
      value,
      message: errorUtil.toString(message)
    });
  }
  finite(message) {
    return this._addCheck({
      kind: "finite",
      message: errorUtil.toString(message)
    });
  }
  safe(message) {
    return this._addCheck({
      kind: "min",
      inclusive: true,
      value: Number.MIN_SAFE_INTEGER,
      message: errorUtil.toString(message)
    })._addCheck({
      kind: "max",
      inclusive: true,
      value: Number.MAX_SAFE_INTEGER,
      message: errorUtil.toString(message)
    });
  }
  get minValue() {
    let min = null;
    for (const ch of this._def.checks) {
      if (ch.kind === "min") {
        if (min === null || ch.value > min)
          min = ch.value;
      }
    }
    return min;
  }
  get maxValue() {
    let max = null;
    for (const ch of this._def.checks) {
      if (ch.kind === "max") {
        if (max === null || ch.value < max)
          max = ch.value;
      }
    }
    return max;
  }
  get isInt() {
    return !!this._def.checks.find((ch) => ch.kind === "int" || ch.kind === "multipleOf" && util.isInteger(ch.value));
  }
  get isFinite() {
    let max = null;
    let min = null;
    for (const ch of this._def.checks) {
      if (ch.kind === "finite" || ch.kind === "int" || ch.kind === "multipleOf") {
        return true;
      } else if (ch.kind === "min") {
        if (min === null || ch.value > min)
          min = ch.value;
      } else if (ch.kind === "max") {
        if (max === null || ch.value < max)
          max = ch.value;
      }
    }
    return Number.isFinite(min) && Number.isFinite(max);
  }
}
ZodNumber.create = (params) => {
  return new ZodNumber({
    checks: [],
    typeName: ZodFirstPartyTypeKind.ZodNumber,
    coerce: params?.coerce || false,
    ...processCreateParams(params)
  });
};
class ZodBigInt extends ZodType {
  constructor() {
    super(...arguments);
    this.min = this.gte;
    this.max = this.lte;
  }
  _parse(input) {
    if (this._def.coerce) {
      try {
        input.data = BigInt(input.data);
      } catch {
        return this._getInvalidInput(input);
      }
    }
    const parsedType = this._getType(input);
    if (parsedType !== ZodParsedType.bigint) {
      return this._getInvalidInput(input);
    }
    let ctx = void 0;
    const status = new ParseStatus();
    for (const check of this._def.checks) {
      if (check.kind === "min") {
        const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;
        if (tooSmall) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            code: ZodIssueCode.too_small,
            type: "bigint",
            minimum: check.value,
            inclusive: check.inclusive,
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "max") {
        const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;
        if (tooBig) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            code: ZodIssueCode.too_big,
            type: "bigint",
            maximum: check.value,
            inclusive: check.inclusive,
            message: check.message
          });
          status.dirty();
        }
      } else if (check.kind === "multipleOf") {
        if (input.data % check.value !== BigInt(0)) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            code: ZodIssueCode.not_multiple_of,
            multipleOf: check.value,
            message: check.message
          });
          status.dirty();
        }
      } else {
        util.assertNever(check);
      }
    }
    return { status: status.value, value: input.data };
  }
  _getInvalidInput(input) {
    const ctx = this._getOrReturnCtx(input);
    addIssueToContext(ctx, {
      code: ZodIssueCode.invalid_type,
      expected: ZodParsedType.bigint,
      received: ctx.parsedType
    });
    return INVALID;
  }
  gte(value, message) {
    return this.setLimit("min", value, true, errorUtil.toString(message));
  }
  gt(value, message) {
    return this.setLimit("min", value, false, errorUtil.toString(message));
  }
  lte(value, message) {
    return this.setLimit("max", value, true, errorUtil.toString(message));
  }
  lt(value, message) {
    return this.setLimit("max", value, false, errorUtil.toString(message));
  }
  setLimit(kind, value, inclusive, message) {
    return new ZodBigInt({
      ...this._def,
      checks: [
        ...this._def.checks,
        {
          kind,
          value,
          inclusive,
          message: errorUtil.toString(message)
        }
      ]
    });
  }
  _addCheck(check) {
    return new ZodBigInt({
      ...this._def,
      checks: [...this._def.checks, check]
    });
  }
  positive(message) {
    return this._addCheck({
      kind: "min",
      value: BigInt(0),
      inclusive: false,
      message: errorUtil.toString(message)
    });
  }
  negative(message) {
    return this._addCheck({
      kind: "max",
      value: BigInt(0),
      inclusive: false,
      message: errorUtil.toString(message)
    });
  }
  nonpositive(message) {
    return this._addCheck({
      kind: "max",
      value: BigInt(0),
      inclusive: true,
      message: errorUtil.toString(message)
    });
  }
  nonnegative(message) {
    return this._addCheck({
      kind: "min",
      value: BigInt(0),
      inclusive: true,
      message: errorUtil.toString(message)
    });
  }
  multipleOf(value, message) {
    return this._addCheck({
      kind: "multipleOf",
      value,
      message: errorUtil.toString(message)
    });
  }
  get minValue() {
    let min = null;
    for (const ch of this._def.checks) {
      if (ch.kind === "min") {
        if (min === null || ch.value > min)
          min = ch.value;
      }
    }
    return min;
  }
  get maxValue() {
    let max = null;
    for (const ch of this._def.checks) {
      if (ch.kind === "max") {
        if (max === null || ch.value < max)
          max = ch.value;
      }
    }
    return max;
  }
}
ZodBigInt.create = (params) => {
  return new ZodBigInt({
    checks: [],
    typeName: ZodFirstPartyTypeKind.ZodBigInt,
    coerce: params?.coerce ?? false,
    ...processCreateParams(params)
  });
};
class ZodBoolean extends ZodType {
  _parse(input) {
    if (this._def.coerce) {
      input.data = Boolean(input.data);
    }
    const parsedType = this._getType(input);
    if (parsedType !== ZodParsedType.boolean) {
      const ctx = this._getOrReturnCtx(input);
      addIssueToContext(ctx, {
        code: ZodIssueCode.invalid_type,
        expected: ZodParsedType.boolean,
        received: ctx.parsedType
      });
      return INVALID;
    }
    return OK(input.data);
  }
}
ZodBoolean.create = (params) => {
  return new ZodBoolean({
    typeName: ZodFirstPartyTypeKind.ZodBoolean,
    coerce: params?.coerce || false,
    ...processCreateParams(params)
  });
};
class ZodDate extends ZodType {
  _parse(input) {
    if (this._def.coerce) {
      input.data = new Date(input.data);
    }
    const parsedType = this._getType(input);
    if (parsedType !== ZodParsedType.date) {
      const ctx2 = this._getOrReturnCtx(input);
      addIssueToContext(ctx2, {
        code: ZodIssueCode.invalid_type,
        expected: ZodParsedType.date,
        received: ctx2.parsedType
      });
      return INVALID;
    }
    if (Number.isNaN(input.data.getTime())) {
      const ctx2 = this._getOrReturnCtx(input);
      addIssueToContext(ctx2, {
        code: ZodIssueCode.invalid_date
      });
      return INVALID;
    }
    const status = new ParseStatus();
    let ctx = void 0;
    for (const check of this._def.checks) {
      if (check.kind === "min") {
        if (input.data.getTime() < check.value) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            code: ZodIssueCode.too_small,
            message: check.message,
            inclusive: true,
            exact: false,
            minimum: check.value,
            type: "date"
          });
          status.dirty();
        }
      } else if (check.kind === "max") {
        if (input.data.getTime() > check.value) {
          ctx = this._getOrReturnCtx(input, ctx);
          addIssueToContext(ctx, {
            code: ZodIssueCode.too_big,
            message: check.message,
            inclusive: true,
            exact: false,
            maximum: check.value,
            type: "date"
          });
          status.dirty();
        }
      } else {
        util.assertNever(check);
      }
    }
    return {
      status: status.value,
      value: new Date(input.data.getTime())
    };
  }
  _addCheck(check) {
    return new ZodDate({
      ...this._def,
      checks: [...this._def.checks, check]
    });
  }
  min(minDate, message) {
    return this._addCheck({
      kind: "min",
      value: minDate.getTime(),
      message: errorUtil.toString(message)
    });
  }
  max(maxDate, message) {
    return this._addCheck({
      kind: "max",
      value: maxDate.getTime(),
      message: errorUtil.toString(message)
    });
  }
  get minDate() {
    let min = null;
    for (const ch of this._def.checks) {
      if (ch.kind === "min") {
        if (min === null || ch.value > min)
          min = ch.value;
      }
    }
    return min != null ? new Date(min) : null;
  }
  get maxDate() {
    let max = null;
    for (const ch of this._def.checks) {
      if (ch.kind === "max") {
        if (max === null || ch.value < max)
          max = ch.value;
      }
    }
    return max != null ? new Date(max) : null;
  }
}
ZodDate.create = (params) => {
  return new ZodDate({
    checks: [],
    coerce: params?.coerce || false,
    typeName: ZodFirstPartyTypeKind.ZodDate,
    ...processCreateParams(params)
  });
};
class ZodSymbol extends ZodType {
  _parse(input) {
    const parsedType = this._getType(input);
    if (parsedType !== ZodParsedType.symbol) {
      const ctx = this._getOrReturnCtx(input);
      addIssueToContext(ctx, {
        code: ZodIssueCode.invalid_type,
        expected: ZodParsedType.symbol,
        received: ctx.parsedType
      });
      return INVALID;
    }
    return OK(input.data);
  }
}
ZodSymbol.create = (params) => {
  return new ZodSymbol({
    typeName: ZodFirstPartyTypeKind.ZodSymbol,
    ...processCreateParams(params)
  });
};
class ZodUndefined extends ZodType {
  _parse(input) {
    const parsedType = this._getType(input);
    if (parsedType !== ZodParsedType.undefined) {
      const ctx = this._getOrReturnCtx(input);
      addIssueToContext(ctx, {
        code: ZodIssueCode.invalid_type,
        expected: ZodParsedType.undefined,
        received: ctx.parsedType
      });
      return INVALID;
    }
    return OK(input.data);
  }
}
ZodUndefined.create = (params) => {
  return new ZodUndefined({
    typeName: ZodFirstPartyTypeKind.ZodUndefined,
    ...processCreateParams(params)
  });
};
class ZodNull extends ZodType {
  _parse(input) {
    const parsedType = this._getType(input);
    if (parsedType !== ZodParsedType.null) {
      const ctx = this._getOrReturnCtx(input);
      addIssueToContext(ctx, {
        code: ZodIssueCode.invalid_type,
        expected: ZodParsedType.null,
        received: ctx.parsedType
      });
      return INVALID;
    }
    return OK(input.data);
  }
}
ZodNull.create = (params) => {
  return new ZodNull({
    typeName: ZodFirstPartyTypeKind.ZodNull,
    ...processCreateParams(params)
  });
};
class ZodAny extends ZodType {
  constructor() {
    super(...arguments);
    this._any = true;
  }
  _parse(input) {
    return OK(input.data);
  }
}
ZodAny.create = (params) => {
  return new ZodAny({
    typeName: ZodFirstPartyTypeKind.ZodAny,
    ...processCreateParams(params)
  });
};
class ZodUnknown extends ZodType {
  constructor() {
    super(...arguments);
    this._unknown = true;
  }
  _parse(input) {
    return OK(input.data);
  }
}
ZodUnknown.create = (params) => {
  return new ZodUnknown({
    typeName: ZodFirstPartyTypeKind.ZodUnknown,
    ...processCreateParams(params)
  });
};
class ZodNever extends ZodType {
  _parse(input) {
    const ctx = this._getOrReturnCtx(input);
    addIssueToContext(ctx, {
      code: ZodIssueCode.invalid_type,
      expected: ZodParsedType.never,
      received: ctx.parsedType
    });
    return INVALID;
  }
}
ZodNever.create = (params) => {
  return new ZodNever({
    typeName: ZodFirstPartyTypeKind.ZodNever,
    ...processCreateParams(params)
  });
};
class ZodVoid extends ZodType {
  _parse(input) {
    const parsedType = this._getType(input);
    if (parsedType !== ZodParsedType.undefined) {
      const ctx = this._getOrReturnCtx(input);
      addIssueToContext(ctx, {
        code: ZodIssueCode.invalid_type,
        expected: ZodParsedType.void,
        received: ctx.parsedType
      });
      return INVALID;
    }
    return OK(input.data);
  }
}
ZodVoid.create = (params) => {
  return new ZodVoid({
    typeName: ZodFirstPartyTypeKind.ZodVoid,
    ...processCreateParams(params)
  });
};
class ZodArray extends ZodType {
  _parse(input) {
    const { ctx, status } = this._processInputParams(input);
    const def = this._def;
    if (ctx.parsedType !== ZodParsedType.array) {
      addIssueToContext(ctx, {
        code: ZodIssueCode.invalid_type,
        expected: ZodParsedType.array,
        received: ctx.parsedType
      });
      return INVALID;
    }
    if (def.exactLength !== null) {
      const tooBig = ctx.data.length > def.exactLength.value;
      const tooSmall = ctx.data.length < def.exactLength.value;
      if (tooBig || tooSmall) {
        addIssueToContext(ctx, {
          code: tooBig ? ZodIssueCode.too_big : ZodIssueCode.too_small,
          minimum: tooSmall ? def.exactLength.value : void 0,
          maximum: tooBig ? def.exactLength.value : void 0,
          type: "array",
          inclusive: true,
          exact: true,
          message: def.exactLength.message
        });
        status.dirty();
      }
    }
    if (def.minLength !== null) {
      if (ctx.data.length < def.minLength.value) {
        addIssueToContext(ctx, {
          code: ZodIssueCode.too_small,
          minimum: def.minLength.value,
          type: "array",
          inclusive: true,
          exact: false,
          message: def.minLength.message
        });
        status.dirty();
      }
    }
    if (def.maxLength !== null) {
      if (ctx.data.length > def.maxLength.value) {
        addIssueToContext(ctx, {
          code: ZodIssueCode.too_big,
          maximum: def.maxLength.value,
          type: "array",
          inclusive: true,
          exact: false,
          message: def.maxLength.message
        });
        status.dirty();
      }
    }
    if (ctx.common.async) {
      return Promise.all([...ctx.data].map((item, i2) => {
        return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i2));
      })).then((result2) => {
        return ParseStatus.mergeArray(status, result2);
      });
    }
    const result = [...ctx.data].map((item, i2) => {
      return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i2));
    });
    return ParseStatus.mergeArray(status, result);
  }
  get element() {
    return this._def.type;
  }
  min(minLength, message) {
    return new ZodArray({
      ...this._def,
      minLength: { value: minLength, message: errorUtil.toString(message) }
    });
  }
  max(maxLength, message) {
    return new ZodArray({
      ...this._def,
      maxLength: { value: maxLength, message: errorUtil.toString(message) }
    });
  }
  length(len, message) {
    return new ZodArray({
      ...this._def,
      exactLength: { value: len, message: errorUtil.toString(message) }
    });
  }
  nonempty(message) {
    return this.min(1, message);
  }
}
ZodArray.create = (schema, params) => {
  return new ZodArray({
    type: schema,
    minLength: null,
    maxLength: null,
    exactLength: null,
    typeName: ZodFirstPartyTypeKind.ZodArray,
    ...processCreateParams(params)
  });
};
function deepPartialify(schema) {
  if (schema instanceof ZodObject) {
    const newShape = {};
    for (const key in schema.shape) {
      const fieldSchema = schema.shape[key];
      newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));
    }
    return new ZodObject({
      ...schema._def,
      shape: () => newShape
    });
  } else if (schema instanceof ZodArray) {
    return new ZodArray({
      ...schema._def,
      type: deepPartialify(schema.element)
    });
  } else if (schema instanceof ZodOptional) {
    return ZodOptional.create(deepPartialify(schema.unwrap()));
  } else if (schema instanceof ZodNullable) {
    return ZodNullable.create(deepPartialify(schema.unwrap()));
  } else if (schema instanceof ZodTuple) {
    return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));
  } else {
    return schema;
  }
}
class ZodObject extends ZodType {
  constructor() {
    super(...arguments);
    this._cached = null;
    this.nonstrict = this.passthrough;
    this.augment = this.extend;
  }
  _getCached() {
    if (this._cached !== null)
      return this._cached;
    const shape = this._def.shape();
    const keys = util.objectKeys(shape);
    this._cached = { shape, keys };
    return this._cached;
  }
  _parse(input) {
    const parsedType = this._getType(input);
    if (parsedType !== ZodParsedType.object) {
      const ctx2 = this._getOrReturnCtx(input);
      addIssueToContext(ctx2, {
        code: ZodIssueCode.invalid_type,
        expected: ZodParsedType.object,
        received: ctx2.parsedType
      });
      return INVALID;
    }
    const { status, ctx } = this._processInputParams(input);
    const { shape, keys: shapeKeys } = this._getCached();
    const extraKeys = [];
    if (!(this._def.catchall instanceof ZodNever && this._def.unknownKeys === "strip")) {
      for (const key in ctx.data) {
        if (!shapeKeys.includes(key)) {
          extraKeys.push(key);
        }
      }
    }
    const pairs = [];
    for (const key of shapeKeys) {
      const keyValidator = shape[key];
      const value = ctx.data[key];
      pairs.push({
        key: { status: "valid", value: key },
        value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),
        alwaysSet: key in ctx.data
      });
    }
    if (this._def.catchall instanceof ZodNever) {
      const unknownKeys = this._def.unknownKeys;
      if (unknownKeys === "passthrough") {
        for (const key of extraKeys) {
          pairs.push({
            key: { status: "valid", value: key },
            value: { status: "valid", value: ctx.data[key] }
          });
        }
      } else if (unknownKeys === "strict") {
        if (extraKeys.length > 0) {
          addIssueToContext(ctx, {
            code: ZodIssueCode.unrecognized_keys,
            keys: extraKeys
          });
          status.dirty();
        }
      } else if (unknownKeys === "strip") ;
      else {
        throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);
      }
    } else {
      const catchall = this._def.catchall;
      for (const key of extraKeys) {
        const value = ctx.data[key];
        pairs.push({
          key: { status: "valid", value: key },
          value: catchall._parse(
            new ParseInputLazyPath(ctx, value, ctx.path, key)
            //, ctx.child(key), value, getParsedType(value)
          ),
          alwaysSet: key in ctx.data
        });
      }
    }
    if (ctx.common.async) {
      return Promise.resolve().then(async () => {
        const syncPairs = [];
        for (const pair of pairs) {
          const key = await pair.key;
          const value = await pair.value;
          syncPairs.push({
            key,
            value,
            alwaysSet: pair.alwaysSet
          });
        }
        return syncPairs;
      }).then((syncPairs) => {
        return ParseStatus.mergeObjectSync(status, syncPairs);
      });
    } else {
      return ParseStatus.mergeObjectSync(status, pairs);
    }
  }
  get shape() {
    return this._def.shape();
  }
  strict(message) {
    errorUtil.errToObj;
    return new ZodObject({
      ...this._def,
      unknownKeys: "strict",
      ...message !== void 0 ? {
        errorMap: (issue, ctx) => {
          const defaultError = this._def.errorMap?.(issue, ctx).message ?? ctx.defaultError;
          if (issue.code === "unrecognized_keys")
            return {
              message: errorUtil.errToObj(message).message ?? defaultError
            };
          return {
            message: defaultError
          };
        }
      } : {}
    });
  }
  strip() {
    return new ZodObject({
      ...this._def,
      unknownKeys: "strip"
    });
  }
  passthrough() {
    return new ZodObject({
      ...this._def,
      unknownKeys: "passthrough"
    });
  }
  // const AugmentFactory =
  //   <Def extends ZodObjectDef>(def: Def) =>
  //   <Augmentation extends ZodRawShape>(
  //     augmentation: Augmentation
  //   ): ZodObject<
  //     extendShape<ReturnType<Def["shape"]>, Augmentation>,
  //     Def["unknownKeys"],
  //     Def["catchall"]
  //   > => {
  //     return new ZodObject({
  //       ...def,
  //       shape: () => ({
  //         ...def.shape(),
  //         ...augmentation,
  //       }),
  //     }) as any;
  //   };
  extend(augmentation) {
    return new ZodObject({
      ...this._def,
      shape: () => ({
        ...this._def.shape(),
        ...augmentation
      })
    });
  }
  /**
   * Prior to zod@1.0.12 there was a bug in the
   * inferred type of merged objects. Please
   * upgrade if you are experiencing issues.
   */
  merge(merging) {
    const merged = new ZodObject({
      unknownKeys: merging._def.unknownKeys,
      catchall: merging._def.catchall,
      shape: () => ({
        ...this._def.shape(),
        ...merging._def.shape()
      }),
      typeName: ZodFirstPartyTypeKind.ZodObject
    });
    return merged;
  }
  // merge<
  //   Incoming extends AnyZodObject,
  //   Augmentation extends Incoming["shape"],
  //   NewOutput extends {
  //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation
  //       ? Augmentation[k]["_output"]
  //       : k extends keyof Output
  //       ? Output[k]
  //       : never;
  //   },
  //   NewInput extends {
  //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation
  //       ? Augmentation[k]["_input"]
  //       : k extends keyof Input
  //       ? Input[k]
  //       : never;
  //   }
  // >(
  //   merging: Incoming
  // ): ZodObject<
  //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
  //   Incoming["_def"]["unknownKeys"],
  //   Incoming["_def"]["catchall"],
  //   NewOutput,
  //   NewInput
  // > {
  //   const merged: any = new ZodObject({
  //     unknownKeys: merging._def.unknownKeys,
  //     catchall: merging._def.catchall,
  //     shape: () =>
  //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
  //     typeName: ZodFirstPartyTypeKind.ZodObject,
  //   }) as any;
  //   return merged;
  // }
  setKey(key, schema) {
    return this.augment({ [key]: schema });
  }
  // merge<Incoming extends AnyZodObject>(
  //   merging: Incoming
  // ): //ZodObject<T & Incoming["_shape"], UnknownKeys, Catchall> = (merging) => {
  // ZodObject<
  //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
  //   Incoming["_def"]["unknownKeys"],
  //   Incoming["_def"]["catchall"]
  // > {
  //   // const mergedShape = objectUtil.mergeShapes(
  //   //   this._def.shape(),
  //   //   merging._def.shape()
  //   // );
  //   const merged: any = new ZodObject({
  //     unknownKeys: merging._def.unknownKeys,
  //     catchall: merging._def.catchall,
  //     shape: () =>
  //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
  //     typeName: ZodFirstPartyTypeKind.ZodObject,
  //   }) as any;
  //   return merged;
  // }
  catchall(index) {
    return new ZodObject({
      ...this._def,
      catchall: index
    });
  }
  pick(mask) {
    const shape = {};
    for (const key of util.objectKeys(mask)) {
      if (mask[key] && this.shape[key]) {
        shape[key] = this.shape[key];
      }
    }
    return new ZodObject({
      ...this._def,
      shape: () => shape
    });
  }
  omit(mask) {
    const shape = {};
    for (const key of util.objectKeys(this.shape)) {
      if (!mask[key]) {
        shape[key] = this.shape[key];
      }
    }
    return new ZodObject({
      ...this._def,
      shape: () => shape
    });
  }
  /**
   * @deprecated
   */
  deepPartial() {
    return deepPartialify(this);
  }
  partial(mask) {
    const newShape = {};
    for (const key of util.objectKeys(this.shape)) {
      const fieldSchema = this.shape[key];
      if (mask && !mask[key]) {
        newShape[key] = fieldSchema;
      } else {
        newShape[key] = fieldSchema.optional();
      }
    }
    return new ZodObject({
      ...this._def,
      shape: () => newShape
    });
  }
  required(mask) {
    const newShape = {};
    for (const key of util.objectKeys(this.shape)) {
      if (mask && !mask[key]) {
        newShape[key] = this.shape[key];
      } else {
        const fieldSchema = this.shape[key];
        let newField = fieldSchema;
        while (newField instanceof ZodOptional) {
          newField = newField._def.innerType;
        }
        newShape[key] = newField;
      }
    }
    return new ZodObject({
      ...this._def,
      shape: () => newShape
    });
  }
  keyof() {
    return createZodEnum(util.objectKeys(this.shape));
  }
}
ZodObject.create = (shape, params) => {
  return new ZodObject({
    shape: () => shape,
    unknownKeys: "strip",
    catchall: ZodNever.create(),
    typeName: ZodFirstPartyTypeKind.ZodObject,
    ...processCreateParams(params)
  });
};
ZodObject.strictCreate = (shape, params) => {
  return new ZodObject({
    shape: () => shape,
    unknownKeys: "strict",
    catchall: ZodNever.create(),
    typeName: ZodFirstPartyTypeKind.ZodObject,
    ...processCreateParams(params)
  });
};
ZodObject.lazycreate = (shape, params) => {
  return new ZodObject({
    shape,
    unknownKeys: "strip",
    catchall: ZodNever.create(),
    typeName: ZodFirstPartyTypeKind.ZodObject,
    ...processCreateParams(params)
  });
};
class ZodUnion extends ZodType {
  _parse(input) {
    const { ctx } = this._processInputParams(input);
    const options = this._def.options;
    function handleResults(results) {
      for (const result of results) {
        if (result.result.status === "valid") {
          return result.result;
        }
      }
      for (const result of results) {
        if (result.result.status === "dirty") {
          ctx.common.issues.push(...result.ctx.common.issues);
          return result.result;
        }
      }
      const unionErrors = results.map((result) => new ZodError(result.ctx.common.issues));
      addIssueToContext(ctx, {
        code: ZodIssueCode.invalid_union,
        unionErrors
      });
      return INVALID;
    }
    if (ctx.common.async) {
      return Promise.all(options.map(async (option) => {
        const childCtx = {
          ...ctx,
          common: {
            ...ctx.common,
            issues: []
          },
          parent: null
        };
        return {
          result: await option._parseAsync({
            data: ctx.data,
            path: ctx.path,
            parent: childCtx
          }),
          ctx: childCtx
        };
      })).then(handleResults);
    } else {
      let dirty = void 0;
      const issues = [];
      for (const option of options) {
        const childCtx = {
          ...ctx,
          common: {
            ...ctx.common,
            issues: []
          },
          parent: null
        };
        const result = option._parseSync({
          data: ctx.data,
          path: ctx.path,
          parent: childCtx
        });
        if (result.status === "valid") {
          return result;
        } else if (result.status === "dirty" && !dirty) {
          dirty = { result, ctx: childCtx };
        }
        if (childCtx.common.issues.length) {
          issues.push(childCtx.common.issues);
        }
      }
      if (dirty) {
        ctx.common.issues.push(...dirty.ctx.common.issues);
        return dirty.result;
      }
      const unionErrors = issues.map((issues2) => new ZodError(issues2));
      addIssueToContext(ctx, {
        code: ZodIssueCode.invalid_union,
        unionErrors
      });
      return INVALID;
    }
  }
  get options() {
    return this._def.options;
  }
}
ZodUnion.create = (types2, params) => {
  return new ZodUnion({
    options: types2,
    typeName: ZodFirstPartyTypeKind.ZodUnion,
    ...processCreateParams(params)
  });
};
function mergeValues(a, b) {
  const aType = getParsedType(a);
  const bType = getParsedType(b);
  if (a === b) {
    return { valid: true, data: a };
  } else if (aType === ZodParsedType.object && bType === ZodParsedType.object) {
    const bKeys = util.objectKeys(b);
    const sharedKeys = util.objectKeys(a).filter((key) => bKeys.indexOf(key) !== -1);
    const newObj = { ...a, ...b };
    for (const key of sharedKeys) {
      const sharedValue = mergeValues(a[key], b[key]);
      if (!sharedValue.valid) {
        return { valid: false };
      }
      newObj[key] = sharedValue.data;
    }
    return { valid: true, data: newObj };
  } else if (aType === ZodParsedType.array && bType === ZodParsedType.array) {
    if (a.length !== b.length) {
      return { valid: false };
    }
    const newArray = [];
    for (let index = 0; index < a.length; index++) {
      const itemA = a[index];
      const itemB = b[index];
      const sharedValue = mergeValues(itemA, itemB);
      if (!sharedValue.valid) {
        return { valid: false };
      }
      newArray.push(sharedValue.data);
    }
    return { valid: true, data: newArray };
  } else if (aType === ZodParsedType.date && bType === ZodParsedType.date && +a === +b) {
    return { valid: true, data: a };
  } else {
    return { valid: false };
  }
}
class ZodIntersection extends ZodType {
  _parse(input) {
    const { status, ctx } = this._processInputParams(input);
    const handleParsed = (parsedLeft, parsedRight) => {
      if (isAborted(parsedLeft) || isAborted(parsedRight)) {
        return INVALID;
      }
      const merged = mergeValues(parsedLeft.value, parsedRight.value);
      if (!merged.valid) {
        addIssueToContext(ctx, {
          code: ZodIssueCode.invalid_intersection_types
        });
        return INVALID;
      }
      if (isDirty(parsedLeft) || isDirty(parsedRight)) {
        status.dirty();
      }
      return { status: status.value, value: merged.data };
    };
    if (ctx.common.async) {
      return Promise.all([
        this._def.left._parseAsync({
          data: ctx.data,
          path: ctx.path,
          parent: ctx
        }),
        this._def.right._parseAsync({
          data: ctx.data,
          path: ctx.path,
          parent: ctx
        })
      ]).then(([left, right]) => handleParsed(left, right));
    } else {
      return handleParsed(this._def.left._parseSync({
        data: ctx.data,
        path: ctx.path,
        parent: ctx
      }), this._def.right._parseSync({
        data: ctx.data,
        path: ctx.path,
        parent: ctx
      }));
    }
  }
}
ZodIntersection.create = (left, right, params) => {
  return new ZodIntersection({
    left,
    right,
    typeName: ZodFirstPartyTypeKind.ZodIntersection,
    ...processCreateParams(params)
  });
};
class ZodTuple extends ZodType {
  _parse(input) {
    const { status, ctx } = this._processInputParams(input);
    if (ctx.parsedType !== ZodParsedType.array) {
      addIssueToContext(ctx, {
        code: ZodIssueCode.invalid_type,
        expected: ZodParsedType.array,
        received: ctx.parsedType
      });
      return INVALID;
    }
    if (ctx.data.length < this._def.items.length) {
      addIssueToContext(ctx, {
        code: ZodIssueCode.too_small,
        minimum: this._def.items.length,
        inclusive: true,
        exact: false,
        type: "array"
      });
      return INVALID;
    }
    const rest = this._def.rest;
    if (!rest && ctx.data.length > this._def.items.length) {
      addIssueToContext(ctx, {
        code: ZodIssueCode.too_big,
        maximum: this._def.items.length,
        inclusive: true,
        exact: false,
        type: "array"
      });
      status.dirty();
    }
    const items = [...ctx.data].map((item, itemIndex) => {
      const schema = this._def.items[itemIndex] || this._def.rest;
      if (!schema)
        return null;
      return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));
    }).filter((x) => !!x);
    if (ctx.common.async) {
      return Promise.all(items).then((results) => {
        return ParseStatus.mergeArray(status, results);
      });
    } else {
      return ParseStatus.mergeArray(status, items);
    }
  }
  get items() {
    return this._def.items;
  }
  rest(rest) {
    return new ZodTuple({
      ...this._def,
      rest
    });
  }
}
ZodTuple.create = (schemas, params) => {
  if (!Array.isArray(schemas)) {
    throw new Error("You must pass an array of schemas to z.tuple([ ... ])");
  }
  return new ZodTuple({
    items: schemas,
    typeName: ZodFirstPartyTypeKind.ZodTuple,
    rest: null,
    ...processCreateParams(params)
  });
};
class ZodMap extends ZodType {
  get keySchema() {
    return this._def.keyType;
  }
  get valueSchema() {
    return this._def.valueType;
  }
  _parse(input) {
    const { status, ctx } = this._processInputParams(input);
    if (ctx.parsedType !== ZodParsedType.map) {
      addIssueToContext(ctx, {
        code: ZodIssueCode.invalid_type,
        expected: ZodParsedType.map,
        received: ctx.parsedType
      });
      return INVALID;
    }
    const keyType = this._def.keyType;
    const valueType = this._def.valueType;
    const pairs = [...ctx.data.entries()].map(([key, value], index) => {
      return {
        key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index, "key"])),
        value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index, "value"]))
      };
    });
    if (ctx.common.async) {
      const finalMap = /* @__PURE__ */ new Map();
      return Promise.resolve().then(async () => {
        for (const pair of pairs) {
          const key = await pair.key;
          const value = await pair.value;
          if (key.status === "aborted" || value.status === "aborted") {
            return INVALID;
          }
          if (key.status === "dirty" || value.status === "dirty") {
            status.dirty();
          }
          finalMap.set(key.value, value.value);
        }
        return { status: status.value, value: finalMap };
      });
    } else {
      const finalMap = /* @__PURE__ */ new Map();
      for (const pair of pairs) {
        const key = pair.key;
        const value = pair.value;
        if (key.status === "aborted" || value.status === "aborted") {
          return INVALID;
        }
        if (key.status === "dirty" || value.status === "dirty") {
          status.dirty();
        }
        finalMap.set(key.value, value.value);
      }
      return { status: status.value, value: finalMap };
    }
  }
}
ZodMap.create = (keyType, valueType, params) => {
  return new ZodMap({
    valueType,
    keyType,
    typeName: ZodFirstPartyTypeKind.ZodMap,
    ...processCreateParams(params)
  });
};
class ZodSet extends ZodType {
  _parse(input) {
    const { status, ctx } = this._processInputParams(input);
    if (ctx.parsedType !== ZodParsedType.set) {
      addIssueToContext(ctx, {
        code: ZodIssueCode.invalid_type,
        expected: ZodParsedType.set,
        received: ctx.parsedType
      });
      return INVALID;
    }
    const def = this._def;
    if (def.minSize !== null) {
      if (ctx.data.size < def.minSize.value) {
        addIssueToContext(ctx, {
          code: ZodIssueCode.too_small,
          minimum: def.minSize.value,
          type: "set",
          inclusive: true,
          exact: false,
          message: def.minSize.message
        });
        status.dirty();
      }
    }
    if (def.maxSize !== null) {
      if (ctx.data.size > def.maxSize.value) {
        addIssueToContext(ctx, {
          code: ZodIssueCode.too_big,
          maximum: def.maxSize.value,
          type: "set",
          inclusive: true,
          exact: false,
          message: def.maxSize.message
        });
        status.dirty();
      }
    }
    const valueType = this._def.valueType;
    function finalizeSet(elements2) {
      const parsedSet = /* @__PURE__ */ new Set();
      for (const element of elements2) {
        if (element.status === "aborted")
          return INVALID;
        if (element.status === "dirty")
          status.dirty();
        parsedSet.add(element.value);
      }
      return { status: status.value, value: parsedSet };
    }
    const elements = [...ctx.data.values()].map((item, i2) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i2)));
    if (ctx.common.async) {
      return Promise.all(elements).then((elements2) => finalizeSet(elements2));
    } else {
      return finalizeSet(elements);
    }
  }
  min(minSize, message) {
    return new ZodSet({
      ...this._def,
      minSize: { value: minSize, message: errorUtil.toString(message) }
    });
  }
  max(maxSize, message) {
    return new ZodSet({
      ...this._def,
      maxSize: { value: maxSize, message: errorUtil.toString(message) }
    });
  }
  size(size, message) {
    return this.min(size, message).max(size, message);
  }
  nonempty(message) {
    return this.min(1, message);
  }
}
ZodSet.create = (valueType, params) => {
  return new ZodSet({
    valueType,
    minSize: null,
    maxSize: null,
    typeName: ZodFirstPartyTypeKind.ZodSet,
    ...processCreateParams(params)
  });
};
class ZodLazy extends ZodType {
  get schema() {
    return this._def.getter();
  }
  _parse(input) {
    const { ctx } = this._processInputParams(input);
    const lazySchema = this._def.getter();
    return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });
  }
}
ZodLazy.create = (getter, params) => {
  return new ZodLazy({
    getter,
    typeName: ZodFirstPartyTypeKind.ZodLazy,
    ...processCreateParams(params)
  });
};
class ZodLiteral extends ZodType {
  _parse(input) {
    if (input.data !== this._def.value) {
      const ctx = this._getOrReturnCtx(input);
      addIssueToContext(ctx, {
        received: ctx.data,
        code: ZodIssueCode.invalid_literal,
        expected: this._def.value
      });
      return INVALID;
    }
    return { status: "valid", value: input.data };
  }
  get value() {
    return this._def.value;
  }
}
ZodLiteral.create = (value, params) => {
  return new ZodLiteral({
    value,
    typeName: ZodFirstPartyTypeKind.ZodLiteral,
    ...processCreateParams(params)
  });
};
function createZodEnum(values, params) {
  return new ZodEnum({
    values,
    typeName: ZodFirstPartyTypeKind.ZodEnum,
    ...processCreateParams(params)
  });
}
class ZodEnum extends ZodType {
  _parse(input) {
    if (typeof input.data !== "string") {
      const ctx = this._getOrReturnCtx(input);
      const expectedValues = this._def.values;
      addIssueToContext(ctx, {
        expected: util.joinValues(expectedValues),
        received: ctx.parsedType,
        code: ZodIssueCode.invalid_type
      });
      return INVALID;
    }
    if (!this._cache) {
      this._cache = new Set(this._def.values);
    }
    if (!this._cache.has(input.data)) {
      const ctx = this._getOrReturnCtx(input);
      const expectedValues = this._def.values;
      addIssueToContext(ctx, {
        received: ctx.data,
        code: ZodIssueCode.invalid_enum_value,
        options: expectedValues
      });
      return INVALID;
    }
    return OK(input.data);
  }
  get options() {
    return this._def.values;
  }
  get enum() {
    const enumValues = {};
    for (const val of this._def.values) {
      enumValues[val] = val;
    }
    return enumValues;
  }
  get Values() {
    const enumValues = {};
    for (const val of this._def.values) {
      enumValues[val] = val;
    }
    return enumValues;
  }
  get Enum() {
    const enumValues = {};
    for (const val of this._def.values) {
      enumValues[val] = val;
    }
    return enumValues;
  }
  extract(values, newDef = this._def) {
    return ZodEnum.create(values, {
      ...this._def,
      ...newDef
    });
  }
  exclude(values, newDef = this._def) {
    return ZodEnum.create(this.options.filter((opt) => !values.includes(opt)), {
      ...this._def,
      ...newDef
    });
  }
}
ZodEnum.create = createZodEnum;
class ZodNativeEnum extends ZodType {
  _parse(input) {
    const nativeEnumValues = util.getValidEnumValues(this._def.values);
    const ctx = this._getOrReturnCtx(input);
    if (ctx.parsedType !== ZodParsedType.string && ctx.parsedType !== ZodParsedType.number) {
      const expectedValues = util.objectValues(nativeEnumValues);
      addIssueToContext(ctx, {
        expected: util.joinValues(expectedValues),
        received: ctx.parsedType,
        code: ZodIssueCode.invalid_type
      });
      return INVALID;
    }
    if (!this._cache) {
      this._cache = new Set(util.getValidEnumValues(this._def.values));
    }
    if (!this._cache.has(input.data)) {
      const expectedValues = util.objectValues(nativeEnumValues);
      addIssueToContext(ctx, {
        received: ctx.data,
        code: ZodIssueCode.invalid_enum_value,
        options: expectedValues
      });
      return INVALID;
    }
    return OK(input.data);
  }
  get enum() {
    return this._def.values;
  }
}
ZodNativeEnum.create = (values, params) => {
  return new ZodNativeEnum({
    values,
    typeName: ZodFirstPartyTypeKind.ZodNativeEnum,
    ...processCreateParams(params)
  });
};
class ZodPromise extends ZodType {
  unwrap() {
    return this._def.type;
  }
  _parse(input) {
    const { ctx } = this._processInputParams(input);
    if (ctx.parsedType !== ZodParsedType.promise && ctx.common.async === false) {
      addIssueToContext(ctx, {
        code: ZodIssueCode.invalid_type,
        expected: ZodParsedType.promise,
        received: ctx.parsedType
      });
      return INVALID;
    }
    const promisified = ctx.parsedType === ZodParsedType.promise ? ctx.data : Promise.resolve(ctx.data);
    return OK(promisified.then((data) => {
      return this._def.type.parseAsync(data, {
        path: ctx.path,
        errorMap: ctx.common.contextualErrorMap
      });
    }));
  }
}
ZodPromise.create = (schema, params) => {
  return new ZodPromise({
    type: schema,
    typeName: ZodFirstPartyTypeKind.ZodPromise,
    ...processCreateParams(params)
  });
};
class ZodEffects extends ZodType {
  innerType() {
    return this._def.schema;
  }
  sourceType() {
    return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects ? this._def.schema.sourceType() : this._def.schema;
  }
  _parse(input) {
    const { status, ctx } = this._processInputParams(input);
    const effect = this._def.effect || null;
    const checkCtx = {
      addIssue: (arg) => {
        addIssueToContext(ctx, arg);
        if (arg.fatal) {
          status.abort();
        } else {
          status.dirty();
        }
      },
      get path() {
        return ctx.path;
      }
    };
    checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);
    if (effect.type === "preprocess") {
      const processed = effect.transform(ctx.data, checkCtx);
      if (ctx.common.async) {
        return Promise.resolve(processed).then(async (processed2) => {
          if (status.value === "aborted")
            return INVALID;
          const result = await this._def.schema._parseAsync({
            data: processed2,
            path: ctx.path,
            parent: ctx
          });
          if (result.status === "aborted")
            return INVALID;
          if (result.status === "dirty")
            return DIRTY(result.value);
          if (status.value === "dirty")
            return DIRTY(result.value);
          return result;
        });
      } else {
        if (status.value === "aborted")
          return INVALID;
        const result = this._def.schema._parseSync({
          data: processed,
          path: ctx.path,
          parent: ctx
        });
        if (result.status === "aborted")
          return INVALID;
        if (result.status === "dirty")
          return DIRTY(result.value);
        if (status.value === "dirty")
          return DIRTY(result.value);
        return result;
      }
    }
    if (effect.type === "refinement") {
      const executeRefinement = (acc) => {
        const result = effect.refinement(acc, checkCtx);
        if (ctx.common.async) {
          return Promise.resolve(result);
        }
        if (result instanceof Promise) {
          throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");
        }
        return acc;
      };
      if (ctx.common.async === false) {
        const inner = this._def.schema._parseSync({
          data: ctx.data,
          path: ctx.path,
          parent: ctx
        });
        if (inner.status === "aborted")
          return INVALID;
        if (inner.status === "dirty")
          status.dirty();
        executeRefinement(inner.value);
        return { status: status.value, value: inner.value };
      } else {
        return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((inner) => {
          if (inner.status === "aborted")
            return INVALID;
          if (inner.status === "dirty")
            status.dirty();
          return executeRefinement(inner.value).then(() => {
            return { status: status.value, value: inner.value };
          });
        });
      }
    }
    if (effect.type === "transform") {
      if (ctx.common.async === false) {
        const base = this._def.schema._parseSync({
          data: ctx.data,
          path: ctx.path,
          parent: ctx
        });
        if (!isValid(base))
          return INVALID;
        const result = effect.transform(base.value, checkCtx);
        if (result instanceof Promise) {
          throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);
        }
        return { status: status.value, value: result };
      } else {
        return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((base) => {
          if (!isValid(base))
            return INVALID;
          return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({
            status: status.value,
            value: result
          }));
        });
      }
    }
    util.assertNever(effect);
  }
}
ZodEffects.create = (schema, effect, params) => {
  return new ZodEffects({
    schema,
    typeName: ZodFirstPartyTypeKind.ZodEffects,
    effect,
    ...processCreateParams(params)
  });
};
ZodEffects.createWithPreprocess = (preprocess, schema, params) => {
  return new ZodEffects({
    schema,
    effect: { type: "preprocess", transform: preprocess },
    typeName: ZodFirstPartyTypeKind.ZodEffects,
    ...processCreateParams(params)
  });
};
class ZodOptional extends ZodType {
  _parse(input) {
    const parsedType = this._getType(input);
    if (parsedType === ZodParsedType.undefined) {
      return OK(void 0);
    }
    return this._def.innerType._parse(input);
  }
  unwrap() {
    return this._def.innerType;
  }
}
ZodOptional.create = (type2, params) => {
  return new ZodOptional({
    innerType: type2,
    typeName: ZodFirstPartyTypeKind.ZodOptional,
    ...processCreateParams(params)
  });
};
class ZodNullable extends ZodType {
  _parse(input) {
    const parsedType = this._getType(input);
    if (parsedType === ZodParsedType.null) {
      return OK(null);
    }
    return this._def.innerType._parse(input);
  }
  unwrap() {
    return this._def.innerType;
  }
}
ZodNullable.create = (type2, params) => {
  return new ZodNullable({
    innerType: type2,
    typeName: ZodFirstPartyTypeKind.ZodNullable,
    ...processCreateParams(params)
  });
};
class ZodDefault extends ZodType {
  _parse(input) {
    const { ctx } = this._processInputParams(input);
    let data = ctx.data;
    if (ctx.parsedType === ZodParsedType.undefined) {
      data = this._def.defaultValue();
    }
    return this._def.innerType._parse({
      data,
      path: ctx.path,
      parent: ctx
    });
  }
  removeDefault() {
    return this._def.innerType;
  }
}
ZodDefault.create = (type2, params) => {
  return new ZodDefault({
    innerType: type2,
    typeName: ZodFirstPartyTypeKind.ZodDefault,
    defaultValue: typeof params.default === "function" ? params.default : () => params.default,
    ...processCreateParams(params)
  });
};
class ZodCatch extends ZodType {
  _parse(input) {
    const { ctx } = this._processInputParams(input);
    const newCtx = {
      ...ctx,
      common: {
        ...ctx.common,
        issues: []
      }
    };
    const result = this._def.innerType._parse({
      data: newCtx.data,
      path: newCtx.path,
      parent: {
        ...newCtx
      }
    });
    if (isAsync(result)) {
      return result.then((result2) => {
        return {
          status: "valid",
          value: result2.status === "valid" ? result2.value : this._def.catchValue({
            get error() {
              return new ZodError(newCtx.common.issues);
            },
            input: newCtx.data
          })
        };
      });
    } else {
      return {
        status: "valid",
        value: result.status === "valid" ? result.value : this._def.catchValue({
          get error() {
            return new ZodError(newCtx.common.issues);
          },
          input: newCtx.data
        })
      };
    }
  }
  removeCatch() {
    return this._def.innerType;
  }
}
ZodCatch.create = (type2, params) => {
  return new ZodCatch({
    innerType: type2,
    typeName: ZodFirstPartyTypeKind.ZodCatch,
    catchValue: typeof params.catch === "function" ? params.catch : () => params.catch,
    ...processCreateParams(params)
  });
};
class ZodNaN extends ZodType {
  _parse(input) {
    const parsedType = this._getType(input);
    if (parsedType !== ZodParsedType.nan) {
      const ctx = this._getOrReturnCtx(input);
      addIssueToContext(ctx, {
        code: ZodIssueCode.invalid_type,
        expected: ZodParsedType.nan,
        received: ctx.parsedType
      });
      return INVALID;
    }
    return { status: "valid", value: input.data };
  }
}
ZodNaN.create = (params) => {
  return new ZodNaN({
    typeName: ZodFirstPartyTypeKind.ZodNaN,
    ...processCreateParams(params)
  });
};
class ZodBranded extends ZodType {
  _parse(input) {
    const { ctx } = this._processInputParams(input);
    const data = ctx.data;
    return this._def.type._parse({
      data,
      path: ctx.path,
      parent: ctx
    });
  }
  unwrap() {
    return this._def.type;
  }
}
class ZodPipeline extends ZodType {
  _parse(input) {
    const { status, ctx } = this._processInputParams(input);
    if (ctx.common.async) {
      const handleAsync = async () => {
        const inResult = await this._def.in._parseAsync({
          data: ctx.data,
          path: ctx.path,
          parent: ctx
        });
        if (inResult.status === "aborted")
          return INVALID;
        if (inResult.status === "dirty") {
          status.dirty();
          return DIRTY(inResult.value);
        } else {
          return this._def.out._parseAsync({
            data: inResult.value,
            path: ctx.path,
            parent: ctx
          });
        }
      };
      return handleAsync();
    } else {
      const inResult = this._def.in._parseSync({
        data: ctx.data,
        path: ctx.path,
        parent: ctx
      });
      if (inResult.status === "aborted")
        return INVALID;
      if (inResult.status === "dirty") {
        status.dirty();
        return {
          status: "dirty",
          value: inResult.value
        };
      } else {
        return this._def.out._parseSync({
          data: inResult.value,
          path: ctx.path,
          parent: ctx
        });
      }
    }
  }
  static create(a, b) {
    return new ZodPipeline({
      in: a,
      out: b,
      typeName: ZodFirstPartyTypeKind.ZodPipeline
    });
  }
}
class ZodReadonly extends ZodType {
  _parse(input) {
    const result = this._def.innerType._parse(input);
    const freeze = (data) => {
      if (isValid(data)) {
        data.value = Object.freeze(data.value);
      }
      return data;
    };
    return isAsync(result) ? result.then((data) => freeze(data)) : freeze(result);
  }
  unwrap() {
    return this._def.innerType;
  }
}
ZodReadonly.create = (type2, params) => {
  return new ZodReadonly({
    innerType: type2,
    typeName: ZodFirstPartyTypeKind.ZodReadonly,
    ...processCreateParams(params)
  });
};
({
  object: ZodObject.lazycreate
});
var ZodFirstPartyTypeKind;
(function(ZodFirstPartyTypeKind2) {
  ZodFirstPartyTypeKind2["ZodString"] = "ZodString";
  ZodFirstPartyTypeKind2["ZodNumber"] = "ZodNumber";
  ZodFirstPartyTypeKind2["ZodNaN"] = "ZodNaN";
  ZodFirstPartyTypeKind2["ZodBigInt"] = "ZodBigInt";
  ZodFirstPartyTypeKind2["ZodBoolean"] = "ZodBoolean";
  ZodFirstPartyTypeKind2["ZodDate"] = "ZodDate";
  ZodFirstPartyTypeKind2["ZodSymbol"] = "ZodSymbol";
  ZodFirstPartyTypeKind2["ZodUndefined"] = "ZodUndefined";
  ZodFirstPartyTypeKind2["ZodNull"] = "ZodNull";
  ZodFirstPartyTypeKind2["ZodAny"] = "ZodAny";
  ZodFirstPartyTypeKind2["ZodUnknown"] = "ZodUnknown";
  ZodFirstPartyTypeKind2["ZodNever"] = "ZodNever";
  ZodFirstPartyTypeKind2["ZodVoid"] = "ZodVoid";
  ZodFirstPartyTypeKind2["ZodArray"] = "ZodArray";
  ZodFirstPartyTypeKind2["ZodObject"] = "ZodObject";
  ZodFirstPartyTypeKind2["ZodUnion"] = "ZodUnion";
  ZodFirstPartyTypeKind2["ZodDiscriminatedUnion"] = "ZodDiscriminatedUnion";
  ZodFirstPartyTypeKind2["ZodIntersection"] = "ZodIntersection";
  ZodFirstPartyTypeKind2["ZodTuple"] = "ZodTuple";
  ZodFirstPartyTypeKind2["ZodRecord"] = "ZodRecord";
  ZodFirstPartyTypeKind2["ZodMap"] = "ZodMap";
  ZodFirstPartyTypeKind2["ZodSet"] = "ZodSet";
  ZodFirstPartyTypeKind2["ZodFunction"] = "ZodFunction";
  ZodFirstPartyTypeKind2["ZodLazy"] = "ZodLazy";
  ZodFirstPartyTypeKind2["ZodLiteral"] = "ZodLiteral";
  ZodFirstPartyTypeKind2["ZodEnum"] = "ZodEnum";
  ZodFirstPartyTypeKind2["ZodEffects"] = "ZodEffects";
  ZodFirstPartyTypeKind2["ZodNativeEnum"] = "ZodNativeEnum";
  ZodFirstPartyTypeKind2["ZodOptional"] = "ZodOptional";
  ZodFirstPartyTypeKind2["ZodNullable"] = "ZodNullable";
  ZodFirstPartyTypeKind2["ZodDefault"] = "ZodDefault";
  ZodFirstPartyTypeKind2["ZodCatch"] = "ZodCatch";
  ZodFirstPartyTypeKind2["ZodPromise"] = "ZodPromise";
  ZodFirstPartyTypeKind2["ZodBranded"] = "ZodBranded";
  ZodFirstPartyTypeKind2["ZodPipeline"] = "ZodPipeline";
  ZodFirstPartyTypeKind2["ZodReadonly"] = "ZodReadonly";
})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));
const stringType = ZodString.create;
const numberType = ZodNumber.create;
ZodNever.create;
ZodArray.create;
const objectType = ZodObject.create;
ZodObject.strictCreate;
ZodUnion.create;
ZodIntersection.create;
ZodTuple.create;
const enumType = ZodEnum.create;
ZodPromise.create;
ZodOptional.create;
ZodNullable.create;
const contractorSchema = objectType({
  user_name: stringType().min(2, "Name must be at least 2 characters"),
  email: stringType().email("Invalid email address"),
  password: stringType().optional(),
  confirm_password: stringType().optional(),
  phone_number: stringType().min(10, "Phone number must be at least 10 digits"),
  company_name: stringType().min(2, "Company name must be at least 2 characters"),
  contact_number: stringType().min(10, "Contact number must be at least 10 digits"),
  allowed_locations: numberType().min(1, "Must allow at least 1 location"),
  allowed_attendants_per_location: numberType().min(1, "Must allow at least 1 attendant per location"),
  status: enumType(["active", "inactive"]),
  rates_2wheeler: objectType({
    upTo2Hours: numberType().min(0),
    upTo6Hours: numberType().min(0),
    upTo12Hours: numberType().min(0),
    upTo24Hours: numberType().min(0)
  }),
  rates_4wheeler: objectType({
    upTo2Hours: numberType().min(0),
    upTo6Hours: numberType().min(0),
    upTo12Hours: numberType().min(0),
    upTo24Hours: numberType().min(0)
  })
}).refine((data) => {
  if (data.password && data.confirm_password) {
    return data.password === data.confirm_password;
  }
  return true;
}, {
  message: "Passwords do not match",
  path: ["confirm_password"]
});
function ContractorForm({
  isOpen,
  onClose,
  onSuccess,
  contractor,
  isEditing = false
}) {
  const [isSubmitting, setIsSubmitting] = reactExports.useState(false);
  const [showPassword, setShowPassword] = reactExports.useState(false);
  const [showConfirmPassword, setShowConfirmPassword] = reactExports.useState(false);
  const { toast: toast2 } = useToast();
  const {
    register,
    handleSubmit,
    formState: { errors },
    setValue,
    watch,
    reset
  } = useForm({
    resolver: t(contractorSchema),
    defaultValues: {
      password: "",
      confirm_password: "",
      allowed_locations: 5,
      allowed_attendants_per_location: 10,
      status: "active",
      rates_2wheeler: {
        upTo2Hours: 2,
        upTo6Hours: 5,
        upTo12Hours: 8,
        upTo24Hours: 12
      },
      rates_4wheeler: {
        upTo2Hours: 5,
        upTo6Hours: 10,
        upTo12Hours: 18,
        upTo24Hours: 30
      }
    }
  });
  reactExports.useEffect(() => {
    if (contractor && isEditing) {
      reset({
        user_name: contractor.profiles?.user_name || "",
        email: contractor.profiles?.email || "",
        phone_number: contractor.profiles?.phone_number || "",
        company_name: contractor.company_name || "",
        contact_number: contractor.contact_number || "",
        allowed_locations: contractor.allowed_locations || 5,
        allowed_attendants_per_location: contractor.allowed_attendants_per_location || 10,
        status: contractor.status || "active",
        rates_2wheeler: contractor.rates_2wheeler || {
          upTo2Hours: 2,
          upTo6Hours: 5,
          upTo12Hours: 8,
          upTo24Hours: 12
        },
        rates_4wheeler: contractor.rates_4wheeler || {
          upTo2Hours: 5,
          upTo6Hours: 10,
          upTo12Hours: 18,
          upTo24Hours: 30
        },
        // Don't reset password fields when editing
        password: "",
        confirm_password: ""
      });
    } else if (!isEditing) {
      reset({
        password: "",
        confirm_password: "",
        allowed_locations: 5,
        allowed_attendants_per_location: 10,
        status: "active",
        rates_2wheeler: {
          upTo2Hours: 2,
          upTo6Hours: 5,
          upTo12Hours: 8,
          upTo24Hours: 12
        },
        rates_4wheeler: {
          upTo2Hours: 5,
          upTo6Hours: 10,
          upTo12Hours: 18,
          upTo24Hours: 30
        }
      });
    }
  }, [contractor, isEditing, reset]);
  const onSubmit = async (data) => {
    setIsSubmitting(true);
    try {
      const contractorData = {
        user_name: data.user_name,
        email: data.email,
        phone_number: data.phone_number,
        company_name: data.company_name,
        contact_number: data.contact_number,
        allowed_locations: data.allowed_locations,
        allowed_attendants_per_location: data.allowed_attendants_per_location,
        status: data.status,
        rates_2wheeler: {
          upTo2Hours: data.rates_2wheeler.upTo2Hours,
          upTo6Hours: data.rates_2wheeler.upTo6Hours,
          upTo12Hours: data.rates_2wheeler.upTo12Hours,
          upTo24Hours: data.rates_2wheeler.upTo24Hours
        },
        rates_4wheeler: {
          upTo2Hours: data.rates_4wheeler.upTo2Hours,
          upTo6Hours: data.rates_4wheeler.upTo6Hours,
          upTo12Hours: data.rates_4wheeler.upTo12Hours,
          upTo24Hours: data.rates_4wheeler.upTo24Hours
        }
      };
      if (!isEditing || data.password) {
        contractorData.password = data.password;
      }
      if (isEditing && contractor) {
        console.log("Updating contractor with data:", contractorData);
        const updatedContractor = await SuperAdminAPI.updateContractor(contractor.id, contractorData);
        console.log("Updated contractor result:", updatedContractor);
        toast2({
          title: "Success",
          description: "Contractor updated successfully"
        });
      } else {
        if (!data.password) {
          toast2({
            title: "Error",
            description: "Password is required for new contractors",
            variant: "destructive"
          });
          return;
        }
        console.log("Creating contractor with data:", contractorData);
        const newContractor = await SuperAdminAPI.createContractor(contractorData);
        console.log("Created contractor result:", newContractor);
        toast2({
          title: "Success",
          description: "Contractor created successfully"
        });
      }
      onSuccess?.();
      reset();
      onClose();
    } catch (error) {
      toast2({
        title: "Error",
        description: error.message || "Failed to save contractor",
        variant: "destructive"
      });
    } finally {
      setIsSubmitting(false);
    }
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: isOpen, onOpenChange: onClose, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { className: "max-w-4xl max-h-[90vh] overflow-y-auto w-[95vw] sm:w-full", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogHeader, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(DialogTitle, { className: "text-lg sm:text-xl", children: isEditing ? "Edit Contractor" : "Add New Contractor" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(DialogDescription, { className: "text-sm", children: isEditing ? "Update contractor information and settings" : "Create a new contractor account with parking management settings" })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("form", { onSubmit: handleSubmit(onSubmit), className: "space-y-4 sm:space-y-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3 sm:space-y-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-base sm:text-lg font-semibold", children: "Basic Information" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "user_name", children: "Full Name" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "user_name",
                ...register("user_name"),
                placeholder: "Enter full name"
              }
            ),
            errors.user_name && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-destructive", children: errors.user_name.message })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "email", children: "Email" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "email",
                type: "email",
                ...register("email"),
                placeholder: "Enter email address"
              }
            ),
            errors.email && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-destructive", children: errors.email.message })
          ] }),
          !isEditing && /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "password", children: "Password" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Input,
                  {
                    id: "password",
                    type: showPassword ? "text" : "password",
                    ...register("password"),
                    placeholder: "Enter password"
                  }
                ),
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Button,
                  {
                    type: "button",
                    variant: "ghost",
                    size: "icon",
                    className: "absolute right-2 top-1/2 -translate-y-1/2 h-6 w-6",
                    onClick: () => setShowPassword((v2) => !v2),
                    children: showPassword ? /* @__PURE__ */ jsxRuntimeExports.jsx(EyeOff, { className: "h-4 w-4" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Eye, { className: "h-4 w-4" })
                  }
                )
              ] }),
              errors.password && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-destructive", children: errors.password.message })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "confirm_password", children: "Confirm Password" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Input,
                  {
                    id: "confirm_password",
                    type: showConfirmPassword ? "text" : "password",
                    ...register("confirm_password"),
                    placeholder: "Re-enter password"
                  }
                ),
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Button,
                  {
                    type: "button",
                    variant: "ghost",
                    size: "icon",
                    className: "absolute right-2 top-1/2 -translate-y-1/2 h-6 w-6",
                    onClick: () => setShowConfirmPassword((v2) => !v2),
                    children: showConfirmPassword ? /* @__PURE__ */ jsxRuntimeExports.jsx(EyeOff, { className: "h-4 w-4" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Eye, { className: "h-4 w-4" })
                  }
                )
              ] }),
              errors.confirm_password && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-destructive", children: errors.confirm_password.message })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "phone_number", children: "Phone Number" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "phone_number",
                ...register("phone_number"),
                placeholder: "Enter phone number"
              }
            ),
            errors.phone_number && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-destructive", children: errors.phone_number.message })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "company_name", children: "Company Name" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "company_name",
                ...register("company_name"),
                placeholder: "Enter company name"
              }
            ),
            errors.company_name && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-destructive", children: errors.company_name.message })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "contact_number", children: "Contact Number" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "contact_number",
                ...register("contact_number"),
                placeholder: "Enter contact number"
              }
            ),
            errors.contact_number && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-destructive", children: errors.contact_number.message })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3 sm:space-y-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-base sm:text-lg font-semibold", children: "Settings & Limits" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "status", children: "Status" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { onValueChange: (value) => setValue("status", value), children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { placeholder: "Select status" }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectContent, { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "active", children: "Active" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "inactive", children: "Inactive" })
              ] })
            ] }),
            errors.status && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-destructive", children: errors.status.message })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "allowed_locations", children: "Allowed Locations" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "allowed_locations",
                type: "number",
                ...register("allowed_locations", { valueAsNumber: true }),
                placeholder: "Number of locations allowed"
              }
            ),
            errors.allowed_locations && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-destructive", children: errors.allowed_locations.message })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "allowed_attendants_per_location", children: "Attendants per Location" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "allowed_attendants_per_location",
                type: "number",
                ...register("allowed_attendants_per_location", { valueAsNumber: true }),
                placeholder: "Attendants allowed per location"
              }
            ),
            errors.allowed_attendants_per_location && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-destructive", children: errors.allowed_attendants_per_location.message })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3 sm:space-y-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-base sm:text-lg font-semibold", children: "Parking Rates" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h4", { className: "font-medium", children: "2-Wheeler Rates ()" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-2 gap-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-sm", children: "Up to 2 hours" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Input,
                  {
                    type: "number",
                    step: "0.01",
                    ...register("rates_2wheeler.upTo2Hours", { valueAsNumber: true })
                  }
                )
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-sm", children: "Up to 6 hours" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Input,
                  {
                    type: "number",
                    step: "0.01",
                    ...register("rates_2wheeler.upTo6Hours", { valueAsNumber: true })
                  }
                )
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-sm", children: "Up to 12 hours" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Input,
                  {
                    type: "number",
                    step: "0.01",
                    ...register("rates_2wheeler.upTo12Hours", { valueAsNumber: true })
                  }
                )
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-sm", children: "Up to 24 hours" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Input,
                  {
                    type: "number",
                    step: "0.01",
                    ...register("rates_2wheeler.upTo24Hours", { valueAsNumber: true })
                  }
                )
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h4", { className: "font-medium", children: "4-Wheeler Rates ()" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-2 gap-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-sm", children: "Up to 2 hours" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Input,
                  {
                    type: "number",
                    step: "0.01",
                    ...register("rates_4wheeler.upTo2Hours", { valueAsNumber: true })
                  }
                )
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-sm", children: "Up to 6 hours" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Input,
                  {
                    type: "number",
                    step: "0.01",
                    ...register("rates_4wheeler.upTo6Hours", { valueAsNumber: true })
                  }
                )
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-sm", children: "Up to 12 hours" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Input,
                  {
                    type: "number",
                    step: "0.01",
                    ...register("rates_4wheeler.upTo12Hours", { valueAsNumber: true })
                  }
                )
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-sm", children: "Up to 24 hours" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Input,
                  {
                    type: "number",
                    step: "0.01",
                    ...register("rates_4wheeler.upTo24Hours", { valueAsNumber: true })
                  }
                )
              ] })
            ] })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogFooter, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { type: "button", variant: "outline", onClick: onClose, children: "Cancel" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { type: "submit", disabled: isSubmitting, children: isSubmitting ? "Saving..." : isEditing ? "Update Contractor" : "Create Contractor" })
      ] })
    ] })
  ] }) });
}
var ROOT_NAME = "AlertDialog";
var [createAlertDialogContext, createAlertDialogScope] = createContextScope(ROOT_NAME, [
  createDialogScope
]);
var useDialogScope = createDialogScope();
var AlertDialog$1 = (props) => {
  const { __scopeAlertDialog, ...alertDialogProps } = props;
  const dialogScope = useDialogScope(__scopeAlertDialog);
  return /* @__PURE__ */ jsxRuntimeExports.jsx(Root$5, { ...dialogScope, ...alertDialogProps, modal: true });
};
AlertDialog$1.displayName = ROOT_NAME;
var TRIGGER_NAME$1 = "AlertDialogTrigger";
var AlertDialogTrigger = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeAlertDialog, ...triggerProps } = props;
    const dialogScope = useDialogScope(__scopeAlertDialog);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(Trigger$5, { ...dialogScope, ...triggerProps, ref: forwardedRef });
  }
);
AlertDialogTrigger.displayName = TRIGGER_NAME$1;
var PORTAL_NAME$1 = "AlertDialogPortal";
var AlertDialogPortal$1 = (props) => {
  const { __scopeAlertDialog, ...portalProps } = props;
  const dialogScope = useDialogScope(__scopeAlertDialog);
  return /* @__PURE__ */ jsxRuntimeExports.jsx(Portal$3, { ...dialogScope, ...portalProps });
};
AlertDialogPortal$1.displayName = PORTAL_NAME$1;
var OVERLAY_NAME = "AlertDialogOverlay";
var AlertDialogOverlay$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeAlertDialog, ...overlayProps } = props;
    const dialogScope = useDialogScope(__scopeAlertDialog);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(Overlay, { ...dialogScope, ...overlayProps, ref: forwardedRef });
  }
);
AlertDialogOverlay$1.displayName = OVERLAY_NAME;
var CONTENT_NAME$1 = "AlertDialogContent";
var [AlertDialogContentProvider, useAlertDialogContentContext] = createAlertDialogContext(CONTENT_NAME$1);
var Slottable = createSlottable("AlertDialogContent");
var AlertDialogContent$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeAlertDialog, children, ...contentProps } = props;
    const dialogScope = useDialogScope(__scopeAlertDialog);
    const contentRef = reactExports.useRef(null);
    const composedRefs = useComposedRefs(forwardedRef, contentRef);
    const cancelRef = reactExports.useRef(null);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      WarningProvider,
      {
        contentName: CONTENT_NAME$1,
        titleName: TITLE_NAME,
        docsSlug: "alert-dialog",
        children: /* @__PURE__ */ jsxRuntimeExports.jsx(AlertDialogContentProvider, { scope: __scopeAlertDialog, cancelRef, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
          Content$2,
          {
            role: "alertdialog",
            ...dialogScope,
            ...contentProps,
            ref: composedRefs,
            onOpenAutoFocus: composeEventHandlers(contentProps.onOpenAutoFocus, (event) => {
              event.preventDefault();
              cancelRef.current?.focus({ preventScroll: true });
            }),
            onPointerDownOutside: (event) => event.preventDefault(),
            onInteractOutside: (event) => event.preventDefault(),
            children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Slottable, { children }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(DescriptionWarning, { contentRef })
            ]
          }
        ) })
      }
    );
  }
);
AlertDialogContent$1.displayName = CONTENT_NAME$1;
var TITLE_NAME = "AlertDialogTitle";
var AlertDialogTitle$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeAlertDialog, ...titleProps } = props;
    const dialogScope = useDialogScope(__scopeAlertDialog);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(Title$1, { ...dialogScope, ...titleProps, ref: forwardedRef });
  }
);
AlertDialogTitle$1.displayName = TITLE_NAME;
var DESCRIPTION_NAME = "AlertDialogDescription";
var AlertDialogDescription$1 = reactExports.forwardRef((props, forwardedRef) => {
  const { __scopeAlertDialog, ...descriptionProps } = props;
  const dialogScope = useDialogScope(__scopeAlertDialog);
  return /* @__PURE__ */ jsxRuntimeExports.jsx(Description$1, { ...dialogScope, ...descriptionProps, ref: forwardedRef });
});
AlertDialogDescription$1.displayName = DESCRIPTION_NAME;
var ACTION_NAME = "AlertDialogAction";
var AlertDialogAction$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeAlertDialog, ...actionProps } = props;
    const dialogScope = useDialogScope(__scopeAlertDialog);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(Close$1, { ...dialogScope, ...actionProps, ref: forwardedRef });
  }
);
AlertDialogAction$1.displayName = ACTION_NAME;
var CANCEL_NAME = "AlertDialogCancel";
var AlertDialogCancel$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeAlertDialog, ...cancelProps } = props;
    const { cancelRef } = useAlertDialogContentContext(CANCEL_NAME, __scopeAlertDialog);
    const dialogScope = useDialogScope(__scopeAlertDialog);
    const ref = useComposedRefs(forwardedRef, cancelRef);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(Close$1, { ...dialogScope, ...cancelProps, ref });
  }
);
AlertDialogCancel$1.displayName = CANCEL_NAME;
var DescriptionWarning = ({ contentRef }) => {
  const MESSAGE = `\`${CONTENT_NAME$1}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${CONTENT_NAME$1}\` by passing a \`${DESCRIPTION_NAME}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${CONTENT_NAME$1}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;
  reactExports.useEffect(() => {
    const hasDescription = document.getElementById(
      contentRef.current?.getAttribute("aria-describedby")
    );
    if (!hasDescription) console.warn(MESSAGE);
  }, [MESSAGE, contentRef]);
  return null;
};
var Root2$2 = AlertDialog$1;
var Portal2 = AlertDialogPortal$1;
var Overlay2 = AlertDialogOverlay$1;
var Content2$1 = AlertDialogContent$1;
var Action = AlertDialogAction$1;
var Cancel = AlertDialogCancel$1;
var Title2 = AlertDialogTitle$1;
var Description2 = AlertDialogDescription$1;
const AlertDialog = Root2$2;
const AlertDialogPortal = Portal2;
const AlertDialogOverlay = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  Overlay2,
  {
    className: cn(
      "fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className
    ),
    ...props,
    ref
  }
));
AlertDialogOverlay.displayName = Overlay2.displayName;
const AlertDialogContent = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsxs(AlertDialogPortal, { children: [
  /* @__PURE__ */ jsxRuntimeExports.jsx(AlertDialogOverlay, {}),
  /* @__PURE__ */ jsxRuntimeExports.jsx(
    Content2$1,
    {
      ref,
      className: cn(
        "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",
        className
      ),
      ...props
    }
  )
] }));
AlertDialogContent.displayName = Content2$1.displayName;
const AlertDialogHeader = ({ className, ...props }) => /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: cn("flex flex-col space-y-2 text-center sm:text-left", className), ...props });
AlertDialogHeader.displayName = "AlertDialogHeader";
const AlertDialogFooter = ({ className, ...props }) => /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: cn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2", className), ...props });
AlertDialogFooter.displayName = "AlertDialogFooter";
const AlertDialogTitle = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(Title2, { ref, className: cn("text-lg font-semibold", className), ...props }));
AlertDialogTitle.displayName = Title2.displayName;
const AlertDialogDescription = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(Description2, { ref, className: cn("text-sm text-muted-foreground", className), ...props }));
AlertDialogDescription.displayName = Description2.displayName;
const AlertDialogAction = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(Action, { ref, className: cn(buttonVariants(), className), ...props }));
AlertDialogAction.displayName = Action.displayName;
const AlertDialogCancel = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  Cancel,
  {
    ref,
    className: cn(buttonVariants({ variant: "outline" }), "mt-2 sm:mt-0", className),
    ...props
  }
));
AlertDialogCancel.displayName = Cancel.displayName;
function ContractorsList({ contractors, onEdit, onRefresh, onSort, sortBy, sortOrder, loading }) {
  const [deleteContractor, setDeleteContractor] = reactExports.useState(null);
  const [isDeleting, setIsDeleting] = reactExports.useState(false);
  const { toast: toast2 } = useToast();
  const handleDelete = async () => {
    if (!deleteContractor) return;
    setIsDeleting(true);
    try {
      await SuperAdminAPI.deleteContractor(deleteContractor.id);
      toast2({
        title: "Success",
        description: "Contractor deleted successfully"
      });
      onRefresh();
    } catch (error) {
      toast2({
        title: "Error",
        description: error.message || "Failed to delete contractor",
        variant: "destructive"
      });
    } finally {
      setIsDeleting(false);
      setDeleteContractor(null);
    }
  };
  const getStatusBadge = (status) => {
    return status === "active" ? /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { className: "bg-success/10 text-success border-success/20", children: "Active" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "secondary", children: "Inactive" });
  };
  const getSortIcon = (field) => {
    if (sortBy !== field) return /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowUpDown, { className: "h-4 w-4" });
    return sortOrder === "asc" ? /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowUpDown, { className: "h-4 w-4 rotate-180" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowUpDown, { className: "h-4 w-4" });
  };
  if (loading) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "py-12", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Loading contractors..." })
    ] }) });
  }
  if (contractors.length === 0) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "py-12", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(Building, { className: "h-12 w-12 text-muted-foreground mx-auto mb-4" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-medium mb-2", children: "No contractors found" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Get started by adding your first contractor" })
    ] }) });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "hidden lg:block overflow-x-auto", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Table, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(TableHeader, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(TableRow, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          TableHead,
          {
            className: "cursor-pointer hover:bg-muted/50",
            onClick: () => onSort?.("company_name"),
            children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-1", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Company" }),
              getSortIcon("company_name")
            ] })
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          TableHead,
          {
            className: "cursor-pointer hover:bg-muted/50",
            onClick: () => onSort?.("profiles.user_name"),
            children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-1", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Contact Person" }),
              getSortIcon("profiles.user_name")
            ] })
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: "Contact Info" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          TableHead,
          {
            className: "cursor-pointer hover:bg-muted/50",
            onClick: () => onSort?.("status"),
            children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-1", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Status" }),
              getSortIcon("status")
            ] })
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: "Locations" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: "Attendants/Location" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          TableHead,
          {
            className: "cursor-pointer hover:bg-muted/50",
            onClick: () => onSort?.("created_on"),
            children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-1", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Joined" }),
              getSortIcon("created_on")
            ] })
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: "Actions" })
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(TableBody, { children: contractors.map((contractor) => /* @__PURE__ */ jsxRuntimeExports.jsxs(TableRow, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Building, { className: "h-4 w-4 text-muted-foreground" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-medium", children: contractor.company_name || "N/A" })
        ] }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "font-medium", children: contractor.profiles?.user_name || "N/A" }) }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-1", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-1 text-sm", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Mail, { className: "h-3 w-3 text-muted-foreground" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: contractor.profiles?.email || "N/A" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-1 text-sm", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Phone, { className: "h-3 w-3 text-muted-foreground" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: contractor.contact_number || "N/A" })
          ] })
        ] }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: getStatusBadge(contractor.status) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "outline", children: contractor.allowed_locations }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "outline", children: contractor.allowed_attendants_per_location }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-sm text-muted-foreground", children: formatDate(contractor.created_on) }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DropdownMenu, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(DropdownMenuTrigger, { asChild: true, children: /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "ghost", size: "sm", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Ellipsis, { className: "h-4 w-4" }) }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(DropdownMenuContent, { align: "end", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs(DropdownMenuItem, { onClick: () => onEdit(contractor), children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(SquarePen, { className: "h-4 w-4 mr-2" }),
              "Edit"
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(
              DropdownMenuItem,
              {
                onClick: () => setDeleteContractor(contractor),
                className: "text-destructive",
                children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(Trash2, { className: "h-4 w-4 mr-2" }),
                  "Delete"
                ]
              }
            )
          ] })
        ] }) })
      ] }, contractor.id)) })
    ] }) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "lg:hidden space-y-4", children: contractors.map((contractor) => /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { className: "p-4", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start justify-between", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Building, { className: "h-5 w-5 text-muted-foreground" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "font-medium text-sm", children: contractor.company_name || "N/A" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-muted-foreground", children: contractor.profiles?.user_name || "N/A" })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
          getStatusBadge(contractor.status),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(DropdownMenu, { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(DropdownMenuTrigger, { asChild: true, children: /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "ghost", size: "sm", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Ellipsis, { className: "h-4 w-4" }) }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(DropdownMenuContent, { align: "end", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs(DropdownMenuItem, { onClick: () => onEdit(contractor), children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(SquarePen, { className: "h-4 w-4 mr-2" }),
                "Edit"
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs(
                DropdownMenuItem,
                {
                  onClick: () => setDeleteContractor(contractor),
                  className: "text-destructive",
                  children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx(Trash2, { className: "h-4 w-4 mr-2" }),
                    "Delete"
                  ]
                }
              )
            ] })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2 text-xs", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-1", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Mail, { className: "h-3 w-3 text-muted-foreground" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "truncate", children: contractor.profiles?.email || "N/A" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-1", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Phone, { className: "h-3 w-3 text-muted-foreground" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: contractor.contact_number || "N/A" })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between text-xs", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-muted-foreground", children: "Locations:" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "outline", className: "text-xs", children: contractor.allowed_locations })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-muted-foreground", children: "Attendants:" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "outline", className: "text-xs", children: contractor.allowed_attendants_per_location })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-xs text-muted-foreground", children: [
        "Joined: ",
        formatDate(contractor.created_on)
      ] })
    ] }) }, contractor.id)) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(AlertDialog, { open: !!deleteContractor, onOpenChange: () => setDeleteContractor(null), children: /* @__PURE__ */ jsxRuntimeExports.jsxs(AlertDialogContent, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(AlertDialogHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(AlertDialogTitle, { children: "Delete Contractor" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(AlertDialogDescription, { children: [
          'Are you sure you want to delete "',
          deleteContractor?.company_name,
          '"? This action cannot be undone and will also remove all associated locations and attendants.'
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(AlertDialogFooter, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(AlertDialogCancel, { children: "Cancel" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          AlertDialogAction,
          {
            onClick: handleDelete,
            disabled: isDeleting,
            className: "bg-destructive text-destructive-foreground hover:bg-destructive/90",
            children: isDeleting ? "Deleting..." : "Delete"
          }
        )
      ] })
    ] }) })
  ] });
}
function Contractors() {
  const [contractors, setContractors] = reactExports.useState([]);
  const [stats, setStats] = reactExports.useState({
    totalContractors: 0,
    totalLocations: 0,
    totalAttendants: 0,
    totalRevenue: 0
  });
  const [loading, setLoading] = reactExports.useState(true);
  const [showForm, setShowForm] = reactExports.useState(false);
  const [editingContractor, setEditingContractor] = reactExports.useState(null);
  const [pagination, setPagination] = reactExports.useState({
    page: 1,
    pageSize: 10,
    totalPages: 0,
    totalCount: 0
  });
  const [search, setSearch] = reactExports.useState("");
  const [sortBy, setSortBy] = reactExports.useState("created_on");
  const [sortOrder, setSortOrder] = reactExports.useState("desc");
  const { toast: toast2 } = useToast();
  const fetchContractors = async (page = pagination.page, searchTerm = search, sort = sortBy, order = sortOrder) => {
    try {
      setLoading(true);
      console.log("Fetching contractors...");
      const [contractorsResult, statsData] = await Promise.all([
        SuperAdminAPI.getPaginatedContractors({
          page,
          pageSize: pagination.pageSize,
          search: searchTerm,
          sortBy: sort,
          sortOrder: order
        }),
        SuperAdminAPI.getDashboardStats()
      ]);
      console.log("Contractors data received:", contractorsResult);
      setContractors(contractorsResult.data);
      setPagination((prev) => ({
        ...prev,
        page: contractorsResult.page,
        totalPages: contractorsResult.totalPages,
        totalCount: contractorsResult.count
      }));
      setStats({
        totalContractors: statsData.totalContractors,
        totalLocations: statsData.totalLocations,
        totalAttendants: statsData.totalAttendants,
        totalRevenue: statsData.totalRevenue
      });
    } catch (error) {
      console.error("Error fetching contractors:", error);
      toast2({
        title: "Error",
        description: error.message || "Failed to fetch contractors",
        variant: "destructive"
      });
    } finally {
      setLoading(false);
    }
  };
  reactExports.useEffect(() => {
    fetchContractors();
  }, []);
  const handlePageChange = (page) => {
    setPagination((prev) => ({ ...prev, page }));
    fetchContractors(page, search, sortBy, sortOrder);
  };
  const handleSearch = (searchTerm) => {
    setSearch(searchTerm);
    setPagination((prev) => ({ ...prev, page: 1 }));
    fetchContractors(1, searchTerm, sortBy, sortOrder);
  };
  const handleSort = (field) => {
    const newOrder = sortBy === field && sortOrder === "desc" ? "asc" : "desc";
    setSortBy(field);
    setSortOrder(newOrder);
    setPagination((prev) => ({ ...prev, page: 1 }));
    fetchContractors(1, search, field, newOrder);
  };
  const handlePageSizeChange = (newPageSize) => {
    setPagination((prev) => ({ ...prev, pageSize: newPageSize, page: 1 }));
    fetchContractors(1, search, sortBy, sortOrder);
  };
  const handleAddContractor = () => {
    setEditingContractor(null);
    setShowForm(true);
  };
  const handleEditContractor = (contractor) => {
    setEditingContractor(contractor);
    setShowForm(true);
  };
  const handleCloseForm = () => {
    setShowForm(false);
    setEditingContractor(null);
  };
  const handleFormSuccess = () => {
    console.log("Form success - refreshing contractors...");
    fetchContractors();
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4 sm:space-y-6", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-center justify-between gap-4", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-2xl sm:text-3xl font-bold text-foreground", children: "Contractors" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm sm:text-base text-muted-foreground", children: "Manage business partners and their operations" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { onClick: handleAddContractor, className: "w-full sm:w-auto", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Plus, { className: "h-4 w-4 mr-2" }),
        "Add Contractor"
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Total Contractors",
          value: loading ? "..." : stats.totalContractors,
          description: "Active partners",
          icon: Building,
          variant: "info"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Total Locations",
          value: loading ? "..." : stats.totalLocations,
          description: "Managed sites",
          icon: MapPin,
          variant: "success"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Total Attendants",
          value: loading ? "..." : stats.totalAttendants,
          description: "Staff members",
          icon: Users,
          variant: "warning"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Total Revenue",
          value: `${loading ? "..." : stats.totalRevenue.toFixed(2)}`,
          description: "Lifetime earnings",
          icon: Banknote,
          variant: "success"
        }
      )
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col lg:flex-row lg:items-center justify-between gap-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { children: "Contractors List" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-muted-foreground", children: "View and manage all contractors" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row items-stretch sm:items-center gap-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Search, { className: "absolute left-2 top-2.5 h-4 w-4 text-muted-foreground" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                placeholder: "Search contractors...",
                value: search,
                onChange: (e) => handleSearch(e.target.value),
                className: "pl-8 w-full sm:w-64"
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: pagination.pageSize.toString(), onValueChange: (value) => handlePageSizeChange(Number(value)), children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { className: "w-full sm:w-20", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, {}) }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectContent, { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "5", children: "5" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "10", children: "10" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "20", children: "20" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "50", children: "50" })
            ] })
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          ContractorsList,
          {
            contractors,
            onEdit: handleEditContractor,
            onRefresh: fetchContractors,
            onSort: handleSort,
            sortBy,
            sortOrder,
            loading
          }
        ),
        pagination.totalPages > 1 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row items-center justify-between gap-4 px-2 py-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-xs sm:text-sm text-muted-foreground text-center sm:text-left", children: [
            "Showing ",
            (pagination.page - 1) * pagination.pageSize + 1,
            " to ",
            Math.min(pagination.page * pagination.pageSize, pagination.totalCount),
            " of ",
            pagination.totalCount,
            " results"
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(Pagination, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(PaginationContent, { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(PaginationItem, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(
              PaginationPrevious,
              {
                onClick: () => handlePageChange(pagination.page - 1),
                className: pagination.page === 1 ? "pointer-events-none opacity-50" : "cursor-pointer"
              }
            ) }),
            Array.from({ length: Math.min(5, pagination.totalPages) }, (_, i2) => {
              let pageNum;
              if (pagination.totalPages <= 5) {
                pageNum = i2 + 1;
              } else if (pagination.page <= 3) {
                pageNum = i2 + 1;
              } else if (pagination.page >= pagination.totalPages - 2) {
                pageNum = pagination.totalPages - 4 + i2;
              } else {
                pageNum = pagination.page - 2 + i2;
              }
              return /* @__PURE__ */ jsxRuntimeExports.jsx(PaginationItem, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(
                PaginationLink,
                {
                  onClick: () => handlePageChange(pageNum),
                  isActive: pagination.page === pageNum,
                  className: "cursor-pointer",
                  children: pageNum
                }
              ) }, pageNum);
            }),
            pagination.totalPages > 5 && pagination.page < pagination.totalPages - 2 && /* @__PURE__ */ jsxRuntimeExports.jsx(PaginationItem, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(PaginationEllipsis, {}) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(PaginationItem, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(
              PaginationNext,
              {
                onClick: () => handlePageChange(pagination.page + 1),
                className: pagination.page === pagination.totalPages ? "pointer-events-none opacity-50" : "cursor-pointer"
              }
            ) })
          ] }) })
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      ContractorForm,
      {
        isOpen: showForm,
        onClose: handleCloseForm,
        onSuccess: handleFormSuccess,
        contractor: editingContractor,
        isEditing: !!editingContractor
      }
    )
  ] });
}
function Locations() {
  const { profile, user } = useAuth();
  const isSuperAdmin = profile?.role === "super_admin";
  const isContractor = profile?.role === "contractor";
  const [locations, setLocations] = reactExports.useState([]);
  const [allLocations, setAllLocations] = reactExports.useState([]);
  const [loading, setLoading] = reactExports.useState(true);
  const [deletingId, setDeletingId] = reactExports.useState(null);
  const [saving, setSaving] = reactExports.useState(false);
  const [showForm, setShowForm] = reactExports.useState(false);
  const [editing, setEditing] = reactExports.useState(null);
  const [contractors, setContractors] = reactExports.useState([]);
  const [contractorData, setContractorData] = reactExports.useState(null);
  const [form, setForm] = reactExports.useState({
    locations_name: "",
    address: "",
    total_slots: 0,
    contractor_id: "",
    status: "active"
  });
  const [pagination, setPagination] = reactExports.useState({
    page: 1,
    pageSize: 10,
    totalPages: 0,
    totalCount: 0
  });
  const [search, setSearch] = reactExports.useState("");
  const [sortBy, setSortBy] = reactExports.useState("created_on");
  const [sortOrder, setSortOrder] = reactExports.useState("desc");
  const { toast: toast2 } = useToast();
  const stats = reactExports.useMemo(() => {
    const totalLocations = pagination.totalCount;
    const totalSlots = locations.reduce((s2, l) => s2 + (l.total_slots || 0), 0);
    const occupied = locations.reduce((s2, l) => s2 + (l.occupied_slots || 0), 0);
    const rate = totalSlots > 0 ? Math.round(occupied / totalSlots * 100) : 0;
    return { totalLocations, totalSlots, occupied, rate };
  }, [locations, pagination.totalCount]);
  const currentContractor = reactExports.useMemo(() => {
    if (isContractor && user) {
      try {
        const { AuthAPI: AuthAPI2 } = require("@/services/authApi");
        return AuthAPI2.getContractor() || contractorData;
      } catch {
        return contractorData;
      }
    }
    return contractorData;
  }, [isContractor, user, contractorData]);
  const fetchData = async (page = pagination.page, searchTerm = search, sort = sortBy, order = sortOrder) => {
    try {
      setLoading(true);
      if (isSuperAdmin) {
        const params = {
          page,
          pageSize: pagination.pageSize,
          search: searchTerm,
          sortBy: sort,
          sortOrder: order
        };
        const [locsResult, cons] = await Promise.all([
          LocationAPI.getPaginatedLocations(params),
          SuperAdminAPI.getAllContractors()
        ]);
        setLocations(locsResult.data);
        setContractors(cons);
        setPagination((prev) => ({
          ...prev,
          page: locsResult.page,
          totalPages: locsResult.totalPages,
          totalCount: locsResult.count
        }));
      } else if (isContractor && user) {
        const userId = user.id;
        console.log("Fetching locations for contractor user:", userId);
        const { AuthAPI: AuthAPI2 } = await __vitePreload(async () => {
          const { AuthAPI: AuthAPI3 } = await Promise.resolve().then(() => authApi);
          return { AuthAPI: AuthAPI3 };
        }, true ? void 0 : void 0);
        let contractor = AuthAPI2.getContractor();
        if (!contractor) {
          try {
            contractor = await ContractorAPI.getContractorByUserId(userId);
            if (contractor) {
              AuthAPI2.setContractor(contractor);
            }
          } catch (error) {
            console.error("Failed to fetch contractor data:", error);
            contractor = null;
          }
        } else {
          setContractorData(contractor);
        }
        const result = await LocationAPI.getContractorLocations(userId);
        console.log("Contractor locations result:", result);
        console.log("Contractor data:", contractor);
        setAllLocations(result);
        setContractorData(contractor);
        applyLocalFilters(result, page, searchTerm, sort, order);
      } else {
        setLocations([]);
        setPagination((prev) => ({ ...prev, page: 1, totalPages: 0, totalCount: 0 }));
      }
    } catch (e) {
      toast2({ variant: "destructive", title: "Error", description: e?.message || "Failed to load locations" });
    } finally {
      setLoading(false);
    }
  };
  reactExports.useEffect(() => {
    fetchData();
  }, []);
  const applyLocalFilters = (source, page, searchTerm, sort, order) => {
    let filtered = [...source];
    if (searchTerm) {
      const q = searchTerm.toLowerCase();
      filtered = filtered.filter(
        (l) => l.locations_name.toLowerCase().includes(q) || (l.address || "").toLowerCase().includes(q)
      );
    }
    filtered.sort((a, b) => {
      const av = a[sort];
      const bv = b[sort];
      if (av < bv) return order === "asc" ? -1 : 1;
      if (av > bv) return order === "asc" ? 1 : -1;
      return 0;
    });
    const totalCount = filtered.length;
    const totalPages = Math.max(1, Math.ceil(totalCount / pagination.pageSize));
    const start = (page - 1) * pagination.pageSize;
    const end = start + pagination.pageSize;
    setLocations(filtered.slice(start, end));
    setPagination((prev) => ({ ...prev, page, totalPages, totalCount }));
  };
  const handlePageChange = (page) => {
    setPagination((prev) => ({ ...prev, page }));
    if (isSuperAdmin) fetchData(page, search, sortBy, sortOrder);
    else applyLocalFilters(allLocations, page, search, sortBy, sortOrder);
  };
  const handleSearch = (searchTerm) => {
    setSearch(searchTerm);
    setPagination((prev) => ({ ...prev, page: 1 }));
    if (isSuperAdmin) fetchData(1, searchTerm, sortBy, sortOrder);
    else applyLocalFilters(allLocations, 1, searchTerm, sortBy, sortOrder);
  };
  const handleSort = (field) => {
    const newOrder = sortBy === field && sortOrder === "desc" ? "asc" : "desc";
    setSortBy(field);
    setSortOrder(newOrder);
    setPagination((prev) => ({ ...prev, page: 1 }));
    if (isSuperAdmin) fetchData(1, search, field, newOrder);
    else applyLocalFilters(allLocations, 1, search, field, newOrder);
  };
  const handlePageSizeChange = (newPageSize) => {
    setPagination((prev) => ({ ...prev, pageSize: newPageSize, page: 1 }));
    if (isSuperAdmin) fetchData(1, search, sortBy, sortOrder);
    else applyLocalFilters(allLocations, 1, search, sortBy, sortOrder);
  };
  const openCreate = async () => {
    setEditing(null);
    let initialContractorId = "";
    if (isContractor && user) {
      const { AuthAPI: AuthAPI2 } = await __vitePreload(async () => {
        const { AuthAPI: AuthAPI3 } = await Promise.resolve().then(() => authApi);
        return { AuthAPI: AuthAPI3 };
      }, true ? void 0 : void 0);
      const storedContractor = AuthAPI2.getContractor();
      if (storedContractor && storedContractor.id) {
        initialContractorId = storedContractor.id;
        setContractorData(storedContractor);
      } else if (contractorData && contractorData.id) {
        initialContractorId = contractorData.id;
      } else {
        try {
          const contractor = await ContractorAPI.getContractorByUserId(user.id);
          if (contractor && contractor.id) {
            initialContractorId = contractor.id;
            setContractorData(contractor);
          }
        } catch (error) {
          console.error("Failed to fetch contractor data:", error);
        }
      }
    }
    setForm({
      locations_name: "",
      address: "",
      total_slots: 0,
      contractor_id: initialContractorId,
      status: "active"
    });
    if (isSuperAdmin) {
      SuperAdminAPI.getAllContractors().then(setContractors).catch(() => {
      });
    }
    setShowForm(true);
  };
  const openEdit = (loc) => {
    setEditing(loc);
    setForm({
      locations_name: loc.locations_name,
      address: loc.address,
      total_slots: loc.total_slots,
      contractor_id: loc.contractor_id,
      status: loc.status
    });
    setShowForm(true);
  };
  const save = async () => {
    try {
      setSaving(true);
      if (!form.locations_name || !form.address) {
        toast2({ variant: "destructive", title: "Validation", description: "Please fill all required fields" });
        setSaving(false);
        return;
      }
      if (isContractor && user && !form.contractor_id) {
        const { AuthAPI: AuthAPI2 } = await __vitePreload(async () => {
          const { AuthAPI: AuthAPI3 } = await Promise.resolve().then(() => authApi);
          return { AuthAPI: AuthAPI3 };
        }, true ? void 0 : void 0);
        const storedContractor = AuthAPI2.getContractor();
        if (storedContractor && storedContractor.id) {
          setForm({ ...form, contractor_id: storedContractor.id });
        } else if (contractorData && contractorData.id) {
          setForm({ ...form, contractor_id: contractorData.id });
        } else {
          toast2({ variant: "destructive", title: "Error", description: "Contractor information not found. Please refresh the page." });
          setSaving(false);
          return;
        }
      }
      if (!form.contractor_id) {
        toast2({ variant: "destructive", title: "Validation", description: "Contractor is required" });
        setSaving(false);
        return;
      }
      if (isContractor && user && !editing) {
        const { AuthAPI: AuthAPI2 } = await __vitePreload(async () => {
          const { AuthAPI: AuthAPI3 } = await Promise.resolve().then(() => authApi);
          return { AuthAPI: AuthAPI3 };
        }, true ? void 0 : void 0);
        const storedContractor = AuthAPI2.getContractor() || contractorData;
        if (storedContractor) {
          const currentCount = allLocations.length;
          const allowedCount = storedContractor.allowed_locations || 0;
          if (currentCount >= allowedCount) {
            toast2({
              variant: "destructive",
              title: "Limit Reached",
              description: `You have reached the maximum limit of ${allowedCount} locations. Please contact admin to increase your limit.`
            });
            setSaving(false);
            return;
          }
        }
      }
      if (editing) {
        await LocationAPI.updateLocation(editing.id, form);
        toast2({ title: "Updated", description: "Location updated" });
      } else {
        await LocationAPI.createLocation(form);
        toast2({ title: "Created", description: "Location created successfully" });
      }
      setShowForm(false);
      setEditing(null);
      fetchData();
    } catch (e) {
      toast2({ variant: "destructive", title: "Error", description: e?.message || "Failed to save" });
    } finally {
      setSaving(false);
    }
  };
  const remove = async (id) => {
    try {
      setDeletingId(id);
      await LocationAPI.deleteLocation(id);
      toast2({ title: "Deleted", description: "Location deleted" });
      fetchData();
    } catch (e) {
      toast2({ variant: "destructive", title: "Error", description: e?.message || "Failed to delete" });
    } finally {
      setDeletingId(null);
    }
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4 sm:space-y-6", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-center justify-between gap-4", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-2xl sm:text-3xl font-bold text-foreground", children: "Parking Locations" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm sm:text-base text-muted-foreground", children: "Manage parking sites and their configurations" })
      ] }),
      (isSuperAdmin || isContractor) && /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { onClick: openCreate, className: "w-full sm:w-auto", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Plus, { className: "h-4 w-4 mr-2" }),
        "Add Location"
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Total Locations",
          value: stats.totalLocations,
          description: "Active sites",
          icon: MapPin,
          variant: "success"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Total Slots",
          value: stats.totalSlots,
          description: "Available spaces",
          icon: Car,
          variant: "info"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Occupied Slots",
          value: stats.occupied,
          description: "Currently in use",
          icon: Users,
          variant: "warning"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Occupancy Rate",
          value: `${stats.rate}%`,
          description: "Current utilization",
          icon: Banknote,
          variant: stats.rate > 80 ? "danger" : stats.rate > 60 ? "warning" : "success"
        }
      )
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col lg:flex-row lg:items-center justify-between gap-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { children: "Location List" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: isSuperAdmin ? "View and manage all parking locations" : "View your assigned parking locations" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row items-stretch sm:items-center gap-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Search, { className: "absolute left-2 top-2.5 h-4 w-4 text-muted-foreground" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                placeholder: "Search locations...",
                value: search,
                onChange: (e) => handleSearch(e.target.value),
                className: "pl-8 w-full sm:w-64"
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: pagination.pageSize.toString(), onValueChange: (value) => handlePageSizeChange(Number(value)), children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { className: "w-full sm:w-20", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, {}) }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectContent, { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "5", children: "5" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "10", children: "10" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "20", children: "20" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "50", children: "50" })
            ] })
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { children: [
        loading ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-8", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-parkflow-blue mx-auto mb-4" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Loading locations..." })
        ] }) : locations.length === 0 ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-12", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(MapPin, { className: "h-16 w-16 text-muted-foreground mx-auto mb-6" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-xl font-semibold mb-3", children: "No locations found" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground mb-6 max-w-md mx-auto", children: isSuperAdmin ? "Get started by adding your first parking location to manage your parking business." : "Your account has no assigned locations yet. Contact your administrator or create sample data for testing." }),
          (isSuperAdmin || isContractor) && /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { onClick: openCreate, size: "lg", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Plus, { className: "h-5 w-5 mr-2" }),
            "Add First Location"
          ] })
        ] }) : /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "hidden lg:block overflow-x-auto", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Table, { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableHeader, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(TableRow, { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
                Button,
                {
                  variant: "ghost",
                  onClick: () => handleSort("locations_name"),
                  className: "h-auto p-0 font-semibold",
                  children: [
                    "Location",
                    /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowUpDown, { className: "ml-2 h-4 w-4" })
                  ]
                }
              ) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
                Button,
                {
                  variant: "ghost",
                  onClick: () => handleSort("address"),
                  className: "h-auto p-0 font-semibold",
                  children: [
                    "Address",
                    /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowUpDown, { className: "ml-2 h-4 w-4" })
                  ]
                }
              ) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: "Contractor" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
                Button,
                {
                  variant: "ghost",
                  onClick: () => handleSort("total_slots"),
                  className: "h-auto p-0 font-semibold",
                  children: [
                    "Slots",
                    /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowUpDown, { className: "ml-2 h-4 w-4" })
                  ]
                }
              ) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
                Button,
                {
                  variant: "ghost",
                  onClick: () => handleSort("occupied_slots"),
                  className: "h-auto p-0 font-semibold",
                  children: [
                    "Occupied",
                    /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowUpDown, { className: "ml-2 h-4 w-4" })
                  ]
                }
              ) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
                Button,
                {
                  variant: "ghost",
                  onClick: () => handleSort("status"),
                  className: "h-auto p-0 font-semibold",
                  children: [
                    "Status",
                    /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowUpDown, { className: "ml-2 h-4 w-4" })
                  ]
                }
              ) }),
              (isSuperAdmin || isContractor) && /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: "Actions" })
            ] }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableBody, { children: locations.map((loc) => /* @__PURE__ */ jsxRuntimeExports.jsxs(TableRow, { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { className: "font-medium", children: loc.locations_name }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: loc.address }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: loc.contractors?.company_name || "-" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: loc.total_slots }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: loc.occupied_slots || 0 }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: loc.status === "active" ? "default" : "secondary", children: loc.status }) }),
              (isSuperAdmin || isContractor) && /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex gap-2", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "ghost", size: "sm", onClick: () => openEdit(loc), disabled: deletingId !== null, children: /* @__PURE__ */ jsxRuntimeExports.jsx(SquarePen, { className: "h-4 w-4" }) }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Button,
                  {
                    variant: "ghost",
                    size: "sm",
                    onClick: () => remove(loc.id),
                    disabled: deletingId !== null,
                    children: deletingId === loc.id ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "animate-spin rounded-full h-4 w-4 border-b-2 border-current" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Trash2, { className: "h-4 w-4" })
                  }
                )
              ] }) })
            ] }, loc.id)) })
          ] }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "lg:hidden space-y-4", children: locations.map((loc) => /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { className: "p-4", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start justify-between", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(MapPin, { className: "h-5 w-5 text-muted-foreground" }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "font-medium text-sm", children: loc.locations_name }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-muted-foreground", children: loc.address })
                ] })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: loc.status === "active" ? "default" : "secondary", className: "text-xs", children: loc.status }),
                (isSuperAdmin || isContractor) && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex gap-1", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "ghost", size: "sm", onClick: () => openEdit(loc), disabled: deletingId !== null, children: /* @__PURE__ */ jsxRuntimeExports.jsx(SquarePen, { className: "h-4 w-4" }) }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx(
                    Button,
                    {
                      variant: "ghost",
                      size: "sm",
                      onClick: () => remove(loc.id),
                      disabled: deletingId !== null,
                      children: deletingId === loc.id ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "animate-spin rounded-full h-4 w-4 border-b-2 border-current" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Trash2, { className: "h-4 w-4" })
                    }
                  )
                ] })
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-2 gap-4 text-xs", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-muted-foreground", children: "Contractor:" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-medium", children: loc.contractors?.company_name || "-" })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-muted-foreground", children: "Total Slots:" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-medium", children: loc.total_slots })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-muted-foreground", children: "Occupied:" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-medium", children: loc.occupied_slots || 0 })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-muted-foreground", children: "Available:" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-medium", children: (loc.total_slots || 0) - (loc.occupied_slots || 0) })
              ] })
            ] })
          ] }) }, loc.id)) })
        ] }),
        pagination.totalPages > 1 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row items-center justify-between gap-4 px-2 py-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-xs sm:text-sm text-muted-foreground text-center sm:text-left", children: [
            "Showing ",
            (pagination.page - 1) * pagination.pageSize + 1,
            " to ",
            Math.min(pagination.page * pagination.pageSize, pagination.totalCount),
            " of ",
            pagination.totalCount,
            " results"
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(Pagination, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(PaginationContent, { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(PaginationItem, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(
              PaginationPrevious,
              {
                onClick: () => handlePageChange(pagination.page - 1),
                className: pagination.page === 1 ? "pointer-events-none opacity-50" : "cursor-pointer"
              }
            ) }),
            Array.from({ length: Math.min(5, pagination.totalPages) }, (_, i2) => {
              let pageNum;
              if (pagination.totalPages <= 5) {
                pageNum = i2 + 1;
              } else if (pagination.page <= 3) {
                pageNum = i2 + 1;
              } else if (pagination.page >= pagination.totalPages - 2) {
                pageNum = pagination.totalPages - 4 + i2;
              } else {
                pageNum = pagination.page - 2 + i2;
              }
              return /* @__PURE__ */ jsxRuntimeExports.jsx(PaginationItem, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(
                PaginationLink,
                {
                  onClick: () => handlePageChange(pageNum),
                  isActive: pagination.page === pageNum,
                  className: "cursor-pointer",
                  children: pageNum
                }
              ) }, pageNum);
            }),
            pagination.totalPages > 5 && pagination.page < pagination.totalPages - 2 && /* @__PURE__ */ jsxRuntimeExports.jsx(PaginationItem, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(PaginationEllipsis, {}) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(PaginationItem, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(
              PaginationNext,
              {
                onClick: () => handlePageChange(pagination.page + 1),
                className: pagination.page === pagination.totalPages ? "pointer-events-none opacity-50" : "cursor-pointer"
              }
            ) })
          ] }) })
        ] })
      ] })
    ] }),
    (isSuperAdmin || isContractor) && /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: showForm, onOpenChange: setShowForm, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { className: "w-[95vw] sm:w-full max-w-2xl", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(DialogTitle, { className: "text-lg sm:text-xl", children: editing ? "Edit Location" : "Add Location" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogDescription, { className: "text-sm", children: [
          editing ? "Update parking location details" : "Configure parking location details",
          isContractor && currentContractor && !editing && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "block mt-1 text-xs", children: [
            "Locations: ",
            allLocations.length,
            " / ",
            currentContractor.allowed_locations || 0,
            " used",
            allLocations.length >= (currentContractor.allowed_locations || 0) && /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-red-500 ml-2", children: "(Limit reached)" })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "name", children: "Location Name" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(Input, { id: "name", value: form.locations_name || "", onChange: (e) => setForm({ ...form, locations_name: e.target.value }) })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "slots", children: "Total Slots" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(Input, { id: "slots", type: "number", value: form.total_slots ?? 0, onChange: (e) => setForm({ ...form, total_slots: Number(e.target.value) }) })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2 md:col-span-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "address", children: "Address" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(Input, { id: "address", value: form.address || "", onChange: (e) => setForm({ ...form, address: e.target.value }) })
        ] }),
        isSuperAdmin && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { children: "Contractor" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: form.contractor_id || "", onValueChange: (v2) => setForm({ ...form, contractor_id: v2 }), children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { placeholder: "Select contractor" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectContent, { children: contractors.length === 0 ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "px-3 py-2 text-sm text-muted-foreground", children: "No contractors found" }) : contractors.map((c) => /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: c.id, children: c.company_name || c.profiles?.user_name || c.profiles?.email }, c.id)) })
          ] })
        ] }),
        isContractor && currentContractor && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { children: "Contractor" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Input,
            {
              value: currentContractor.company_name || currentContractor.profiles?.user_name || "Your Account",
              disabled: true,
              className: "bg-muted"
            }
          )
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { children: "Status" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: form.status || "active", onValueChange: (v2) => setForm({ ...form, status: v2 }), children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { placeholder: "Select status" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectContent, { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "active", children: "Active" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "inactive", children: "Inactive" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "maintenance", children: "Maintenance" })
            ] })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogFooter, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "outline", onClick: () => setShowForm(false), disabled: saving, children: "Cancel" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { onClick: save, disabled: saving, children: saving ? /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2" }),
          editing ? "Updating..." : "Creating..."
        ] }) : editing ? "Update" : "Create" })
      ] })
    ] }) })
  ] });
}
var RADIO_NAME = "Radio";
var [createRadioContext, createRadioScope] = createContextScope(RADIO_NAME);
var [RadioProvider, useRadioContext] = createRadioContext(RADIO_NAME);
var Radio = reactExports.forwardRef(
  (props, forwardedRef) => {
    const {
      __scopeRadio,
      name: name2,
      checked = false,
      required,
      disabled,
      value = "on",
      onCheck,
      form,
      ...radioProps
    } = props;
    const [button, setButton] = reactExports.useState(null);
    const composedRefs = useComposedRefs(forwardedRef, (node) => setButton(node));
    const hasConsumerStoppedPropagationRef = reactExports.useRef(false);
    const isFormControl = button ? form || !!button.closest("form") : true;
    return /* @__PURE__ */ jsxRuntimeExports.jsxs(RadioProvider, { scope: __scopeRadio, checked, disabled, children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        Primitive.button,
        {
          type: "button",
          role: "radio",
          "aria-checked": checked,
          "data-state": getState$1(checked),
          "data-disabled": disabled ? "" : void 0,
          disabled,
          value,
          ...radioProps,
          ref: composedRefs,
          onClick: composeEventHandlers(props.onClick, (event) => {
            if (!checked) onCheck?.();
            if (isFormControl) {
              hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();
              if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();
            }
          })
        }
      ),
      isFormControl && /* @__PURE__ */ jsxRuntimeExports.jsx(
        RadioBubbleInput,
        {
          control: button,
          bubbles: !hasConsumerStoppedPropagationRef.current,
          name: name2,
          value,
          checked,
          required,
          disabled,
          form,
          style: { transform: "translateX(-100%)" }
        }
      )
    ] });
  }
);
Radio.displayName = RADIO_NAME;
var INDICATOR_NAME = "RadioIndicator";
var RadioIndicator = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeRadio, forceMount, ...indicatorProps } = props;
    const context = useRadioContext(INDICATOR_NAME, __scopeRadio);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(Presence, { present: forceMount || context.checked, children: /* @__PURE__ */ jsxRuntimeExports.jsx(
      Primitive.span,
      {
        "data-state": getState$1(context.checked),
        "data-disabled": context.disabled ? "" : void 0,
        ...indicatorProps,
        ref: forwardedRef
      }
    ) });
  }
);
RadioIndicator.displayName = INDICATOR_NAME;
var BUBBLE_INPUT_NAME = "RadioBubbleInput";
var RadioBubbleInput = reactExports.forwardRef(
  ({
    __scopeRadio,
    control,
    checked,
    bubbles = true,
    ...props
  }, forwardedRef) => {
    const ref = reactExports.useRef(null);
    const composedRefs = useComposedRefs(ref, forwardedRef);
    const prevChecked = usePrevious(checked);
    const controlSize = useSize(control);
    reactExports.useEffect(() => {
      const input = ref.current;
      if (!input) return;
      const inputProto = window.HTMLInputElement.prototype;
      const descriptor = Object.getOwnPropertyDescriptor(
        inputProto,
        "checked"
      );
      const setChecked = descriptor.set;
      if (prevChecked !== checked && setChecked) {
        const event = new Event("click", { bubbles });
        setChecked.call(input, checked);
        input.dispatchEvent(event);
      }
    }, [prevChecked, checked, bubbles]);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      Primitive.input,
      {
        type: "radio",
        "aria-hidden": true,
        defaultChecked: checked,
        ...props,
        tabIndex: -1,
        ref: composedRefs,
        style: {
          ...props.style,
          ...controlSize,
          position: "absolute",
          pointerEvents: "none",
          opacity: 0,
          margin: 0
        }
      }
    );
  }
);
RadioBubbleInput.displayName = BUBBLE_INPUT_NAME;
function getState$1(checked) {
  return checked ? "checked" : "unchecked";
}
var ARROW_KEYS = ["ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight"];
var RADIO_GROUP_NAME = "RadioGroup";
var [createRadioGroupContext, createRadioGroupScope] = createContextScope(RADIO_GROUP_NAME, [
  createRovingFocusGroupScope,
  createRadioScope
]);
var useRovingFocusGroupScope = createRovingFocusGroupScope();
var useRadioScope = createRadioScope();
var [RadioGroupProvider, useRadioGroupContext] = createRadioGroupContext(RADIO_GROUP_NAME);
var RadioGroup$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const {
      __scopeRadioGroup,
      name: name2,
      defaultValue,
      value: valueProp,
      required = false,
      disabled = false,
      orientation,
      dir,
      loop = true,
      onValueChange,
      ...groupProps
    } = props;
    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeRadioGroup);
    const direction = useDirection(dir);
    const [value, setValue] = useControllableState({
      prop: valueProp,
      defaultProp: defaultValue ?? null,
      onChange: onValueChange,
      caller: RADIO_GROUP_NAME
    });
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      RadioGroupProvider,
      {
        scope: __scopeRadioGroup,
        name: name2,
        required,
        disabled,
        value,
        onValueChange: setValue,
        children: /* @__PURE__ */ jsxRuntimeExports.jsx(
          Root$6,
          {
            asChild: true,
            ...rovingFocusGroupScope,
            orientation,
            dir: direction,
            loop,
            children: /* @__PURE__ */ jsxRuntimeExports.jsx(
              Primitive.div,
              {
                role: "radiogroup",
                "aria-required": required,
                "aria-orientation": orientation,
                "data-disabled": disabled ? "" : void 0,
                dir: direction,
                ...groupProps,
                ref: forwardedRef
              }
            )
          }
        )
      }
    );
  }
);
RadioGroup$1.displayName = RADIO_GROUP_NAME;
var ITEM_NAME = "RadioGroupItem";
var RadioGroupItem$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeRadioGroup, disabled, ...itemProps } = props;
    const context = useRadioGroupContext(ITEM_NAME, __scopeRadioGroup);
    const isDisabled = context.disabled || disabled;
    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeRadioGroup);
    const radioScope = useRadioScope(__scopeRadioGroup);
    const ref = reactExports.useRef(null);
    const composedRefs = useComposedRefs(forwardedRef, ref);
    const checked = context.value === itemProps.value;
    const isArrowKeyPressedRef = reactExports.useRef(false);
    reactExports.useEffect(() => {
      const handleKeyDown = (event) => {
        if (ARROW_KEYS.includes(event.key)) {
          isArrowKeyPressedRef.current = true;
        }
      };
      const handleKeyUp = () => isArrowKeyPressedRef.current = false;
      document.addEventListener("keydown", handleKeyDown);
      document.addEventListener("keyup", handleKeyUp);
      return () => {
        document.removeEventListener("keydown", handleKeyDown);
        document.removeEventListener("keyup", handleKeyUp);
      };
    }, []);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      Item$1,
      {
        asChild: true,
        ...rovingFocusGroupScope,
        focusable: !isDisabled,
        active: checked,
        children: /* @__PURE__ */ jsxRuntimeExports.jsx(
          Radio,
          {
            disabled: isDisabled,
            required: context.required,
            checked,
            ...radioScope,
            ...itemProps,
            name: context.name,
            ref: composedRefs,
            onCheck: () => context.onValueChange(itemProps.value),
            onKeyDown: composeEventHandlers((event) => {
              if (event.key === "Enter") event.preventDefault();
            }),
            onFocus: composeEventHandlers(itemProps.onFocus, () => {
              if (isArrowKeyPressedRef.current) ref.current?.click();
            })
          }
        )
      }
    );
  }
);
RadioGroupItem$1.displayName = ITEM_NAME;
var INDICATOR_NAME2 = "RadioGroupIndicator";
var RadioGroupIndicator = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopeRadioGroup, ...indicatorProps } = props;
    const radioScope = useRadioScope(__scopeRadioGroup);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(RadioIndicator, { ...radioScope, ...indicatorProps, ref: forwardedRef });
  }
);
RadioGroupIndicator.displayName = INDICATOR_NAME2;
var Root2$1 = RadioGroup$1;
var Item2 = RadioGroupItem$1;
var Indicator = RadioGroupIndicator;
const RadioGroup = reactExports.forwardRef(({ className, ...props }, ref) => {
  return /* @__PURE__ */ jsxRuntimeExports.jsx(Root2$1, { className: cn("grid gap-2", className), ...props, ref });
});
RadioGroup.displayName = Root2$1.displayName;
const RadioGroupItem = reactExports.forwardRef(({ className, ...props }, ref) => {
  return /* @__PURE__ */ jsxRuntimeExports.jsx(
    Item2,
    {
      ref,
      className: cn(
        "aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
        className
      ),
      ...props,
      children: /* @__PURE__ */ jsxRuntimeExports.jsx(Indicator, { className: "flex items-center justify-center", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Circle, { className: "h-2.5 w-2.5 fill-current text-current" }) })
    }
  );
});
RadioGroupItem.displayName = Item2.displayName;
function CameraCapture({ onCapture, onClose }) {
  const videoRef = reactExports.useRef(null);
  const canvasRef = reactExports.useRef(null);
  const [stream, setStream] = reactExports.useState(null);
  reactExports.useState(false);
  const startCamera = async () => {
    try {
      const mediaStream = await navigator.mediaDevices.getUserMedia({
        video: { facingMode: "environment" }
        // Use back camera on mobile
      });
      setStream(mediaStream);
      if (videoRef.current) {
        videoRef.current.srcObject = mediaStream;
      }
    } catch (error) {
      console.error("Error accessing camera:", error);
      alert("Unable to access camera. Please check permissions.");
    }
  };
  const capturePhoto = () => {
    if (videoRef.current && canvasRef.current) {
      const video = videoRef.current;
      const canvas = canvasRef.current;
      const context = canvas.getContext("2d");
      if (context) {
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        context.drawImage(video, 0, 0);
        const imageData = canvas.toDataURL("image/jpeg");
        onCapture(imageData);
        stopCamera();
      }
    }
  };
  const stopCamera = () => {
    if (stream) {
      stream.getTracks().forEach((track) => track.stop());
      setStream(null);
    }
    onClose();
  };
  React$1.useEffect(() => {
    startCamera();
    return () => {
      if (stream) {
        stream.getTracks().forEach((track) => track.stop());
      }
    };
  }, []);
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-white rounded-lg p-4 max-w-md w-full mx-4", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between items-center mb-4", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-semibold", children: "Capture Plate Number" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "ghost", size: "sm", onClick: stopCamera, children: /* @__PURE__ */ jsxRuntimeExports.jsx(X$1, { className: "h-4 w-4" }) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        "video",
        {
          ref: videoRef,
          autoPlay: true,
          playsInline: true,
          className: "w-full h-64 bg-gray-200 rounded-lg"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        "canvas",
        {
          ref: canvasRef,
          className: "hidden"
        }
      )
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-center mt-4 space-x-2", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { onClick: capturePhoto, disabled: !stream, children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Camera, { className: "h-4 w-4 mr-2" }),
        "Capture"
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "outline", onClick: stopCamera, children: "Cancel" })
    ] })
  ] }) });
}
function calculateParkingFee(checkInTime, checkOutTime, vehicleType, rates) {
  const checkIn = new Date(checkInTime);
  const checkOut = new Date(checkOutTime);
  const durationMs = checkOut.getTime() - checkIn.getTime();
  const totalHours = durationMs / (1e3 * 60 * 60);
  const hours = Math.floor(totalHours);
  const minutes = Math.floor(durationMs % (1e3 * 60 * 60) / (1e3 * 60));
  const seconds = Math.floor(durationMs % (1e3 * 60) / 1e3);
  const formatted = `${hours.toString().padStart(2, "0")}:${minutes.toString().padStart(2, "0")}:${seconds.toString().padStart(2, "0")}`;
  let amount = 0;
  let breakdown = "";
  if (totalHours <= 2) {
    amount = rates.upTo2Hours;
    breakdown = `Up to 2 hours: ${rates.upTo2Hours}`;
  } else if (totalHours <= 6) {
    amount = rates.upTo6Hours;
    breakdown = `Up to 6 hours: ${rates.upTo6Hours}`;
  } else if (totalHours <= 12) {
    amount = rates.upTo12Hours;
    breakdown = `Up to 12 hours: ${rates.upTo12Hours}`;
  } else if (totalHours <= 24) {
    amount = rates.upTo24Hours;
    breakdown = `Up to 24 hours: ${rates.upTo24Hours}`;
  } else {
    const days = Math.floor(totalHours / 24);
    const remainingHours = totalHours % 24;
    amount = days * rates.upTo24Hours + remainingHours * (rates.upTo24Hours / 24);
    breakdown = `${days} day(s)  ${rates.upTo24Hours} + ${remainingHours.toFixed(1)}h  ${(rates.upTo24Hours / 24).toFixed(2)}/h = ${amount.toFixed(2)}`;
  }
  return {
    duration: {
      hours,
      minutes,
      seconds,
      totalHours,
      formatted
    },
    amount: Math.round(amount * 100) / 100,
    // Round to 2 decimal places
    breakdown
  };
}
function CheckoutDialog({
  isOpen,
  onClose,
  onConfirm,
  vehicle,
  contractorRates,
  loading = false
}) {
  const [paymentMethod, setPaymentMethod] = reactExports.useState("cash");
  const [calculation, setCalculation] = reactExports.useState(null);
  reactExports.useEffect(() => {
    if (vehicle && contractorRates) {
      const rates = vehicle.vehicle_type === "2-wheeler" ? contractorRates.rates_2wheeler : contractorRates.rates_4wheeler;
      const calc = calculateParkingFee(
        vehicle.check_in_time,
        (/* @__PURE__ */ new Date()).toISOString(),
        vehicle.vehicle_type,
        rates
      );
      setCalculation(calc);
    }
  }, [vehicle, contractorRates]);
  const handleConfirm = () => {
    if (calculation) {
      onConfirm({
        payment_amount: calculation.amount,
        payment_method: paymentMethod
      });
    }
  };
  if (!vehicle || !calculation) {
    return null;
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: isOpen, onOpenChange: onClose, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { className: "max-w-md", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogHeader, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(DialogTitle, { className: "text-2xl font-bold", children: "Check Out Vehicle" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(DialogDescription, { children: "Review parking details and complete payment" })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { className: "pb-3", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "text-lg flex items-center space-x-2", children: [
          vehicle.vehicle_type === "2-wheeler" ? /* @__PURE__ */ jsxRuntimeExports.jsx(Bike, { className: "h-5 w-5" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Car, { className: "h-5 w-5" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: vehicle.plate_number })
        ] }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { className: "pt-0", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2 text-sm", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-muted-foreground", children: "Type:" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-medium", children: vehicle.vehicle_type })
          ] }),
          vehicle.location && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-muted-foreground", children: "Location:" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-medium", children: vehicle.location.locations_name })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-muted-foreground", children: "Check In:" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-medium", children: formatDateTime$1(vehicle.check_in_time) })
          ] })
        ] }) })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { className: "pb-3", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "text-lg flex items-center space-x-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Clock, { className: "h-5 w-5" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Parking Details" })
        ] }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { className: "pt-0", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between items-center", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-muted-foreground", children: "Duration:" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-mono text-lg font-bold", children: calculation.duration.formatted })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between items-center", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-muted-foreground", children: "Rate:" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm", children: calculation.breakdown })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "border-t pt-3", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between items-center", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-lg font-semibold", children: "Total Amount:" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-2xl font-bold text-green-600", children: [
              "",
              calculation.amount.toFixed(2)
            ] })
          ] }) })
        ] }) })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-base font-semibold mb-3 block", children: "Payment Method" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: paymentMethod, onValueChange: setPaymentMethod, children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, {}) }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectContent, { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "cash", children: "Cash" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "card", children: "Card" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "digital", children: "Digital Payment" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "free", children: "Free" })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-center space-x-3 pt-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "outline", onClick: onClose, disabled: loading, children: "Cancel" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Button,
          {
            onClick: handleConfirm,
            disabled: loading,
            className: "bg-green-600 hover:bg-green-700",
            children: loading ? "Processing..." : "Confirm Checkout"
          }
        )
      ] })
    ] })
  ] }) });
}
function CheckoutSuccessDialog({
  isOpen,
  onClose,
  vehicle,
  paymentAmount,
  paymentMethod,
  duration
}) {
  if (!vehicle) return null;
  return /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: isOpen, onOpenChange: onClose, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { className: "max-w-md", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(DialogHeader, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col items-center text-center", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4", children: /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, { className: "w-8 h-8 text-green-600" }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(DialogTitle, { className: "text-2xl font-bold text-gray-900", children: "Checkout Successful" })
    ] }) }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-gray-600 text-center", children: [
        "Vehicle ",
        /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "font-bold text-gray-900", children: [
          "**",
          vehicle.plate_number,
          "**"
        ] }),
        " has been checked out."
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "border-t border-gray-200" }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-sm text-gray-500 mb-2", children: "Payment Due" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-4xl font-bold text-blue-600", children: [
          "",
          paymentAmount.toFixed(2)
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "pt-4", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
        Button,
        {
          onClick: onClose,
          className: "w-full bg-blue-600 hover:bg-blue-700 text-white py-3",
          children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, { className: "h-5 w-5 mr-2" }),
            "Done"
          ]
        }
      ) })
    ] })
  ] }) });
}
function ConfirmCheckoutDialog({
  isOpen,
  onClose,
  onConfirm,
  vehicle
}) {
  if (!vehicle) return null;
  return /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: isOpen, onOpenChange: onClose, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { className: "max-w-md", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(DialogHeader, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(DialogTitle, { className: "text-xl font-bold text-gray-900", children: "Confirm Vehicle Check-out" }) }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-gray-600", children: [
        "Are you sure you want to check out the vehicle with plate number",
        " ",
        /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "font-bold text-gray-900", children: [
          "**",
          vehicle.plate_number,
          "**"
        ] }),
        "?"
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3 p-3 bg-gray-50 rounded-lg", children: [
        vehicle.vehicle_type === "2-wheeler" ? /* @__PURE__ */ jsxRuntimeExports.jsx(Bike, { className: "h-5 w-5 text-gray-600" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Car, { className: "h-5 w-5 text-gray-600" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "font-medium text-gray-900", children: vehicle.plate_number }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-sm text-gray-600", children: vehicle.vehicle_type === "2-wheeler" ? "2 Wheeler" : "4 Wheeler" })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-end space-x-3 pt-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Button,
          {
            variant: "outline",
            onClick: onClose,
            className: "px-6",
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Button,
          {
            onClick: onConfirm,
            className: "px-6 bg-blue-600 hover:bg-blue-700 text-white",
            children: "Confirm Check-out"
          }
        )
      ] })
    ] })
  ] }) });
}
function ConfirmCheckinDialog({
  isOpen,
  onClose,
  onConfirm,
  vehicle,
  loading = false
}) {
  if (!vehicle) {
    return null;
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: isOpen, onOpenChange: onClose, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { className: "max-w-md", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogHeader, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(DialogTitle, { className: "text-2xl font-bold", children: "Confirm Vehicle Check-in" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(DialogDescription, { children: "Please confirm the vehicle details are correct to avoid errors." })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-4", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3", children: [
        vehicle.vehicle_type === "2-wheeler" ? /* @__PURE__ */ jsxRuntimeExports.jsx(Bike, { className: "h-8 w-8 text-blue-600" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Car, { className: "h-8 w-8 text-blue-600" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-lg font-semibold text-gray-900", children: [
            "Plate Number: ",
            vehicle.plate_number
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-sm font-medium text-gray-700", children: [
            "Vehicle Type: ",
            vehicle.vehicle_type === "2-wheeler" ? "2 Wheeler" : "4 Wheeler"
          ] }),
          vehicle.mobile_number && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-sm text-gray-600", children: [
            "Mobile: ",
            vehicle.mobile_number
          ] }),
          vehicle.location && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-sm text-gray-600", children: [
            "Location: ",
            vehicle.location.locations_name
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-end space-x-3 pt-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "outline", onClick: onClose, disabled: loading, children: "Cancel" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Button,
          {
            onClick: onConfirm,
            className: "bg-blue-600 hover:bg-blue-700",
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2 inline-block" }),
              "Processing..."
            ] }) : "Confirm Check-in"
          }
        )
      ] })
    ] })
  ] }) });
}
var runtime = { exports: {} };
(function(module) {
  var runtime2 = function(exports) {
    var Op = Object.prototype;
    var hasOwn = Op.hasOwnProperty;
    var defineProperty = Object.defineProperty || function(obj, key, desc) {
      obj[key] = desc.value;
    };
    var undefined$1;
    var $Symbol = typeof Symbol === "function" ? Symbol : {};
    var iteratorSymbol = $Symbol.iterator || "@@iterator";
    var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";
    var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";
    function define(obj, key, value) {
      Object.defineProperty(obj, key, {
        value,
        enumerable: true,
        configurable: true,
        writable: true
      });
      return obj[key];
    }
    try {
      define({}, "");
    } catch (err) {
      define = function(obj, key, value) {
        return obj[key] = value;
      };
    }
    function wrap(innerFn, outerFn, self, tryLocsList) {
      var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;
      var generator = Object.create(protoGenerator.prototype);
      var context = new Context(tryLocsList || []);
      defineProperty(generator, "_invoke", { value: makeInvokeMethod(innerFn, self, context) });
      return generator;
    }
    exports.wrap = wrap;
    function tryCatch(fn, obj, arg) {
      try {
        return { type: "normal", arg: fn.call(obj, arg) };
      } catch (err) {
        return { type: "throw", arg: err };
      }
    }
    var GenStateSuspendedStart = "suspendedStart";
    var GenStateSuspendedYield = "suspendedYield";
    var GenStateExecuting = "executing";
    var GenStateCompleted = "completed";
    var ContinueSentinel = {};
    function Generator() {
    }
    function GeneratorFunction() {
    }
    function GeneratorFunctionPrototype() {
    }
    var IteratorPrototype = {};
    define(IteratorPrototype, iteratorSymbol, function() {
      return this;
    });
    var getProto = Object.getPrototypeOf;
    var NativeIteratorPrototype = getProto && getProto(getProto(values([])));
    if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {
      IteratorPrototype = NativeIteratorPrototype;
    }
    var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);
    GeneratorFunction.prototype = GeneratorFunctionPrototype;
    defineProperty(Gp, "constructor", { value: GeneratorFunctionPrototype, configurable: true });
    defineProperty(
      GeneratorFunctionPrototype,
      "constructor",
      { value: GeneratorFunction, configurable: true }
    );
    GeneratorFunction.displayName = define(
      GeneratorFunctionPrototype,
      toStringTagSymbol,
      "GeneratorFunction"
    );
    function defineIteratorMethods(prototype) {
      ["next", "throw", "return"].forEach(function(method) {
        define(prototype, method, function(arg) {
          return this._invoke(method, arg);
        });
      });
    }
    exports.isGeneratorFunction = function(genFun) {
      var ctor = typeof genFun === "function" && genFun.constructor;
      return ctor ? ctor === GeneratorFunction || // For the native GeneratorFunction constructor, the best we can
      // do is to check its .name property.
      (ctor.displayName || ctor.name) === "GeneratorFunction" : false;
    };
    exports.mark = function(genFun) {
      if (Object.setPrototypeOf) {
        Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);
      } else {
        genFun.__proto__ = GeneratorFunctionPrototype;
        define(genFun, toStringTagSymbol, "GeneratorFunction");
      }
      genFun.prototype = Object.create(Gp);
      return genFun;
    };
    exports.awrap = function(arg) {
      return { __await: arg };
    };
    function AsyncIterator(generator, PromiseImpl) {
      function invoke(method, arg, resolve, reject) {
        var record = tryCatch(generator[method], generator, arg);
        if (record.type === "throw") {
          reject(record.arg);
        } else {
          var result = record.arg;
          var value = result.value;
          if (value && typeof value === "object" && hasOwn.call(value, "__await")) {
            return PromiseImpl.resolve(value.__await).then(function(value2) {
              invoke("next", value2, resolve, reject);
            }, function(err) {
              invoke("throw", err, resolve, reject);
            });
          }
          return PromiseImpl.resolve(value).then(function(unwrapped) {
            result.value = unwrapped;
            resolve(result);
          }, function(error) {
            return invoke("throw", error, resolve, reject);
          });
        }
      }
      var previousPromise;
      function enqueue(method, arg) {
        function callInvokeWithMethodAndArg() {
          return new PromiseImpl(function(resolve, reject) {
            invoke(method, arg, resolve, reject);
          });
        }
        return previousPromise = // If enqueue has been called before, then we want to wait until
        // all previous Promises have been resolved before calling invoke,
        // so that results are always delivered in the correct order. If
        // enqueue has not been called before, then it is important to
        // call invoke immediately, without waiting on a callback to fire,
        // so that the async generator function has the opportunity to do
        // any necessary setup in a predictable way. This predictability
        // is why the Promise constructor synchronously invokes its
        // executor callback, and why async functions synchronously
        // execute code before the first await. Since we implement simple
        // async functions in terms of async generators, it is especially
        // important to get this right, even though it requires care.
        previousPromise ? previousPromise.then(
          callInvokeWithMethodAndArg,
          // Avoid propagating failures to Promises returned by later
          // invocations of the iterator.
          callInvokeWithMethodAndArg
        ) : callInvokeWithMethodAndArg();
      }
      defineProperty(this, "_invoke", { value: enqueue });
    }
    defineIteratorMethods(AsyncIterator.prototype);
    define(AsyncIterator.prototype, asyncIteratorSymbol, function() {
      return this;
    });
    exports.AsyncIterator = AsyncIterator;
    exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {
      if (PromiseImpl === void 0) PromiseImpl = Promise;
      var iter = new AsyncIterator(
        wrap(innerFn, outerFn, self, tryLocsList),
        PromiseImpl
      );
      return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function(result) {
        return result.done ? result.value : iter.next();
      });
    };
    function makeInvokeMethod(innerFn, self, context) {
      var state = GenStateSuspendedStart;
      return function invoke(method, arg) {
        if (state === GenStateExecuting) {
          throw new Error("Generator is already running");
        }
        if (state === GenStateCompleted) {
          if (method === "throw") {
            throw arg;
          }
          return doneResult();
        }
        context.method = method;
        context.arg = arg;
        while (true) {
          var delegate = context.delegate;
          if (delegate) {
            var delegateResult = maybeInvokeDelegate(delegate, context);
            if (delegateResult) {
              if (delegateResult === ContinueSentinel) continue;
              return delegateResult;
            }
          }
          if (context.method === "next") {
            context.sent = context._sent = context.arg;
          } else if (context.method === "throw") {
            if (state === GenStateSuspendedStart) {
              state = GenStateCompleted;
              throw context.arg;
            }
            context.dispatchException(context.arg);
          } else if (context.method === "return") {
            context.abrupt("return", context.arg);
          }
          state = GenStateExecuting;
          var record = tryCatch(innerFn, self, context);
          if (record.type === "normal") {
            state = context.done ? GenStateCompleted : GenStateSuspendedYield;
            if (record.arg === ContinueSentinel) {
              continue;
            }
            return {
              value: record.arg,
              done: context.done
            };
          } else if (record.type === "throw") {
            state = GenStateCompleted;
            context.method = "throw";
            context.arg = record.arg;
          }
        }
      };
    }
    function maybeInvokeDelegate(delegate, context) {
      var methodName = context.method;
      var method = delegate.iterator[methodName];
      if (method === undefined$1) {
        context.delegate = null;
        if (methodName === "throw" && delegate.iterator["return"]) {
          context.method = "return";
          context.arg = undefined$1;
          maybeInvokeDelegate(delegate, context);
          if (context.method === "throw") {
            return ContinueSentinel;
          }
        }
        if (methodName !== "return") {
          context.method = "throw";
          context.arg = new TypeError(
            "The iterator does not provide a '" + methodName + "' method"
          );
        }
        return ContinueSentinel;
      }
      var record = tryCatch(method, delegate.iterator, context.arg);
      if (record.type === "throw") {
        context.method = "throw";
        context.arg = record.arg;
        context.delegate = null;
        return ContinueSentinel;
      }
      var info = record.arg;
      if (!info) {
        context.method = "throw";
        context.arg = new TypeError("iterator result is not an object");
        context.delegate = null;
        return ContinueSentinel;
      }
      if (info.done) {
        context[delegate.resultName] = info.value;
        context.next = delegate.nextLoc;
        if (context.method !== "return") {
          context.method = "next";
          context.arg = undefined$1;
        }
      } else {
        return info;
      }
      context.delegate = null;
      return ContinueSentinel;
    }
    defineIteratorMethods(Gp);
    define(Gp, toStringTagSymbol, "Generator");
    define(Gp, iteratorSymbol, function() {
      return this;
    });
    define(Gp, "toString", function() {
      return "[object Generator]";
    });
    function pushTryEntry(locs) {
      var entry = { tryLoc: locs[0] };
      if (1 in locs) {
        entry.catchLoc = locs[1];
      }
      if (2 in locs) {
        entry.finallyLoc = locs[2];
        entry.afterLoc = locs[3];
      }
      this.tryEntries.push(entry);
    }
    function resetTryEntry(entry) {
      var record = entry.completion || {};
      record.type = "normal";
      delete record.arg;
      entry.completion = record;
    }
    function Context(tryLocsList) {
      this.tryEntries = [{ tryLoc: "root" }];
      tryLocsList.forEach(pushTryEntry, this);
      this.reset(true);
    }
    exports.keys = function(val) {
      var object = Object(val);
      var keys = [];
      for (var key in object) {
        keys.push(key);
      }
      keys.reverse();
      return function next() {
        while (keys.length) {
          var key2 = keys.pop();
          if (key2 in object) {
            next.value = key2;
            next.done = false;
            return next;
          }
        }
        next.done = true;
        return next;
      };
    };
    function values(iterable) {
      if (iterable) {
        var iteratorMethod = iterable[iteratorSymbol];
        if (iteratorMethod) {
          return iteratorMethod.call(iterable);
        }
        if (typeof iterable.next === "function") {
          return iterable;
        }
        if (!isNaN(iterable.length)) {
          var i2 = -1, next = function next2() {
            while (++i2 < iterable.length) {
              if (hasOwn.call(iterable, i2)) {
                next2.value = iterable[i2];
                next2.done = false;
                return next2;
              }
            }
            next2.value = undefined$1;
            next2.done = true;
            return next2;
          };
          return next.next = next;
        }
      }
      return { next: doneResult };
    }
    exports.values = values;
    function doneResult() {
      return { value: undefined$1, done: true };
    }
    Context.prototype = {
      constructor: Context,
      reset: function(skipTempReset) {
        this.prev = 0;
        this.next = 0;
        this.sent = this._sent = undefined$1;
        this.done = false;
        this.delegate = null;
        this.method = "next";
        this.arg = undefined$1;
        this.tryEntries.forEach(resetTryEntry);
        if (!skipTempReset) {
          for (var name2 in this) {
            if (name2.charAt(0) === "t" && hasOwn.call(this, name2) && !isNaN(+name2.slice(1))) {
              this[name2] = undefined$1;
            }
          }
        }
      },
      stop: function() {
        this.done = true;
        var rootEntry = this.tryEntries[0];
        var rootRecord = rootEntry.completion;
        if (rootRecord.type === "throw") {
          throw rootRecord.arg;
        }
        return this.rval;
      },
      dispatchException: function(exception) {
        if (this.done) {
          throw exception;
        }
        var context = this;
        function handle(loc, caught) {
          record.type = "throw";
          record.arg = exception;
          context.next = loc;
          if (caught) {
            context.method = "next";
            context.arg = undefined$1;
          }
          return !!caught;
        }
        for (var i2 = this.tryEntries.length - 1; i2 >= 0; --i2) {
          var entry = this.tryEntries[i2];
          var record = entry.completion;
          if (entry.tryLoc === "root") {
            return handle("end");
          }
          if (entry.tryLoc <= this.prev) {
            var hasCatch = hasOwn.call(entry, "catchLoc");
            var hasFinally = hasOwn.call(entry, "finallyLoc");
            if (hasCatch && hasFinally) {
              if (this.prev < entry.catchLoc) {
                return handle(entry.catchLoc, true);
              } else if (this.prev < entry.finallyLoc) {
                return handle(entry.finallyLoc);
              }
            } else if (hasCatch) {
              if (this.prev < entry.catchLoc) {
                return handle(entry.catchLoc, true);
              }
            } else if (hasFinally) {
              if (this.prev < entry.finallyLoc) {
                return handle(entry.finallyLoc);
              }
            } else {
              throw new Error("try statement without catch or finally");
            }
          }
        }
      },
      abrupt: function(type2, arg) {
        for (var i2 = this.tryEntries.length - 1; i2 >= 0; --i2) {
          var entry = this.tryEntries[i2];
          if (entry.tryLoc <= this.prev && hasOwn.call(entry, "finallyLoc") && this.prev < entry.finallyLoc) {
            var finallyEntry = entry;
            break;
          }
        }
        if (finallyEntry && (type2 === "break" || type2 === "continue") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {
          finallyEntry = null;
        }
        var record = finallyEntry ? finallyEntry.completion : {};
        record.type = type2;
        record.arg = arg;
        if (finallyEntry) {
          this.method = "next";
          this.next = finallyEntry.finallyLoc;
          return ContinueSentinel;
        }
        return this.complete(record);
      },
      complete: function(record, afterLoc) {
        if (record.type === "throw") {
          throw record.arg;
        }
        if (record.type === "break" || record.type === "continue") {
          this.next = record.arg;
        } else if (record.type === "return") {
          this.rval = this.arg = record.arg;
          this.method = "return";
          this.next = "end";
        } else if (record.type === "normal" && afterLoc) {
          this.next = afterLoc;
        }
        return ContinueSentinel;
      },
      finish: function(finallyLoc) {
        for (var i2 = this.tryEntries.length - 1; i2 >= 0; --i2) {
          var entry = this.tryEntries[i2];
          if (entry.finallyLoc === finallyLoc) {
            this.complete(entry.completion, entry.afterLoc);
            resetTryEntry(entry);
            return ContinueSentinel;
          }
        }
      },
      "catch": function(tryLoc) {
        for (var i2 = this.tryEntries.length - 1; i2 >= 0; --i2) {
          var entry = this.tryEntries[i2];
          if (entry.tryLoc === tryLoc) {
            var record = entry.completion;
            if (record.type === "throw") {
              var thrown = record.arg;
              resetTryEntry(entry);
            }
            return thrown;
          }
        }
        throw new Error("illegal catch attempt");
      },
      delegateYield: function(iterable, resultName, nextLoc) {
        this.delegate = {
          iterator: values(iterable),
          resultName,
          nextLoc
        };
        if (this.method === "next") {
          this.arg = undefined$1;
        }
        return ContinueSentinel;
      }
    };
    return exports;
  }(
    // If this script is executing as a CommonJS module, use module.exports
    // as the regeneratorRuntime namespace. Otherwise create a new empty
    // object. Either way, the resulting object will be used to initialize
    // the regeneratorRuntime variable at the top of this file.
    module.exports
  );
  try {
    regeneratorRuntime = runtime2;
  } catch (accidentalStrictMode) {
    if (typeof globalThis === "object") {
      globalThis.regeneratorRuntime = runtime2;
    } else {
      Function("r", "regeneratorRuntime = r")(runtime2);
    }
  }
})(runtime);
var getId$3 = (prefix, cnt) => `${prefix}-${cnt}-${Math.random().toString(16).slice(3, 8)}`;
const getId$2 = getId$3;
let jobCounter = 0;
var createJob$2 = ({
  id: _id,
  action,
  payload = {}
}) => {
  let id = _id;
  if (typeof id === "undefined") {
    id = getId$2("Job", jobCounter);
    jobCounter += 1;
  }
  return {
    id,
    action,
    payload
  };
};
var log$2 = {};
let logging = false;
log$2.logging = logging;
log$2.setLogging = (_logging) => {
  logging = _logging;
};
log$2.log = (...args) => logging ? console.log.apply(void 0, args) : null;
const createJob$1 = createJob$2;
const { log: log$1 } = log$2;
const getId$1 = getId$3;
let schedulerCounter = 0;
var createScheduler$1 = () => {
  const id = getId$1("Scheduler", schedulerCounter);
  const workers = {};
  const runningWorkers = {};
  let jobQueue = [];
  schedulerCounter += 1;
  const getQueueLen = () => jobQueue.length;
  const getNumWorkers = () => Object.keys(workers).length;
  const dequeue = () => {
    if (jobQueue.length !== 0) {
      const wIds = Object.keys(workers);
      for (let i2 = 0; i2 < wIds.length; i2 += 1) {
        if (typeof runningWorkers[wIds[i2]] === "undefined") {
          jobQueue[0](workers[wIds[i2]]);
          break;
        }
      }
    }
  };
  const queue = (action, payload) => new Promise((resolve, reject) => {
    const job = createJob$1({ action, payload });
    jobQueue.push(async (w) => {
      jobQueue.shift();
      runningWorkers[w.id] = job;
      try {
        resolve(await w[action].apply(void 0, [...payload, job.id]));
      } catch (err) {
        reject(err);
      } finally {
        delete runningWorkers[w.id];
        dequeue();
      }
    });
    log$1(`[${id}]: Add ${job.id} to JobQueue`);
    log$1(`[${id}]: JobQueue length=${jobQueue.length}`);
    dequeue();
  });
  const addWorker = (w) => {
    workers[w.id] = w;
    log$1(`[${id}]: Add ${w.id}`);
    log$1(`[${id}]: Number of workers=${getNumWorkers()}`);
    dequeue();
    return w.id;
  };
  const addJob = async (action, ...payload) => {
    if (getNumWorkers() === 0) {
      throw Error(`[${id}]: You need to have at least one worker before adding jobs`);
    }
    return queue(action, payload);
  };
  const terminate = async () => {
    Object.keys(workers).forEach(async (wid) => {
      await workers[wid].terminate();
    });
    jobQueue = [];
  };
  return {
    addWorker,
    addJob,
    terminate,
    getQueueLen,
    getNumWorkers
  };
};
function commonjsRequire(path) {
  throw new Error('Could not dynamically require "' + path + '". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
}
var getEnvironment = (key) => {
  const env = {};
  if (typeof WorkerGlobalScope !== "undefined") {
    env.type = "webworker";
  } else if (typeof document === "object") {
    env.type = "browser";
  } else if (typeof process === "object" && typeof commonjsRequire === "function") {
    env.type = "node";
  }
  if (typeof key === "undefined") {
    return env;
  }
  return env[key];
};
const isBrowser = getEnvironment("type") === "browser";
const resolveURL = isBrowser ? (s2) => new URL(s2, window.location.href).href : (s2) => s2;
var resolvePaths$1 = (options) => {
  const opts = { ...options };
  ["corePath", "workerPath", "langPath"].forEach((key) => {
    if (options[key]) {
      opts[key] = resolveURL(opts[key]);
    }
  });
  return opts;
};
var OEM$2 = {
  TESSERACT_ONLY: 0,
  LSTM_ONLY: 1,
  TESSERACT_LSTM_COMBINED: 2,
  DEFAULT: 3
};
const name = "tesseract.js";
const version$1 = "6.0.1";
const description = "Pure Javascript Multilingual OCR";
const main = "src/index.js";
const type = "commonjs";
const types = "src/index.d.ts";
const unpkg = "dist/tesseract.min.js";
const jsdelivr = "dist/tesseract.min.js";
const scripts = {
  start: "node scripts/server.js",
  build: "rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs",
  "profile:tesseract": "webpack-bundle-analyzer dist/tesseract-stats.json",
  "profile:worker": "webpack-bundle-analyzer dist/worker-stats.json",
  prepublishOnly: "npm run build",
  wait: "rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",
  test: "npm-run-all -p -r start test:all",
  "test:all": "npm-run-all wait test:browser test:node:all",
  "test:browser": "karma start karma.conf.js",
  "test:node": "nyc mocha --exit --bail --require ./scripts/test-helper.mjs",
  "test:node:all": "npm run test:node -- ./tests/*.test.mjs",
  lint: "eslint src",
  "lint:fix": "eslint --fix src",
  postinstall: "opencollective-postinstall || true"
};
const browser$1 = {
  "./src/worker/node/index.js": "./src/worker/browser/index.js"
};
const author = "";
const contributors = [
  "jeromewu"
];
const license = "Apache-2.0";
const devDependencies = {
  "@babel/core": "^7.21.4",
  "@babel/eslint-parser": "^7.21.3",
  "@babel/preset-env": "^7.21.4",
  "@rollup/plugin-commonjs": "^24.1.0",
  acorn: "^8.8.2",
  "babel-loader": "^9.1.2",
  buffer: "^6.0.3",
  cors: "^2.8.5",
  eslint: "^7.32.0",
  "eslint-config-airbnb-base": "^14.2.1",
  "eslint-plugin-import": "^2.27.5",
  "expect.js": "^0.3.1",
  express: "^4.18.2",
  mocha: "^10.2.0",
  "npm-run-all": "^4.1.5",
  karma: "^6.4.2",
  "karma-chrome-launcher": "^3.2.0",
  "karma-firefox-launcher": "^2.1.2",
  "karma-mocha": "^2.0.1",
  "karma-webpack": "^5.0.0",
  nyc: "^15.1.0",
  rimraf: "^5.0.0",
  rollup: "^3.20.7",
  "wait-on": "^7.0.1",
  webpack: "^5.79.0",
  "webpack-bundle-analyzer": "^4.8.0",
  "webpack-cli": "^5.0.1",
  "webpack-dev-middleware": "^6.0.2",
  "rollup-plugin-sourcemaps": "^0.6.3"
};
const dependencies = {
  "bmp-js": "^0.1.0",
  "idb-keyval": "^6.2.0",
  "is-url": "^1.2.4",
  "node-fetch": "^2.6.9",
  "opencollective-postinstall": "^2.0.3",
  "regenerator-runtime": "^0.13.3",
  "tesseract.js-core": "^6.0.0",
  "wasm-feature-detect": "^1.2.11",
  zlibjs: "^0.3.1"
};
const overrides = {
  "@rollup/pluginutils": "^5.0.2"
};
const repository = {
  type: "git",
  url: "https://github.com/naptha/tesseract.js.git"
};
const bugs = {
  url: "https://github.com/naptha/tesseract.js/issues"
};
const homepage = "https://github.com/naptha/tesseract.js";
const collective = {
  type: "opencollective",
  url: "https://opencollective.com/tesseractjs"
};
const require$$0 = {
  name,
  version: version$1,
  description,
  main,
  type,
  types,
  unpkg,
  jsdelivr,
  scripts,
  browser: browser$1,
  author,
  contributors,
  license,
  devDependencies,
  dependencies,
  overrides,
  repository,
  bugs,
  homepage,
  collective
};
var defaultOptions$3 = {
  /*
   * Use BlobURL for worker script by default
   * TODO: remove this option
   *
   */
  workerBlobURL: true,
  logger: () => {
  }
};
const version = require$$0.version;
const defaultOptions$2 = defaultOptions$3;
var defaultOptions_1 = {
  ...defaultOptions$2,
  workerPath: `https://cdn.jsdelivr.net/npm/tesseract.js@v${version}/dist/worker.min.js`
};
var spawnWorker$2 = ({ workerPath, workerBlobURL }) => {
  let worker;
  if (Blob && URL && workerBlobURL) {
    const blob = new Blob([`importScripts("${workerPath}");`], {
      type: "application/javascript"
    });
    worker = new Worker(URL.createObjectURL(blob));
  } else {
    worker = new Worker(workerPath);
  }
  return worker;
};
var terminateWorker$2 = (worker) => {
  worker.terminate();
};
var onMessage$2 = (worker, handler) => {
  worker.onmessage = ({ data }) => {
    handler(data);
  };
};
var send$2 = async (worker, packet) => {
  worker.postMessage(packet);
};
const readFromBlobOrFile = (blob) => new Promise((resolve, reject) => {
  const fileReader = new FileReader();
  fileReader.onload = () => {
    resolve(fileReader.result);
  };
  fileReader.onerror = ({ target: { error: { code } } }) => {
    reject(Error(`File could not be read! Code=${code}`));
  };
  fileReader.readAsArrayBuffer(blob);
});
const loadImage$2 = async (image) => {
  let data = image;
  if (typeof image === "undefined") {
    return "undefined";
  }
  if (typeof image === "string") {
    if (/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(image)) {
      data = atob(image.split(",")[1]).split("").map((c) => c.charCodeAt(0));
    } else {
      const resp = await fetch(image);
      data = await resp.arrayBuffer();
    }
  } else if (typeof HTMLElement !== "undefined" && image instanceof HTMLElement) {
    if (image.tagName === "IMG") {
      data = await loadImage$2(image.src);
    }
    if (image.tagName === "VIDEO") {
      data = await loadImage$2(image.poster);
    }
    if (image.tagName === "CANVAS") {
      await new Promise((resolve) => {
        image.toBlob(async (blob) => {
          data = await readFromBlobOrFile(blob);
          resolve();
        });
      });
    }
  } else if (typeof OffscreenCanvas !== "undefined" && image instanceof OffscreenCanvas) {
    const blob = await image.convertToBlob();
    data = await readFromBlobOrFile(blob);
  } else if (image instanceof File || image instanceof Blob) {
    data = await readFromBlobOrFile(image);
  }
  return new Uint8Array(data);
};
var loadImage_1 = loadImage$2;
const defaultOptions$1 = defaultOptions_1;
const spawnWorker$1 = spawnWorker$2;
const terminateWorker$1 = terminateWorker$2;
const onMessage$1 = onMessage$2;
const send$1 = send$2;
const loadImage$1 = loadImage_1;
var browser = {
  defaultOptions: defaultOptions$1,
  spawnWorker: spawnWorker$1,
  terminateWorker: terminateWorker$1,
  onMessage: onMessage$1,
  send: send$1,
  loadImage: loadImage$1
};
const resolvePaths = resolvePaths$1;
const createJob = createJob$2;
const { log } = log$2;
const getId = getId$3;
const OEM$1 = OEM$2;
const {
  defaultOptions,
  spawnWorker,
  terminateWorker,
  onMessage,
  loadImage,
  send
} = browser;
let workerCounter = 0;
var createWorker$2 = async (langs = "eng", oem = OEM$1.LSTM_ONLY, _options = {}, config = {}) => {
  const id = getId("Worker", workerCounter);
  const {
    logger: logger2,
    errorHandler,
    ...options
  } = resolvePaths({
    ...defaultOptions,
    ..._options
  });
  const promises = {};
  const currentLangs = typeof langs === "string" ? langs.split("+") : langs;
  let currentOem = oem;
  let currentConfig = config;
  const lstmOnlyCore = [OEM$1.DEFAULT, OEM$1.LSTM_ONLY].includes(oem) && !options.legacyCore;
  let workerResReject;
  let workerResResolve;
  const workerRes = new Promise((resolve, reject) => {
    workerResResolve = resolve;
    workerResReject = reject;
  });
  const workerError = (event) => {
    workerResReject(event.message);
  };
  let worker = spawnWorker(options);
  worker.onerror = workerError;
  workerCounter += 1;
  const startJob = ({ id: jobId, action, payload }) => new Promise((resolve, reject) => {
    log(`[${id}]: Start ${jobId}, action=${action}`);
    const promiseId = `${action}-${jobId}`;
    promises[promiseId] = { resolve, reject };
    send(worker, {
      workerId: id,
      jobId,
      action,
      payload
    });
  });
  const load = () => console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)");
  const loadInternal = (jobId) => startJob(createJob({
    id: jobId,
    action: "load",
    payload: { options: { lstmOnly: lstmOnlyCore, corePath: options.corePath, logging: options.logging } }
  }));
  const writeText = (path, text, jobId) => startJob(createJob({
    id: jobId,
    action: "FS",
    payload: { method: "writeFile", args: [path, text] }
  }));
  const readText = (path, jobId) => startJob(createJob({
    id: jobId,
    action: "FS",
    payload: { method: "readFile", args: [path, { encoding: "utf8" }] }
  }));
  const removeFile = (path, jobId) => startJob(createJob({
    id: jobId,
    action: "FS",
    payload: { method: "unlink", args: [path] }
  }));
  const FS = (method, args, jobId) => startJob(createJob({
    id: jobId,
    action: "FS",
    payload: { method, args }
  }));
  const loadLanguageInternal = (_langs, jobId) => startJob(createJob({
    id: jobId,
    action: "loadLanguage",
    payload: {
      langs: _langs,
      options: {
        langPath: options.langPath,
        dataPath: options.dataPath,
        cachePath: options.cachePath,
        cacheMethod: options.cacheMethod,
        gzip: options.gzip,
        lstmOnly: [OEM$1.DEFAULT, OEM$1.LSTM_ONLY].includes(currentOem) && !options.legacyLang
      }
    }
  }));
  const initializeInternal = (_langs, _oem, _config, jobId) => startJob(createJob({
    id: jobId,
    action: "initialize",
    payload: { langs: _langs, oem: _oem, config: _config }
  }));
  const reinitialize = (langs2 = "eng", oem2, config2, jobId) => {
    if (lstmOnlyCore && [OEM$1.TESSERACT_ONLY, OEM$1.TESSERACT_LSTM_COMBINED].includes(oem2)) throw Error("Legacy model requested but code missing.");
    const _oem = oem2 || currentOem;
    currentOem = _oem;
    const _config = config2 || currentConfig;
    currentConfig = _config;
    const langsArr = typeof langs2 === "string" ? langs2.split("+") : langs2;
    const _langs = langsArr.filter((x) => !currentLangs.includes(x));
    currentLangs.push(..._langs);
    if (_langs.length > 0) {
      return loadLanguageInternal(_langs, jobId).then(() => initializeInternal(langs2, _oem, _config, jobId));
    }
    return initializeInternal(langs2, _oem, _config, jobId);
  };
  const setParameters = (params = {}, jobId) => startJob(createJob({
    id: jobId,
    action: "setParameters",
    payload: { params }
  }));
  const recognize2 = async (image, opts = {}, output = {
    text: true
  }, jobId) => startJob(createJob({
    id: jobId,
    action: "recognize",
    payload: { image: await loadImage(image), options: opts, output }
  }));
  const detect2 = async (image, jobId) => {
    if (lstmOnlyCore) throw Error("`worker.detect` requires Legacy model, which was not loaded.");
    return startJob(createJob({
      id: jobId,
      action: "detect",
      payload: { image: await loadImage(image) }
    }));
  };
  const terminate = async () => {
    if (worker !== null) {
      terminateWorker(worker);
      worker = null;
    }
    return Promise.resolve();
  };
  onMessage(worker, ({
    workerId,
    jobId,
    status,
    action,
    data
  }) => {
    const promiseId = `${action}-${jobId}`;
    if (status === "resolve") {
      log(`[${workerId}]: Complete ${jobId}`);
      promises[promiseId].resolve({ jobId, data });
      delete promises[promiseId];
    } else if (status === "reject") {
      promises[promiseId].reject(data);
      delete promises[promiseId];
      if (action === "load") workerResReject(data);
      if (errorHandler) {
        errorHandler(data);
      } else {
        throw Error(data);
      }
    } else if (status === "progress") {
      logger2({ ...data, userJobId: jobId });
    }
  });
  const resolveObj = {
    id,
    worker,
    load,
    writeText,
    readText,
    removeFile,
    FS,
    reinitialize,
    setParameters,
    recognize: recognize2,
    detect: detect2,
    terminate
  };
  loadInternal().then(() => loadLanguageInternal(langs)).then(() => initializeInternal(langs, oem, config)).then(() => workerResResolve(resolveObj)).catch(() => {
  });
  return workerRes;
};
const createWorker$1 = createWorker$2;
const recognize = async (image, langs, options) => {
  const worker = await createWorker$1(langs, 1, options);
  return worker.recognize(image).finally(async () => {
    await worker.terminate();
  });
};
const detect = async (image, options) => {
  const worker = await createWorker$1("osd", 0, options);
  return worker.detect(image).finally(async () => {
    await worker.terminate();
  });
};
var Tesseract$2 = {
  recognize,
  detect
};
var languages$1 = {
  AFR: "afr",
  AMH: "amh",
  ARA: "ara",
  ASM: "asm",
  AZE: "aze",
  AZE_CYRL: "aze_cyrl",
  BEL: "bel",
  BEN: "ben",
  BOD: "bod",
  BOS: "bos",
  BUL: "bul",
  CAT: "cat",
  CEB: "ceb",
  CES: "ces",
  CHI_SIM: "chi_sim",
  CHI_TRA: "chi_tra",
  CHR: "chr",
  CYM: "cym",
  DAN: "dan",
  DEU: "deu",
  DZO: "dzo",
  ELL: "ell",
  ENG: "eng",
  ENM: "enm",
  EPO: "epo",
  EST: "est",
  EUS: "eus",
  FAS: "fas",
  FIN: "fin",
  FRA: "fra",
  FRK: "frk",
  FRM: "frm",
  GLE: "gle",
  GLG: "glg",
  GRC: "grc",
  GUJ: "guj",
  HAT: "hat",
  HEB: "heb",
  HIN: "hin",
  HRV: "hrv",
  HUN: "hun",
  IKU: "iku",
  IND: "ind",
  ISL: "isl",
  ITA: "ita",
  ITA_OLD: "ita_old",
  JAV: "jav",
  JPN: "jpn",
  KAN: "kan",
  KAT: "kat",
  KAT_OLD: "kat_old",
  KAZ: "kaz",
  KHM: "khm",
  KIR: "kir",
  KOR: "kor",
  KUR: "kur",
  LAO: "lao",
  LAT: "lat",
  LAV: "lav",
  LIT: "lit",
  MAL: "mal",
  MAR: "mar",
  MKD: "mkd",
  MLT: "mlt",
  MSA: "msa",
  MYA: "mya",
  NEP: "nep",
  NLD: "nld",
  NOR: "nor",
  ORI: "ori",
  PAN: "pan",
  POL: "pol",
  POR: "por",
  PUS: "pus",
  RON: "ron",
  RUS: "rus",
  SAN: "san",
  SIN: "sin",
  SLK: "slk",
  SLV: "slv",
  SPA: "spa",
  SPA_OLD: "spa_old",
  SQI: "sqi",
  SRP: "srp",
  SRP_LATN: "srp_latn",
  SWA: "swa",
  SWE: "swe",
  SYR: "syr",
  TAM: "tam",
  TEL: "tel",
  TGK: "tgk",
  TGL: "tgl",
  THA: "tha",
  TIR: "tir",
  TUR: "tur",
  UIG: "uig",
  UKR: "ukr",
  URD: "urd",
  UZB: "uzb",
  UZB_CYRL: "uzb_cyrl",
  VIE: "vie",
  YID: "yid"
};
var PSM$1 = {
  OSD_ONLY: "0",
  AUTO_OSD: "1",
  AUTO_ONLY: "2",
  AUTO: "3",
  SINGLE_COLUMN: "4",
  SINGLE_BLOCK_VERT_TEXT: "5",
  SINGLE_BLOCK: "6",
  SINGLE_LINE: "7",
  SINGLE_WORD: "8",
  CIRCLE_WORD: "9",
  SINGLE_CHAR: "10",
  SPARSE_TEXT: "11",
  SPARSE_TEXT_OSD: "12",
  RAW_LINE: "13"
};
const createScheduler = createScheduler$1;
const createWorker = createWorker$2;
const Tesseract = Tesseract$2;
const languages = languages$1;
const OEM = OEM$2;
const PSM = PSM$1;
const { setLogging } = log$2;
var src = {
  languages,
  OEM,
  PSM,
  createScheduler,
  createWorker,
  setLogging,
  ...Tesseract
};
const Tesseract$1 = /* @__PURE__ */ getDefaultExportFromCjs(src);
class OCRService {
  static async extractTextFromImage(imageData) {
    try {
      const { data: { text } } = await Tesseract$1.recognize(
        imageData,
        "eng",
        {
          logger: (m2) => console.log(m2)
        }
      );
      return text.trim();
    } catch (error) {
      console.error("OCR Error:", error);
      throw new Error("Failed to extract text from image");
    }
  }
  static extractPlateNumber(text) {
    const cleanText = text.replace(/\s+/g, " ").trim();
    const patterns = [
      // Indian format: AB12CD1234, AB12C1234, AB12CD123
      /[A-Z]{2}\d{2}[A-Z]{1,2}\d{3,4}/g,
      // US format: ABC-1234, ABC1234
      /[A-Z]{3}[-]?\d{4}/g,
      // Generic alphanumeric with 6-8 characters
      /[A-Z0-9]{6,8}/g,
      // Any sequence with letters and numbers
      /[A-Z]+[0-9]+[A-Z0-9]*/g
    ];
    for (const pattern of patterns) {
      const matches = cleanText.match(pattern);
      if (matches && matches.length > 0) {
        return matches[0].replace(/[- ]/g, "").toUpperCase();
      }
    }
    const alphanumericMatch = cleanText.match(/[A-Z0-9]{4,}/);
    if (alphanumericMatch) {
      return alphanumericMatch[0].toUpperCase();
    }
    return cleanText;
  }
  static async processPlateImage(imageData) {
    try {
      const extractedText = await this.extractTextFromImage(imageData);
      const plateNumber = this.extractPlateNumber(extractedText);
      console.log("Extracted text:", extractedText);
      console.log("Plate number:", plateNumber);
      return plateNumber;
    } catch (error) {
      console.error("Plate processing error:", error);
      throw error;
    }
  }
}
function Vehicles() {
  const { profile } = useAuth();
  const { toast: toast2 } = useToast();
  const [vehicles, setVehicles] = reactExports.useState([]);
  const [contractors, setContractors] = reactExports.useState({});
  const [subscriptionBlocked, setSubscriptionBlocked] = reactExports.useState(false);
  const [locations, setLocations] = reactExports.useState([]);
  const [showAddVehicle, setShowAddVehicle] = reactExports.useState(false);
  const [newVehicle, setNewVehicle] = reactExports.useState({
    plate_number: "",
    vehicle_type: "4-wheeler",
    location_id: "",
    contractor_id: "",
    mobile_number: ""
  });
  const [loading, setLoading] = reactExports.useState(true);
  const [showCamera, setShowCamera] = reactExports.useState(false);
  const [processingImage, setProcessingImage] = reactExports.useState(false);
  const [showConfirmDialog, setShowConfirmDialog] = reactExports.useState(false);
  const [showCheckout, setShowCheckout] = reactExports.useState(false);
  const [showConfirmCheckin, setShowConfirmCheckin] = reactExports.useState(false);
  const [selectedVehicle, setSelectedVehicle] = reactExports.useState(null);
  const [contractorRates, setContractorRates] = reactExports.useState(null);
  const [showSuccessDialog, setShowSuccessDialog] = reactExports.useState(false);
  const [checkoutDetails, setCheckoutDetails] = reactExports.useState(null);
  const [currentPage, setCurrentPage] = reactExports.useState(1);
  const [itemsPerPage, setItemsPerPage] = reactExports.useState(10);
  const [searchQuery, setSearchQuery] = reactExports.useState("");
  const isSuperAdmin = profile?.role === "super_admin";
  const isAttendant = profile?.role === "attendant";
  const isContractor = profile?.role === "contractor";
  const calculateDuration = (checkInTime, checkOutTime) => {
    if (!checkOutTime) return "-";
    const checkIn = new Date(checkInTime);
    const checkOut = new Date(checkOutTime);
    const diffMs = checkOut.getTime() - checkIn.getTime();
    const hours = Math.floor(diffMs / (1e3 * 60 * 60));
    const minutes = Math.floor(diffMs % (1e3 * 60 * 60) / (1e3 * 60));
    return `${hours}h ${minutes}m`;
  };
  const formatPayment = (vehicle) => {
    if (vehicle.check_out_time && vehicle.payment_amount != null) {
      let amount;
      if (typeof vehicle.payment_amount === "number") {
        amount = vehicle.payment_amount;
      } else {
        const parsed = parseFloat(String(vehicle.payment_amount));
        amount = isNaN(parsed) ? 0 : parsed;
      }
      if (typeof amount === "number" && !isNaN(amount) && isFinite(amount)) {
        return `${amount.toFixed(2)}`;
      }
    }
    return "-";
  };
  const getStatusBadge = (vehicle) => {
    const status = getVehicleStatus(vehicle);
    if (status === "checked_in") {
      return /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm", children: "Parked" });
    } else {
      return /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "secondary", className: "bg-gray-100 text-gray-800", children: "Checked Out" });
    }
  };
  const getVehicleType = (type2) => {
    return type2 === "2-wheeler" ? "2 Wheeler" : "4 Wheeler";
  };
  const PaginationComponent = ({ vehicleList }) => {
    const totalPages = getTotalPages(vehicleList);
    getPaginatedVehicles(vehicleList);
    const getPageNumbers = () => {
      const pages = [];
      const maxVisiblePages = 5;
      if (totalPages <= maxVisiblePages) {
        for (let i2 = 1; i2 <= totalPages; i2++) {
          pages.push(i2);
        }
      } else {
        if (currentPage <= 3) {
          for (let i2 = 1; i2 <= 4; i2++) {
            pages.push(i2);
          }
          pages.push("...");
          pages.push(totalPages);
        } else if (currentPage >= totalPages - 2) {
          pages.push(1);
          pages.push("...");
          for (let i2 = totalPages - 3; i2 <= totalPages; i2++) {
            pages.push(i2);
          }
        } else {
          pages.push(1);
          pages.push("...");
          for (let i2 = currentPage - 1; i2 <= currentPage + 1; i2++) {
            pages.push(i2);
          }
          pages.push("...");
          pages.push(totalPages);
        }
      }
      return pages;
    };
    return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row items-center justify-between gap-4 mt-4", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row items-center gap-2 sm:gap-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-xs sm:text-sm text-gray-500 text-center sm:text-left", children: [
          "Showing ",
          (currentPage - 1) * itemsPerPage + 1,
          " to ",
          Math.min(currentPage * itemsPerPage, vehicleList.length),
          " of ",
          vehicleList.length,
          " vehicles"
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs sm:text-sm text-gray-500", children: "Show:" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: itemsPerPage.toString(), onValueChange: (value) => handleItemsPerPageChange(parseInt(value)), children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { className: "w-16 sm:w-20 h-8", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, {}) }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectContent, { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "10", children: "10" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "25", children: "25" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "50", children: "50" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "100", children: "100" })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs sm:text-sm text-gray-500", children: "per page" })
        ] })
      ] }),
      totalPages > 1 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-1 sm:space-x-2", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(
          Button,
          {
            variant: "outline",
            size: "sm",
            onClick: () => handlePageChange(currentPage - 1),
            disabled: currentPage === 1,
            className: "text-xs sm:text-sm",
            children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(ChevronLeft, { className: "h-3 w-3 sm:h-4 sm:w-4" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "hidden sm:inline", children: "Previous" })
            ]
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex space-x-1", children: getPageNumbers().map((page, index) => /* @__PURE__ */ jsxRuntimeExports.jsx(
          Button,
          {
            variant: page === currentPage ? "default" : "outline",
            size: "sm",
            onClick: () => typeof page === "number" ? handlePageChange(page) : void 0,
            disabled: page === "...",
            className: "w-6 h-6 sm:w-8 sm:h-8 p-0 text-xs",
            children: page
          },
          index
        )) }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(
          Button,
          {
            variant: "outline",
            size: "sm",
            onClick: () => handlePageChange(currentPage + 1),
            disabled: currentPage === totalPages,
            className: "text-xs sm:text-sm",
            children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "hidden sm:inline", children: "Next" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(ChevronRight, { className: "h-3 w-3 sm:h-4 sm:w-4" })
            ]
          }
        )
      ] })
    ] });
  };
  const renderVehicleTable = (vehicleList) => {
    const paginatedVehicles = getPaginatedVehicles(vehicleList);
    return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "hidden lg:block overflow-hidden rounded-lg border", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "bg-gray-50 px-4 sm:px-6 py-3 border-b", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: `grid gap-2 sm:gap-4 text-xs sm:text-sm font-medium text-gray-700 ${isAttendant ? "grid-cols-8" : "grid-cols-9"}`, style: { gridTemplateColumns: isAttendant ? "1fr 1fr 0.8fr 1.2fr 1.2fr 0.8fr 0.8fr 1fr" : "1fr 1fr 0.8fr 1.2fr 1.2fr 0.8fr 0.8fr 1fr 1fr" }, children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { children: "Plate Number" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { children: "Mobile Number" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { children: "Type" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { children: "Check-in" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { children: "Check-out" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { children: "Duration" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { children: "Payment" }),
          !isAttendant && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { children: "Contractor Name" }),
          !isAttendant && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { children: "Location" }),
          isAttendant && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { children: "Actions" })
        ] }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "divide-y", children: paginatedVehicles.map((vehicle) => /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "px-4 sm:px-6 py-3 sm:py-4 hover:bg-gray-50 transition-colors", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: `grid gap-2 sm:gap-4 items-center text-xs sm:text-sm ${isAttendant ? "grid-cols-8" : "grid-cols-9"}`, style: { gridTemplateColumns: isAttendant ? "1fr 1fr 0.8fr 1.2fr 1.2fr 0.8fr 0.8fr 1fr" : "1fr 1fr 0.8fr 1.2fr 1.2fr 0.8fr 0.8fr 1fr 1fr" }, children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "font-medium text-gray-900", children: vehicle.plate_number }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-gray-600 truncate", children: vehicle.mobile_number || "-" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-gray-600", children: getVehicleType(vehicle.vehicle_type) }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-gray-600 text-xs sm:text-sm whitespace-nowrap", children: formatDateTime$1(vehicle.check_in_time) }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-gray-600 text-xs sm:text-sm whitespace-nowrap", children: vehicle.check_out_time ? formatDateTime$1(vehicle.check_out_time) : "-" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-gray-600", children: calculateDuration(vehicle.check_in_time, vehicle.check_out_time) }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-gray-600", children: formatPayment(vehicle) }),
          !isAttendant && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-gray-600 truncate", children: vehicle.parking_locations?.contractors?.company_name || "Unknown Contractor" }),
          !isAttendant && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-gray-600 truncate", children: vehicle.parking_locations?.locations_name || "Unknown Location" }),
          isAttendant && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center space-x-1 sm:space-x-2", children: !vehicle.check_out_time ? /* @__PURE__ */ jsxRuntimeExports.jsx(
            Button,
            {
              size: "sm",
              onClick: () => handleCheckoutClick(vehicle),
              className: "bg-green-600 hover:bg-green-700 text-white text-xs sm:text-sm px-2 sm:px-3",
              children: "Check Out"
            }
          ) : /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "secondary", className: "bg-blue-100 text-blue-800 border-blue-200 text-xs", children: "Completed" }) })
        ] }) }, vehicle.id)) })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "lg:hidden space-y-4", children: paginatedVehicles.map((vehicle) => /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { className: "p-4", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start justify-between", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Car, { className: "h-5 w-5 text-muted-foreground" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "font-medium text-sm", children: vehicle.plate_number }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-muted-foreground", children: getVehicleType(vehicle.vehicle_type) })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
            getStatusBadge(vehicle),
            isAttendant && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { children: !vehicle.check_out_time ? /* @__PURE__ */ jsxRuntimeExports.jsx(
              Button,
              {
                size: "sm",
                onClick: () => handleCheckoutClick(vehicle),
                className: "bg-green-600 hover:bg-green-700 text-white text-xs",
                children: "Check Out"
              }
            ) : /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "secondary", className: "bg-blue-100 text-blue-800 border-blue-200 text-xs", children: "Completed" }) })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2 text-xs", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-1", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-muted-foreground", children: "Mobile:" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: vehicle.mobile_number || "-" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col space-y-1", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-muted-foreground text-xs", children: "Check-in:" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs break-all", children: formatDateTime$1(vehicle.check_in_time) })
          ] }),
          vehicle.check_out_time && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col space-y-1", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-muted-foreground text-xs", children: "Check-out:" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs break-all", children: formatDateTime$1(vehicle.check_out_time) })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-1", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-muted-foreground", children: "Duration:" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: calculateDuration(vehicle.check_in_time, vehicle.check_out_time) })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-1", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-muted-foreground", children: "Payment:" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: formatPayment(vehicle) })
          ] }),
          !isAttendant && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-1", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-muted-foreground", children: "Contractor:" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "truncate", children: vehicle.parking_locations?.contractors?.company_name || "Unknown" })
          ] }),
          !isAttendant && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-1", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-muted-foreground", children: "Location:" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "truncate", children: vehicle.parking_locations?.locations_name || "Unknown" })
          ] })
        ] })
      ] }) }, vehicle.id)) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(PaginationComponent, { vehicleList })
    ] });
  };
  reactExports.useEffect(() => {
    resetPagination();
  }, [vehicles]);
  reactExports.useEffect(() => {
    resetPagination();
  }, [searchQuery]);
  reactExports.useEffect(() => {
    if (profile?.role === "attendant" && profile?.id) {
      checkAttendantContractorSubscription(profile.id).then((status) => {
        console.log("Subscription status for attendant (Vehicles):", status);
        if (status.isExpired || status.isSuspended) {
          setSubscriptionBlocked(true);
          toast2({
            variant: "destructive",
            title: "Access Blocked",
            description: "Your contractor's subscription has expired. Please contact your contractor to recharge."
          });
        }
      }).catch((error) => {
        console.error("Error checking subscription status (Vehicles):", error);
      });
    }
  }, [profile, toast2]);
  reactExports.useEffect(() => {
    const load = async () => {
      try {
        if (isSuperAdmin) {
          const all = await VehicleAPI.getAllVehicles();
          setVehicles(all);
          const contractorsData = await ContractorAPI.getAllContractors();
          const map = {};
          contractorsData.forEach((c) => {
            map[c.id] = c.company_name || "";
          });
          setContractors(map);
        } else if (isAttendant) {
          const all = await VehicleAPI.getAttendantVehicles();
          setVehicles(all);
          if (profile?.id) {
            try {
              const attendant = await AttendantAPI.getAttendantByUserId(profile.id);
              if (attendant && attendant.location_id) {
                const location = await LocationAPI.getLocationById(attendant.location_id);
                if (location) {
                  setLocations([location]);
                  setNewVehicle((prev) => ({
                    ...prev,
                    location_id: attendant.location_id || "",
                    contractor_id: location.contractor_id
                  }));
                  const contractor = await ContractorAPI.getContractorById(location.contractor_id);
                  if (contractor) {
                    setContractorRates({
                      rates_2wheeler: contractor.rates_2wheeler,
                      rates_4wheeler: contractor.rates_4wheeler
                    });
                  }
                }
              }
            } catch (error) {
              console.error("Error loading attendant location:", error);
            }
          }
        } else if (isContractor) {
          if (profile?.id) {
            try {
              const contractorData = await ContractorAPI.getContractorByUserId(profile.id);
              if (contractorData && contractorData.id) {
                const all = await VehicleAPI.getContractorVehicles(contractorData.id);
                setVehicles(all);
                const locationsData = await ContractorAPI.getContractorLocations(contractorData.id);
                const activeLocations = locationsData.filter(
                  (loc) => loc.is_deleted === false && loc.status === "active"
                );
                setLocations(activeLocations);
              } else {
                setVehicles([]);
                setLocations([]);
              }
            } catch (error) {
              console.error("Error loading contractor data:", error);
              setVehicles([]);
              setLocations([]);
            }
          } else {
            setVehicles([]);
            setLocations([]);
          }
        } else {
          setVehicles([]);
          setLocations([]);
        }
      } catch (error) {
        console.error("Error loading vehicles:", error);
        setVehicles([]);
        setLocations([]);
      } finally {
        setLoading(false);
      }
    };
    load();
  }, [isSuperAdmin, isAttendant, isContractor, profile?.id]);
  reactExports.useMemo(() => {
    if (!isSuperAdmin) return {};
    const byContractor = {};
    vehicles.forEach((v2) => {
      const contractorId = v2.location?.contractor_id || "unknown";
      const locationName = v2.location?.name || "Unknown Location";
      byContractor[contractorId] = byContractor[contractorId] || {};
      byContractor[contractorId][locationName] = byContractor[contractorId][locationName] || [];
      byContractor[contractorId][locationName].push(v2);
    });
    return byContractor;
  }, [vehicles, isSuperAdmin]);
  const stats = reactExports.useMemo(() => {
    const totalVehicles = vehicles.length;
    const currentlyParked = vehicles.filter((v2) => v2.check_out_time === null).length;
    const checkedOut = vehicles.filter((v2) => v2.check_out_time !== null);
    const totalRevenue = vehicles.reduce((sum, v2) => sum + (v2.payment_amount || 0), 0);
    let averageDuration = 0;
    if (checkedOut.length > 0) {
      const totalDuration = checkedOut.reduce((sum, v2) => {
        if (v2.check_in_time && v2.check_out_time) {
          const duration = new Date(v2.check_out_time).getTime() - new Date(v2.check_in_time).getTime();
          return sum + duration;
        }
        return sum;
      }, 0);
      averageDuration = totalDuration / checkedOut.length / (1e3 * 60 * 60);
    }
    return {
      totalVehicles,
      currentlyParked,
      averageDuration: Math.round(averageDuration * 10) / 10,
      totalRevenue: Math.round(totalRevenue * 100) / 100
    };
  }, [vehicles]);
  const getVehicleStatus = (vehicle) => {
    return vehicle.check_out_time === null ? "checked_in" : "checked_out";
  };
  const filterVehicles = (vehicleList) => {
    if (!searchQuery.trim()) return vehicleList;
    const query = searchQuery.toLowerCase();
    return vehicleList.filter(
      (vehicle) => vehicle.plate_number.toLowerCase().includes(query) || vehicle.parking_locations?.locations_name?.toLowerCase().includes(query) || vehicle.mobile_number?.toLowerCase().includes(query) || vehicle.vehicle_type.toLowerCase().includes(query) || getVehicleStatus(vehicle).toLowerCase().includes(query)
    );
  };
  const allVehicles = filterVehicles(vehicles.sort((a, b) => new Date(b.check_in_time).getTime() - new Date(a.check_in_time).getTime()));
  const currentlyParkedVehicles = filterVehicles(vehicles.filter((v2) => v2.check_out_time === null));
  const checkedOutVehicles = filterVehicles(vehicles.filter((v2) => v2.check_out_time !== null));
  const getPaginatedVehicles = (vehicleList) => {
    const startIndex = (currentPage - 1) * itemsPerPage;
    const endIndex = startIndex + itemsPerPage;
    return vehicleList.slice(startIndex, endIndex);
  };
  const getTotalPages = (vehicleList) => {
    return Math.ceil(vehicleList.length / itemsPerPage);
  };
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleItemsPerPageChange = (newItemsPerPage) => {
    setItemsPerPage(newItemsPerPage);
    setCurrentPage(1);
  };
  const resetPagination = () => {
    setCurrentPage(1);
  };
  const handleAddVehicle = async () => {
    if (!newVehicle.plate_number || !newVehicle.vehicle_type) {
      alert("Please fill in all required fields");
      return;
    }
    setShowConfirmCheckin(true);
  };
  const handleConfirmCheckin = async () => {
    try {
      setLoading(true);
      const vehicle = await VehicleAPI.createVehicle(newVehicle);
      setVehicles((prev) => [vehicle, ...prev]);
      setNewVehicle({
        plate_number: "",
        vehicle_type: "4-wheeler",
        location_id: locations[0]?.id || "",
        contractor_id: locations[0]?.contractor_id || "",
        mobile_number: ""
      });
      setShowAddVehicle(false);
      setShowConfirmCheckin(false);
    } catch (error) {
      console.error("Error adding vehicle:", error);
      alert("Error adding vehicle: " + error.message);
    } finally {
      setLoading(false);
    }
  };
  const handleCheckoutClick = (vehicle) => {
    setSelectedVehicle(vehicle);
    setShowConfirmDialog(true);
  };
  const handleConfirmCheckout = () => {
    setShowConfirmDialog(false);
    setShowCheckout(true);
  };
  const handleCheckoutConfirm = async (data) => {
    if (!selectedVehicle) return;
    try {
      setLoading(true);
      const checkoutData = {
        check_out_time: (/* @__PURE__ */ new Date()).toISOString(),
        payment_amount: data.payment_amount,
        payment_method: data.payment_method
      };
      const updatedVehicle = await VehicleAPI.checkoutVehicle(selectedVehicle.id, checkoutData);
      setVehicles((prev) => prev.map((v2) => v2.id === selectedVehicle.id ? updatedVehicle : v2));
      const checkInTime = new Date(selectedVehicle.check_in_time);
      const checkOutTime = /* @__PURE__ */ new Date();
      const durationMs = checkOutTime.getTime() - checkInTime.getTime();
      const hours = Math.floor(durationMs / (1e3 * 60 * 60));
      const minutes = Math.floor(durationMs % (1e3 * 60 * 60) / (1e3 * 60));
      const seconds = Math.floor(durationMs % (1e3 * 60) / 1e3);
      const duration = `${hours}h ${minutes}m ${seconds}s`;
      setCheckoutDetails({
        paymentAmount: data.payment_amount,
        paymentMethod: data.payment_method,
        duration
      });
      setShowCheckout(false);
      setShowSuccessDialog(true);
    } catch (error) {
      console.error("Error checking out vehicle:", error);
      alert("Error checking out vehicle: " + error.message);
    } finally {
      setLoading(false);
    }
  };
  const handleCameraCapture = async (imageData) => {
    try {
      setProcessingImage(true);
      const plateNumber = await OCRService.processPlateImage(imageData);
      setNewVehicle((prev) => ({ ...prev, plate_number: plateNumber }));
      setShowCamera(false);
    } catch (error) {
      console.error("Error processing image:", error);
      alert("Error processing image. Please try again.");
    } finally {
      setProcessingImage(false);
    }
  };
  if (!profile) {
    return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-8", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-medium mb-2", children: "Loading Profile..." }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Please wait while we load your profile." }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "mt-4", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto" }) })
    ] });
  }
  console.log("Vehicles component - Profile loaded:", {
    role: profile.role,
    id: profile.id,
    status: profile.status,
    loading,
    vehiclesCount: vehicles.length,
    isSuperAdmin,
    isAttendant,
    isContractor
  });
  console.log("Vehicles component is rendering with vehicles:", vehicles);
  console.log("allVehicles after filtering:", allVehicles);
  console.log("currentlyParkedVehicles:", currentlyParkedVehicles);
  console.log("checkedOutVehicles:", checkedOutVehicles);
  if (subscriptionBlocked) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-center py-12", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "mx-auto max-w-md", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "rounded-full bg-red-100 p-3 mx-auto w-16 h-16 flex items-center justify-center mb-4", children: /* @__PURE__ */ jsxRuntimeExports.jsx(CircleX, { className: "h-8 w-8 text-red-600" }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-xl font-semibold text-red-600 mb-2", children: "Access Blocked" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground mb-4", children: "Your contractor's subscription has expired. Please contact your contractor to recharge." }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        Button,
        {
          variant: "outline",
          onClick: () => window.location.reload(),
          className: "mt-4",
          children: "Refresh Page"
        }
      )
    ] }) });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4 sm:space-y-6", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-center justify-between gap-4", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-2xl sm:text-3xl font-bold text-foreground", children: "Vehicle Logs" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm sm:text-base text-muted-foreground", children: "View all vehicle activity from your locations with assigned attendants." })
      ] }),
      isAttendant && /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { onClick: () => setShowAddVehicle(true), className: "w-full sm:w-auto", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Plus, { className: "h-4 w-4 mr-2" }),
        "Add Vehicle"
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Total Vehicles",
          value: stats.totalVehicles,
          description: "All time",
          icon: Car,
          variant: "info"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Currently Parked",
          value: stats.currentlyParked,
          description: "Active sessions",
          icon: MapPin,
          variant: "warning"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Average Duration",
          value: `${stats.averageDuration}h`,
          description: "Per session",
          icon: Clock,
          variant: "default"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Total Revenue",
          value: `${stats.totalRevenue}`,
          description: "From vehicles",
          icon: Banknote,
          variant: "success"
        }
      )
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-4", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative flex-1", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Search, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Input,
          {
            placeholder: "Search vehicles by plate number, location, mobile number...",
            value: searchQuery,
            onChange: (e) => setSearchQuery(e.target.value),
            className: "pl-10"
          }
        )
      ] }),
      searchQuery && /* @__PURE__ */ jsxRuntimeExports.jsx(
        Button,
        {
          variant: "outline",
          onClick: () => setSearchQuery(""),
          className: "text-gray-500 w-full sm:w-auto",
          children: "Clear"
        }
      )
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Tabs, { defaultValue: "all", className: "w-full", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(TabsList, { className: "grid w-full grid-cols-1 sm:grid-cols-3", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(TabsTrigger, { value: "all", className: "text-xs sm:text-sm", children: "All Vehicles" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(TabsTrigger, { value: "parked", className: "text-xs sm:text-sm", children: "Currently Parked" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(TabsTrigger, { value: "checked-out", className: "text-xs sm:text-sm", children: "Checked Out" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(TabsContent, { value: "all", className: "mt-6", children: loading ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-center py-8", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-muted-foreground", children: "Loading vehicles..." }) }) : allVehicles.length === 0 ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-8", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-medium mb-2", children: "No vehicles found" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: isContractor ? "Vehicle logs will appear here when attendants check in vehicles at your assigned locations." : "Vehicle logs will appear here when vehicles check in." })
      ] }) : renderVehicleTable(allVehicles) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(TabsContent, { value: "parked", className: "mt-6", children: loading ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-center py-8", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-muted-foreground", children: "Loading vehicles..." }) }) : currentlyParkedVehicles.length === 0 ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-8", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-medium mb-2", children: "No parked vehicles" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Currently parked vehicles will appear here." })
      ] }) : renderVehicleTable(currentlyParkedVehicles) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(TabsContent, { value: "checked-out", className: "mt-6", children: loading ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-center py-8", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-muted-foreground", children: "Loading vehicles..." }) }) : checkedOutVehicles.length === 0 ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-8", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-medium mb-2", children: "No checked out vehicles" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Checked out vehicles will appear here." })
      ] }) : renderVehicleTable(checkedOutVehicles) })
    ] }),
    isAttendant && /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: showAddVehicle, onOpenChange: setShowAddVehicle, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { className: "max-w-md w-[95vw] sm:w-full", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(DialogTitle, { className: "text-xl sm:text-2xl font-bold", children: "Vehicle Check-in" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(DialogDescription, { className: "text-sm", children: "Enter vehicle details to check-in." })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4 sm:space-y-6", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-sm sm:text-base font-semibold mb-2 sm:mb-3 block", children: "Vehicle Type" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(
            RadioGroup,
            {
              value: newVehicle.vehicle_type,
              onValueChange: (value) => setNewVehicle((prev) => ({ ...prev, vehicle_type: value })),
              className: "flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-6",
              children: [
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(RadioGroupItem, { value: "2-wheeler", id: "2-wheeler" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsxs(Label$1, { htmlFor: "2-wheeler", className: "flex items-center space-x-2 cursor-pointer", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx(Bike, { className: "h-5 w-5" }),
                    /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "2-Wheeler" })
                  ] })
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(RadioGroupItem, { value: "4-wheeler", id: "4-wheeler" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsxs(Label$1, { htmlFor: "4-wheeler", className: "flex items-center space-x-2 cursor-pointer", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx(Car, { className: "h-5 w-5" }),
                    /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "4-Wheeler" })
                  ] })
                ] })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-sm sm:text-base font-semibold mb-2 sm:mb-3 block", children: "Plate Number" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                value: newVehicle.plate_number,
                onChange: (e) => {
                  const input = e.target;
                  const cursorPosition = input.selectionStart;
                  const newValue = e.target.value.toUpperCase();
                  setNewVehicle((prev) => ({ ...prev, plate_number: newValue }));
                  setTimeout(() => {
                    input.setSelectionRange(cursorPosition, cursorPosition);
                  }, 0);
                },
                placeholder: "e.g., ABC-1234",
                className: "flex-1"
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Button,
              {
                type: "button",
                variant: "outline",
                size: "icon",
                onClick: () => setShowCamera(true),
                disabled: processingImage,
                className: "w-full sm:w-auto",
                children: /* @__PURE__ */ jsxRuntimeExports.jsx(Camera, { className: "h-4 w-4" })
              }
            )
          ] }),
          processingImage && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs sm:text-sm text-muted-foreground mt-1", children: "Processing image..." })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-sm sm:text-base font-semibold mb-2 sm:mb-3 block", children: "Mobile Number (Optional)" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Input,
            {
              value: newVehicle.mobile_number || "",
              onChange: (e) => {
                const input = e.target;
                const cursorPosition = input.selectionStart;
                const newValue = e.target.value.toUpperCase();
                setNewVehicle((prev) => ({ ...prev, mobile_number: newValue }));
                setTimeout(() => {
                  input.setSelectionRange(cursorPosition, cursorPosition);
                }, 0);
              },
              placeholder: "e.g., +91 9876543210",
              type: "tel"
            }
          )
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-sm sm:text-base font-semibold mb-2 sm:mb-3 block", children: "Location" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Input,
            {
              value: locations[0]?.locations_name || "Loading...",
              disabled: true,
              className: "bg-gray-50"
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-muted-foreground mt-1", children: "This is your assigned location" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-sm sm:text-base font-semibold mb-2 sm:mb-3 block", children: "Live Occupancy" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-full bg-gray-200 rounded-full h-2", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
              "div",
              {
                className: "bg-blue-600 h-2 rounded-full transition-all duration-300",
                style: { width: `${Math.min(stats.currentlyParked / Math.max(stats.totalVehicles, 1) * 100, 100)}%` }
              }
            ) }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-xs sm:text-sm text-muted-foreground text-center", children: [
              stats.currentlyParked,
              "/",
              Math.max(stats.totalVehicles, 100),
              " spots occupied"
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row justify-center space-y-2 sm:space-y-0 sm:space-x-3 pt-3 sm:pt-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "outline", onClick: () => setShowAddVehicle(false), className: "w-full sm:w-auto", children: "Cancel" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Button,
            {
              onClick: handleAddVehicle,
              disabled: loading || !newVehicle.plate_number,
              className: "bg-purple-600 hover:bg-purple-700 w-full sm:w-auto",
              children: loading ? "Adding..." : "Check-in"
            }
          )
        ] })
      ] })
    ] }) }),
    showCamera && /* @__PURE__ */ jsxRuntimeExports.jsx(
      CameraCapture,
      {
        onCapture: handleCameraCapture,
        onClose: () => setShowCamera(false)
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      ConfirmCheckoutDialog,
      {
        isOpen: showConfirmDialog,
        onClose: () => {
          setShowConfirmDialog(false);
          setSelectedVehicle(null);
        },
        onConfirm: handleConfirmCheckout,
        vehicle: selectedVehicle
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      CheckoutDialog,
      {
        isOpen: showCheckout,
        onClose: () => {
          setShowCheckout(false);
          setSelectedVehicle(null);
        },
        onConfirm: handleCheckoutConfirm,
        vehicle: selectedVehicle,
        contractorRates,
        loading
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      CheckoutSuccessDialog,
      {
        isOpen: showSuccessDialog,
        onClose: () => {
          setShowSuccessDialog(false);
          setCheckoutDetails(null);
          setSelectedVehicle(null);
        },
        vehicle: selectedVehicle,
        paymentAmount: checkoutDetails?.paymentAmount || 0,
        paymentMethod: checkoutDetails?.paymentMethod || "",
        duration: checkoutDetails?.duration || ""
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      ConfirmCheckinDialog,
      {
        isOpen: showConfirmCheckin,
        onClose: () => {
          setShowConfirmCheckin(false);
        },
        onConfirm: handleConfirmCheckin,
        vehicle: {
          id: "",
          plate_number: newVehicle.plate_number,
          vehicle_type: newVehicle.vehicle_type,
          mobile_number: newVehicle.mobile_number,
          location: locations.find((loc) => loc.id === newVehicle.location_id)
        },
        loading
      }
    )
  ] });
}
function Reports() {
  const [reports, setReports] = reactExports.useState([]);
  const [loading, setLoading] = reactExports.useState(false);
  const [selectedReport, setSelectedReport] = reactExports.useState("");
  const [showReportDialog, setShowReportDialog] = reactExports.useState(false);
  const [reportData, setReportData] = reactExports.useState(null);
  const [currentPage, setCurrentPage] = reactExports.useState(1);
  const [reportsPerPage] = reactExports.useState(5);
  const [showDeleteAllDialog, setShowDeleteAllDialog] = reactExports.useState(false);
  const [reportToDelete, setReportToDelete] = reactExports.useState(null);
  reactExports.useEffect(() => {
    loadReports();
  }, []);
  const loadReports = () => {
    const savedReports = localStorage.getItem("parkflow_reports");
    if (savedReports) {
      setReports(JSON.parse(savedReports));
    }
  };
  const saveReport = (report) => {
    const updatedReports = [...reports, report];
    setReports(updatedReports);
    localStorage.setItem("parkflow_reports", JSON.stringify(updatedReports));
  };
  const deleteReport = (reportId) => {
    setReportToDelete(reportId);
  };
  const confirmDeleteReport = () => {
    if (reportToDelete) {
      const updatedReports = reports.filter((report) => report.id !== reportToDelete);
      setReports(updatedReports);
      localStorage.setItem("parkflow_reports", JSON.stringify(updatedReports));
      const totalPages2 = Math.ceil(updatedReports.length / reportsPerPage);
      if (currentPage > totalPages2 && totalPages2 > 0) {
        setCurrentPage(totalPages2);
      } else if (totalPages2 === 0) {
        setCurrentPage(1);
      }
      setReportToDelete(null);
    }
  };
  const deleteAllReports = () => {
    setShowDeleteAllDialog(true);
  };
  const confirmDeleteAllReports = () => {
    setReports([]);
    localStorage.removeItem("parkflow_reports");
    setCurrentPage(1);
    setShowDeleteAllDialog(false);
  };
  const totalPages = Math.ceil(reports.length / reportsPerPage);
  const startIndex = (currentPage - 1) * reportsPerPage;
  const endIndex = startIndex + reportsPerPage;
  const currentReports = reports.slice(startIndex, endIndex);
  const goToPage = (page) => {
    setCurrentPage(page);
  };
  const goToPreviousPage = () => {
    if (currentPage > 1) {
      setCurrentPage(currentPage - 1);
    }
  };
  const goToNextPage = () => {
    if (currentPage < totalPages) {
      setCurrentPage(currentPage + 1);
    }
  };
  const generateRevenueReport = async () => {
    console.log("Generating revenue report...");
    setLoading(true);
    try {
      const revenueData = processRevenueData([]);
      console.log("Revenue data generated:", revenueData);
      const report = {
        id: `revenue_${Date.now()}`,
        type: "revenue",
        title: "Revenue Report",
        generatedAt: (/* @__PURE__ */ new Date()).toISOString(),
        period: "All Time",
        data: revenueData
      };
      console.log("Saving report:", report);
      saveReport(report);
      setReportData(revenueData);
      setSelectedReport("revenue");
      setShowReportDialog(true);
      console.log("Report dialog should open now");
    } catch (error) {
      console.error("Error generating revenue report:", error);
    } finally {
      setLoading(false);
    }
  };
  const processRevenueData = (payments) => {
    const now = /* @__PURE__ */ new Date();
    if (payments.length === 0) {
      return {
        totalRevenue: 12500,
        dailyRevenue: Array.from({ length: 30 }, (_, i2) => ({
          date: new Date(now.getTime() - (29 - i2) * 24 * 60 * 60 * 1e3).toISOString().split("T")[0],
          amount: Math.floor(Math.random() * 1e3) + 200
        })),
        monthlyRevenue: Array.from({ length: 12 }, (_, i2) => ({
          month: formatDate(new Date(now.getFullYear(), now.getMonth() - (11 - i2), 1), { format: "medium" }),
          amount: Math.floor(Math.random() * 5e3) + 2e3
        })),
        contractorBreakdown: [
          { name: "City Parking Ltd", revenue: 4500 },
          { name: "Metro Parking", revenue: 3200 },
          { name: "Quick Park", revenue: 2800 },
          { name: "Urban Spaces", revenue: 2e3 }
        ],
        paymentMethodBreakdown: [
          { method: "cash", count: 45, amount: 6500 },
          { method: "card", count: 32, amount: 4200 },
          { method: "digital", count: 18, amount: 1800 }
        ]
      };
    }
    const totalRevenue = payments.reduce((sum, p2) => sum + (p2.amount || 0), 0);
    const dailyRevenue = [];
    for (let i2 = 29; i2 >= 0; i2--) {
      const date = new Date(now.getTime() - i2 * 24 * 60 * 60 * 1e3);
      const dateStr = date.toISOString().split("T")[0];
      const dayAmount = payments.filter((p2) => p2.created_at?.startsWith(dateStr)).reduce((sum, p2) => sum + (p2.amount || 0), 0);
      dailyRevenue.push({ date: dateStr, amount: dayAmount });
    }
    const monthlyRevenue = [];
    for (let i2 = 11; i2 >= 0; i2--) {
      const month = new Date(now.getFullYear(), now.getMonth() - i2, 1);
      const monthStr = formatDate(month, { format: "medium" });
      const monthAmount = payments.filter((p2) => {
        const paymentDate = new Date(p2.created_at);
        return paymentDate.getMonth() === month.getMonth() && paymentDate.getFullYear() === month.getFullYear();
      }).reduce((sum, p2) => sum + (p2.amount || 0), 0);
      monthlyRevenue.push({ month: monthStr, amount: monthAmount });
    }
    const contractorMap = /* @__PURE__ */ new Map();
    payments.forEach((p2) => {
      const name2 = p2.contractors?.company_name || "Unknown";
      contractorMap.set(name2, (contractorMap.get(name2) || 0) + (p2.amount || 0));
    });
    const contractorBreakdown = Array.from(contractorMap.entries()).map(([name2, revenue]) => ({ name: name2, revenue })).sort((a, b) => b.revenue - a.revenue);
    const methodMap = /* @__PURE__ */ new Map();
    payments.forEach((p2) => {
      const method = p2.payment_method || "cash";
      if (!methodMap.has(method)) {
        methodMap.set(method, { count: 0, amount: 0 });
      }
      const current = methodMap.get(method);
      current.count++;
      current.amount += p2.amount || 0;
    });
    const paymentMethodBreakdown = Array.from(methodMap.entries()).map(([method, data]) => ({ method, ...data }));
    return {
      totalRevenue,
      dailyRevenue,
      monthlyRevenue,
      contractorBreakdown,
      paymentMethodBreakdown
    };
  };
  const generateOccupancyReport = async () => {
    console.log("Generating occupancy report...");
    setLoading(true);
    try {
      const occupancyData = processOccupancyData([], []);
      console.log("Occupancy data generated:", occupancyData);
      const report = {
        id: `occupancy_${Date.now()}`,
        type: "occupancy",
        title: "Occupancy Report",
        generatedAt: (/* @__PURE__ */ new Date()).toISOString(),
        period: "Current",
        data: occupancyData
      };
      saveReport(report);
      setReportData(occupancyData);
      setSelectedReport("occupancy");
      setShowReportDialog(true);
      console.log("Occupancy report dialog should open now");
    } catch (error) {
      console.error("Error generating occupancy report:", error);
    } finally {
      setLoading(false);
    }
  };
  const processOccupancyData = (locations, vehicles) => {
    if (locations.length === 0) {
      return {
        totalLocations: 4,
        averageOccupancy: 68,
        locationBreakdown: [
          { name: "Mall Parking", occupancy: 85, capacity: 200 },
          { name: "Office Complex", occupancy: 72, capacity: 150 },
          { name: "Shopping Center", occupancy: 45, capacity: 100 },
          { name: "Airport Terminal", occupancy: 70, capacity: 300 }
        ],
        hourlyTrends: Array.from({ length: 24 }, (_, hour) => ({
          hour,
          occupancy: Math.floor(Math.random() * 100)
        }))
      };
    }
    const locationBreakdown = locations.map((location) => {
      const locationVehicles = vehicles.filter((v2) => v2.location_id === location.id);
      const currentlyOccupied = locationVehicles.filter((v2) => v2.check_in_time && !v2.check_out_time).length;
      const occupancy = location.total_slots > 0 ? currentlyOccupied / location.total_slots * 100 : 0;
      return {
        name: location.locations_name,
        occupancy: Math.round(occupancy),
        capacity: location.total_slots
      };
    });
    const totalLocations = locations.length;
    const averageOccupancy = locationBreakdown.reduce((sum, loc) => sum + loc.occupancy, 0) / totalLocations;
    const hourlyTrends = Array.from({ length: 24 }, (_, hour) => ({
      hour,
      occupancy: Math.floor(Math.random() * 100)
      // Simplified for demo
    }));
    return {
      totalLocations,
      averageOccupancy: Math.round(averageOccupancy),
      locationBreakdown,
      hourlyTrends
    };
  };
  const generateActivityReport = async () => {
    console.log("Generating activity report...");
    setLoading(true);
    try {
      const activityData = processActivityData([], [], []);
      console.log("Activity data generated:", activityData);
      const report = {
        id: `activity_${Date.now()}`,
        type: "activity",
        title: "User Activity Report",
        generatedAt: (/* @__PURE__ */ new Date()).toISOString(),
        period: "All Time",
        data: activityData
      };
      saveReport(report);
      setReportData(activityData);
      setSelectedReport("activity");
      setShowReportDialog(true);
      console.log("Activity report dialog should open now");
    } catch (error) {
      console.error("Error generating activity report:", error);
    } finally {
      setLoading(false);
    }
  };
  const processActivityData = (profiles, contractors, attendants) => {
    const now = /* @__PURE__ */ new Date();
    const activeThreshold = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1e3);
    if (profiles.length === 0) {
      return {
        totalUsers: 5,
        activeUsers: 3,
        userBreakdown: [
          { role: "Super Admin", count: 1, active: 1 },
          { role: "Contractor", count: 2, active: 1 },
          { role: "Attendant", count: 2, active: 1 }
        ],
        recentActivity: [
          { user: "Super Admin", action: "System login", timestamp: new Date(now.getTime() - 2 * 60 * 60 * 1e3).toISOString() },
          { user: "Contractor 1", action: "Dashboard access", timestamp: new Date(now.getTime() - 4 * 60 * 60 * 1e3).toISOString() },
          { user: "Attendant 1", action: "Vehicle check-in", timestamp: new Date(now.getTime() - 6 * 60 * 60 * 1e3).toISOString() }
        ]
      };
    }
    const userBreakdown = [
      {
        role: "Super Admin",
        count: profiles.filter((p2) => p2.role === "super_admin").length,
        active: profiles.filter((p2) => p2.role === "super_admin" && p2.last_login && new Date(p2.last_login) > activeThreshold).length
      },
      {
        role: "Contractor",
        count: profiles.filter((p2) => p2.role === "contractor").length,
        active: profiles.filter((p2) => p2.role === "contractor" && p2.last_login && new Date(p2.last_login) > activeThreshold).length
      },
      {
        role: "Attendant",
        count: profiles.filter((p2) => p2.role === "attendant").length,
        active: profiles.filter((p2) => p2.role === "attendant" && p2.last_login && new Date(p2.last_login) > activeThreshold).length
      }
    ];
    const totalUsers = profiles.length;
    const activeUsers = profiles.filter((p2) => p2.last_login && new Date(p2.last_login) > activeThreshold).length;
    const recentActivity = profiles.filter((p2) => p2.last_login).map((p2) => ({
      user: p2.user_name,
      action: "Last login",
      timestamp: p2.last_login
    })).sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime()).slice(0, 10);
    return {
      totalUsers,
      activeUsers,
      userBreakdown,
      recentActivity
    };
  };
  const exportReport = (report) => {
    const csvContent = generateCSV(report);
    const blob = new Blob([csvContent], { type: "text/csv" });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = `${report.title.toLowerCase().replace(/\s+/g, "-")}-${(/* @__PURE__ */ new Date()).toISOString().split("T")[0]}.csv`;
    a.click();
    window.URL.revokeObjectURL(url);
  };
  const generateCSV = (report) => {
    const headers = ["Report Type", "Generated At", "Period"];
    const rows = [[report.title, formatDateTime(report.generatedAt), report.period]];
    if (report.type === "revenue") {
      headers.push("Total Revenue", "Daily Revenue", "Monthly Revenue");
      rows[0].push(
        `${report.data.totalRevenue}`,
        report.data.dailyRevenue.length + " days",
        report.data.monthlyRevenue.length + " months"
      );
    } else if (report.type === "occupancy") {
      headers.push("Total Locations", "Average Occupancy");
      rows[0].push(
        report.data.totalLocations.toString(),
        report.data.averageOccupancy + "%"
      );
    } else if (report.type === "activity") {
      headers.push("Total Users", "Active Users");
      rows[0].push(
        report.data.totalUsers.toString(),
        report.data.activeUsers.toString()
      );
    }
    return [headers, ...rows].map((row) => row.join(",")).join("\n");
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-3xl font-bold text-foreground", children: "Reports" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Generate and view system analytics and reports" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: selectedReport, onValueChange: setSelectedReport, children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { className: "w-48", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { placeholder: "Select report type" }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectContent, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "revenue", children: "Revenue Report" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "occupancy", children: "Occupancy Report" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "activity", children: "Activity Report" })
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "hover:shadow-lg transition-shadow cursor-pointer", onClick: () => {
        setSelectedReport("revenue");
        generateRevenueReport();
      }, children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(FileText, { className: "h-5 w-5 mr-2" }),
            "Revenue Report"
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Daily, weekly, and monthly revenue analytics" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(ChartColumn, { className: "h-12 w-12 text-blue-500 mx-auto mb-2" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-muted-foreground", children: "Generate revenue report" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { className: "mt-2", disabled: loading, children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(ChartColumn, { className: "h-4 w-4 mr-2" }),
            loading ? "Generating..." : "Generate Report"
          ] })
        ] }) })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "hover:shadow-lg transition-shadow cursor-pointer", onClick: () => {
        setSelectedReport("occupancy");
        generateOccupancyReport();
      }, children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Calendar, { className: "h-5 w-5 mr-2" }),
            "Occupancy Report"
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Parking location utilization statistics" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(TrendingUp, { className: "h-12 w-12 text-green-500 mx-auto mb-2" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-muted-foreground", children: "View occupancy data" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { className: "mt-2", disabled: loading, children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(TrendingUp, { className: "h-4 w-4 mr-2" }),
            loading ? "Generating..." : "Generate Report"
          ] })
        ] }) })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "hover:shadow-lg transition-shadow cursor-pointer", onClick: () => {
        setSelectedReport("activity");
        generateActivityReport();
      }, children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(FileText, { className: "h-5 w-5 mr-2" }),
            "User Activity"
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Staff and contractor activity logs" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(ChartColumn, { className: "h-12 w-12 text-purple-500 mx-auto mb-2" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-muted-foreground", children: "View activity logs" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { className: "mt-2", disabled: loading, children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(ChartColumn, { className: "h-4 w-4 mr-2" }),
            loading ? "Generating..." : "Generate Report"
          ] })
        ] }) })
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: showReportDialog, onOpenChange: setShowReportDialog, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { className: "max-w-4xl max-h-[80vh] overflow-y-auto", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(DialogTitle, { children: "Report Preview" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(DialogDescription, { children: "Preview and export your generated report" })
      ] }),
      reportData ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
        selectedReport === "revenue" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "pt-6", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-2xl font-bold text-green-600", children: formatCurrency(reportData.totalRevenue) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-muted-foreground", children: "Total Revenue" })
            ] }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "pt-6", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-2xl font-bold text-blue-600", children: reportData.dailyRevenue.length }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-muted-foreground", children: "Days Tracked" })
            ] }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "pt-6", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-2xl font-bold text-purple-600", children: reportData.contractorBreakdown.length }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-muted-foreground", children: "Contractors" })
            ] }) })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-semibold mb-2", children: "Top Contractors" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-2", children: reportData.contractorBreakdown.slice(0, 5).map((contractor, index) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between items-center p-2 bg-gray-50 rounded", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: contractor.name }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-medium", children: formatCurrency(contractor.revenue) })
            ] }, index)) })
          ] })
        ] }),
        selectedReport === "occupancy" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "pt-6", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-2xl font-bold text-blue-600", children: reportData.totalLocations }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-muted-foreground", children: "Total Locations" })
            ] }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "pt-6", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-2xl font-bold text-green-600", children: [
                reportData.averageOccupancy,
                "%"
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-muted-foreground", children: "Average Occupancy" })
            ] }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "pt-6", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-2xl font-bold text-purple-600", children: reportData.locationBreakdown.reduce((sum, loc) => sum + loc.capacity, 0) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-muted-foreground", children: "Total Capacity" })
            ] }) })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-semibold mb-2", children: "Location Occupancy" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-2", children: reportData.locationBreakdown.map((location, index) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between items-center p-2 bg-gray-50 rounded", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: location.name }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-sm text-muted-foreground", children: [
                  location.occupancy,
                  "% (",
                  location.capacity,
                  " slots)"
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-16 bg-gray-200 rounded-full h-2", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
                  "div",
                  {
                    className: "bg-blue-500 h-2 rounded-full",
                    style: { width: `${location.occupancy}%` }
                  }
                ) })
              ] })
            ] }, index)) })
          ] })
        ] }),
        selectedReport === "activity" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "pt-6", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-2xl font-bold text-blue-600", children: reportData.totalUsers }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-muted-foreground", children: "Total Users" })
            ] }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "pt-6", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-2xl font-bold text-green-600", children: reportData.activeUsers }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-muted-foreground", children: "Active Users" })
            ] }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "pt-6", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-2xl font-bold text-purple-600", children: [
                reportData.totalUsers > 0 ? Math.round(reportData.activeUsers / reportData.totalUsers * 100) : 0,
                "%"
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-muted-foreground", children: "Activity Rate" })
            ] }) })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-semibold mb-2", children: "User Breakdown" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-2", children: reportData.userBreakdown.map((user, index) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between items-center p-2 bg-gray-50 rounded", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: user.role }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-sm text-muted-foreground", children: [
                  user.active,
                  "/",
                  user.count,
                  " active"
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs(Badge, { variant: "outline", children: [
                  user.count > 0 ? Math.round(user.active / user.count * 100) : 0,
                  "%"
                ] })
              ] })
            ] }, index)) })
          ] })
        ] })
      ] }) : /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-8", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(FileText, { className: "h-12 w-12 text-muted-foreground mx-auto mb-4" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-medium mb-2", children: "Loading Report..." }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Please wait while the report is being generated." })
      ] })
    ] }) }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { children: "Recent Reports" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(CardDescription, { children: [
            "View and download previously generated reports (",
            reports.length,
            ")"
          ] })
        ] }),
        reports.length > 0 && /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { variant: "destructive", size: "sm", onClick: deleteAllReports, children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Trash2, { className: "h-4 w-4 mr-2" }),
          "Delete All"
        ] })
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: reports.length > 0 ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
        currentReports.map((report) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors space-y-3 sm:space-y-0", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(FileText, { className: "h-5 w-5 text-muted-foreground" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "min-w-0 flex-1", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-medium truncate", children: report.title }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-sm text-muted-foreground truncate", children: [
                "Generated ",
                formatDate(report.generatedAt),
                "  ",
                report.period
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs(
              Button,
              {
                variant: "outline",
                size: "sm",
                onClick: () => {
                  setReportData(report.data);
                  setSelectedReport(report.type);
                  setShowReportDialog(true);
                },
                className: "flex items-center justify-center space-x-1 w-full sm:w-auto",
                children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(Eye, { className: "h-4 w-4" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "View" })
                ]
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(
              Button,
              {
                variant: "outline",
                size: "sm",
                onClick: () => exportReport(report),
                className: "flex items-center justify-center space-x-1 w-full sm:w-auto",
                children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(Download, { className: "h-4 w-4" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Export" })
                ]
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Button,
              {
                variant: "destructive",
                size: "sm",
                onClick: () => deleteReport(report.id),
                className: "flex items-center justify-center w-full sm:w-auto",
                children: /* @__PURE__ */ jsxRuntimeExports.jsx(Trash2, { className: "h-4 w-4" })
              }
            )
          ] })
        ] }, report.id)),
        totalPages > 1 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between pt-4 border-t", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-sm text-muted-foreground", children: [
            "Showing ",
            startIndex + 1,
            " to ",
            Math.min(endIndex, reports.length),
            " of ",
            reports.length,
            " reports"
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs(
              Button,
              {
                variant: "outline",
                size: "sm",
                onClick: goToPreviousPage,
                disabled: currentPage === 1,
                children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(ChevronLeft, { className: "h-4 w-4" }),
                  "Previous"
                ]
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center space-x-1", children: Array.from({ length: totalPages }, (_, i2) => i2 + 1).map((page) => /* @__PURE__ */ jsxRuntimeExports.jsx(
              Button,
              {
                variant: currentPage === page ? "default" : "outline",
                size: "sm",
                onClick: () => goToPage(page),
                className: "w-8 h-8 p-0",
                children: page
              },
              page
            )) }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(
              Button,
              {
                variant: "outline",
                size: "sm",
                onClick: goToNextPage,
                disabled: currentPage === totalPages,
                children: [
                  "Next",
                  /* @__PURE__ */ jsxRuntimeExports.jsx(ChevronRight, { className: "h-4 w-4" })
                ]
              }
            )
          ] })
        ] })
      ] }) : /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-8", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(FileText, { className: "h-12 w-12 text-muted-foreground mx-auto mb-4" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-medium mb-2", children: "No reports generated" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground mb-4", children: "Generate your first report to see it here" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { onClick: generateRevenueReport, disabled: loading, children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(FileText, { className: "h-4 w-4 mr-2" }),
          "Generate Report"
        ] })
      ] }) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(AlertDialog, { open: showDeleteAllDialog, onOpenChange: setShowDeleteAllDialog, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(AlertDialogContent, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(AlertDialogHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(AlertDialogTitle, { children: "Delete All Reports" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(AlertDialogDescription, { children: "Are you sure you want to delete all reports? This action cannot be undone." })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(AlertDialogFooter, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(AlertDialogCancel, { children: "Cancel" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(AlertDialogAction, { onClick: confirmDeleteAllReports, className: "bg-red-600 hover:bg-red-700", children: "Delete All" })
      ] })
    ] }) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(AlertDialog, { open: reportToDelete !== null, onOpenChange: () => setReportToDelete(null), children: /* @__PURE__ */ jsxRuntimeExports.jsxs(AlertDialogContent, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(AlertDialogHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(AlertDialogTitle, { children: "Delete Report" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(AlertDialogDescription, { children: "Are you sure you want to delete this report? This action cannot be undone." })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(AlertDialogFooter, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(AlertDialogCancel, { children: "Cancel" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(AlertDialogAction, { onClick: confirmDeleteReport, className: "bg-red-600 hover:bg-red-700", children: "Delete" })
      ] })
    ] }) })
  ] });
}
function Income() {
  const { profile } = useAuth();
  const [loading, setLoading] = reactExports.useState(true);
  const [paymentStats, setPaymentStats] = reactExports.useState(null);
  const [contractorIncomes, setContractorIncomes] = reactExports.useState([]);
  const [attendantIncomes, setAttendantIncomes] = reactExports.useState([]);
  profile?.role === "super_admin";
  const isContractor = profile?.role === "contractor";
  reactExports.useEffect(() => {
    fetchIncomeData();
  }, []);
  const fetchIncomeData = async () => {
    try {
      setLoading(true);
      await fetchOverallStats();
      await fetchContractorIncome();
      await fetchAttendantIncome();
    } catch (error) {
      console.error("Error fetching income data:", error);
    } finally {
      setLoading(false);
    }
  };
  const fetchOverallStats = async () => {
    try {
      let data, error;
      const { PaymentAPI: PaymentAPI2 } = await __vitePreload(async () => {
        const { PaymentAPI: PaymentAPI3 } = await Promise.resolve().then(() => paymentApi);
        return { PaymentAPI: PaymentAPI3 };
      }, true ? void 0 : void 0);
      if (isContractor && profile?.id) {
        const { ContractorAPI: ContractorAPI2 } = await __vitePreload(async () => {
          const { ContractorAPI: ContractorAPI3 } = await Promise.resolve().then(() => contractorApi);
          return { ContractorAPI: ContractorAPI3 };
        }, true ? void 0 : void 0);
        const contractor = await ContractorAPI2.getContractorByUserId(profile.id);
        if (!contractor) {
          setPaymentStats({
            totalRevenue: 0,
            todayRevenue: 0,
            thisWeekRevenue: 0,
            thisMonthRevenue: 0,
            monthlyRevenue: 0,
            averagePayment: 0,
            paymentMethodBreakdown: { cash: 0, card: 0, digital: 0, free: 0 }
          });
          return;
        }
        const stats = await PaymentAPI2.getPaymentStats(contractor.id);
        setPaymentStats({
          totalRevenue: stats.totalRevenue,
          todayRevenue: stats.todayRevenue,
          thisWeekRevenue: stats.thisWeekRevenue,
          thisMonthRevenue: stats.thisMonthRevenue,
          monthlyRevenue: stats.thisMonthRevenue,
          averagePayment: stats.averagePayment,
          paymentMethodBreakdown: stats.paymentMethodBreakdown
        });
        return;
      } else {
        const stats = await PaymentAPI2.getPaymentStats();
        setPaymentStats({
          totalRevenue: stats.totalRevenue,
          todayRevenue: stats.todayRevenue,
          thisWeekRevenue: stats.thisWeekRevenue,
          thisMonthRevenue: stats.thisMonthRevenue,
          monthlyRevenue: stats.thisMonthRevenue,
          averagePayment: stats.averagePayment,
          paymentMethodBreakdown: stats.paymentMethodBreakdown
        });
        return;
      }
      if (error) ;
      console.log("Overall stats data:", data);
      const now = /* @__PURE__ */ new Date();
      const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
      const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1e3);
      const monthStart = new Date(now.getFullYear(), now.getMonth(), 1);
      let totalRevenue = 0;
      let todayRevenue = 0;
      let thisWeekRevenue = 0;
      let thisMonthRevenue = 0;
      data?.forEach((payment) => {
        const amount = payment.amount || 0;
        const createdAt = new Date(payment.created_at);
        totalRevenue += amount;
        if (createdAt >= today) {
          todayRevenue += amount;
        }
        if (createdAt >= weekAgo) {
          thisWeekRevenue += amount;
        }
        if (createdAt >= monthStart) {
          thisMonthRevenue += amount;
        }
      });
      setPaymentStats({
        totalRevenue,
        todayRevenue,
        thisWeekRevenue,
        thisMonthRevenue,
        monthlyRevenue: thisMonthRevenue,
        averagePayment: data?.length ? totalRevenue / data.length : 0,
        paymentMethodBreakdown: {
          cash: 0,
          card: 0,
          digital: 0,
          free: 0
        }
      });
    } catch (error) {
      console.error("Error fetching overall stats:", error);
    }
  };
  const fetchContractorIncome = async () => {
    try {
      const { PaymentAPI: PaymentAPI2 } = await __vitePreload(async () => {
        const { PaymentAPI: PaymentAPI3 } = await Promise.resolve().then(() => paymentApi);
        return { PaymentAPI: PaymentAPI3 };
      }, true ? void 0 : void 0);
      if (isContractor && profile?.id) {
        const { ContractorAPI: ContractorAPI2 } = await __vitePreload(async () => {
          const { ContractorAPI: ContractorAPI3 } = await Promise.resolve().then(() => contractorApi);
          return { ContractorAPI: ContractorAPI3 };
        }, true ? void 0 : void 0);
        const contractor = await ContractorAPI2.getContractorByUserId(profile.id);
        if (!contractor) {
          setContractorIncomes([]);
          return;
        }
        const payments = await PaymentAPI2.getContractorPayments(contractor.id, { pageSize: 1e3 });
        const contractorIncome = {
          contractor_id: contractor.id,
          contractor_name: contractor.company_name || "Unknown",
          total_revenue: 0,
          today_revenue: 0,
          this_week_revenue: 0,
          this_month_revenue: 0
        };
        const now = /* @__PURE__ */ new Date();
        const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1e3);
        payments.data.forEach((payment) => {
          if (payment.payment_status === "completed" && payment.amount) {
            const createdAt = new Date(payment.created_at);
            contractorIncome.total_revenue += payment.amount;
            if (createdAt.toDateString() === now.toDateString()) {
              contractorIncome.today_revenue += payment.amount;
            }
            if (createdAt >= weekAgo) {
              contractorIncome.this_week_revenue += payment.amount;
            }
            if (createdAt.getMonth() === now.getMonth() && createdAt.getFullYear() === now.getFullYear()) {
              contractorIncome.this_month_revenue += payment.amount;
            }
          }
        });
        setContractorIncomes([contractorIncome]);
      } else {
        const contractorWise = await PaymentAPI2.getContractorWisePayments();
        const contractorIncomes2 = contractorWise.map((item) => ({
          contractor_id: item.contractor_id,
          contractor_name: item.contractor_name,
          total_revenue: item.total_revenue,
          today_revenue: 0,
          // TODO: Calculate from payments if needed
          this_week_revenue: 0,
          // TODO: Calculate from payments if needed
          this_month_revenue: 0
          // TODO: Calculate from payments if needed
        }));
        setContractorIncomes(contractorIncomes2);
      }
    } catch (error) {
      console.error("Error fetching contractor income:", error);
    }
  };
  const fetchAttendantIncome = async () => {
    try {
      setAttendantIncomes([]);
    } catch (error) {
      console.error("Error fetching attendant income:", error);
    }
  };
  if (loading) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-6", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-center h-64", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin" }) }) });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-3xl font-bold text-foreground", children: "Income" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Track revenue and financial performance" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Download, { className: "h-4 w-4 mr-2" }),
        "Export Data"
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-4 gap-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Today's Revenue",
          value: formatCurrency(paymentStats?.todayRevenue || 0),
          description: "+0% from yesterday",
          icon: Banknote,
          variant: "success"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "This Week",
          value: formatCurrency(paymentStats?.thisWeekRevenue || 0),
          description: "+0% from last week",
          icon: TrendingUp,
          variant: "info"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "This Month",
          value: formatCurrency(paymentStats?.thisMonthRevenue || 0),
          description: "+0% from last month",
          icon: Calendar,
          variant: "warning"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Total Revenue",
          value: formatCurrency(paymentStats?.totalRevenue || 0),
          description: "All time earnings",
          icon: Banknote,
          variant: "success"
        }
      )
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Tabs, { defaultValue: "contractors", className: "space-y-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(TabsList, { className: "grid w-full grid-cols-1 sm:grid-cols-3 h-auto p-1", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(
          TabsTrigger,
          {
            value: "contractors",
            className: "flex items-center justify-center gap-2 py-3 px-2 sm:px-4 text-xs sm:text-sm whitespace-nowrap",
            children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Building, { className: "h-4 w-4 flex-shrink-0" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "hidden sm:inline", children: "Contractor Income" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "sm:hidden", children: "Contractors" })
            ]
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(
          TabsTrigger,
          {
            value: "attendants",
            className: "flex items-center justify-center gap-2 py-3 px-2 sm:px-4 text-xs sm:text-sm whitespace-nowrap",
            children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Users, { className: "h-4 w-4 flex-shrink-0" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "hidden sm:inline", children: "Attendant Income" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "sm:hidden", children: "Attendants" })
            ]
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(
          TabsTrigger,
          {
            value: "overview",
            className: "flex items-center justify-center gap-2 py-3 px-2 sm:px-4 text-xs sm:text-sm whitespace-nowrap",
            children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(ChartColumn, { className: "h-4 w-4 flex-shrink-0" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "hidden sm:inline", children: "Overview" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "sm:hidden", children: "Overview" })
            ]
          }
        )
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(TabsContent, { value: "contractors", className: "space-y-4", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { children: "Contractor-wise Income" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Revenue breakdown by contractor" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: contractorIncomes.length > 0 ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-4", children: contractorIncomes.map((contractor) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "border rounded-lg p-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between mb-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "font-semibold text-lg", children: contractor.contractor_name }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-2xl font-bold text-green-600", children: formatCurrency(contractor.total_revenue) })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-3 gap-4 text-sm", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Today" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-medium", children: formatCurrency(contractor.today_revenue) })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "This Week" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-medium", children: formatCurrency(contractor.this_week_revenue) })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "This Month" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-medium", children: formatCurrency(contractor.this_month_revenue) })
            ] })
          ] })
        ] }, contractor.contractor_id)) }) : /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-8", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Building, { className: "h-12 w-12 text-muted-foreground mx-auto mb-4" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-medium mb-2", children: "No contractor income data" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Contractor income will appear here once payments are recorded" })
        ] }) })
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(TabsContent, { value: "attendants", className: "space-y-4", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { children: "Attendant-wise Income" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Revenue breakdown by attendant" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: attendantIncomes.length > 0 ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-4", children: attendantIncomes.map((attendant) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "border rounded-lg p-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between mb-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "font-semibold text-lg", children: attendant.attendant_name }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-2xl font-bold text-blue-600", children: formatCurrency(attendant.total_revenue) })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-3 gap-4 text-sm", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Today" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-medium", children: formatCurrency(attendant.today_revenue) })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "This Week" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-medium", children: formatCurrency(attendant.this_week_revenue) })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "This Month" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-medium", children: formatCurrency(attendant.this_month_revenue) })
            ] })
          ] })
        ] }, attendant.attendant_id)) }) : /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-8", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Users, { className: "h-12 w-12 text-muted-foreground mx-auto mb-4" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-medium mb-2", children: "No attendant income data" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Attendant income will appear here once payments are recorded" })
        ] }) })
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(TabsContent, { value: "overview", className: "space-y-4", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { children: "Revenue Overview" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Visual representation of income over time" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: paymentStats && paymentStats.totalRevenue > 0 ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm font-medium text-blue-600", children: "Daily Average" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-2xl font-bold text-blue-700", children: formatCurrency(paymentStats.totalRevenue / 30) })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(Calendar, { className: "h-8 w-8 text-blue-500" })
            ] }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm font-medium text-green-600", children: "Best Day" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-2xl font-bold text-green-700", children: formatCurrency(paymentStats.todayRevenue) })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TrendingUp, { className: "h-8 w-8 text-green-500" })
            ] }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm font-medium text-purple-600", children: "Average Transaction" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-2xl font-bold text-purple-700", children: formatCurrency(paymentStats.averagePayment) })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(Banknote, { className: "h-8 w-8 text-purple-500" })
            ] }) })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-semibold", children: "Revenue Timeline" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between p-3 bg-gray-50 rounded-lg", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-3 h-3 bg-green-500 rounded-full" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-medium", children: "Today" })
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-right", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-bold text-green-600", children: formatCurrency(paymentStats.todayRevenue) }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-gray-500", children: "+0% from yesterday" })
                ] })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between p-3 bg-gray-50 rounded-lg", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-3 h-3 bg-blue-500 rounded-full" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-medium", children: "This Week" })
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-right", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-bold text-blue-600", children: formatCurrency(paymentStats.thisWeekRevenue) }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-gray-500", children: "+0% from last week" })
                ] })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between p-3 bg-gray-50 rounded-lg", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-3 h-3 bg-purple-500 rounded-full" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-medium", children: "This Month" })
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-right", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-bold text-purple-600", children: formatCurrency(paymentStats.thisMonthRevenue) }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-gray-500", children: "+0% from last month" })
                ] })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between p-3 bg-gray-50 rounded-lg", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-3 h-3 bg-orange-500 rounded-full" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-medium", children: "All Time" })
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-right", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-bold text-orange-600", children: formatCurrency(paymentStats.totalRevenue) }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-gray-500", children: "Total earnings" })
                ] })
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-semibold", children: "Revenue Distribution" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between text-sm", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Today" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { children: [
                    (paymentStats.todayRevenue / paymentStats.totalRevenue * 100).toFixed(1),
                    "%"
                  ] })
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-full bg-gray-200 rounded-full h-2", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
                  "div",
                  {
                    className: "bg-green-500 h-2 rounded-full",
                    style: { width: `${paymentStats.todayRevenue / paymentStats.totalRevenue * 100}%` }
                  }
                ) })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between text-sm", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "This Week" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { children: [
                    (paymentStats.thisWeekRevenue / paymentStats.totalRevenue * 100).toFixed(1),
                    "%"
                  ] })
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-full bg-gray-200 rounded-full h-2", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
                  "div",
                  {
                    className: "bg-blue-500 h-2 rounded-full",
                    style: { width: `${paymentStats.thisWeekRevenue / paymentStats.totalRevenue * 100}%` }
                  }
                ) })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between text-sm", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "This Month" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { children: [
                    (paymentStats.thisMonthRevenue / paymentStats.totalRevenue * 100).toFixed(1),
                    "%"
                  ] })
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-full bg-gray-200 rounded-full h-2", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
                  "div",
                  {
                    className: "bg-purple-500 h-2 rounded-full",
                    style: { width: `${paymentStats.thisMonthRevenue / paymentStats.totalRevenue * 100}%` }
                  }
                ) })
              ] })
            ] })
          ] })
        ] }) : /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-8", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(TrendingUp, { className: "h-12 w-12 text-muted-foreground mx-auto mb-4" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-medium mb-2", children: "No Revenue Data" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground mb-4", children: "Revenue charts will appear here once transactions are recorded" })
        ] }) })
      ] }) })
    ] })
  ] });
}
function Logs() {
  const { profile, user } = useAuth();
  const [logs, setLogs] = reactExports.useState([]);
  const [filteredLogs, setFilteredLogs] = reactExports.useState([]);
  const [stats, setStats] = reactExports.useState({
    totalEvents: 0,
    todayEvents: 0,
    errors: 0,
    warnings: 0
  });
  const [loading, setLoading] = reactExports.useState(true);
  const [searchTerm, setSearchTerm] = reactExports.useState("");
  const [searchInput, setSearchInput] = reactExports.useState("");
  const [searchLoading, setSearchLoading] = reactExports.useState(false);
  const [pagination, setPagination] = reactExports.useState({
    page: 1,
    pageSize: 10,
    totalPages: 0,
    totalCount: 0
  });
  reactExports.useEffect(() => {
    fetchLogs();
  }, []);
  reactExports.useEffect(() => {
    filterLogs();
  }, [logs, searchTerm]);
  reactExports.useEffect(() => {
    if (filteredLogs.length > 0) {
      const totalPages = Math.ceil(filteredLogs.length / pagination.pageSize);
      setPagination((prev) => ({
        ...prev,
        totalPages,
        totalCount: filteredLogs.length,
        page: Math.min(prev.page, totalPages || 1)
      }));
    }
  }, [filteredLogs.length, pagination.pageSize]);
  reactExports.useEffect(() => {
    const timer = setTimeout(() => {
      if (searchInput !== searchTerm) {
        handleSearch(searchInput);
      }
    }, 500);
    return () => clearTimeout(timer);
  }, [searchInput]);
  const fetchLogs = async () => {
    try {
      setLoading(true);
      let data;
      if (profile?.role === "contractor" && user?.id) {
        data = await fetchContractorLogs(user.id);
      } else {
        try {
          const { DashboardAPI } = await __vitePreload(async () => {
            const { DashboardAPI: DashboardAPI2 } = await import("./dashboardApi-BfrJzdLB.js");
            return { DashboardAPI: DashboardAPI2 };
          }, true ? __vite__mapDeps([0,1,2,3,4]) : void 0);
          const result = await DashboardAPI.getRecentActivityPaginated({
            page: 1,
            pageSize: 100,
            sortBy: "timestamp",
            sortOrder: "desc"
          });
          if (result.data && Array.isArray(result.data) && result.data.length > 0) {
            data = result.data;
          } else {
            console.log("Creating sample logs from existing data...");
            data = await generateSampleLogs();
          }
        } catch (error) {
          console.log("Error fetching recent activity, creating sample logs from existing data...", error);
          data = await generateSampleLogs();
        }
      }
      if (data) {
        const formattedLogs = data.map((log2) => ({
          id: log2.id,
          level: log2.level,
          message: log2.message,
          details: log2.details,
          user_id: log2.user_id,
          user_name: log2.profiles?.user_name || log2.user_name || "System",
          action: log2.action,
          resource: log2.resource,
          created_at: log2.created_at
        }));
        setLogs(formattedLogs);
        calculateStats(formattedLogs);
      }
    } catch (error) {
      console.error("Error fetching logs:", error);
      try {
        const sampleLogs = await generateSampleLogs();
        setLogs(sampleLogs);
        calculateStats(sampleLogs);
      } catch (sampleError) {
        console.error("Error generating sample logs:", sampleError);
        setLogs([]);
        calculateStats([]);
      }
    } finally {
      setLoading(false);
    }
  };
  const fetchContractorLogs = async (contractorUserId) => {
    try {
      const contractor = await ContractorAPI.getContractorByUserId(contractorUserId);
      if (!contractor || !contractor.id) {
        return [];
      }
      const logs2 = [];
      try {
        const vehicles = await VehicleAPI.getContractorVehicles(contractor.id);
        vehicles.slice(0, 20).forEach((vehicle) => {
          if (vehicle.check_in_time) {
            logs2.push({
              id: `vehicle-checkin-${vehicle.id}`,
              level: "info",
              message: `Vehicle ${vehicle.plate_number} checked in`,
              details: `Vehicle checked in at ${formatDateTime$1(vehicle.check_in_time)}`,
              user_name: "System",
              action: "vehicle_checkin",
              resource: "vehicles",
              created_at: vehicle.check_in_time
            });
          }
          if (vehicle.check_out_time) {
            logs2.push({
              id: `vehicle-checkout-${vehicle.id}`,
              level: "success",
              message: `Vehicle ${vehicle.plate_number} checked out`,
              details: `Vehicle checked out at ${formatDateTime$1(vehicle.check_out_time)}`,
              user_name: "System",
              action: "vehicle_checkout",
              resource: "vehicles",
              created_at: vehicle.check_out_time
            });
          }
        });
      } catch (error) {
        console.error("Error fetching contractor vehicles for logs:", error);
      }
      try {
        const locations = await ContractorAPI.getContractorLocations(contractor.id);
        locations.slice(0, 5).forEach((location) => {
          logs2.push({
            id: `location-${location.id}`,
            level: "info",
            message: `Location ${location.locations_name} active`,
            details: `Location is active and operational`,
            user_name: "System",
            action: "location_active",
            resource: "parking_locations",
            created_at: location.created_on || (/* @__PURE__ */ new Date()).toISOString()
          });
        });
      } catch (error) {
        console.error("Error fetching contractor locations for logs:", error);
      }
      return logs2.sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());
    } catch (error) {
      console.error("Error fetching contractor logs:", error);
      return [];
    }
  };
  const generateSampleLogs = async () => {
    try {
      let vehicles = [];
      let contractors = [];
      let attendants = [];
      try {
        vehicles = await VehicleAPI.getAllVehicles();
        vehicles = vehicles.slice(0, 10);
      } catch (error) {
        console.error("Error fetching vehicles for sample logs:", error);
      }
      try {
        contractors = await ContractorAPI.getAllContractors();
        contractors = contractors.slice(0, 5);
      } catch (error) {
        console.error("Error fetching contractors for sample logs:", error);
      }
      try {
        const attendantsResponse = await AttendantAPI.getAllAttendants({ page: 1, pageSize: 5 });
        attendants = attendantsResponse.data || [];
      } catch (error) {
        console.error("Error fetching attendants for sample logs:", error);
      }
      const sampleLogs = [];
      if (vehicles && vehicles.length > 0) {
        vehicles.forEach((vehicle, index) => {
          if (vehicle.check_in_time) {
            sampleLogs.push({
              id: `vehicle-checkin-${vehicle.id}`,
              level: "info",
              message: `Vehicle ${vehicle.plate_number} checked in`,
              details: `Vehicle checked in at ${formatDateTime$1(vehicle.check_in_time)}`,
              user_name: "System",
              action: "vehicle_checkin",
              resource: "vehicles",
              created_at: vehicle.check_in_time
            });
          }
          if (vehicle.check_out_time) {
            sampleLogs.push({
              id: `vehicle-checkout-${vehicle.id}`,
              level: "success",
              message: `Vehicle ${vehicle.plate_number} checked out`,
              details: `Vehicle checked out at ${formatDateTime$1(vehicle.check_out_time)}`,
              user_name: "System",
              action: "vehicle_checkout",
              resource: "vehicles",
              created_at: vehicle.check_out_time
            });
          }
        });
      }
      if (contractors && contractors.length > 0) {
        contractors.forEach((contractor) => {
          sampleLogs.push({
            id: `contractor-${contractor.id}`,
            level: "info",
            message: `Contractor ${contractor.company_name || "Unknown"} registered`,
            details: `New contractor added to the system`,
            user_name: "System",
            action: "contractor_create",
            resource: "contractors",
            created_at: contractor.created_on || (/* @__PURE__ */ new Date()).toISOString()
          });
        });
      }
      if (attendants && attendants.length > 0) {
        attendants.forEach((attendant) => {
          const attendantName = attendant.profiles?.user_name || "Unknown";
          sampleLogs.push({
            id: `attendant-${attendant.id}`,
            level: "info",
            message: `Attendant ${attendantName} added`,
            details: `New attendant added to the system`,
            user_name: "System",
            action: "attendant_create",
            resource: "attendants",
            created_at: attendant.created_on || (/* @__PURE__ */ new Date()).toISOString()
          });
        });
      }
      sampleLogs.push({
        id: "system-start",
        level: "info",
        message: "System started successfully",
        details: "All services are running normally",
        user_name: "System",
        action: "system_start",
        resource: "system",
        created_at: (/* @__PURE__ */ new Date()).toISOString()
      });
      sampleLogs.push({
        id: "system-warning",
        level: "warning",
        message: "High memory usage detected",
        details: "Memory usage reached 85%",
        user_name: "System",
        action: "system_warning",
        resource: "system",
        created_at: new Date(Date.now() - 2 * 60 * 60 * 1e3).toISOString()
      });
      return sampleLogs.sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());
    } catch (error) {
      console.error("Error generating sample logs:", error);
      return [];
    }
  };
  const calculateStats = (logs2) => {
    const now = /* @__PURE__ */ new Date();
    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
    const todayLogs = logs2.filter((log2) => {
      const logDate = new Date(log2.created_at);
      return logDate >= today;
    });
    const errors = logs2.filter((log2) => log2.level === "error").length;
    const warnings = logs2.filter((log2) => log2.level === "warning").length;
    setStats({
      totalEvents: logs2.length,
      todayEvents: todayLogs.length,
      errors,
      warnings
    });
  };
  const filterLogs = () => {
    let filtered = logs;
    if (searchTerm) {
      filtered = filtered.filter(
        (log2) => log2.message.toLowerCase().includes(searchTerm.toLowerCase()) || log2.details?.toLowerCase().includes(searchTerm.toLowerCase()) || log2.user_name?.toLowerCase().includes(searchTerm.toLowerCase())
      );
    }
    setFilteredLogs(filtered);
  };
  const handleSearch = async (searchTerm2) => {
    setSearchTerm(searchTerm2);
    setPagination((prev) => ({ ...prev, page: 1 }));
    setSearchLoading(true);
    try {
    } finally {
      setSearchLoading(false);
    }
  };
  const handlePageChange = (page) => {
    setPagination((prev) => ({ ...prev, page }));
  };
  const handlePageSizeChange = (pageSize) => {
    setPagination((prev) => {
      const newPagination = { ...prev, pageSize, page: 1 };
      const totalPages = Math.ceil(filteredLogs.length / pageSize);
      return {
        ...newPagination,
        totalPages,
        totalCount: filteredLogs.length
      };
    });
  };
  const getPaginatedLogs = () => {
    const startIndex = (pagination.page - 1) * pagination.pageSize;
    const endIndex = startIndex + pagination.pageSize;
    return filteredLogs.slice(startIndex, endIndex);
  };
  const getLevelIcon = (level) => {
    switch (level) {
      case "error":
        return /* @__PURE__ */ jsxRuntimeExports.jsx(CircleX, { className: "h-4 w-4 text-red-500" });
      case "warning":
        return /* @__PURE__ */ jsxRuntimeExports.jsx(TriangleAlert, { className: "h-4 w-4 text-yellow-500" });
      case "success":
        return /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, { className: "h-4 w-4 text-green-500" });
      case "info":
      default:
        return /* @__PURE__ */ jsxRuntimeExports.jsx(Info, { className: "h-4 w-4 text-blue-500" });
    }
  };
  const getLevelBadge = (level) => {
    if (!level) {
      return /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "outline", children: "UNKNOWN" });
    }
    const variants = {
      error: "destructive",
      warning: "secondary",
      success: "default",
      info: "outline"
    };
    return /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: variants[level] || "outline", children: level.toUpperCase() });
  };
  const exportLogs = () => {
    const csvContent = [
      ["Timestamp", "Level", "Message", "Details", "User", "Action", "Resource"],
      ...filteredLogs.map((log2) => [
        formatDateTime$1(log2.created_at),
        log2.level,
        log2.message,
        log2.details || "",
        log2.user_name || "",
        log2.action,
        log2.resource
      ])
    ].map((row) => row.map((field) => `"${field}"`).join(",")).join("\n");
    const blob = new Blob([csvContent], { type: "text/csv" });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = `system-logs-${(/* @__PURE__ */ new Date()).toISOString().split("T")[0]}.csv`;
    a.click();
    window.URL.revokeObjectURL(url);
  };
  if (loading) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-6", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-center h-64", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin" }) }) });
  }
  if (!profile) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-6", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-8", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-medium mb-2", children: "Loading Profile..." }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Please wait while we load your profile." })
    ] }) });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-center justify-between gap-4", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-2xl sm:text-3xl font-bold text-foreground", children: "System Logs" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm sm:text-base text-muted-foreground", children: "Monitor system events and user activities" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { variant: "outline", onClick: exportLogs, className: "w-full sm:w-auto", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Download, { className: "h-4 w-4 mr-2" }),
        "Export"
      ] }) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Total Events",
          value: stats.totalEvents,
          description: "All time",
          icon: Activity,
          variant: "default"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Today's Events",
          value: stats.todayEvents,
          description: "Last 24 hours",
          icon: Clock,
          variant: "default"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Errors",
          value: stats.errors,
          description: "System errors",
          icon: CircleAlert,
          variant: "destructive"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Warnings",
          value: stats.warnings,
          description: "System warnings",
          icon: TriangleAlert,
          variant: "warning"
        }
      )
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { className: "text-lg sm:text-xl", children: "Recent Logs" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(CardDescription, { className: "text-sm", children: [
            "View and filter system activity logs (",
            getPaginatedLogs().length,
            " of ",
            filteredLogs.length,
            " total)",
            searchTerm && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "ml-2 text-xs text-muted-foreground", children: [
              '(Search results for "',
              searchTerm,
              '")'
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row gap-2 sm:items-center", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative flex-1 sm:flex-none", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Search, { className: "absolute left-2 top-2.5 h-4 w-4 text-muted-foreground" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                placeholder: "Search logs...",
                value: searchInput,
                onChange: (e) => setSearchInput(e.target.value),
                className: "pl-8 pr-8 w-full sm:w-64",
                disabled: searchLoading
              }
            ),
            searchLoading ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute right-2 top-2.5 h-4 w-4 animate-spin rounded-full border-2 border-gray-300 border-t-blue-600" }) : searchInput ? /* @__PURE__ */ jsxRuntimeExports.jsx(
              Button,
              {
                variant: "ghost",
                size: "sm",
                onClick: () => {
                  setSearchInput("");
                  handleSearch("");
                },
                className: "absolute right-1 top-1 h-6 w-6 p-0 hover:bg-gray-100",
                children: /* @__PURE__ */ jsxRuntimeExports.jsx(X$1, { className: "h-3 w-3" })
              }
            ) : null
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm text-muted-foreground", children: "Show:" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: pagination.pageSize.toString(), onValueChange: (value) => handlePageSizeChange(Number(value)), children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { className: "w-20", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, {}) }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectContent, { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "5", children: "5" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "10", children: "10" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "20", children: "20" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx(SelectItem, { value: "50", children: "50" })
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { onClick: fetchLogs, variant: "outline", className: "w-full sm:w-auto", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Search, { className: "h-4 w-4 mr-2" }),
            "Refresh Logs"
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { children: [
        getPaginatedLogs().length > 0 ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-3 sm:space-y-4", children: getPaginatedLogs().map((log2) => /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "border rounded-lg p-3 sm:p-4 hover:bg-gray-50 transition-colors", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start justify-between gap-3 sm:gap-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start gap-3 flex-1 min-w-0", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex-shrink-0 mt-0.5", children: getLevelIcon(log2.level) }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex-1 min-w-0", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2 mb-1", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("h4", { className: "font-medium text-sm sm:text-base truncate", children: log2.message }),
                getLevelBadge(log2.level)
              ] }),
              log2.details && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs sm:text-sm text-muted-foreground mb-2 line-clamp-2", children: log2.details }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3 text-xs text-muted-foreground", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { children: [
                  "User: ",
                  log2.user_name || "System"
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "hidden sm:inline", children: "" }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { children: [
                  "Action: ",
                  log2.action
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "hidden sm:inline", children: "" }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { children: [
                  "Resource: ",
                  log2.resource
                ] })
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex-shrink-0 text-xs text-muted-foreground", children: formatTimeAgo(log2.created_at) })
        ] }) }, log2.id)) }) : /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-8", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Activity, { className: "h-12 w-12 text-muted-foreground mx-auto mb-4" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-medium mb-2", children: "No logs found" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: searchTerm ? "No logs match your search criteria." : "No system logs available at the moment." })
        ] }),
        pagination.totalCount > 0 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-4 border-t bg-gray-50/50", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-sm text-muted-foreground text-center sm:text-left", children: [
            "Showing ",
            (pagination.page - 1) * pagination.pageSize + 1,
            " to ",
            Math.min(pagination.page * pagination.pageSize, pagination.totalCount),
            " of ",
            pagination.totalCount,
            " results",
            /* @__PURE__ */ jsxRuntimeExports.jsx("br", {}),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-xs text-gray-500", children: [
              "Page ",
              pagination.page,
              " of ",
              pagination.totalPages,
              " | Showing ",
              pagination.pageSize,
              " per page"
            ] })
          ] }),
          pagination.totalPages > 1 && /* @__PURE__ */ jsxRuntimeExports.jsx(Pagination, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(PaginationContent, { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(PaginationItem, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(
              PaginationPrevious,
              {
                onClick: () => handlePageChange(pagination.page - 1),
                className: pagination.page === 1 ? "pointer-events-none opacity-50" : "cursor-pointer hover:bg-gray-100"
              }
            ) }),
            Array.from({ length: Math.min(5, pagination.totalPages) }, (_, i2) => {
              let pageNum;
              if (pagination.totalPages <= 5) {
                pageNum = i2 + 1;
              } else if (pagination.page <= 3) {
                pageNum = i2 + 1;
              } else if (pagination.page >= pagination.totalPages - 2) {
                pageNum = pagination.totalPages - 4 + i2;
              } else {
                pageNum = pagination.page - 2 + i2;
              }
              return /* @__PURE__ */ jsxRuntimeExports.jsx(PaginationItem, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(
                PaginationLink,
                {
                  onClick: () => handlePageChange(pageNum),
                  isActive: pagination.page === pageNum,
                  className: "cursor-pointer hover:bg-gray-100",
                  children: pageNum
                }
              ) }, pageNum);
            }),
            pagination.totalPages > 5 && pagination.page < pagination.totalPages - 2 && /* @__PURE__ */ jsxRuntimeExports.jsx(PaginationItem, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(PaginationEllipsis, {}) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(PaginationItem, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(
              PaginationNext,
              {
                onClick: () => handlePageChange(pagination.page + 1),
                className: pagination.page === pagination.totalPages ? "pointer-events-none opacity-50" : "cursor-pointer hover:bg-gray-100"
              }
            ) })
          ] }) })
        ] })
      ] })
    ] })
  ] });
}
var U = 1, Y$1 = 0.9, H = 0.8, J = 0.17, p = 0.1, u = 0.999, $ = 0.9999;
var k$1 = 0.99, m = /[\\\/_+.#"@\[\(\{&]/, B$1 = /[\\\/_+.#"@\[\(\{&]/g, K$1 = /[\s-]/, X = /[\s-]/g;
function G(_, C, h, P2, A, f, O) {
  if (f === C.length) return A === _.length ? U : k$1;
  var T2 = `${A},${f}`;
  if (O[T2] !== void 0) return O[T2];
  for (var L2 = P2.charAt(f), c = h.indexOf(L2, A), S = 0, E2, N2, R, M2; c >= 0; ) E2 = G(_, C, h, P2, c + 1, f + 1, O), E2 > S && (c === A ? E2 *= U : m.test(_.charAt(c - 1)) ? (E2 *= H, R = _.slice(A, c - 1).match(B$1), R && A > 0 && (E2 *= Math.pow(u, R.length))) : K$1.test(_.charAt(c - 1)) ? (E2 *= Y$1, M2 = _.slice(A, c - 1).match(X), M2 && A > 0 && (E2 *= Math.pow(u, M2.length))) : (E2 *= J, A > 0 && (E2 *= Math.pow(u, c - A))), _.charAt(c) !== C.charAt(f) && (E2 *= $)), (E2 < p && h.charAt(c - 1) === P2.charAt(f + 1) || P2.charAt(f + 1) === P2.charAt(f) && h.charAt(c - 1) !== P2.charAt(f)) && (N2 = G(_, C, h, P2, c + 1, f + 2, O), N2 * p > E2 && (E2 = N2 * p)), E2 > S && (S = E2), c = h.indexOf(L2, c + 1);
  return O[T2] = S, S;
}
function D(_) {
  return _.toLowerCase().replace(X, " ");
}
function W(_, C, h) {
  return _ = h && h.length > 0 ? `${_ + " " + h.join(" ")}` : _, G(_, C, D(_), D(C), 0, 0, {});
}
var N = '[cmdk-group=""]', Y = '[cmdk-group-items=""]', be = '[cmdk-group-heading=""]', le = '[cmdk-item=""]', ce = `${le}:not([aria-disabled="true"])`, Z = "cmdk-item-select", T = "data-value", Re = (r2, o2, n2) => W(r2, o2, n2), ue = reactExports.createContext(void 0), K = () => reactExports.useContext(ue), de = reactExports.createContext(void 0), ee = () => reactExports.useContext(de), fe = reactExports.createContext(void 0), me = reactExports.forwardRef((r2, o2) => {
  let n2 = L(() => {
    var e, a;
    return { search: "", value: (a = (e = r2.value) != null ? e : r2.defaultValue) != null ? a : "", selectedItemId: void 0, filtered: { count: 0, items: /* @__PURE__ */ new Map(), groups: /* @__PURE__ */ new Set() } };
  }), u2 = L(() => /* @__PURE__ */ new Set()), c = L(() => /* @__PURE__ */ new Map()), d = L(() => /* @__PURE__ */ new Map()), f = L(() => /* @__PURE__ */ new Set()), p2 = pe(r2), { label: b, children: m2, value: R, onValueChange: x, filter: C, shouldFilter: S, loop: A, disablePointerSelection: ge2 = false, vimBindings: j2 = true, ...O } = r2, $2 = useId(), q = useId(), _ = useId(), I = reactExports.useRef(null), v2 = ke();
  k(() => {
    if (R !== void 0) {
      let e = R.trim();
      n2.current.value = e, E2.emit();
    }
  }, [R]), k(() => {
    v2(6, ne2);
  }, []);
  let E2 = reactExports.useMemo(() => ({ subscribe: (e) => (f.current.add(e), () => f.current.delete(e)), snapshot: () => n2.current, setState: (e, a, s2) => {
    var i2, l, g, y;
    if (!Object.is(n2.current[e], a)) {
      if (n2.current[e] = a, e === "search") J2(), z(), v2(1, W2);
      else if (e === "value") {
        if (document.activeElement.hasAttribute("cmdk-input") || document.activeElement.hasAttribute("cmdk-root")) {
          let h = document.getElementById(_);
          h ? h.focus() : (i2 = document.getElementById($2)) == null || i2.focus();
        }
        if (v2(7, () => {
          var h;
          n2.current.selectedItemId = (h = M2()) == null ? void 0 : h.id, E2.emit();
        }), s2 || v2(5, ne2), ((l = p2.current) == null ? void 0 : l.value) !== void 0) {
          let h = a != null ? a : "";
          (y = (g = p2.current).onValueChange) == null || y.call(g, h);
          return;
        }
      }
      E2.emit();
    }
  }, emit: () => {
    f.current.forEach((e) => e());
  } }), []), U2 = reactExports.useMemo(() => ({ value: (e, a, s2) => {
    var i2;
    a !== ((i2 = d.current.get(e)) == null ? void 0 : i2.value) && (d.current.set(e, { value: a, keywords: s2 }), n2.current.filtered.items.set(e, te2(a, s2)), v2(2, () => {
      z(), E2.emit();
    }));
  }, item: (e, a) => (u2.current.add(e), a && (c.current.has(a) ? c.current.get(a).add(e) : c.current.set(a, /* @__PURE__ */ new Set([e]))), v2(3, () => {
    J2(), z(), n2.current.value || W2(), E2.emit();
  }), () => {
    d.current.delete(e), u2.current.delete(e), n2.current.filtered.items.delete(e);
    let s2 = M2();
    v2(4, () => {
      J2(), (s2 == null ? void 0 : s2.getAttribute("id")) === e && W2(), E2.emit();
    });
  }), group: (e) => (c.current.has(e) || c.current.set(e, /* @__PURE__ */ new Set()), () => {
    d.current.delete(e), c.current.delete(e);
  }), filter: () => p2.current.shouldFilter, label: b || r2["aria-label"], getDisablePointerSelection: () => p2.current.disablePointerSelection, listId: $2, inputId: _, labelId: q, listInnerRef: I }), []);
  function te2(e, a) {
    var i2, l;
    let s2 = (l = (i2 = p2.current) == null ? void 0 : i2.filter) != null ? l : Re;
    return e ? s2(e, n2.current.search, a) : 0;
  }
  function z() {
    if (!n2.current.search || p2.current.shouldFilter === false) return;
    let e = n2.current.filtered.items, a = [];
    n2.current.filtered.groups.forEach((i2) => {
      let l = c.current.get(i2), g = 0;
      l.forEach((y) => {
        let h = e.get(y);
        g = Math.max(h, g);
      }), a.push([i2, g]);
    });
    let s2 = I.current;
    V().sort((i2, l) => {
      var h, F;
      let g = i2.getAttribute("id"), y = l.getAttribute("id");
      return ((h = e.get(y)) != null ? h : 0) - ((F = e.get(g)) != null ? F : 0);
    }).forEach((i2) => {
      let l = i2.closest(Y);
      l ? l.appendChild(i2.parentElement === l ? i2 : i2.closest(`${Y} > *`)) : s2.appendChild(i2.parentElement === s2 ? i2 : i2.closest(`${Y} > *`));
    }), a.sort((i2, l) => l[1] - i2[1]).forEach((i2) => {
      var g;
      let l = (g = I.current) == null ? void 0 : g.querySelector(`${N}[${T}="${encodeURIComponent(i2[0])}"]`);
      l == null || l.parentElement.appendChild(l);
    });
  }
  function W2() {
    let e = V().find((s2) => s2.getAttribute("aria-disabled") !== "true"), a = e == null ? void 0 : e.getAttribute(T);
    E2.setState("value", a || void 0);
  }
  function J2() {
    var a, s2, i2, l;
    if (!n2.current.search || p2.current.shouldFilter === false) {
      n2.current.filtered.count = u2.current.size;
      return;
    }
    n2.current.filtered.groups = /* @__PURE__ */ new Set();
    let e = 0;
    for (let g of u2.current) {
      let y = (s2 = (a = d.current.get(g)) == null ? void 0 : a.value) != null ? s2 : "", h = (l = (i2 = d.current.get(g)) == null ? void 0 : i2.keywords) != null ? l : [], F = te2(y, h);
      n2.current.filtered.items.set(g, F), F > 0 && e++;
    }
    for (let [g, y] of c.current) for (let h of y) if (n2.current.filtered.items.get(h) > 0) {
      n2.current.filtered.groups.add(g);
      break;
    }
    n2.current.filtered.count = e;
  }
  function ne2() {
    var a, s2, i2;
    let e = M2();
    e && (((a = e.parentElement) == null ? void 0 : a.firstChild) === e && ((i2 = (s2 = e.closest(N)) == null ? void 0 : s2.querySelector(be)) == null || i2.scrollIntoView({ block: "nearest" })), e.scrollIntoView({ block: "nearest" }));
  }
  function M2() {
    var e;
    return (e = I.current) == null ? void 0 : e.querySelector(`${le}[aria-selected="true"]`);
  }
  function V() {
    var e;
    return Array.from(((e = I.current) == null ? void 0 : e.querySelectorAll(ce)) || []);
  }
  function X2(e) {
    let s2 = V()[e];
    s2 && E2.setState("value", s2.getAttribute(T));
  }
  function Q(e) {
    var g;
    let a = M2(), s2 = V(), i2 = s2.findIndex((y) => y === a), l = s2[i2 + e];
    (g = p2.current) != null && g.loop && (l = i2 + e < 0 ? s2[s2.length - 1] : i2 + e === s2.length ? s2[0] : s2[i2 + e]), l && E2.setState("value", l.getAttribute(T));
  }
  function re(e) {
    let a = M2(), s2 = a == null ? void 0 : a.closest(N), i2;
    for (; s2 && !i2; ) s2 = e > 0 ? we(s2, N) : De(s2, N), i2 = s2 == null ? void 0 : s2.querySelector(ce);
    i2 ? E2.setState("value", i2.getAttribute(T)) : Q(e);
  }
  let oe2 = () => X2(V().length - 1), ie2 = (e) => {
    e.preventDefault(), e.metaKey ? oe2() : e.altKey ? re(1) : Q(1);
  }, se2 = (e) => {
    e.preventDefault(), e.metaKey ? X2(0) : e.altKey ? re(-1) : Q(-1);
  };
  return reactExports.createElement(Primitive.div, { ref: o2, tabIndex: -1, ...O, "cmdk-root": "", onKeyDown: (e) => {
    var s2;
    (s2 = O.onKeyDown) == null || s2.call(O, e);
    let a = e.nativeEvent.isComposing || e.keyCode === 229;
    if (!(e.defaultPrevented || a)) switch (e.key) {
      case "n":
      case "j": {
        j2 && e.ctrlKey && ie2(e);
        break;
      }
      case "ArrowDown": {
        ie2(e);
        break;
      }
      case "p":
      case "k": {
        j2 && e.ctrlKey && se2(e);
        break;
      }
      case "ArrowUp": {
        se2(e);
        break;
      }
      case "Home": {
        e.preventDefault(), X2(0);
        break;
      }
      case "End": {
        e.preventDefault(), oe2();
        break;
      }
      case "Enter": {
        e.preventDefault();
        let i2 = M2();
        if (i2) {
          let l = new Event(Z);
          i2.dispatchEvent(l);
        }
      }
    }
  } }, reactExports.createElement("label", { "cmdk-label": "", htmlFor: U2.inputId, id: U2.labelId, style: Te }, b), B(r2, (e) => reactExports.createElement(de.Provider, { value: E2 }, reactExports.createElement(ue.Provider, { value: U2 }, e))));
}), he = reactExports.forwardRef((r2, o2) => {
  var _, I;
  let n2 = useId(), u2 = reactExports.useRef(null), c = reactExports.useContext(fe), d = K(), f = pe(r2), p2 = (I = (_ = f.current) == null ? void 0 : _.forceMount) != null ? I : c == null ? void 0 : c.forceMount;
  k(() => {
    if (!p2) return d.item(n2, c == null ? void 0 : c.id);
  }, [p2]);
  let b = ve(n2, u2, [r2.value, r2.children, u2], r2.keywords), m2 = ee(), R = P((v2) => v2.value && v2.value === b.current), x = P((v2) => p2 || d.filter() === false ? true : v2.search ? v2.filtered.items.get(n2) > 0 : true);
  reactExports.useEffect(() => {
    let v2 = u2.current;
    if (!(!v2 || r2.disabled)) return v2.addEventListener(Z, C), () => v2.removeEventListener(Z, C);
  }, [x, r2.onSelect, r2.disabled]);
  function C() {
    var v2, E2;
    S(), (E2 = (v2 = f.current).onSelect) == null || E2.call(v2, b.current);
  }
  function S() {
    m2.setState("value", b.current, true);
  }
  if (!x) return null;
  let { disabled: A, value: ge2, onSelect: j2, forceMount: O, keywords: $2, ...q } = r2;
  return reactExports.createElement(Primitive.div, { ref: composeRefs(u2, o2), ...q, id: n2, "cmdk-item": "", role: "option", "aria-disabled": !!A, "aria-selected": !!R, "data-disabled": !!A, "data-selected": !!R, onPointerMove: A || d.getDisablePointerSelection() ? void 0 : S, onClick: A ? void 0 : C }, r2.children);
}), Ee = reactExports.forwardRef((r2, o2) => {
  let { heading: n2, children: u2, forceMount: c, ...d } = r2, f = useId(), p2 = reactExports.useRef(null), b = reactExports.useRef(null), m2 = useId(), R = K(), x = P((S) => c || R.filter() === false ? true : S.search ? S.filtered.groups.has(f) : true);
  k(() => R.group(f), []), ve(f, p2, [r2.value, r2.heading, b]);
  let C = reactExports.useMemo(() => ({ id: f, forceMount: c }), [c]);
  return reactExports.createElement(Primitive.div, { ref: composeRefs(p2, o2), ...d, "cmdk-group": "", role: "presentation", hidden: x ? void 0 : true }, n2 && reactExports.createElement("div", { ref: b, "cmdk-group-heading": "", "aria-hidden": true, id: m2 }, n2), B(r2, (S) => reactExports.createElement("div", { "cmdk-group-items": "", role: "group", "aria-labelledby": n2 ? m2 : void 0 }, reactExports.createElement(fe.Provider, { value: C }, S))));
}), ye = reactExports.forwardRef((r2, o2) => {
  let { alwaysRender: n2, ...u2 } = r2, c = reactExports.useRef(null), d = P((f) => !f.search);
  return !n2 && !d ? null : reactExports.createElement(Primitive.div, { ref: composeRefs(c, o2), ...u2, "cmdk-separator": "", role: "separator" });
}), Se = reactExports.forwardRef((r2, o2) => {
  let { onValueChange: n2, ...u2 } = r2, c = r2.value != null, d = ee(), f = P((m2) => m2.search), p2 = P((m2) => m2.selectedItemId), b = K();
  return reactExports.useEffect(() => {
    r2.value != null && d.setState("search", r2.value);
  }, [r2.value]), reactExports.createElement(Primitive.input, { ref: o2, ...u2, "cmdk-input": "", autoComplete: "off", autoCorrect: "off", spellCheck: false, "aria-autocomplete": "list", role: "combobox", "aria-expanded": true, "aria-controls": b.listId, "aria-labelledby": b.labelId, "aria-activedescendant": p2, id: b.inputId, type: "text", value: c ? r2.value : f, onChange: (m2) => {
    c || d.setState("search", m2.target.value), n2 == null || n2(m2.target.value);
  } });
}), Ce = reactExports.forwardRef((r2, o2) => {
  let { children: n2, label: u2 = "Suggestions", ...c } = r2, d = reactExports.useRef(null), f = reactExports.useRef(null), p2 = P((m2) => m2.selectedItemId), b = K();
  return reactExports.useEffect(() => {
    if (f.current && d.current) {
      let m2 = f.current, R = d.current, x, C = new ResizeObserver(() => {
        x = requestAnimationFrame(() => {
          let S = m2.offsetHeight;
          R.style.setProperty("--cmdk-list-height", S.toFixed(1) + "px");
        });
      });
      return C.observe(m2), () => {
        cancelAnimationFrame(x), C.unobserve(m2);
      };
    }
  }, []), reactExports.createElement(Primitive.div, { ref: composeRefs(d, o2), ...c, "cmdk-list": "", role: "listbox", tabIndex: -1, "aria-activedescendant": p2, "aria-label": u2, id: b.listId }, B(r2, (m2) => reactExports.createElement("div", { ref: composeRefs(f, b.listInnerRef), "cmdk-list-sizer": "" }, m2)));
}), xe = reactExports.forwardRef((r2, o2) => {
  let { open: n2, onOpenChange: u2, overlayClassName: c, contentClassName: d, container: f, ...p2 } = r2;
  return reactExports.createElement(Root$5, { open: n2, onOpenChange: u2 }, reactExports.createElement(Portal$3, { container: f }, reactExports.createElement(Overlay, { "cmdk-overlay": "", className: c }), reactExports.createElement(Content$2, { "aria-label": r2.label, "cmdk-dialog": "", className: d }, reactExports.createElement(me, { ref: o2, ...p2 }))));
}), Ie = reactExports.forwardRef((r2, o2) => P((u2) => u2.filtered.count === 0) ? reactExports.createElement(Primitive.div, { ref: o2, ...r2, "cmdk-empty": "", role: "presentation" }) : null), Pe = reactExports.forwardRef((r2, o2) => {
  let { progress: n2, children: u2, label: c = "Loading...", ...d } = r2;
  return reactExports.createElement(Primitive.div, { ref: o2, ...d, "cmdk-loading": "", role: "progressbar", "aria-valuenow": n2, "aria-valuemin": 0, "aria-valuemax": 100, "aria-label": c }, B(r2, (f) => reactExports.createElement("div", { "aria-hidden": true }, f)));
}), _e = Object.assign(me, { List: Ce, Item: he, Input: Se, Group: Ee, Separator: ye, Dialog: xe, Empty: Ie, Loading: Pe });
function we(r2, o2) {
  let n2 = r2.nextElementSibling;
  for (; n2; ) {
    if (n2.matches(o2)) return n2;
    n2 = n2.nextElementSibling;
  }
}
function De(r2, o2) {
  let n2 = r2.previousElementSibling;
  for (; n2; ) {
    if (n2.matches(o2)) return n2;
    n2 = n2.previousElementSibling;
  }
}
function pe(r2) {
  let o2 = reactExports.useRef(r2);
  return k(() => {
    o2.current = r2;
  }), o2;
}
var k = typeof window == "undefined" ? reactExports.useEffect : reactExports.useLayoutEffect;
function L(r2) {
  let o2 = reactExports.useRef();
  return o2.current === void 0 && (o2.current = r2()), o2;
}
function P(r2) {
  let o2 = ee(), n2 = () => r2(o2.snapshot());
  return reactExports.useSyncExternalStore(o2.subscribe, n2, n2);
}
function ve(r2, o2, n2, u2 = []) {
  let c = reactExports.useRef(), d = K();
  return k(() => {
    var b;
    let f = (() => {
      var m2;
      for (let R of n2) {
        if (typeof R == "string") return R.trim();
        if (typeof R == "object" && "current" in R) return R.current ? (m2 = R.current.textContent) == null ? void 0 : m2.trim() : c.current;
      }
    })(), p2 = u2.map((m2) => m2.trim());
    d.value(r2, f, p2), (b = o2.current) == null || b.setAttribute(T, f), c.current = f;
  }), c;
}
var ke = () => {
  let [r2, o2] = reactExports.useState(), n2 = L(() => /* @__PURE__ */ new Map());
  return k(() => {
    n2.current.forEach((u2) => u2()), n2.current = /* @__PURE__ */ new Map();
  }, [r2]), (u2, c) => {
    n2.current.set(u2, c), o2({});
  };
};
function Me(r2) {
  let o2 = r2.type;
  return typeof o2 == "function" ? o2(r2.props) : "render" in o2 ? o2.render(r2.props) : r2;
}
function B({ asChild: r2, children: o2 }, n2) {
  return r2 && reactExports.isValidElement(o2) ? reactExports.cloneElement(Me(o2), { ref: o2.ref }, n2(o2.props.children)) : n2(o2);
}
var Te = { position: "absolute", width: "1px", height: "1px", padding: "0", margin: "-1px", overflow: "hidden", clip: "rect(0, 0, 0, 0)", whiteSpace: "nowrap", borderWidth: "0" };
const Command = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  _e,
  {
    ref,
    className: cn(
      "flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",
      className
    ),
    ...props
  }
));
Command.displayName = _e.displayName;
const CommandInput = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center border-b px-3", "cmdk-input-wrapper": "", children: [
  /* @__PURE__ */ jsxRuntimeExports.jsx(Search, { className: "mr-2 h-4 w-4 shrink-0 opacity-50" }),
  /* @__PURE__ */ jsxRuntimeExports.jsx(
    _e.Input,
    {
      ref,
      className: cn(
        "flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",
        className
      ),
      ...props
    }
  )
] }));
CommandInput.displayName = _e.Input.displayName;
const CommandList = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  _e.List,
  {
    ref,
    className: cn("max-h-[300px] overflow-y-auto overflow-x-hidden", className),
    ...props
  }
));
CommandList.displayName = _e.List.displayName;
const CommandEmpty = reactExports.forwardRef((props, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(_e.Empty, { ref, className: "py-6 text-center text-sm", ...props }));
CommandEmpty.displayName = _e.Empty.displayName;
const CommandGroup = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  _e.Group,
  {
    ref,
    className: cn(
      "overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",
      className
    ),
    ...props
  }
));
CommandGroup.displayName = _e.Group.displayName;
const CommandSeparator = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(_e.Separator, { ref, className: cn("-mx-1 h-px bg-border", className), ...props }));
CommandSeparator.displayName = _e.Separator.displayName;
const CommandItem = reactExports.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  _e.Item,
  {
    ref,
    className: cn(
      "relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",
      className
    ),
    ...props
  }
));
CommandItem.displayName = _e.Item.displayName;
var POPOVER_NAME = "Popover";
var [createPopoverContext, createPopoverScope] = createContextScope(POPOVER_NAME, [
  createPopperScope
]);
var usePopperScope = createPopperScope();
var [PopoverProvider, usePopoverContext] = createPopoverContext(POPOVER_NAME);
var Popover$1 = (props) => {
  const {
    __scopePopover,
    children,
    open: openProp,
    defaultOpen,
    onOpenChange,
    modal = false
  } = props;
  const popperScope = usePopperScope(__scopePopover);
  const triggerRef = reactExports.useRef(null);
  const [hasCustomAnchor, setHasCustomAnchor] = reactExports.useState(false);
  const [open, setOpen] = useControllableState({
    prop: openProp,
    defaultProp: defaultOpen ?? false,
    onChange: onOpenChange,
    caller: POPOVER_NAME
  });
  return /* @__PURE__ */ jsxRuntimeExports.jsx(Root2$6, { ...popperScope, children: /* @__PURE__ */ jsxRuntimeExports.jsx(
    PopoverProvider,
    {
      scope: __scopePopover,
      contentId: useId(),
      triggerRef,
      open,
      onOpenChange: setOpen,
      onOpenToggle: reactExports.useCallback(() => setOpen((prevOpen) => !prevOpen), [setOpen]),
      hasCustomAnchor,
      onCustomAnchorAdd: reactExports.useCallback(() => setHasCustomAnchor(true), []),
      onCustomAnchorRemove: reactExports.useCallback(() => setHasCustomAnchor(false), []),
      modal,
      children
    }
  ) });
};
Popover$1.displayName = POPOVER_NAME;
var ANCHOR_NAME = "PopoverAnchor";
var PopoverAnchor = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopePopover, ...anchorProps } = props;
    const context = usePopoverContext(ANCHOR_NAME, __scopePopover);
    const popperScope = usePopperScope(__scopePopover);
    const { onCustomAnchorAdd, onCustomAnchorRemove } = context;
    reactExports.useEffect(() => {
      onCustomAnchorAdd();
      return () => onCustomAnchorRemove();
    }, [onCustomAnchorAdd, onCustomAnchorRemove]);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(Anchor, { ...popperScope, ...anchorProps, ref: forwardedRef });
  }
);
PopoverAnchor.displayName = ANCHOR_NAME;
var TRIGGER_NAME = "PopoverTrigger";
var PopoverTrigger$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopePopover, ...triggerProps } = props;
    const context = usePopoverContext(TRIGGER_NAME, __scopePopover);
    const popperScope = usePopperScope(__scopePopover);
    const composedTriggerRef = useComposedRefs(forwardedRef, context.triggerRef);
    const trigger = /* @__PURE__ */ jsxRuntimeExports.jsx(
      Primitive.button,
      {
        type: "button",
        "aria-haspopup": "dialog",
        "aria-expanded": context.open,
        "aria-controls": context.contentId,
        "data-state": getState(context.open),
        ...triggerProps,
        ref: composedTriggerRef,
        onClick: composeEventHandlers(props.onClick, context.onOpenToggle)
      }
    );
    return context.hasCustomAnchor ? trigger : /* @__PURE__ */ jsxRuntimeExports.jsx(Anchor, { asChild: true, ...popperScope, children: trigger });
  }
);
PopoverTrigger$1.displayName = TRIGGER_NAME;
var PORTAL_NAME = "PopoverPortal";
var [PortalProvider, usePortalContext] = createPopoverContext(PORTAL_NAME, {
  forceMount: void 0
});
var PopoverPortal = (props) => {
  const { __scopePopover, forceMount, children, container } = props;
  const context = usePopoverContext(PORTAL_NAME, __scopePopover);
  return /* @__PURE__ */ jsxRuntimeExports.jsx(PortalProvider, { scope: __scopePopover, forceMount, children: /* @__PURE__ */ jsxRuntimeExports.jsx(Presence, { present: forceMount || context.open, children: /* @__PURE__ */ jsxRuntimeExports.jsx(Portal$2, { asChild: true, container, children }) }) });
};
PopoverPortal.displayName = PORTAL_NAME;
var CONTENT_NAME = "PopoverContent";
var PopoverContent$1 = reactExports.forwardRef(
  (props, forwardedRef) => {
    const portalContext = usePortalContext(CONTENT_NAME, props.__scopePopover);
    const { forceMount = portalContext.forceMount, ...contentProps } = props;
    const context = usePopoverContext(CONTENT_NAME, props.__scopePopover);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(Presence, { present: forceMount || context.open, children: context.modal ? /* @__PURE__ */ jsxRuntimeExports.jsx(PopoverContentModal, { ...contentProps, ref: forwardedRef }) : /* @__PURE__ */ jsxRuntimeExports.jsx(PopoverContentNonModal, { ...contentProps, ref: forwardedRef }) });
  }
);
PopoverContent$1.displayName = CONTENT_NAME;
var Slot = createSlot("PopoverContent.RemoveScroll");
var PopoverContentModal = reactExports.forwardRef(
  (props, forwardedRef) => {
    const context = usePopoverContext(CONTENT_NAME, props.__scopePopover);
    const contentRef = reactExports.useRef(null);
    const composedRefs = useComposedRefs(forwardedRef, contentRef);
    const isRightClickOutsideRef = reactExports.useRef(false);
    reactExports.useEffect(() => {
      const content = contentRef.current;
      if (content) return hideOthers(content);
    }, []);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(ReactRemoveScroll, { as: Slot, allowPinchZoom: true, children: /* @__PURE__ */ jsxRuntimeExports.jsx(
      PopoverContentImpl,
      {
        ...props,
        ref: composedRefs,
        trapFocus: context.open,
        disableOutsidePointerEvents: true,
        onCloseAutoFocus: composeEventHandlers(props.onCloseAutoFocus, (event) => {
          event.preventDefault();
          if (!isRightClickOutsideRef.current) context.triggerRef.current?.focus();
        }),
        onPointerDownOutside: composeEventHandlers(
          props.onPointerDownOutside,
          (event) => {
            const originalEvent = event.detail.originalEvent;
            const ctrlLeftClick = originalEvent.button === 0 && originalEvent.ctrlKey === true;
            const isRightClick = originalEvent.button === 2 || ctrlLeftClick;
            isRightClickOutsideRef.current = isRightClick;
          },
          { checkForDefaultPrevented: false }
        ),
        onFocusOutside: composeEventHandlers(
          props.onFocusOutside,
          (event) => event.preventDefault(),
          { checkForDefaultPrevented: false }
        )
      }
    ) });
  }
);
var PopoverContentNonModal = reactExports.forwardRef(
  (props, forwardedRef) => {
    const context = usePopoverContext(CONTENT_NAME, props.__scopePopover);
    const hasInteractedOutsideRef = reactExports.useRef(false);
    const hasPointerDownOutsideRef = reactExports.useRef(false);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      PopoverContentImpl,
      {
        ...props,
        ref: forwardedRef,
        trapFocus: false,
        disableOutsidePointerEvents: false,
        onCloseAutoFocus: (event) => {
          props.onCloseAutoFocus?.(event);
          if (!event.defaultPrevented) {
            if (!hasInteractedOutsideRef.current) context.triggerRef.current?.focus();
            event.preventDefault();
          }
          hasInteractedOutsideRef.current = false;
          hasPointerDownOutsideRef.current = false;
        },
        onInteractOutside: (event) => {
          props.onInteractOutside?.(event);
          if (!event.defaultPrevented) {
            hasInteractedOutsideRef.current = true;
            if (event.detail.originalEvent.type === "pointerdown") {
              hasPointerDownOutsideRef.current = true;
            }
          }
          const target = event.target;
          const targetIsTrigger = context.triggerRef.current?.contains(target);
          if (targetIsTrigger) event.preventDefault();
          if (event.detail.originalEvent.type === "focusin" && hasPointerDownOutsideRef.current) {
            event.preventDefault();
          }
        }
      }
    );
  }
);
var PopoverContentImpl = reactExports.forwardRef(
  (props, forwardedRef) => {
    const {
      __scopePopover,
      trapFocus,
      onOpenAutoFocus,
      onCloseAutoFocus,
      disableOutsidePointerEvents,
      onEscapeKeyDown,
      onPointerDownOutside,
      onFocusOutside,
      onInteractOutside,
      ...contentProps
    } = props;
    const context = usePopoverContext(CONTENT_NAME, __scopePopover);
    const popperScope = usePopperScope(__scopePopover);
    useFocusGuards();
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      FocusScope,
      {
        asChild: true,
        loop: true,
        trapped: trapFocus,
        onMountAutoFocus: onOpenAutoFocus,
        onUnmountAutoFocus: onCloseAutoFocus,
        children: /* @__PURE__ */ jsxRuntimeExports.jsx(
          DismissableLayer,
          {
            asChild: true,
            disableOutsidePointerEvents,
            onInteractOutside,
            onEscapeKeyDown,
            onPointerDownOutside,
            onFocusOutside,
            onDismiss: () => context.onOpenChange(false),
            children: /* @__PURE__ */ jsxRuntimeExports.jsx(
              Content$1,
              {
                "data-state": getState(context.open),
                role: "dialog",
                id: context.contentId,
                ...popperScope,
                ...contentProps,
                ref: forwardedRef,
                style: {
                  ...contentProps.style,
                  // re-namespace exposed content custom properties
                  ...{
                    "--radix-popover-content-transform-origin": "var(--radix-popper-transform-origin)",
                    "--radix-popover-content-available-width": "var(--radix-popper-available-width)",
                    "--radix-popover-content-available-height": "var(--radix-popper-available-height)",
                    "--radix-popover-trigger-width": "var(--radix-popper-anchor-width)",
                    "--radix-popover-trigger-height": "var(--radix-popper-anchor-height)"
                  }
                }
              }
            )
          }
        )
      }
    );
  }
);
var CLOSE_NAME = "PopoverClose";
var PopoverClose = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopePopover, ...closeProps } = props;
    const context = usePopoverContext(CLOSE_NAME, __scopePopover);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(
      Primitive.button,
      {
        type: "button",
        ...closeProps,
        ref: forwardedRef,
        onClick: composeEventHandlers(props.onClick, () => context.onOpenChange(false))
      }
    );
  }
);
PopoverClose.displayName = CLOSE_NAME;
var ARROW_NAME = "PopoverArrow";
var PopoverArrow = reactExports.forwardRef(
  (props, forwardedRef) => {
    const { __scopePopover, ...arrowProps } = props;
    const popperScope = usePopperScope(__scopePopover);
    return /* @__PURE__ */ jsxRuntimeExports.jsx(Arrow, { ...popperScope, ...arrowProps, ref: forwardedRef });
  }
);
PopoverArrow.displayName = ARROW_NAME;
function getState(open) {
  return open ? "open" : "closed";
}
var Root2 = Popover$1;
var Trigger = PopoverTrigger$1;
var Portal = PopoverPortal;
var Content2 = PopoverContent$1;
const Popover = Root2;
const PopoverTrigger = Trigger;
const PopoverContent = reactExports.forwardRef(({ className, align = "center", sideOffset = 4, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(Portal, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(
  Content2,
  {
    ref,
    align,
    sideOffset,
    className: cn(
      "z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className
    ),
    ...props
  }
) }));
PopoverContent.displayName = Content2.displayName;
function Combobox({
  options,
  value,
  onValueChange,
  placeholder = "Select option...",
  emptyText = "No option found.",
  className,
  disabled = false
}) {
  const [open, setOpen] = reactExports.useState(false);
  const selectedOption = options.find((option) => option.value === value);
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(Popover, { open, onOpenChange: setOpen, children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(PopoverTrigger, { asChild: true, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
      Button,
      {
        variant: "outline",
        role: "combobox",
        "aria-expanded": open,
        className: cn("w-full justify-between", className),
        disabled,
        children: [
          selectedOption ? selectedOption.label : placeholder,
          /* @__PURE__ */ jsxRuntimeExports.jsx(ChevronsUpDown, { className: "ml-2 h-4 w-4 shrink-0 opacity-50" })
        ]
      }
    ) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(PopoverContent, { className: "w-full p-0", align: "start", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Command, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(CommandInput, { placeholder: "Search..." }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CommandList, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(CommandEmpty, { children: emptyText }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CommandGroup, { children: options.map((option) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
          CommandItem,
          {
            value: option.searchableText || option.label,
            onSelect: (currentValue) => {
              const selectedValue = options.find(
                (opt) => (opt.searchableText || opt.label).toLowerCase() === currentValue.toLowerCase()
              )?.value;
              if (selectedValue) {
                onValueChange?.(selectedValue === value ? "" : selectedValue);
              }
              setOpen(false);
            },
            children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Check,
                {
                  className: cn(
                    "mr-2 h-4 w-4",
                    value === option.value ? "opacity-100" : "opacity-0"
                  )
                }
              ),
              option.label
            ]
          },
          option.value
        )) })
      ] })
    ] }) })
  ] });
}
class SubscriptionDashboardAPI {
  // Get all contractor subscription details
  static async getContractorSubscriptionDetails() {
    const response = await apiClient.get("/subscription-dashboard/contractor-details");
    return response.data || [];
  }
  // OLD METHOD - Keep for backward compatibility
  static async getContractorSubscriptionDetailsOld() {
    const { data, error } = await supabase.from("contractors").select(`
        id,
        user_id,
        company_name,
        profiles!inner(
          user_name,
          email,
          subscription_plan_id,
          subscription_start_date,
          subscription_end_date,
          subscription_status
        ),
        subscription_plans!inner(
          id,
          name,
          price
        )
      `).eq("is_deleted", false).not("profiles.subscription_plan_id", "is", null);
    if (error) throw error;
    const contractorDetails = data?.map((contractor) => {
      new Date(contractor.profiles.subscription_start_date);
      const endDate = new Date(contractor.profiles.subscription_end_date);
      const now = /* @__PURE__ */ new Date();
      const daysRemaining = Math.ceil((endDate.getTime() - now.getTime()) / (1e3 * 60 * 60 * 24));
      return {
        contractor_id: contractor.user_id,
        company_name: contractor.company_name,
        user_name: contractor.profiles.user_name,
        email: contractor.profiles.email,
        current_plan: {
          id: contractor.subscription_plans.id,
          name: contractor.subscription_plans.name,
          price: contractor.subscription_plans.price
        },
        subscription_start_date: contractor.profiles.subscription_start_date,
        subscription_end_date: contractor.profiles.subscription_end_date,
        subscription_status: contractor.profiles.subscription_status,
        days_remaining: daysRemaining,
        total_payments: 0,
        // Will be calculated separately
        last_payment_date: "",
        // Will be calculated separately
        subscription_count: 0
        // Will be calculated separately
      };
    }) || [];
    for (const contractor of contractorDetails) {
      const contractorId = contractor.contractor_id;
      const { data: paymentsData } = await supabase.from("payments").select("amount, created_on").eq("contractor_id", contractorId).eq("payment_status", "completed");
      if (paymentsData) {
        contractor.total_payments = paymentsData.reduce((sum, payment) => sum + payment.amount, 0);
        contractor.last_payment_date = paymentsData.length > 0 ? paymentsData.sort((a, b) => new Date(b.created_on).getTime() - new Date(a.created_on).getTime())[0].created_on : "";
      }
      const { data: historyData } = await supabase.from("subscription_history").select("id").eq("contractor_id", contractorId);
      contractor.subscription_count = historyData?.length || 0;
    }
    return contractorDetails;
  }
  // Get payment statistics
  static async getPaymentStatistics() {
    const response = await apiClient.get("/subscription-dashboard/payment-statistics");
    return response.data;
  }
  // OLD METHOD - Keep for backward compatibility
  static async getPaymentStatisticsOld() {
    try {
      const today = /* @__PURE__ */ new Date();
      const startOfToday = new Date(today.getFullYear(), today.getMonth(), today.getDate());
      const startOfWeek = new Date(today);
      startOfWeek.setDate(today.getDate() - today.getDay());
      startOfWeek.setHours(0, 0, 0, 0);
      const startOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);
      const [todayData, weekData, monthData, totalData] = await Promise.all([
        // Today's payments
        supabase.from("payments").select("amount").eq("payment_status", "completed").gte("created_on", startOfToday.toISOString()),
        // This week's payments
        supabase.from("payments").select("amount").eq("payment_status", "completed").gte("created_on", startOfWeek.toISOString()),
        // This month's payments
        supabase.from("payments").select("amount").eq("payment_status", "completed").gte("created_on", startOfMonth.toISOString()),
        // Total payments
        supabase.from("payments").select("amount").eq("payment_status", "completed")
      ]);
      const calculateStats = (data) => ({
        amount: data?.reduce((sum, payment) => sum + payment.amount, 0) || 0,
        count: data?.length || 0
      });
      return {
        today: calculateStats(todayData.data),
        this_week: calculateStats(weekData.data),
        this_month: calculateStats(monthData.data),
        total: calculateStats(totalData.data)
      };
    } catch (error) {
      console.warn("Payments table not available, returning zero statistics");
      return {
        today: { amount: 0, count: 0 },
        this_week: { amount: 0, count: 0 },
        this_month: { amount: 0, count: 0 },
        total: { amount: 0, count: 0 }
      };
    }
  }
  // Get plan purchase statistics
  static async getPlanPurchaseStatistics() {
    const response = await apiClient.get("/subscription-dashboard/plan-purchase-statistics");
    return response.data;
  }
  // OLD METHOD - Keep for backward compatibility
  static async getPlanPurchaseStatisticsOld() {
    try {
      const today = /* @__PURE__ */ new Date();
      const startOfToday = new Date(today.getFullYear(), today.getMonth(), today.getDate());
      const startOfWeek = new Date(today);
      startOfWeek.setDate(today.getDate() - today.getDay());
      startOfWeek.setHours(0, 0, 0, 0);
      const startOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);
      const [todayData, weekData, monthData, totalData] = await Promise.all([
        // Today's purchases
        supabase.from("subscription_history").select("id").eq("action", "assigned").gte("created_on", startOfToday.toISOString()),
        // This week's purchases
        supabase.from("subscription_history").select("id").eq("action", "assigned").gte("created_on", startOfWeek.toISOString()),
        // This month's purchases
        supabase.from("subscription_history").select("id").eq("action", "assigned").gte("created_on", startOfMonth.toISOString()),
        // Total purchases
        supabase.from("subscription_history").select("id").eq("action", "assigned")
      ]);
      return {
        today: todayData.data?.length || 0,
        this_week: weekData.data?.length || 0,
        this_month: monthData.data?.length || 0,
        total: totalData.data?.length || 0
      };
    } catch (error) {
      console.warn("Subscription history table not available, returning zero statistics");
      return {
        today: 0,
        this_week: 0,
        this_month: 0,
        total: 0
      };
    }
  }
  // Get payment details for a specific contractor
  static async getContractorPaymentDetails(contractorId) {
    const response = await apiClient.get(`/subscription-dashboard/contractor/${contractorId}/payments`);
    return response.data || [];
  }
  // OLD METHOD - Keep for backward compatibility
  static async getContractorPaymentDetailsOld(contractorId) {
    const { data, error } = await supabase.from("payments").select(`
        id,
        amount,
        payment_method,
        payment_status,
        created_on,
        subscription_start_date,
        subscription_end_date,
        duration_days,
        contractors!inner(
          company_name
        ),
        subscription_plans!inner(
          name
        )
      `).eq("contractor_id", contractorId).order("created_on", { ascending: false });
    if (error) throw error;
    return data?.map((payment) => ({
      id: payment.id,
      contractor_name: payment.contractors.company_name,
      plan_name: payment.subscription_plans.name,
      amount: payment.amount,
      payment_method: payment.payment_method,
      payment_status: payment.payment_status,
      payment_date: payment.created_on,
      subscription_start_date: payment.subscription_start_date,
      subscription_end_date: payment.subscription_end_date,
      duration_days: payment.duration_days
    })) || [];
  }
  // Get subscription history for a specific contractor
  static async getContractorSubscriptionHistory(contractorId) {
    const response = await apiClient.get(`/subscription-dashboard/contractor/${contractorId}/history`);
    return response.data || [];
  }
  // OLD METHOD - Keep for backward compatibility
  static async getContractorSubscriptionHistoryOld(contractorId) {
    const { data, error } = await supabase.from("subscription_history").select(`
        id,
        action,
        new_start_date,
        new_end_date,
        duration_days,
        amount_paid,
        created_on,
        subscription_plan_id
      `).eq("contractor_id", contractorId).order("created_on", { ascending: false });
    if (error) throw error;
    const planIds = [.../* @__PURE__ */ new Set([
      ...data?.map((h) => h.subscription_plan_id).filter(Boolean) || []
    ])];
    let planNames = {};
    if (planIds.length > 0) {
      const { data: plansData } = await supabase.from("subscription_plans").select("id, name").in("id", planIds);
      planNames = plansData?.reduce((acc, plan) => {
        acc[plan.id] = plan.name;
        return acc;
      }, {}) || {};
    }
    return data?.map((history) => ({
      id: history.id,
      action: history.action,
      plan_name: planNames[history.subscription_plan_id] || "Unknown Plan",
      previous_plan_name: void 0,
      // Column doesn't exist
      new_start_date: history.new_start_date,
      new_end_date: history.new_end_date,
      previous_start_date: void 0,
      // Column doesn't exist
      previous_end_date: void 0,
      // Column doesn't exist
      duration_days: history.duration_days,
      amount_paid: history.amount_paid,
      created_on: history.created_on
    })) || [];
  }
  // Get all payment details (for super admin)
  static async getAllPaymentDetails() {
    const response = await apiClient.get("/subscription-dashboard/payments");
    return response.data || [];
  }
  // OLD METHOD - Keep for backward compatibility
  static async getAllPaymentDetailsOld() {
    const { data, error } = await supabase.from("payments").select(`
        id,
        amount,
        payment_method,
        payment_status,
        created_on,
        subscription_start_date,
        subscription_end_date,
        duration_days,
        contractors!inner(
          company_name
        ),
        subscription_plans!inner(
          name
        )
      `).order("created_on", { ascending: false });
    if (error) throw error;
    return data?.map((payment) => ({
      id: payment.id,
      contractor_name: payment.contractors.company_name,
      plan_name: payment.subscription_plans.name,
      amount: payment.amount,
      payment_method: payment.payment_method,
      payment_status: payment.payment_status,
      payment_date: payment.created_on,
      subscription_start_date: payment.subscription_start_date,
      subscription_end_date: payment.subscription_end_date,
      duration_days: payment.duration_days
    })) || [];
  }
}
function SimpleSubscriptionDashboard({ onAssignSubscription }) {
  const [allContractors, setAllContractors] = reactExports.useState([]);
  const [contractors, setContractors] = reactExports.useState([]);
  const [plans, setPlans] = reactExports.useState([]);
  const [loading, setLoading] = reactExports.useState(true);
  const [search, setSearch] = reactExports.useState("");
  const [page, setPage] = reactExports.useState(1);
  const [pageSize, setPageSize] = reactExports.useState(10);
  const [totalPages, setTotalPages] = reactExports.useState(1);
  const [editingPlan, setEditingPlan] = reactExports.useState(null);
  const [showEditDialog, setShowEditDialog] = reactExports.useState(false);
  const [showCreateDialog, setShowCreateDialog] = reactExports.useState(false);
  const [showDeleteDialog, setShowDeleteDialog] = reactExports.useState(false);
  const [planToDelete, setPlanToDelete] = reactExports.useState(null);
  const [planForm, setPlanForm] = reactExports.useState({
    name: "",
    price: 0,
    days: 0
  });
  const [showExtendDialog, setShowExtendDialog] = reactExports.useState(false);
  const [extendDays, setExtendDays] = reactExports.useState(30);
  const [contractorToExtend, setContractorToExtend] = reactExports.useState(null);
  const [selectedPlanId, setSelectedPlanId] = reactExports.useState("");
  const [extendMode, setExtendMode] = reactExports.useState("extend");
  const [subscriptionHistory, setSubscriptionHistory] = reactExports.useState([]);
  const [selectedContractorHistory, setSelectedContractorHistory] = reactExports.useState(null);
  const [showHistoryDialog, setShowHistoryDialog] = reactExports.useState(false);
  const [historyLoading, setHistoryLoading] = reactExports.useState(false);
  const [historyPage, setHistoryPage] = reactExports.useState(1);
  const [historyPageSize, setHistoryPageSize] = reactExports.useState(5);
  const [historyTotalPages, setHistoryTotalPages] = reactExports.useState(1);
  const { toast: toast2 } = useToast();
  reactExports.useEffect(() => {
    console.log(" Component mounted, refreshing data...");
    fetchData(true);
  }, []);
  const fetchData = async (forceRefresh = false) => {
    try {
      setLoading(true);
      console.log(" Fetching subscription data...", { forceRefresh, timestamp: Date.now() });
      if (forceRefresh) {
        console.log(" Clearing existing data for fresh fetch...");
        setAllContractors([]);
        setContractors([]);
      }
      const [contractorsData, plansData] = await Promise.all([
        ContractorAPI.getAllContractors(),
        SubscriptionAPI.getSubscriptionPlans()
      ]);
      console.log(" Fetched contractors data:", {
        count: contractorsData?.length || 0,
        data: contractorsData?.map((c) => ({
          id: c.id,
          company_name: c.company_name,
          subscription_status: c.profiles?.subscription_status,
          subscription_end_date: c.profiles?.subscription_end_date,
          subscription_start_date: c.profiles?.subscription_start_date,
          daysRemaining: getDaysRemainingNumber(c.profiles),
          isExpired: getDaysRemainingNumber(c.profiles) <= 0
        }))
      });
      setAllContractors(contractorsData || []);
      setPlans(plansData);
      if (forceRefresh) {
        console.log(" Force refreshing component state...");
        setPage((prev) => prev + 1e-3);
      }
    } catch (error) {
      console.error(" Error fetching data:", error);
      setAllContractors([]);
      setPlans([]);
    } finally {
      setLoading(false);
    }
  };
  reactExports.useEffect(() => {
    const lower = search.trim().toLowerCase();
    let filtered = allContractors;
    if (lower) {
      filtered = filtered.filter((c) => {
        const company = c.company_name || "";
        const name2 = c.profiles?.user_name || "";
        const email = c.profiles?.email || "";
        return company.toLowerCase().includes(lower) || name2.toLowerCase().includes(lower) || email.toLowerCase().includes(lower);
      });
    }
    const withSubs = filtered.filter((c) => c.profiles?.subscription_plan_id);
    const total = withSubs.length;
    const pages = Math.max(1, Math.ceil(total / pageSize));
    setTotalPages(pages);
    const currentPage = Math.min(page, pages);
    const start = (currentPage - 1) * pageSize;
    const end = start + pageSize;
    setContractors(withSubs.slice(start, end));
    if (currentPage !== page) setPage(currentPage);
  }, [allContractors, search, page, pageSize]);
  const getStatusBadge = (subscription) => {
    if (!subscription) return /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "secondary", children: "No Subscription" });
    const endDate = new Date(subscription.subscription_end_date);
    const now = /* @__PURE__ */ new Date();
    const daysRemaining = Math.ceil((endDate.getTime() - now.getTime()) / (1e3 * 60 * 60 * 24));
    if (subscription.subscription_status === "expired" || daysRemaining <= 0) {
      return /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "destructive", children: "Expired" });
    }
    if (daysRemaining <= 7) {
      return /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "destructive", children: "Expiring Soon" });
    }
    if (daysRemaining <= 30) {
      return /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "secondary", children: "Expires Soon" });
    }
    return /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "default", children: "Active" });
  };
  const getStatusIcon = (subscription) => {
    if (!subscription) return /* @__PURE__ */ jsxRuntimeExports.jsx(TriangleAlert, { className: "h-4 w-4 text-gray-500" });
    const endDate = new Date(subscription.subscription_end_date);
    const now = /* @__PURE__ */ new Date();
    const daysRemaining = Math.ceil((endDate.getTime() - now.getTime()) / (1e3 * 60 * 60 * 24));
    if (subscription.subscription_status === "expired" || daysRemaining <= 0) {
      return /* @__PURE__ */ jsxRuntimeExports.jsx(TriangleAlert, { className: "h-4 w-4 text-red-500" });
    }
    if (daysRemaining <= 7) {
      return /* @__PURE__ */ jsxRuntimeExports.jsx(TriangleAlert, { className: "h-4 w-4 text-red-500" });
    }
    if (daysRemaining <= 30) {
      return /* @__PURE__ */ jsxRuntimeExports.jsx(Clock, { className: "h-4 w-4 text-yellow-500" });
    }
    return /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, { className: "h-4 w-4 text-green-500" });
  };
  const getDaysRemaining = (subscription) => {
    if (!subscription) return "N/A";
    const endDate = new Date(subscription.subscription_end_date);
    const now = /* @__PURE__ */ new Date();
    const daysRemaining = Math.ceil((endDate.getTime() - now.getTime()) / (1e3 * 60 * 60 * 24));
    return daysRemaining > 0 ? `${daysRemaining} days` : "Expired";
  };
  const getDaysRemainingNumber = (subscription) => {
    if (!subscription || !subscription.subscription_end_date) return 0;
    const endDate = new Date(subscription.subscription_end_date);
    const now = /* @__PURE__ */ new Date();
    const daysRemaining = Math.ceil((endDate.getTime() - now.getTime()) / (1e3 * 60 * 60 * 24));
    return daysRemaining;
  };
  const isSubscriptionExpiring = (subscription) => {
    if (!subscription || !subscription.subscription_end_date) {
      console.log(" No subscription or end date:", { subscription });
      return false;
    }
    const endDate = new Date(subscription.subscription_end_date);
    const now = /* @__PURE__ */ new Date();
    const daysRemaining = Math.ceil((endDate.getTime() - now.getTime()) / (1e3 * 60 * 60 * 24));
    console.log(" Checking subscription expiry:", {
      endDate: subscription.subscription_end_date,
      daysRemaining,
      shouldShowExtend: daysRemaining <= 30
    });
    return daysRemaining <= 30;
  };
  const contractorsWithSubscriptions = contractors.filter(
    (contractor) => contractor.profiles?.subscription_plan_id
  );
  const handleEditPlan = (plan) => {
    setEditingPlan(plan);
    setPlanForm({
      name: plan.name,
      price: plan.price,
      days: plan.days || plan.duration_days || 30
    });
    setShowEditDialog(true);
  };
  const handleCreatePlan = () => {
    setEditingPlan(null);
    setPlanForm({
      name: "",
      price: 0,
      days: 30
    });
    setShowCreateDialog(true);
  };
  const handleSavePlan = async () => {
    try {
      if (editingPlan) {
        await SubscriptionAPI.updateSubscriptionPlan(editingPlan.id, planForm);
        toast2({
          title: "Success",
          description: "Plan updated successfully"
        });
      } else {
        await SubscriptionAPI.createSubscriptionPlan(planForm);
        toast2({
          title: "Success",
          description: "Plan created successfully"
        });
      }
      await fetchData();
      setShowEditDialog(false);
      setShowCreateDialog(false);
    } catch (error) {
      console.error("Error saving plan:", error);
      toast2({
        variant: "destructive",
        title: "Error",
        description: "Failed to save plan"
      });
    }
  };
  const handleDeletePlan = (plan) => {
    setPlanToDelete(plan);
    setShowDeleteDialog(true);
  };
  const confirmDeletePlan = async () => {
    if (!planToDelete) return;
    try {
      await SubscriptionAPI.deleteSubscriptionPlan(planToDelete.id);
      toast2({
        title: "Success",
        description: "Plan deleted successfully"
      });
      await fetchData();
      setShowDeleteDialog(false);
      setPlanToDelete(null);
    } catch (error) {
      console.error("Error deleting plan:", error);
      toast2({
        variant: "destructive",
        title: "Error",
        description: "Failed to delete plan"
      });
    }
  };
  const handleExtendSubscription = (contractor) => {
    console.log(" handleExtendSubscription called with contractor:", contractor);
    setContractorToExtend(contractor);
    setExtendDays(30);
    setSelectedPlanId(contractor.profiles?.subscription_plan_id || "");
    setExtendMode("extend");
    setShowExtendDialog(true);
    console.log(" Dialog should now be open, showExtendDialog:", true);
  };
  const confirmExtendSubscription = async () => {
    console.log(" confirmExtendSubscription called");
    console.log(" contractorToExtend:", contractorToExtend);
    console.log(" extendDays:", extendDays);
    console.log(" extendMode:", extendMode);
    console.log(" selectedPlanId:", selectedPlanId);
    if (!contractorToExtend) {
      console.error(" No contractor selected for extension");
      toast2({
        variant: "destructive",
        title: "Error",
        description: "No contractor selected for extension"
      });
      return;
    }
    if (extendMode === "change" && !selectedPlanId) {
      console.error(" No plan selected for change");
      toast2({
        variant: "destructive",
        title: "Error",
        description: "Please select a plan to change to"
      });
      return;
    }
    console.log(" Processing subscription for contractor:", {
      contractorId: contractorToExtend.id,
      userId: contractorToExtend.user_id,
      companyName: contractorToExtend.company_name,
      extendDays,
      extendMode,
      selectedPlanId
    });
    try {
      if (extendMode === "extend") {
        console.log(" Calling SubscriptionAPI.extendSubscription...");
        await SubscriptionAPI.extendSubscription(contractorToExtend.user_id, extendDays);
        console.log(" SubscriptionAPI.extendSubscription successful");
        const now = /* @__PURE__ */ new Date();
        const newEndDate = new Date(now.getTime() + extendDays * 24 * 60 * 60 * 1e3);
        setAllContractors((prev) => prev.map((contractor) => {
          if (contractor.user_id === contractorToExtend.user_id) {
            return {
              ...contractor,
              profiles: {
                ...contractor.profiles,
                subscription_start_date: now.toISOString(),
                subscription_end_date: newEndDate.toISOString(),
                subscription_status: "active"
              }
            };
          }
          return contractor;
        }));
        toast2({
          title: "Success",
          description: `Subscription extended for ${extendDays} days. Start date reset to current time.`
        });
      } else {
        console.log(" Calling SubscriptionAPI.assignSubscription for plan change...");
        await SubscriptionAPI.assignSubscription(contractorToExtend.user_id, selectedPlanId, extendDays);
        console.log(" SubscriptionAPI.assignSubscription successful");
        const now = /* @__PURE__ */ new Date();
        const newEndDate = new Date(now.getTime() + extendDays * 24 * 60 * 60 * 1e3);
        setAllContractors((prev) => prev.map((contractor) => {
          if (contractor.user_id === contractorToExtend.user_id) {
            return {
              ...contractor,
              profiles: {
                ...contractor.profiles,
                subscription_plan_id: selectedPlanId,
                subscription_start_date: now.toISOString(),
                subscription_end_date: newEndDate.toISOString(),
                subscription_status: "active"
              }
            };
          }
          return contractor;
        }));
        toast2({
          title: "Success",
          description: `Subscription plan changed and extended for ${extendDays} days.`
        });
      }
      setShowExtendDialog(false);
      setContractorToExtend(null);
      setSelectedPlanId("");
      setExtendMode("extend");
      console.log(" Waiting for database update...");
      setTimeout(async () => {
        console.log(" Refreshing data after subscription update...");
        await fetchData(true);
      }, 1e3);
    } catch (error) {
      console.error(" Error processing subscription:", error);
      console.error(" Error details:", {
        message: error.message,
        code: error.code,
        details: error.details,
        hint: error.hint
      });
      toast2({
        variant: "destructive",
        title: "Error",
        description: error.message || "Failed to process subscription"
      });
    }
  };
  const activeSubscriptions = contractorsWithSubscriptions.filter((contractor) => {
    if (!contractor.profiles?.subscription_end_date) return false;
    const endDate = new Date(contractor.profiles.subscription_end_date);
    const now = /* @__PURE__ */ new Date();
    const daysRemaining = Math.ceil((endDate.getTime() - now.getTime()) / (1e3 * 60 * 60 * 24));
    return contractor.profiles?.subscription_status === "active" && daysRemaining > 0;
  });
  const expiringSubscriptions = contractorsWithSubscriptions.filter((contractor) => {
    if (!contractor.profiles?.subscription_end_date) return false;
    const endDate = new Date(contractor.profiles.subscription_end_date);
    const now = /* @__PURE__ */ new Date();
    const daysRemaining = Math.ceil((endDate.getTime() - now.getTime()) / (1e3 * 60 * 60 * 24));
    return daysRemaining <= 7 && daysRemaining > 0;
  });
  const expiredSubscriptions = contractorsWithSubscriptions.filter((contractor) => {
    if (!contractor.profiles?.subscription_end_date) return false;
    const endDate = new Date(contractor.profiles.subscription_end_date);
    const now = /* @__PURE__ */ new Date();
    const daysRemaining = Math.ceil((endDate.getTime() - now.getTime()) / (1e3 * 60 * 60 * 24));
    return contractor.profiles?.subscription_status === "expired" || daysRemaining <= 0;
  });
  const totalPlanAmount = contractorsWithSubscriptions.reduce((total, contractor) => {
    const planPrice = contractor.profiles?.subscription_plan_id ? plans.find((plan) => plan.id === contractor.profiles.subscription_plan_id)?.price || 0 : 0;
    return total + planPrice;
  }, 0);
  const [financialData, setFinancialData] = reactExports.useState({
    todayAssignments: 0,
    todayRevenue: 0,
    last7DaysRevenue: 0,
    lastMonthRevenue: 0
  });
  reactExports.useEffect(() => {
    if (contractorsWithSubscriptions.length > 0 && plans.length > 0) {
      console.log(" Calculating financial data from current subscriptions...");
      const today = /* @__PURE__ */ new Date();
      const todayStart = new Date(today.getFullYear(), today.getMonth(), today.getDate());
      const todayAssignments2 = contractorsWithSubscriptions.filter((contractor) => {
        const startDate = new Date(contractor.profiles?.subscription_start_date || "");
        return startDate >= todayStart;
      }).length;
      const todayRevenue2 = contractorsWithSubscriptions.reduce((total, contractor) => {
        const startDate = new Date(contractor.profiles?.subscription_start_date || "");
        if (startDate >= todayStart) {
          const planPrice = contractor.profiles?.subscription_plan_id ? plans.find((plan) => plan.id === contractor.profiles.subscription_plan_id)?.price || 0 : 0;
          return total + planPrice;
        }
        return total;
      }, 0);
      const calculatedData = {
        todayAssignments: todayAssignments2,
        todayRevenue: todayRevenue2,
        last7DaysRevenue: todayRevenue2 * 2,
        // Mock calculation
        lastMonthRevenue: todayRevenue2 * 4
        // Mock calculation
      };
      console.log(" Calculated financial data:", calculatedData);
      setFinancialData(calculatedData);
    }
  }, [contractorsWithSubscriptions, plans]);
  const { todayAssignments, todayRevenue, last7DaysRevenue, lastMonthRevenue } = financialData;
  const fetchContractorHistory = async (contractorId, page2 = 1, pageSize2) => {
    try {
      setHistoryLoading(true);
      const currentPageSize = pageSize2 || historyPageSize;
      console.log(" Fetching subscription history for contractor:", contractorId, "page:", page2, "pageSize:", currentPageSize);
      const history = await SubscriptionDashboardAPI.getContractorSubscriptionHistory(contractorId);
      console.log(" Subscription history received:", history);
      const totalItems = history.length;
      const totalPages2 = Math.ceil(totalItems / currentPageSize);
      const startIndex = (page2 - 1) * currentPageSize;
      const endIndex = startIndex + currentPageSize;
      const paginatedHistory = history.slice(startIndex, endIndex);
      console.log(" Pagination calculation:", {
        totalItems,
        currentPageSize,
        totalPages: totalPages2,
        startIndex,
        endIndex,
        paginatedHistoryLength: paginatedHistory.length
      });
      setSubscriptionHistory(paginatedHistory);
      setHistoryTotalPages(totalPages2);
      setHistoryPage(page2);
      if (pageSize2) {
        setHistoryPageSize(pageSize2);
      }
      setSelectedContractorHistory(contractors.find((c) => c.user_id === contractorId));
      setShowHistoryDialog(true);
    } catch (error) {
      console.error(" Error fetching subscription history:", error);
      toast2({
        variant: "destructive",
        title: "Error",
        description: "Failed to fetch subscription history"
      });
    } finally {
      setHistoryLoading(false);
    }
  };
  console.log(" Subscription Counts Debug:", {
    totalContractors: contractors.length,
    contractorsWithSubscriptions: contractorsWithSubscriptions.length,
    activeSubscriptions: activeSubscriptions.length,
    expiringSubscriptions: expiringSubscriptions.length,
    expiredSubscriptions: expiredSubscriptions.length,
    breakdown: {
      active: activeSubscriptions.map((c) => ({ id: c.id, company: c.company_name, status: c.profiles?.subscription_status, daysRemaining: getDaysRemainingNumber(c.profiles) })),
      expiring: expiringSubscriptions.map((c) => ({ id: c.id, company: c.company_name, status: c.profiles?.subscription_status, daysRemaining: getDaysRemainingNumber(c.profiles) })),
      expired: expiredSubscriptions.map((c) => ({ id: c.id, company: c.company_name, status: c.profiles?.subscription_status, daysRemaining: getDaysRemainingNumber(c.profiles) }))
    }
  });
  if (loading) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-6", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-12", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Loading subscription data..." })
    ] }) });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsx(TooltipProvider, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Total Contractors",
          value: contractors.length.toString(),
          description: "Registered contractors",
          icon: Users,
          variant: "info"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Active Subscriptions",
          value: activeSubscriptions.length.toString(),
          description: "Currently active",
          icon: CircleCheckBig,
          variant: "success"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Expiring Soon",
          value: expiringSubscriptions.length.toString(),
          description: "Next 7 days",
          icon: TriangleAlert,
          variant: "warning"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Expired Subscriptions",
          value: expiredSubscriptions.length.toString(),
          description: "Need renewal",
          icon: X$1,
          variant: "danger"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Available Plans",
          value: plans.length.toString(),
          description: "Subscription plans",
          icon: CreditCard,
          variant: "default"
        }
      )
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Total Plan Value",
          value: `${totalPlanAmount}`,
          description: "All active plans",
          icon: CreditCard,
          variant: "success"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Today's Assignments",
          value: todayAssignments.toString(),
          description: "Plans assigned today",
          icon: CalendarPlus,
          variant: "info"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Today's Revenue",
          value: `${todayRevenue}`,
          description: "Revenue today",
          icon: CreditCard,
          variant: "success"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Last 7 Days",
          value: `${last7DaysRevenue}`,
          description: "Weekly revenue",
          icon: TrendingUp,
          variant: "warning"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Last Month",
          value: `${lastMonthRevenue}`,
          description: "Monthly revenue",
          icon: Calendar,
          variant: "info"
        }
      )
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { children: "Available Subscription Plans" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Current subscription plans available for assignment" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { onClick: handleCreatePlan, size: "sm", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Plus, { className: "h-4 w-4 mr-2" }),
          "Add Plan"
        ] })
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: plans.length === 0 ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-8", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(CreditCard, { className: "h-12 w-12 text-muted-foreground mx-auto mb-4" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-medium mb-2", children: "No subscription plans found" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Please check if the database migration has been applied" })
      ] }) : /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: plans.map((plan) => /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "p-4 relative group hover:shadow-lg transition-shadow", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between mb-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "font-semibold", children: plan.name }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-2xl font-bold", children: [
              "",
              plan.price
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex gap-1 ml-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Button,
                {
                  size: "sm",
                  variant: "outline",
                  onClick: () => handleEditPlan(plan),
                  className: "h-7 w-7 p-0 border-blue-300 text-blue-600 hover:bg-blue-50 hover:border-blue-400",
                  title: "Edit Plan",
                  children: /* @__PURE__ */ jsxRuntimeExports.jsx(SquarePen, { className: "h-3.5 w-3.5" })
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Button,
                {
                  size: "sm",
                  variant: "outline",
                  onClick: () => handleDeletePlan(plan),
                  className: "h-7 w-7 p-0 border-red-300 text-red-600 hover:bg-red-50 hover:border-red-400",
                  title: "Delete Plan",
                  children: /* @__PURE__ */ jsxRuntimeExports.jsx(Trash2, { className: "h-3.5 w-3.5" })
                }
              )
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-2 text-sm text-muted-foreground", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Calendar, { className: "h-4 w-4" }),
          plan.days || plan.duration_days || 30,
          " days"
        ] }) })
      ] }, plan.id)) }) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { children: "Contractor Subscriptions" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "All contractor subscription details and status" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-3", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            "input",
            {
              value: search,
              onChange: (e) => {
                setPage(1);
                setSearch(e.target.value);
              },
              placeholder: "Search contractors...",
              className: "h-9 w-56 rounded-md border px-3 text-sm"
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(
            "select",
            {
              value: pageSize,
              onChange: (e) => {
                setPage(1);
                setPageSize(Number(e.target.value));
              },
              className: "h-9 rounded-md border px-2 text-sm",
              children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("option", { value: 5, children: "5" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("option", { value: 10, children: "10" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("option", { value: 20, children: "20" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("option", { value: 50, children: "50" })
              ]
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { onClick: onAssignSubscription, children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(CreditCard, { className: "h-4 w-4 mr-2" }),
            "Assign Subscription"
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: contractorsWithSubscriptions.length === 0 ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-8", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Users, { className: "h-12 w-12 text-muted-foreground mx-auto mb-4" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-medium mb-2", children: "No contractor subscriptions found" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground mb-4", children: "No contractors have active subscriptions yet" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { onClick: onAssignSubscription, children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(CreditCard, { className: "h-4 w-4 mr-2" }),
          "Assign First Subscription"
        ] })
      ] }) : /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(Table, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(TableHeader, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(TableRow, { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: "Contractor" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: "Current Plan" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: "Status" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: "Expires" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: "Days Left" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(TableHead, { children: "Actions" })
          ] }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(TableBody, { children: contractorsWithSubscriptions.map((contractor) => {
            console.log(" Contractor data:", {
              companyName: contractor.company_name,
              subscriptionStatus: contractor.profiles?.subscription_status,
              subscriptionEndDate: contractor.profiles?.subscription_end_date,
              daysRemaining: getDaysRemaining(contractor.profiles),
              shouldShowExtend: isSubscriptionExpiring(contractor.profiles) || contractor.profiles?.subscription_status === "expired"
            });
            return /* @__PURE__ */ jsxRuntimeExports.jsxs(TableRow, { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "font-medium", children: contractor.company_name }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-sm text-muted-foreground", children: contractor.profiles?.user_name || contractor.profiles?.email })
              ] }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "font-medium", children: contractor.profiles?.subscription_plans?.name || "Unknown Plan" }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-sm text-muted-foreground", children: [
                  "",
                  contractor.profiles?.subscription_plans?.price || 0,
                  "/month"
                ] })
              ] }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
                getStatusIcon(contractor.profiles),
                getStatusBadge(contractor.profiles)
              ] }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: contractor.profiles?.subscription_end_date ? formatDate(contractor.profiles.subscription_end_date) : "N/A" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: getDaysRemaining(contractor.profiles).includes("Expired") || getDaysRemaining(contractor.profiles).includes("7 days") || getDaysRemaining(contractor.profiles).includes("6 days") || getDaysRemaining(contractor.profiles).includes("5 days") || getDaysRemaining(contractor.profiles).includes("4 days") || getDaysRemaining(contractor.profiles).includes("3 days") || getDaysRemaining(contractor.profiles).includes("2 days") || getDaysRemaining(contractor.profiles).includes("1 days") ? "text-red-500 font-medium" : "", children: getDaysRemaining(contractor.profiles) }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(TableCell, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  Button,
                  {
                    variant: "outline",
                    size: "sm",
                    onClick: () => {
                      setHistoryPage(1);
                      setHistoryPageSize(5);
                      fetchContractorHistory(contractor.user_id, 1);
                    },
                    disabled: historyLoading,
                    children: historyLoading ? "Loading..." : "History"
                  }
                ),
                (() => {
                  const daysRemaining = getDaysRemainingNumber(contractor.profiles);
                  const isExpired = daysRemaining <= 0;
                  const isExpiring = isSubscriptionExpiring(contractor.profiles);
                  const hasSubscription = contractor.profiles?.subscription_plan_id;
                  console.log(" Button rendering for contractor:", {
                    companyName: contractor.company_name,
                    daysRemaining,
                    isExpired,
                    isExpiring,
                    hasSubscription,
                    subscriptionStatus: contractor.profiles?.subscription_status
                  });
                  if (!hasSubscription) return null;
                  return /* @__PURE__ */ jsxRuntimeExports.jsxs(Tooltip, { children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx(TooltipTrigger, { asChild: true, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
                      Button,
                      {
                        variant: "outline",
                        size: "sm",
                        onClick: () => handleExtendSubscription(contractor),
                        className: "text-blue-600 border-blue-300 hover:bg-blue-100 hover:border-blue-500 hover:text-blue-700",
                        children: [
                          /* @__PURE__ */ jsxRuntimeExports.jsx(CalendarPlus, { className: "h-4 w-4 mr-1" }),
                          isExpired ? "Renew" : "Extend"
                        ]
                      }
                    ) }),
                    /* @__PURE__ */ jsxRuntimeExports.jsx(TooltipContent, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { children: [
                      isExpired ? "Renew expired subscription for" : "Extend subscription for",
                      " ",
                      contractor.company_name
                    ] }) })
                  ] });
                })()
              ] }) })
            ] }, contractor.id);
          }) })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between mt-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-sm text-muted-foreground", children: [
            "Page ",
            page,
            " of ",
            totalPages
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "outline", size: "sm", disabled: page <= 1, onClick: () => setPage((p2) => Math.max(1, p2 - 1)), children: "Prev" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "outline", size: "sm", disabled: page >= totalPages, onClick: () => setPage((p2) => Math.min(totalPages, p2 + 1)), children: "Next" })
          ] })
        ] })
      ] }) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: showEditDialog, onOpenChange: setShowEditDialog, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(DialogTitle, { children: "Edit Subscription Plan" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(DialogDescription, { children: "Update the details of this subscription plan" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "plan-name", children: "Plan Name" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Input,
            {
              id: "plan-name",
              value: planForm.name,
              onChange: (e) => setPlanForm((prev) => ({ ...prev, name: e.target.value })),
              placeholder: "Enter plan name"
            }
          )
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "plan-price", children: "Price ()" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Input,
            {
              id: "plan-price",
              type: "number",
              value: planForm.price,
              onChange: (e) => setPlanForm((prev) => ({ ...prev, price: Number(e.target.value) })),
              placeholder: "Enter price"
            }
          )
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "plan-days", children: "Days" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Input,
            {
              id: "plan-days",
              type: "number",
              value: planForm.days,
              onChange: (e) => setPlanForm((prev) => ({ ...prev, days: Number(e.target.value) })),
              placeholder: "Enter number of days",
              min: "1"
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-xs text-muted-foreground", children: "Number of days the subscription plan will be valid for when assigned" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-end space-x-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "outline", onClick: () => setShowEditDialog(false), children: "Cancel" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { onClick: handleSavePlan, children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Save, { className: "h-4 w-4 mr-2" }),
            "Save Changes"
          ] })
        ] })
      ] })
    ] }) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: showCreateDialog, onOpenChange: setShowCreateDialog, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(DialogTitle, { children: "Create New Subscription Plan" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(DialogDescription, { children: "Add a new subscription plan to the system" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "new-plan-name", children: "Plan Name" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Input,
            {
              id: "new-plan-name",
              value: planForm.name,
              onChange: (e) => setPlanForm((prev) => ({ ...prev, name: e.target.value })),
              placeholder: "Enter plan name"
            }
          )
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "new-plan-price", children: "Price ()" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Input,
            {
              id: "new-plan-price",
              type: "number",
              value: planForm.price,
              onChange: (e) => setPlanForm((prev) => ({ ...prev, price: Number(e.target.value) })),
              placeholder: "Enter price"
            }
          )
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "new-plan-days", children: "Days" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Input,
            {
              id: "new-plan-days",
              type: "number",
              value: planForm.days,
              onChange: (e) => setPlanForm((prev) => ({ ...prev, days: Number(e.target.value) })),
              placeholder: "Enter number of days",
              min: "1"
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-xs text-muted-foreground", children: "Number of days the subscription plan will be valid for when assigned" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-end space-x-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "outline", onClick: () => setShowCreateDialog(false), children: "Cancel" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { onClick: handleSavePlan, children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Plus, { className: "h-4 w-4 mr-2" }),
            "Create Plan"
          ] })
        ] })
      ] })
    ] }) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(AlertDialog, { open: showDeleteDialog, onOpenChange: setShowDeleteDialog, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(AlertDialogContent, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(AlertDialogHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(AlertDialogTitle, { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Trash2, { className: "h-5 w-5 text-red-600" }),
          "Delete Subscription Plan"
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(AlertDialogDescription, { className: "text-base", children: [
          "Are you sure you want to delete the ",
          /* @__PURE__ */ jsxRuntimeExports.jsxs("strong", { children: [
            '"',
            planToDelete?.name,
            '"'
          ] }),
          " plan?",
          /* @__PURE__ */ jsxRuntimeExports.jsx("br", {}),
          /* @__PURE__ */ jsxRuntimeExports.jsx("br", {}),
          "This action cannot be undone. The plan will be permanently removed from the system.",
          /* @__PURE__ */ jsxRuntimeExports.jsx("br", {}),
          /* @__PURE__ */ jsxRuntimeExports.jsx("br", {}),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-red-600 font-medium", children: " This may affect contractors who are currently using this plan." })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(AlertDialogFooter, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(AlertDialogCancel, { onClick: () => setShowDeleteDialog(false), children: "Cancel" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(
          AlertDialogAction,
          {
            onClick: confirmDeletePlan,
            className: "bg-red-600 hover:bg-red-700 focus:ring-red-600",
            children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Trash2, { className: "h-4 w-4 mr-2" }),
              "Delete Plan"
            ]
          }
        )
      ] })
    ] }) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: showExtendDialog, onOpenChange: (open) => {
      console.log(" Dialog onOpenChange called with:", open);
      setShowExtendDialog(open);
    }, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { children: [
      console.log(" Dialog rendering with state:", {
        showExtendDialog,
        contractorToExtend: !!contractorToExtend,
        extendDays,
        buttonDisabled: !contractorToExtend || extendDays <= 0
      }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogTitle, { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(CalendarPlus, { className: "h-5 w-5 text-blue-600" }),
          extendMode === "extend" ? "Extend Subscription" : "Change Plan & Extend"
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(DialogDescription, { children: extendMode === "extend" ? `Extend the subscription for ${contractorToExtend?.company_name || "this contractor"}` : `Change plan and extend subscription for ${contractorToExtend?.company_name || "this contractor"}` })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
        contractorToExtend && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-gray-50 p-4 rounded-lg", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-sm text-muted-foreground mb-2", children: "Contractor Details" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "font-medium", children: contractorToExtend.company_name }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-sm text-muted-foreground", children: contractorToExtend.profiles?.user_name || contractorToExtend.profiles?.email }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-sm text-muted-foreground mt-1", children: [
            "Current Plan: ",
            contractorToExtend.profiles?.subscription_plans?.name || "Unknown Plan"
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-sm text-muted-foreground", children: [
            "Expires: ",
            contractorToExtend.profiles?.subscription_end_date ? formatDate(contractorToExtend.profiles.subscription_end_date) : "N/A"
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-sm text-muted-foreground", children: [
            "Days Remaining: ",
            getDaysRemaining(contractorToExtend.profiles)
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { children: "Action Type" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex space-x-4", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("label", { className: "flex items-center space-x-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                "input",
                {
                  type: "radio",
                  name: "extendMode",
                  value: "extend",
                  checked: extendMode === "extend",
                  onChange: (e) => setExtendMode(e.target.value),
                  className: "text-blue-600"
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm", children: "Extend Current Plan" })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("label", { className: "flex items-center space-x-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                "input",
                {
                  type: "radio",
                  name: "extendMode",
                  value: "change",
                  checked: extendMode === "change",
                  onChange: (e) => setExtendMode(e.target.value),
                  className: "text-blue-600"
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm", children: "Change Plan & Extend" })
            ] })
          ] })
        ] }),
        extendMode === "change" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "plan-select", children: "Select New Plan" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: selectedPlanId, onValueChange: (planId) => {
            setSelectedPlanId(planId);
            const selectedPlanData = plans.find((p2) => p2.id === planId);
            if (selectedPlanData) {
              const planDays = selectedPlanData.days || selectedPlanData.duration_days || 30;
              setExtendDays(planDays);
            }
          }, children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { placeholder: "Choose a subscription plan" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectContent, { children: plans.map((plan) => /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectItem, { value: plan.id, children: [
              plan.name,
              " - ",
              plan.price,
              " (",
              plan.days || plan.duration_days || 30,
              " days)"
            ] }, plan.id)) })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-xs text-muted-foreground", children: "Select the new plan to assign to this contractor. Duration will be automatically set from the plan." })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "extend-days", children: "Extension Period (Days)" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Input,
            {
              id: "extend-days",
              type: "number",
              value: extendDays,
              onChange: (e) => setExtendDays(Number(e.target.value)),
              min: "1",
              max: "365",
              placeholder: "Enter number of days to extend"
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-xs text-muted-foreground", children: extendMode === "extend" ? "The subscription will be extended from the current end date" : "The new plan will be assigned and extended for the specified days" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-end space-x-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "outline", onClick: () => setShowExtendDialog(false), children: "Cancel" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(
            Button,
            {
              onClick: () => {
                console.log(" Extend Subscription button clicked");
                console.log(" Button state check:", {
                  contractorToExtend: !!contractorToExtend,
                  extendDays,
                  extendMode,
                  selectedPlanId,
                  isDisabled: !contractorToExtend || extendDays <= 0 || extendMode === "change" && !selectedPlanId
                });
                confirmExtendSubscription();
              },
              disabled: !contractorToExtend || extendDays <= 0 || extendMode === "change" && !selectedPlanId,
              className: "bg-blue-600 hover:bg-blue-700",
              children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(CalendarPlus, { className: "h-4 w-4 mr-2" }),
                extendMode === "extend" ? "Extend Subscription" : "Change Plan & Extend"
              ]
            }
          )
        ] })
      ] })
    ] }) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: showHistoryDialog, onOpenChange: setShowHistoryDialog, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { className: "max-w-4xl max-h-[80vh] overflow-y-auto", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(DialogTitle, { children: "Subscription History" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogDescription, { children: [
          "Complete subscription timeline for ",
          selectedContractorHistory?.company_name
        ] })
      ] }),
      historyLoading ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-center py-8", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-primary" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "ml-2", children: "Loading history..." })
      ] }) : subscriptionHistory.length === 0 ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-center py-8 text-muted-foreground", children: "No subscription history found for this contractor." }) : /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
        subscriptionHistory.map((history, index) => /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { className: "p-4", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start justify-between", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex-1", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2 mb-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: history.action === "assigned" ? "default" : history.action === "extended" ? "secondary" : history.action === "cancelled" ? "destructive" : "outline", children: history.action.charAt(0).toUpperCase() + history.action.slice(1) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-medium", children: history.plan_name }),
              history.previous_plan_name && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-muted-foreground", children: [
                "(from ",
                history.previous_plan_name,
                ")"
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4 text-sm", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "font-medium text-muted-foreground", children: "Start Date" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { children: formatDate(history.new_start_date) })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "font-medium text-muted-foreground", children: "End Date" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { children: formatDate(history.new_end_date) })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "font-medium text-muted-foreground", children: "Duration" }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                  history.duration_days,
                  " days"
                ] })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "font-medium text-muted-foreground", children: "Amount Paid" }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "font-semibold text-green-600", children: [
                  "",
                  history.amount_paid
                ] })
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-right text-sm text-muted-foreground", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { children: formatDate(history.created_on) }) })
        ] }) }, history.id)),
        historyTotalPages > 1 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between pt-4 border-t", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-sm text-muted-foreground", children: [
              "Page ",
              historyPage,
              " of ",
              historyTotalPages
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs(
              "select",
              {
                value: historyPageSize,
                onChange: (e) => {
                  const newPageSize = Number(e.target.value);
                  console.log(" Page size changed to:", newPageSize);
                  fetchContractorHistory(selectedContractorHistory?.user_id, 1, newPageSize);
                },
                className: "px-2 py-1 text-sm border rounded",
                children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("option", { value: 5, children: "5 per page" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("option", { value: 10, children: "10 per page" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("option", { value: 20, children: "20 per page" })
                ]
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Button,
              {
                variant: "outline",
                size: "sm",
                onClick: () => fetchContractorHistory(selectedContractorHistory?.user_id, historyPage - 1, historyPageSize),
                disabled: historyPage <= 1,
                children: "Previous"
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center space-x-1", children: Array.from({ length: Math.min(5, historyTotalPages) }, (_, i2) => {
              const pageNum = Math.max(1, Math.min(historyTotalPages - 4, historyPage - 2)) + i2;
              if (pageNum > historyTotalPages) return null;
              return /* @__PURE__ */ jsxRuntimeExports.jsx(
                Button,
                {
                  variant: pageNum === historyPage ? "default" : "outline",
                  size: "sm",
                  onClick: () => fetchContractorHistory(selectedContractorHistory?.user_id, pageNum, historyPageSize),
                  className: "w-8 h-8 p-0",
                  children: pageNum
                },
                pageNum
              );
            }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Button,
              {
                variant: "outline",
                size: "sm",
                onClick: () => fetchContractorHistory(selectedContractorHistory?.user_id, historyPage + 1, historyPageSize),
                disabled: historyPage >= historyTotalPages,
                children: "Next"
              }
            )
          ] })
        ] })
      ] })
    ] }) })
  ] }) });
}
function Subscriptions() {
  const [plans, setPlans] = reactExports.useState([]);
  const [contractors, setContractors] = reactExports.useState([]);
  const [expiringSubscriptions, setExpiringSubscriptions] = reactExports.useState([]);
  const [expiredSubscriptions, setExpiredSubscriptions] = reactExports.useState([]);
  const [loading, setLoading] = reactExports.useState(true);
  const [selectedContractor, setSelectedContractor] = reactExports.useState("");
  const [selectedPlan, setSelectedPlan] = reactExports.useState("");
  const [durationDays, setDurationDays] = reactExports.useState(30);
  const [showAssignDialog, setShowAssignDialog] = reactExports.useState(false);
  reactExports.useState(false);
  reactExports.useState(30);
  const { toast: toast2 } = useToast();
  const contractorOptions = contractors.map((contractor) => ({
    value: contractor.user_id,
    label: `${contractor.company_name} - ${contractor.profiles?.user_name || contractor.profiles?.email}`,
    searchableText: `${contractor.company_name} ${contractor.profiles?.user_name || ""} ${contractor.profiles?.email || ""}`.toLowerCase()
  }));
  reactExports.useEffect(() => {
    fetchData();
  }, []);
  const fetchData = async () => {
    try {
      setLoading(true);
      console.log("Fetching subscription data...");
      let plansData = [];
      let contractorsData = [];
      let expiringData = [];
      let expiredData = [];
      try {
        console.log("Fetching subscription plans...");
        plansData = await SubscriptionAPI.getSubscriptionPlans();
        console.log("Plans data received:", plansData);
        console.log("Plans count:", plansData?.length || 0);
      } catch (error) {
        console.error("Error fetching plans:", error);
        console.error("Error details:", error.message);
        console.error("Error code:", error.code);
        toast2({
          variant: "destructive",
          title: "Error",
          description: `Failed to fetch subscription plans: ${error.message}`
        });
      }
      try {
        contractorsData = await ContractorAPI.getAllContractors();
        console.log("Contractors data:", contractorsData);
      } catch (error) {
        console.error("Error fetching contractors:", error);
        toast2({
          variant: "destructive",
          title: "Error",
          description: "Failed to fetch contractors"
        });
      }
      try {
        expiringData = await SubscriptionAPI.getExpiringSubscriptions(7);
        console.log("Expiring data:", expiringData);
      } catch (error) {
        console.error("Error fetching expiring subscriptions:", error);
      }
      try {
        expiredData = await SubscriptionAPI.getExpiredSubscriptions();
        console.log("Expired data:", expiredData);
      } catch (error) {
        console.error("Error fetching expired subscriptions:", error);
      }
      setPlans(plansData);
      setContractors(contractorsData);
      setExpiringSubscriptions(expiringData);
      setExpiredSubscriptions(expiredData);
    } catch (error) {
      console.error("Error fetching subscription data:", error);
      toast2({
        variant: "destructive",
        title: "Error",
        description: "Failed to fetch subscription data"
      });
    } finally {
      setLoading(false);
    }
  };
  const handleAssignSubscription = async () => {
    if (!selectedContractor || !selectedPlan) {
      toast2({
        variant: "destructive",
        title: "Error",
        description: "Please select contractor and plan"
      });
      return;
    }
    console.log(" UI Assignment starting...");
    console.log("  selectedContractor:", selectedContractor);
    console.log("  selectedPlan:", selectedPlan);
    console.log("  durationDays:", durationDays);
    try {
      await SubscriptionAPI.assignSubscription(selectedContractor, selectedPlan, durationDays);
      console.log(" UI Assignment successful");
      toast2({
        title: "Success",
        description: "Subscription assigned successfully"
      });
      setShowAssignDialog(false);
      fetchData();
    } catch (error) {
      console.error(" UI Assignment failed:", error);
      toast2({
        variant: "destructive",
        title: "Error",
        description: error.message || "Failed to assign subscription"
      });
    }
  };
  if (loading) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-center h-96", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "animate-spin rounded-full h-12 w-12 border-b-2 border-parkflow-blue" }) });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: showAssignDialog, onOpenChange: setShowAssignDialog, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(DialogTitle, { children: "Assign Subscription" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(DialogDescription, { children: "Assign a subscription plan to a contractor" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "contractor", children: "Select Contractor" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Combobox,
            {
              options: contractorOptions,
              value: selectedContractor,
              onValueChange: setSelectedContractor,
              placeholder: "Search and select a contractor...",
              emptyText: "No contractors found"
            }
          )
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "plan", children: "Subscription Plan" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Select, { value: selectedPlan, onValueChange: (planId) => {
            setSelectedPlan(planId);
            const selectedPlanData = plans.find((p2) => p2.id === planId);
            if (selectedPlanData) {
              const planDays = selectedPlanData.days || selectedPlanData.duration_days || 30;
              setDurationDays(planDays);
            }
          }, children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectTrigger, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectValue, { placeholder: "Select a plan" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(SelectContent, { children: plans.map((plan) => /* @__PURE__ */ jsxRuntimeExports.jsxs(SelectItem, { value: plan.id, children: [
              plan.name,
              " - ",
              plan.price,
              " (",
              plan.days || plan.duration_days || 30,
              " days)"
            ] }, plan.id)) })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "duration", children: "Duration (Days)" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Input,
            {
              id: "duration",
              type: "number",
              value: durationDays,
              onChange: (e) => setDurationDays(Number(e.target.value)),
              min: "1"
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-xs text-muted-foreground mt-1", children: "Duration will be automatically set from the selected plan. You can modify it if needed." })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { onClick: handleAssignSubscription, className: "w-full", children: "Assign Subscription" })
      ] })
    ] }) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(SimpleSubscriptionDashboard, { onAssignSubscription: () => setShowAssignDialog(true) })
  ] });
}
function Settings() {
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-3xl font-bold text-foreground", children: "Settings" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Configure system preferences and options" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Save, { className: "h-4 w-4 mr-2" }),
        "Save Changes"
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Profile Status",
          value: "Active",
          description: "Account configured",
          icon: User,
          variant: "success"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Notifications",
          value: "3",
          description: "Active channels",
          icon: Bell,
          variant: "info"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Security Level",
          value: "High",
          description: "2FA enabled",
          icon: Shield,
          variant: "success"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Data Backup",
          value: "Enabled",
          description: "Auto backup active",
          icon: Database,
          variant: "success"
        }
      )
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(User, { className: "h-5 w-5 mr-2" }),
            "Profile Settings"
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Manage your account and profile information" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-muted-foreground", children: "Update personal details" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "outline", className: "w-full", children: "Edit Profile" })
        ] }) })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Bell, { className: "h-5 w-5 mr-2" }),
            "Notifications"
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Configure notification preferences" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-muted-foreground", children: "Manage alerts and emails" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "outline", className: "w-full", children: "Configure" })
        ] }) })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Shield, { className: "h-5 w-5 mr-2" }),
            "Security"
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Security settings and access controls" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-muted-foreground", children: "Password and permissions" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "outline", className: "w-full", children: "Security" })
        ] }) })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Database, { className: "h-5 w-5 mr-2" }),
            "System"
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "System configuration and maintenance" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-muted-foreground", children: "Database and backups" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "outline", className: "w-full", children: "System" })
        ] }) })
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { children: "General Settings" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Basic system configuration options" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-medium", children: "Email Notifications" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-muted-foreground", children: "Receive email alerts for important events" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "outline", size: "sm", children: "Enable" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-medium", children: "Auto Backup" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-muted-foreground", children: "Automatically backup data daily" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "outline", size: "sm", children: "Enable" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-medium", children: "Maintenance Mode" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-muted-foreground", children: "Temporarily disable system access" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { variant: "outline", size: "sm", children: "Disable" })
        ] })
      ] }) })
    ] })
  ] });
}
var NAME = "Separator";
var DEFAULT_ORIENTATION = "horizontal";
var ORIENTATIONS = ["horizontal", "vertical"];
var Separator$1 = reactExports.forwardRef((props, forwardedRef) => {
  const { decorative, orientation: orientationProp = DEFAULT_ORIENTATION, ...domProps } = props;
  const orientation = isValidOrientation(orientationProp) ? orientationProp : DEFAULT_ORIENTATION;
  const ariaOrientation = orientation === "vertical" ? orientation : void 0;
  const semanticProps = decorative ? { role: "none" } : { "aria-orientation": ariaOrientation, role: "separator" };
  return /* @__PURE__ */ jsxRuntimeExports.jsx(
    Primitive.div,
    {
      "data-orientation": orientation,
      ...semanticProps,
      ...domProps,
      ref: forwardedRef
    }
  );
});
Separator$1.displayName = NAME;
function isValidOrientation(orientation) {
  return ORIENTATIONS.includes(orientation);
}
var Root = Separator$1;
const Separator = reactExports.forwardRef(({ className, orientation = "horizontal", decorative = true, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
  Root,
  {
    ref,
    decorative,
    orientation,
    className: cn("shrink-0 bg-border", orientation === "horizontal" ? "h-[1px] w-full" : "h-full w-[1px]", className),
    ...props
  }
));
Separator.displayName = Root.displayName;
function Profile() {
  const { profile, user, updateProfile } = useAuth();
  const { toast: toast2 } = useToast();
  const [isEditing, setIsEditing] = reactExports.useState(false);
  const [loading, setLoading] = reactExports.useState(false);
  const [formData, setFormData] = reactExports.useState({
    user_name: "",
    email: "",
    phone_number: "",
    contractor_name: "",
    attendant_name: ""
  });
  reactExports.useEffect(() => {
    if (profile) {
      setFormData({
        user_name: profile.user_name || "",
        email: profile.email || "",
        phone_number: profile.phone_number || "",
        contractor_name: profile.contractor_name || "",
        attendant_name: profile.attendant_name || ""
      });
    }
  }, [profile]);
  const handleSave = async () => {
    try {
      setLoading(true);
      if (!user?.id) {
        throw new Error("User not authenticated");
      }
      if (!formData.user_name.trim()) {
        throw new Error("Name is required");
      }
      if (!formData.email.trim()) {
        throw new Error("Email is required");
      }
      const updateData = {
        user_name: formData.user_name.trim(),
        phone_number: formData.phone_number.trim()
      };
      if (profile?.role === "contractor") {
        updateData.contractor_name = formData.contractor_name;
      } else if (profile?.role === "attendant") {
        updateData.attendant_name = formData.attendant_name;
      }
      const result = await updateProfile(updateData);
      if (result.success) {
        setIsEditing(false);
      } else {
        throw new Error(result.error?.message || "Failed to update profile");
      }
    } catch (error) {
      console.error("Profile update error:", error);
      toast2({
        variant: "destructive",
        title: "Error",
        description: error?.message || "Failed to update profile. Please try again."
      });
    } finally {
      setLoading(false);
    }
  };
  const handleCancel = () => {
    setFormData({
      user_name: profile?.user_name || "",
      email: profile?.email || "",
      phone_number: profile?.phone_number || "",
      contractor_name: profile?.contractor_name || "",
      attendant_name: profile?.attendant_name || ""
    });
    setIsEditing(false);
  };
  const getRoleColor = (role) => {
    switch (role) {
      case "super_admin":
        return "bg-red-100 text-red-800";
      case "contractor":
        return "bg-blue-100 text-blue-800";
      case "attendant":
        return "bg-green-100 text-green-800";
      default:
        return "bg-gray-100 text-gray-800";
    }
  };
  const getRoleLabel = (role) => {
    switch (role) {
      case "super_admin":
        return "Super Admin";
      case "contractor":
        return "Contractor";
      case "attendant":
        return "Attendant";
      default:
        return role;
    }
  };
  if (!profile) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-center h-64", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "animate-spin rounded-full h-12 w-12 border-b-2 border-parkflow-blue" }) });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-3xl font-bold text-foreground", children: "Profile" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Manage your account information and preferences" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex space-x-2", children: isEditing ? /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { onClick: handleSave, disabled: loading, children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Save, { className: "h-4 w-4 mr-2" }),
          loading ? "Saving..." : "Save Changes"
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { variant: "outline", onClick: handleCancel, children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(X$1, { className: "h-4 w-4 mr-2" }),
          "Cancel"
        ] })
      ] }) : /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { onClick: () => setIsEditing(true), children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(SquarePen, { className: "h-4 w-4 mr-2" }),
        "Edit Profile"
      ] }) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Account Status",
          value: "Active",
          description: "Account is active",
          icon: Shield,
          variant: "success"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Role",
          value: getRoleLabel(profile.role),
          description: "User permissions",
          icon: User,
          variant: "info"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Member Since",
          value: formatDate(user?.created_at || ""),
          description: "Account creation date",
          icon: Calendar,
          variant: "default"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        MetricCard,
        {
          title: "Last Login",
          value: "Today",
          description: "Most recent activity",
          icon: Calendar,
          variant: "success"
        }
      )
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "lg:col-span-2", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(User, { className: "h-5 w-5 mr-2" }),
            "Personal Information"
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Update your personal details and contact information" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "space-y-6", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-4", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs(Avatar, { className: "h-20 w-20", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(AvatarImage, { src: "", alt: profile.user_name }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(AvatarFallback, { className: "bg-parkflow-blue text-white text-lg", children: profile.user_name.charAt(0).toUpperCase() })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-lg font-semibold", children: profile.user_name }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: profile.email }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { className: `${getRoleColor(profile.role)} mt-2`, children: getRoleLabel(profile.role) })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(Separator, {}),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "user_name", children: "Full Name" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Input,
                {
                  id: "user_name",
                  value: formData.user_name,
                  onChange: (e) => setFormData({ ...formData, user_name: e.target.value }),
                  disabled: !isEditing
                }
              )
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "email", children: "Email Address" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Input,
                {
                  id: "email",
                  type: "email",
                  value: formData.email,
                  onChange: (e) => setFormData({ ...formData, email: e.target.value }),
                  disabled: !isEditing
                }
              )
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "phone_number", children: "Phone Number" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Input,
                {
                  id: "phone_number",
                  value: formData.phone_number,
                  onChange: (e) => setFormData({ ...formData, phone_number: e.target.value }),
                  disabled: !isEditing
                }
              )
            ] }),
            profile.role === "contractor" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "contractor_name", children: "Company Name" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Input,
                {
                  id: "contractor_name",
                  value: formData.contractor_name,
                  onChange: (e) => setFormData({ ...formData, contractor_name: e.target.value }),
                  disabled: !isEditing
                }
              )
            ] }),
            profile.role === "attendant" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "attendant_name", children: "Attendant Name" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Input,
                {
                  id: "attendant_name",
                  value: formData.attendant_name,
                  onChange: (e) => setFormData({ ...formData, attendant_name: e.target.value }),
                  disabled: !isEditing
                }
              )
            ] })
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Shield, { className: "h-5 w-5 mr-2" }),
            "Account Details"
          ] }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "space-y-4", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm font-medium", children: "User ID" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-sm text-muted-foreground font-mono", children: [
                user?.id?.slice(0, 8),
                "..."
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm font-medium", children: "Status" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { className: "bg-green-100 text-green-800", children: profile.status || "Active" })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm font-medium", children: "Role" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { className: getRoleColor(profile.role), children: getRoleLabel(profile.role) })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm font-medium", children: "First Login" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm text-muted-foreground", children: profile.is_first_login ? "Yes" : "No" })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Calendar, { className: "h-5 w-5 mr-2" }),
            "Activity Summary"
          ] }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "space-y-4", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm font-medium", children: "Account Created" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm text-muted-foreground", children: formatDate(user?.created_at || "") })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm font-medium", children: "Last Updated" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm text-muted-foreground", children: formatDate(/* @__PURE__ */ new Date()) })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm font-medium", children: "Login Count" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm text-muted-foreground", children: "-" })
            ] })
          ] })
        ] })
      ] })
    ] })
  ] });
}
function QRScanner() {
  const { profile, user } = useAuth();
  const { toast: toast2 } = useToast();
  const videoRef = reactExports.useRef(null);
  const canvasRef = reactExports.useRef(null);
  const [isScanning, setIsScanning] = reactExports.useState(false);
  const [scannedData, setScannedData] = reactExports.useState(null);
  const [showResult, setShowResult] = reactExports.useState(false);
  const [manualInput, setManualInput] = reactExports.useState("");
  const [loading, setLoading] = reactExports.useState(false);
  const [stream, setStream] = reactExports.useState(null);
  const [subscriptionBlocked, setSubscriptionBlocked] = reactExports.useState(false);
  if (profile?.role !== "attendant") {
    return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-12", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-xl font-semibold text-red-600", children: "Access Denied" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Only attendants can access the QR Scanner." })
    ] });
  }
  reactExports.useEffect(() => {
    if (profile?.role === "attendant" && profile?.id) {
      checkAttendantContractorSubscription(profile.id).then((status) => {
        console.log("Subscription status for attendant (QRScanner):", status);
        if (status.isExpired || status.isSuspended) {
          setSubscriptionBlocked(true);
          toast2({
            variant: "destructive",
            title: "Access Blocked",
            description: "Your contractor's subscription has expired. Please contact your contractor to recharge."
          });
        }
      }).catch((error) => {
        console.error("Error checking subscription status (QRScanner):", error);
      });
    }
  }, [profile, toast2]);
  const startCamera = async () => {
    try {
      const mediaStream = await navigator.mediaDevices.getUserMedia({
        video: { facingMode: "environment" }
        // Use back camera on mobile
      });
      setStream(mediaStream);
      if (videoRef.current) {
        videoRef.current.srcObject = mediaStream;
        setIsScanning(true);
      }
    } catch (error) {
      console.error("Error accessing camera:", error);
      toast2({
        variant: "destructive",
        title: "Camera Error",
        description: "Unable to access camera. Please check permissions."
      });
    }
  };
  const stopCamera = () => {
    if (stream) {
      stream.getTracks().forEach((track) => track.stop());
      setStream(null);
    }
    setIsScanning(false);
  };
  const processQRCode = (qrData) => {
    try {
      const data = JSON.parse(qrData);
      setScannedData(data);
      setShowResult(true);
      stopCamera();
    } catch (error) {
      console.error("Error parsing QR code:", error);
      toast2({
        variant: "destructive",
        title: "Invalid QR Code",
        description: "The scanned QR code is not valid."
      });
    }
  };
  const handleManualSubmit = async () => {
    if (!manualInput.trim()) {
      toast2({
        variant: "destructive",
        title: "Invalid Input",
        description: "Please enter a valid QR code data."
      });
      return;
    }
    processQRCode(manualInput);
  };
  const handleVehicleAction = async () => {
    if (!scannedData || !user?.id) return;
    setLoading(true);
    try {
      if (scannedData.type === "vehicle_entry") {
        const vehicleData = {
          plate_number: scannedData.plate_number,
          vehicle_type: scannedData.vehicle_type,
          location_id: scannedData.location_id,
          contractor_id: ""
          // Will be filled by the API
        };
        await VehicleAPI.checkInVehicle(vehicleData);
        toast2({
          title: "Vehicle Checked In",
          description: `Vehicle ${scannedData.plate_number} has been checked in successfully.`
        });
      } else if (scannedData.type === "vehicle_exit") {
        const checkoutData = {
          check_out_time: (/* @__PURE__ */ new Date()).toISOString(),
          payment_amount: 0,
          // Will be calculated by the API
          payment_method: "cash"
        };
        await VehicleAPI.checkoutVehicle(scannedData.vehicle_id, checkoutData);
        toast2({
          title: "Vehicle Checked Out",
          description: `Vehicle has been checked out successfully.`
        });
      }
      setShowResult(false);
      setScannedData(null);
    } catch (error) {
      console.error("Error processing vehicle action:", error);
      toast2({
        variant: "destructive",
        title: "Action Failed",
        description: error.message || "Failed to process vehicle action."
      });
    } finally {
      setLoading(false);
    }
  };
  const resetScanner = () => {
    setShowResult(false);
    setScannedData(null);
    setManualInput("");
  };
  reactExports.useEffect(() => {
    return () => {
      stopCamera();
    };
  }, []);
  if (subscriptionBlocked) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-center py-12", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "mx-auto max-w-md", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "rounded-full bg-red-100 p-3 mx-auto w-16 h-16 flex items-center justify-center mb-4", children: /* @__PURE__ */ jsxRuntimeExports.jsx(CircleX, { className: "h-8 w-8 text-red-600" }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-xl font-semibold text-red-600 mb-2", children: "Access Blocked" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground mb-4", children: "Your contractor's subscription has expired. Please contact your contractor to recharge." }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        Button,
        {
          variant: "outline",
          onClick: () => window.location.reload(),
          className: "mt-4",
          children: "Refresh Page"
        }
      )
    ] }) });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-between", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-3xl font-bold text-foreground", children: "QR Scanner" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Scan vehicle QR codes for check-in and check-out" })
    ] }) }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center space-x-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Camera, { className: "h-5 w-5" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Camera Scanner" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Use your device camera to scan QR codes" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { className: "space-y-4", children: !isScanning ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-8", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(QrCode, { className: "h-16 w-16 mx-auto text-muted-foreground mb-4" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground mb-4", children: "Click to start camera scanning" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { onClick: startCamera, className: "w-full", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Camera, { className: "h-4 w-4 mr-2" }),
            "Start Camera"
          ] })
        ] }) : /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              "video",
              {
                ref: videoRef,
                autoPlay: true,
                playsInline: true,
                className: "w-full h-64 bg-black rounded-lg"
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              "canvas",
              {
                ref: canvasRef,
                className: "hidden"
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(Button, { onClick: stopCamera, variant: "outline", className: "w-full", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(CircleX, { className: "h-4 w-4 mr-2" }),
            "Stop Camera"
          ] })
        ] }) })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center space-x-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(QrCode, { className: "h-5 w-5" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Manual Input" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Enter QR code data manually if camera scanning is not available" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "space-y-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "manual-qr", children: "QR Code Data" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "manual-qr",
                placeholder: "Paste QR code data here...",
                value: manualInput,
                onChange: (e) => setManualInput(e.target.value)
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(
            Button,
            {
              onClick: handleManualSubmit,
              className: "w-full",
              disabled: !manualInput.trim(),
              children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, { className: "h-4 w-4 mr-2" }),
                "Process QR Code"
              ]
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { children: "How to Use" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Instructions for using the QR Scanner" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("h4", { className: "font-semibold flex items-center space-x-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Car, { className: "h-4 w-4" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Vehicle Check-In" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", { className: "text-sm text-muted-foreground space-y-1", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: " Scan QR code on vehicle entry" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: " QR code should contain vehicle details" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: " System will automatically check in the vehicle" })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("h4", { className: "font-semibold flex items-center space-x-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Clock, { className: "h-4 w-4" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Vehicle Check-Out" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("ul", { className: "text-sm text-muted-foreground space-y-1", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: " Scan QR code on vehicle exit" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: " QR code should contain vehicle ID" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("li", { children: " System will calculate payment and check out" })
          ] })
        ] })
      ] }) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: showResult, onOpenChange: setShowResult, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { className: "max-w-md", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogTitle, { className: "flex items-center space-x-2", children: [
          scannedData?.type === "vehicle_entry" ? /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, { className: "h-5 w-5 text-green-600" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(CircleX, { className: "h-5 w-5 text-blue-600" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: scannedData?.type === "vehicle_entry" ? "Vehicle Check-In" : "Vehicle Check-Out" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(DialogDescription, { children: scannedData?.type === "vehicle_entry" ? "Confirm vehicle check-in details" : "Confirm vehicle check-out details" })
      ] }),
      scannedData && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-sm font-medium", children: "Type" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-muted-foreground", children: scannedData.type === "vehicle_entry" ? "Check-In" : "Check-Out" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-sm font-medium", children: "Time" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-muted-foreground", children: formatDateTime$1(scannedData.timestamp) })
          ] })
        ] }),
        scannedData.plate_number && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-sm font-medium", children: "Plate Number" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm font-mono bg-muted p-2 rounded", children: scannedData.plate_number })
        ] }),
        scannedData.vehicle_type && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-sm font-medium", children: "Vehicle Type" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "outline", children: scannedData.vehicle_type })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex space-x-2 pt-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Button,
            {
              onClick: handleVehicleAction,
              className: "flex-1",
              disabled: loading,
              children: loading ? /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "flex items-center", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2" }),
                "Processing..."
              ] }) : /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
                scannedData.type === "vehicle_entry" ? /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, { className: "h-4 w-4 mr-2" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(CircleX, { className: "h-4 w-4 mr-2" }),
                scannedData.type === "vehicle_entry" ? "Check In" : "Check Out"
              ] })
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Button,
            {
              onClick: resetScanner,
              variant: "outline",
              disabled: loading,
              children: "Cancel"
            }
          )
        ] })
      ] })
    ] }) })
  ] });
}
class PlateRecognitionService {
  // Replace with secure storage in prod
  static async extractPlateNumber(imageFile) {
    try {
      const formData = new FormData();
      formData.append("upload", imageFile);
      const response = await fetch(this.ANPR_API_URL, {
        method: "POST",
        body: formData,
        headers: {
          "Authorization": `Token ${this.ANPR_TOKEN}`
        }
      });
      if (!response.ok) {
        throw new Error(`ANPR API Error: ${response.statusText}`);
      }
      const data = await response.json();
      console.log("ANPR Response:", data);
      const plateNumber = data.results?.[0]?.plate || null;
      if (!plateNumber) {
        return {
          success: false,
          error: "Could not recognize plate number. Please try again with a clearer image."
        };
      }
      const upperCasePlateNumber = plateNumber.toUpperCase();
      return {
        success: true,
        plateNumber: upperCasePlateNumber
      };
    } catch (error) {
      console.error("Plate recognition error:", error);
      return {
        success: false,
        error: error instanceof Error ? error.message : "Failed to process image"
      };
    }
  }
}
__publicField(PlateRecognitionService, "ANPR_API_URL", "https://api.platerecognizer.com/v1/plate-reader/");
__publicField(PlateRecognitionService, "ANPR_TOKEN", "e3fff7794f03b9d53f1a7c0bf42f2ea740e6f6bd");
function ImageCheckInDialog({
  isOpen,
  onClose,
  onPlateDetected
}) {
  const { toast: toast2 } = useToast();
  const fileInputRef = reactExports.useRef(null);
  const [selectedImage, setSelectedImage] = reactExports.useState(null);
  const [imagePreview, setImagePreview] = reactExports.useState(null);
  const [isProcessing, setIsProcessing] = reactExports.useState(false);
  const handleImageSelect = (event) => {
    const file = event.target.files?.[0];
    if (file) {
      if (!file.type.startsWith("image/")) {
        toast2({
          variant: "destructive",
          title: "Invalid file type",
          description: "Please select an image file (JPG, PNG, etc.)"
        });
        return;
      }
      if (file.size > 10 * 1024 * 1024) {
        toast2({
          variant: "destructive",
          title: "File too large",
          description: "Please select an image smaller than 10MB"
        });
        return;
      }
      setSelectedImage(file);
      const reader = new FileReader();
      reader.onload = (e) => {
        setImagePreview(e.target?.result);
      };
      reader.readAsDataURL(file);
    }
  };
  const handleTakePhoto = async () => {
    try {
      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
        const cameraInput = document.createElement("input");
        cameraInput.type = "file";
        cameraInput.accept = "image/*";
        cameraInput.capture = "environment";
        cameraInput.style.display = "none";
        cameraInput.onchange = (e) => {
          const file = e.target.files?.[0];
          if (file) {
            handleImageSelect({ target: { files: [file] } });
          }
        };
        document.body.appendChild(cameraInput);
        cameraInput.click();
        document.body.removeChild(cameraInput);
        return;
      }
      const stream = await navigator.mediaDevices.getUserMedia({
        video: {
          facingMode: "environment"
          // Use rear camera
        }
      });
      const video = document.createElement("video");
      video.style.position = "fixed";
      video.style.top = "0";
      video.style.left = "0";
      video.style.width = "100%";
      video.style.height = "100%";
      video.style.objectFit = "cover";
      video.style.zIndex = "9999";
      video.style.backgroundColor = "black";
      video.autoplay = true;
      video.muted = true;
      video.srcObject = stream;
      const overlay = document.createElement("div");
      overlay.style.position = "fixed";
      overlay.style.top = "0";
      overlay.style.left = "0";
      overlay.style.width = "100%";
      overlay.style.height = "100%";
      overlay.style.zIndex = "10000";
      overlay.style.backgroundColor = "transparent";
      overlay.style.display = "flex";
      overlay.style.flexDirection = "column";
      overlay.style.justifyContent = "flex-end";
      overlay.style.alignItems = "center";
      overlay.style.padding = "20px";
      overlay.style.pointerEvents = "none";
      const captureBtn = document.createElement("button");
      captureBtn.innerHTML = " Capture";
      captureBtn.style.padding = "12px 24px";
      captureBtn.style.fontSize = "16px";
      captureBtn.style.fontWeight = "600";
      captureBtn.style.backgroundColor = "#10b981";
      captureBtn.style.color = "white";
      captureBtn.style.border = "none";
      captureBtn.style.borderRadius = "25px";
      captureBtn.style.cursor = "pointer";
      captureBtn.style.marginBottom = "15px";
      captureBtn.style.pointerEvents = "auto";
      captureBtn.style.userSelect = "none";
      captureBtn.style.boxShadow = "0 4px 12px rgba(16, 185, 129, 0.4)";
      captureBtn.style.transition = "all 0.2s ease";
      const cancelBtn = document.createElement("button");
      cancelBtn.innerHTML = " Cancel";
      cancelBtn.style.padding = "10px 20px";
      cancelBtn.style.fontSize = "14px";
      cancelBtn.style.fontWeight = "500";
      cancelBtn.style.backgroundColor = "rgba(0, 0, 0, 0.6)";
      cancelBtn.style.color = "white";
      cancelBtn.style.border = "2px solid rgba(255, 255, 255, 0.3)";
      cancelBtn.style.borderRadius = "20px";
      cancelBtn.style.cursor = "pointer";
      cancelBtn.style.pointerEvents = "auto";
      cancelBtn.style.userSelect = "none";
      cancelBtn.style.backdropFilter = "blur(10px)";
      cancelBtn.style.transition = "all 0.2s ease";
      captureBtn.addEventListener("mouseenter", () => {
        captureBtn.style.transform = "scale(1.05)";
        captureBtn.style.boxShadow = "0 6px 16px rgba(16, 185, 129, 0.6)";
      });
      captureBtn.addEventListener("mouseleave", () => {
        captureBtn.style.transform = "scale(1)";
        captureBtn.style.boxShadow = "0 4px 12px rgba(16, 185, 129, 0.4)";
      });
      cancelBtn.addEventListener("mouseenter", () => {
        cancelBtn.style.transform = "scale(1.05)";
        cancelBtn.style.backgroundColor = "rgba(0, 0, 0, 0.8)";
      });
      cancelBtn.addEventListener("mouseleave", () => {
        cancelBtn.style.transform = "scale(1)";
        cancelBtn.style.backgroundColor = "rgba(0, 0, 0, 0.6)";
      });
      overlay.appendChild(captureBtn);
      overlay.appendChild(cancelBtn);
      document.body.appendChild(video);
      document.body.appendChild(overlay);
      video.addEventListener("loadedmetadata", () => {
        console.log("Camera ready for capture");
      });
      captureBtn.disabled = true;
      captureBtn.style.opacity = "0.5";
      video.addEventListener("canplay", () => {
        setTimeout(() => {
          captureBtn.disabled = false;
          captureBtn.style.opacity = "1";
          console.log("Capture button enabled");
        }, 500);
      });
      setTimeout(() => {
        if (captureBtn.disabled) {
          captureBtn.disabled = false;
          captureBtn.style.opacity = "1";
          console.log("Capture button enabled (fallback)");
        }
      }, 3e3);
      const capturePhoto = () => {
        try {
          if (video.videoWidth === 0 || video.videoHeight === 0) {
            toast2({
              variant: "destructive",
              title: "Camera not ready",
              description: "Please wait for camera to initialize"
            });
            return;
          }
          const canvas = document.createElement("canvas");
          canvas.width = video.videoWidth;
          canvas.height = video.videoHeight;
          const ctx = canvas.getContext("2d");
          if (!ctx) {
            throw new Error("Canvas context not available");
          }
          ctx.drawImage(video, 0, 0);
          canvas.toBlob((blob) => {
            if (blob) {
              const file = new File([blob], "camera-photo.jpg", { type: "image/jpeg" });
              handleImageSelect({ target: { files: [file] } });
              toast2({
                title: "Photo Captured!",
                description: "Image captured successfully. You can now detect the plate number."
              });
            } else {
              throw new Error("Failed to create image blob");
            }
          }, "image/jpeg", 0.8);
        } catch (error) {
          console.error("Capture error:", error);
          toast2({
            variant: "destructive",
            title: "Capture failed",
            description: "Failed to capture photo. Please try again."
          });
        } finally {
          try {
            stream.getTracks().forEach((track) => track.stop());
            if (document.body.contains(video)) {
              document.body.removeChild(video);
            }
            if (document.body.contains(overlay)) {
              document.body.removeChild(overlay);
            }
          } catch (cleanupError) {
            console.error("Cleanup error:", cleanupError);
          }
        }
      };
      const cancelCapture = () => {
        try {
          stream.getTracks().forEach((track) => track.stop());
          if (document.body.contains(video)) {
            document.body.removeChild(video);
          }
          if (document.body.contains(overlay)) {
            document.body.removeChild(overlay);
          }
        } catch (error) {
          console.error("Cancel error:", error);
        }
      };
      const handleCaptureClick = (e) => {
        e.preventDefault();
        e.stopPropagation();
        e.stopImmediatePropagation();
        console.log("Capture button clicked");
        capturePhoto();
      };
      const handleCancelClick = (e) => {
        e.preventDefault();
        e.stopPropagation();
        e.stopImmediatePropagation();
        console.log("Cancel button clicked");
        cancelCapture();
      };
      captureBtn.removeEventListener("click", handleCaptureClick);
      cancelBtn.removeEventListener("click", handleCancelClick);
      captureBtn.addEventListener("click", handleCaptureClick, { once: false });
      captureBtn.addEventListener("mousedown", handleCaptureClick, { once: false });
      captureBtn.addEventListener("touchend", handleCaptureClick, { once: false });
      cancelBtn.addEventListener("click", handleCancelClick, { once: false });
      cancelBtn.addEventListener("mousedown", handleCancelClick, { once: false });
      cancelBtn.addEventListener("touchend", handleCancelClick, { once: false });
    } catch (error) {
      console.error("Camera access error:", error);
      toast2({
        variant: "destructive",
        title: "Camera Access Denied",
        description: "Please allow camera access or use 'Select Image' instead"
      });
      const cameraInput = document.createElement("input");
      cameraInput.type = "file";
      cameraInput.accept = "image/*";
      cameraInput.capture = "environment";
      cameraInput.style.display = "none";
      cameraInput.onchange = (e) => {
        const file = e.target.files?.[0];
        if (file) {
          handleImageSelect({ target: { files: [file] } });
        }
      };
      document.body.appendChild(cameraInput);
      cameraInput.click();
      document.body.removeChild(cameraInput);
    }
  };
  const handleSelectImage = () => {
    const galleryInput = document.createElement("input");
    galleryInput.type = "file";
    galleryInput.accept = "image/*";
    galleryInput.style.display = "none";
    galleryInput.onchange = (e) => {
      const file = e.target.files?.[0];
      if (file) {
        handleImageSelect({ target: { files: [file] } });
      }
    };
    document.body.appendChild(galleryInput);
    galleryInput.click();
    document.body.removeChild(galleryInput);
  };
  const handleRemoveImage = () => {
    setSelectedImage(null);
    setImagePreview(null);
    if (fileInputRef.current) {
      fileInputRef.current.value = "";
    }
  };
  const handleDetectPlate = async () => {
    if (!selectedImage) {
      toast2({
        variant: "destructive",
        title: "No image selected",
        description: "Please select an image of the vehicle"
      });
      return;
    }
    setIsProcessing(true);
    try {
      const result = await PlateRecognitionService.extractPlateNumber(selectedImage);
      if (result.success && result.plateNumber) {
        onPlateDetected(result.plateNumber);
        toast2({
          title: "Plate Number Detected!",
          description: `License plate "${result.plateNumber}" has been filled in the form. Please complete the check-in process.`
        });
        handleClose();
      } else {
        throw new Error(result.error || "Failed to detect plate number");
      }
    } catch (error) {
      console.error("Plate detection error:", error);
      toast2({
        variant: "destructive",
        title: "Detection failed",
        description: error instanceof Error ? error.message : "Failed to detect license plate"
      });
    } finally {
      setIsProcessing(false);
    }
  };
  const handleClose = () => {
    setSelectedImage(null);
    setImagePreview(null);
    setIsProcessing(false);
    onClose();
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: isOpen, onOpenChange: handleClose, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { className: "max-w-2xl", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogHeader, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogTitle, { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Camera, { className: "h-5 w-5" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Detect License Plate" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(DialogDescription, { children: "Take or upload a photo of the vehicle to automatically extract the license plate number" })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { children: "Vehicle Image *" }),
        !imagePreview ? /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { className: "border-2 border-dashed border-gray-300 hover:border-gray-400 transition-colors", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "flex flex-col items-center justify-center py-12", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Camera, { className: "h-12 w-12 text-gray-400 mb-4" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-gray-600 mb-4", children: "Take a photo or upload an image of the vehicle" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-3", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row gap-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs(
                Button,
                {
                  type: "button",
                  variant: "outline",
                  onClick: handleSelectImage,
                  className: "flex-1",
                  children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx(Upload, { className: "h-4 w-4 mr-2" }),
                    "Select Image"
                  ]
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsxs(
                Button,
                {
                  type: "button",
                  variant: "outline",
                  onClick: handleTakePhoto,
                  className: "flex-1",
                  children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx(Camera, { className: "h-4 w-4 mr-2" }),
                    "Take Photo"
                  ]
                }
              )
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-gray-500 text-center", children: "JPG, PNG up to 10MB" })
          ] })
        ] }) }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Card, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "p-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              "img",
              {
                src: imagePreview,
                alt: "Vehicle preview",
                className: "w-full h-64 object-cover rounded-lg"
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Button,
              {
                type: "button",
                variant: "destructive",
                size: "sm",
                className: "absolute top-2 right-2",
                onClick: handleRemoveImage,
                children: /* @__PURE__ */ jsxRuntimeExports.jsx(X$1, { className: "h-4 w-4" })
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-sm text-gray-600 mt-2", children: [
            selectedImage?.name,
            " (",
            (selectedImage?.size / 1024 / 1024).toFixed(2),
            " MB)"
          ] })
        ] }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Input,
          {
            ref: fileInputRef,
            type: "file",
            accept: "image/*",
            capture: "environment",
            onChange: handleImageSelect,
            className: "hidden"
          }
        )
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-end space-x-3", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Button,
          {
            type: "button",
            variant: "outline",
            onClick: handleClose,
            disabled: isProcessing,
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Button,
          {
            onClick: handleDetectPlate,
            disabled: !selectedImage || isProcessing,
            className: "bg-green-600 hover:bg-green-700",
            children: isProcessing ? /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(LoaderCircle, { className: "h-4 w-4 mr-2 animate-spin" }),
              "Detecting..."
            ] }) : /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, { className: "h-4 w-4 mr-2" }),
              "Detect Plate Number"
            ] })
          }
        )
      ] })
    ] })
  ] }) });
}
function CheckInOut() {
  const { profile, user } = useAuth();
  const { toast: toast2 } = useToast();
  const [vehicles, setVehicles] = reactExports.useState([]);
  const [currentLocation, setCurrentLocation] = reactExports.useState(null);
  const [loading, setLoading] = reactExports.useState(true);
  const [subscriptionBlocked, setSubscriptionBlocked] = reactExports.useState(false);
  const [newVehicle, setNewVehicle] = reactExports.useState({
    plate_number: "",
    vehicle_type: "2-wheeler",
    location_id: "",
    contractor_id: "",
    mobile_number: ""
  });
  const [processing, setProcessing] = reactExports.useState(false);
  const [showCheckOutModal, setShowCheckOutModal] = reactExports.useState(false);
  const [selectedVehicle, setSelectedVehicle] = reactExports.useState(null);
  const [paymentMethod, setPaymentMethod] = reactExports.useState("cash");
  const [showSuccessModal, setShowSuccessModal] = reactExports.useState(false);
  const [checkoutAmount, setCheckoutAmount] = reactExports.useState(0);
  const [searchTerm, setSearchTerm] = reactExports.useState("");
  const [showImageCheckIn, setShowImageCheckIn] = reactExports.useState(false);
  const [locations, setLocations] = reactExports.useState([]);
  const dataFetchedRef = reactExports.useRef(false);
  if (profile?.role !== "attendant") {
    return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-12", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-xl font-semibold text-red-600", children: "Access Denied" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: "Only attendants can access Check In/Out." })
    ] });
  }
  reactExports.useEffect(() => {
    if (profile?.role === "attendant" && profile?.id) {
      checkAttendantContractorSubscription(profile.id).then((status) => {
        console.log("Subscription status for attendant:", status);
        if (status.isExpired || status.isSuspended) {
          setSubscriptionBlocked(true);
          toast2({
            variant: "destructive",
            title: "Access Blocked",
            description: "Your contractor's subscription has expired. Please contact your contractor to recharge."
          });
        }
      }).catch((error) => {
        console.error("Error checking subscription status:", error);
      });
    }
  }, [profile, toast2]);
  const fetchData = async () => {
    if (!user?.id) return;
    try {
      setLoading(true);
      const attendant = await AttendantAPI.getAttendantByUserId(user.id);
      if (!attendant || !attendant.location_id) {
        throw new Error("Attendant not assigned to any location");
      }
      const location = await LocationAPI.getLocationById(attendant.location_id);
      setCurrentLocation(location);
      setNewVehicle((prev) => ({
        ...prev,
        location_id: location.id,
        contractor_id: location.contractor_id
      }));
      const { VehicleAPI: VehicleAPI2 } = await __vitePreload(async () => {
        const { VehicleAPI: VehicleAPI22 } = await Promise.resolve().then(() => vehicleApi);
        return { VehicleAPI: VehicleAPI22 };
      }, true ? void 0 : void 0);
      const allVehicles = await VehicleAPI2.getVehiclesByLocation(attendant.location_id);
      const parkedVehicles = allVehicles.filter((v2) => !v2.check_out_time).slice(0, 5);
      const totalParkedCount = allVehicles.filter((v2) => !v2.check_out_time).length;
      setActualOccupiedSlots(totalParkedCount);
      setVehicles(parkedVehicles || []);
    } catch (error) {
      console.error("Error fetching data:", error);
      toast2({
        variant: "destructive",
        title: "Error",
        description: error.message || "Failed to load data"
      });
    } finally {
      setLoading(false);
    }
  };
  const fetchLocations = async () => {
    try {
      const locationsData = await LocationAPI.getAllLocations();
      setLocations(locationsData);
    } catch (error) {
      console.error("Error fetching locations:", error);
    }
  };
  const handlePlateDetected = (plateNumber) => {
    setNewVehicle((prev) => ({
      ...prev,
      plate_number: plateNumber
    }));
    toast2({
      title: "Plate Number Detected!",
      description: `License plate "${plateNumber}" has been filled in the form. Please complete the check-in process.`
    });
  };
  reactExports.useEffect(() => {
    if (user && !dataFetchedRef.current) {
      fetchData();
      fetchLocations();
      dataFetchedRef.current = true;
    }
  }, [user]);
  const handleAddVehicle = async () => {
    setProcessing(true);
    try {
      if (!newVehicle.plate_number || !newVehicle.vehicle_type) {
        toast2({
          variant: "destructive",
          title: "Validation Error",
          description: "Please fill in all required fields."
        });
        setProcessing(false);
        return;
      }
      if (!newVehicle.location_id && currentLocation?.id) {
        setNewVehicle((prev) => ({
          ...prev,
          location_id: currentLocation.id,
          contractor_id: currentLocation.contractor_id || prev.contractor_id
        }));
      }
      if (!newVehicle.location_id) {
        toast2({
          variant: "destructive",
          title: "Validation Error",
          description: "Location is required. Please select a location."
        });
        setProcessing(false);
        return;
      }
      const vehicle = await VehicleAPI.createVehicle(newVehicle);
      setVehicles((prev) => [vehicle, ...prev]);
      setNewVehicle({
        plate_number: "",
        vehicle_type: "2-wheeler",
        location_id: currentLocation?.id || "",
        contractor_id: currentLocation?.contractor_id || "",
        mobile_number: ""
      });
      dataFetchedRef.current = false;
      fetchData();
      toast2({
        title: "Vehicle Checked In",
        description: `Vehicle ${vehicle.plate_number} has been checked in successfully.`
      });
    } catch (error) {
      console.error("Error adding vehicle:", error);
      toast2({
        variant: "destructive",
        title: "Check-In Failed",
        description: error.message || "Failed to check in vehicle."
      });
    } finally {
      setProcessing(false);
    }
  };
  const handleCheckOut = async () => {
    if (!selectedVehicle) return;
    setProcessing(true);
    try {
      const checkoutData = {
        check_out_time: (/* @__PURE__ */ new Date()).toISOString(),
        payment_amount: 0,
        // Will be calculated by the API
        payment_method: paymentMethod
      };
      await VehicleAPI.checkoutVehicle(selectedVehicle.id, checkoutData);
      const duration = Math.floor(((/* @__PURE__ */ new Date()).getTime() - new Date(selectedVehicle.check_in_time).getTime()) / (1e3 * 60 * 60));
      const amount = duration * 50;
      setCheckoutAmount(amount);
      setShowCheckOutModal(false);
      setShowSuccessModal(true);
      setSelectedVehicle(null);
      dataFetchedRef.current = false;
      fetchData();
    } catch (error) {
      console.error("Error checking out vehicle:", error);
      toast2({
        variant: "destructive",
        title: "Check-Out Failed",
        description: error.message || "Failed to check out vehicle."
      });
    } finally {
      setProcessing(false);
    }
  };
  const openCheckOutModal = (vehicle) => {
    setSelectedVehicle(vehicle);
    setPaymentMethod("cash");
    setShowCheckOutModal(true);
  };
  const filteredVehicles = vehicles.filter(
    (vehicle) => vehicle.plate_number.toLowerCase().includes(searchTerm.toLowerCase()) || vehicle.mobile_number && vehicle.mobile_number.includes(searchTerm)
  );
  const currentVehicles = filteredVehicles;
  const totalSlots = currentLocation?.total_slots || 100;
  const [actualOccupiedSlots, setActualOccupiedSlots] = reactExports.useState(0);
  const occupancyPercentage = actualOccupiedSlots / totalSlots * 100;
  if (loading) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-center h-96", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "animate-spin rounded-full h-12 w-12 border-b-2 border-parkflow-blue" }) });
  }
  if (subscriptionBlocked) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-center py-12", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "mx-auto max-w-md", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "rounded-full bg-red-100 p-3 mx-auto w-16 h-16 flex items-center justify-center mb-4", children: /* @__PURE__ */ jsxRuntimeExports.jsx(CircleX, { className: "h-8 w-8 text-red-600" }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-xl font-semibold text-red-600 mb-2", children: "Access Blocked" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground mb-4", children: "Your contractor's subscription has expired. Please contact your contractor to recharge." }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        Button,
        {
          variant: "outline",
          onClick: () => window.location.reload(),
          className: "mt-4",
          children: "Refresh Page"
        }
      )
    ] }) });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex flex-col sm:flex-row sm:items-center justify-between gap-4", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "text-2xl sm:text-3xl font-bold text-foreground", children: "Check In/Out" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm sm:text-base text-muted-foreground", children: currentLocation ? `${currentLocation.locations_name} - ${currentLocation.address}` : "Manage vehicle check-ins and check-outs" })
    ] }) }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-[calc(100vh-200px)]", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center space-x-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(UserPlus, { className: "h-5 w-5" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Vehicle Check-in" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Enter vehicle details to check-in." })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "space-y-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-base font-semibold mb-2 block", children: "Vehicle Type" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex space-x-6", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  "input",
                  {
                    type: "radio",
                    name: "vehicleType",
                    value: "2-wheeler",
                    checked: newVehicle.vehicle_type === "2-wheeler",
                    onChange: (e) => setNewVehicle((prev) => ({ ...prev, vehicle_type: e.target.value })),
                    className: "w-4 h-4 text-parkflow-blue"
                  }
                ),
                /* @__PURE__ */ jsxRuntimeExports.jsx(Bike, { className: "h-5 w-5" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm font-medium", children: "2-Wheeler" })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-2", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  "input",
                  {
                    type: "radio",
                    name: "vehicleType",
                    value: "4-wheeler",
                    checked: newVehicle.vehicle_type === "4-wheeler",
                    onChange: (e) => setNewVehicle((prev) => ({ ...prev, vehicle_type: e.target.value })),
                    className: "w-4 h-4 text-parkflow-blue"
                  }
                ),
                /* @__PURE__ */ jsxRuntimeExports.jsx(Car, { className: "h-5 w-5" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm font-medium", children: "4-Wheeler" })
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-base font-semibold mb-2 block", children: "Plate Number" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex space-x-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Input,
                {
                  placeholder: "e.g., ABC-1234",
                  value: newVehicle.plate_number,
                  onChange: (e) => {
                    const input = e.target;
                    const cursorPosition = input.selectionStart;
                    const newValue = e.target.value.toUpperCase();
                    setNewVehicle((prev) => ({ ...prev, plate_number: newValue }));
                    setTimeout(() => {
                      input.setSelectionRange(cursorPosition, cursorPosition);
                    }, 0);
                  },
                  className: "flex-1"
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Button,
                {
                  variant: "outline",
                  size: "icon",
                  onClick: () => setShowImageCheckIn(true),
                  title: "Check-in with Image Recognition",
                  children: /* @__PURE__ */ jsxRuntimeExports.jsx(Camera, { className: "h-4 w-4" })
                }
              )
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-base font-semibold mb-2 block", children: "Mobile Number (Optional)" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                placeholder: "e.g., +91 9876543210",
                value: newVehicle.mobile_number || "",
                onChange: (e) => {
                  const input = e.target;
                  const cursorPosition = input.selectionStart;
                  const newValue = e.target.value.toUpperCase();
                  setNewVehicle((prev) => ({ ...prev, mobile_number: newValue }));
                  setTimeout(() => {
                    input.setSelectionRange(cursorPosition, cursorPosition);
                  }, 0);
                },
                type: "tel"
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-base font-semibold mb-2 block", children: "Location" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                value: currentLocation?.locations_name || "Loading...",
                disabled: true,
                className: "bg-gray-50"
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-muted-foreground mt-1", children: "This is your assigned location" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Button,
            {
              onClick: handleAddVehicle,
              className: "w-full bg-parkflow-blue hover:bg-parkflow-blue/90 h-12 text-base",
              disabled: processing || !newVehicle.plate_number.trim(),
              children: processing ? /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "flex items-center", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2" }),
                "Processing..."
              ] }) : /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowRight, { className: "h-4 w-4 mr-2" }),
                "Check-in"
              ] })
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { className: "text-base font-semibold mb-2 block", children: "Live Occupancy" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-between", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-sm text-muted-foreground", children: [
                actualOccupiedSlots,
                "/",
                totalSlots
              ] }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-full bg-gray-200 rounded-full h-2", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
                "div",
                {
                  className: "bg-blue-600 h-2 rounded-full transition-all duration-300",
                  style: { width: `${Math.min(occupancyPercentage, 100)}%` }
                }
              ) })
            ] })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center space-x-2 text-lg sm:text-xl", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(MapPin, { className: "h-4 w-4 sm:h-5 sm:w-5" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Currently Parked Vehicles" })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { className: "text-sm", children: "List of all vehicles currently in the lot." })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center space-x-2", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative w-full sm:w-48", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Search, { className: "absolute left-2 top-2.5 h-4 w-4 text-muted-foreground" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                placeholder: "Search vehicles...",
                value: searchTerm,
                onChange: (e) => setSearchTerm(e.target.value),
                className: "pl-8 w-full text-sm"
              }
            )
          ] }) })
        ] }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: currentVehicles.length > 0 ? /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-3", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-3", children: currentVehicles.map((vehicle) => /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "border rounded-lg hover:bg-muted/50 transition-colors", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "hidden sm:flex items-center justify-between p-3", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex-1 grid grid-cols-4 gap-4 text-sm", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-mono font-medium", children: vehicle.plate_number }),
              vehicle.mobile_number && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-muted-foreground", children: vehicle.mobile_number })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { children: /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "outline", className: "text-xs", children: vehicle.vehicle_type === "2-wheeler" ? "2 Wheeler" : "4 Wheeler" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { children: /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: new Date(vehicle.check_in_time).toLocaleTimeString() }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
              Button,
              {
                size: "sm",
                onClick: () => openCheckOutModal(vehicle),
                className: "bg-red-600 hover:bg-red-700 text-white w-full",
                children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowRight, { className: "h-3 w-3 mr-1" }),
                  "Check-out"
                ]
              }
            ) })
          ] }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "sm:hidden p-3 space-y-3", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start justify-between", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex-1 min-w-0", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "font-mono font-medium text-sm", children: vehicle.plate_number }),
                vehicle.mobile_number && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-muted-foreground", children: vehicle.mobile_number })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex-shrink-0 ml-2", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Badge, { variant: "outline", className: "text-xs", children: vehicle.vehicle_type === "2-wheeler" ? "2 Wheeler" : "4 Wheeler" }) })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-xs text-muted-foreground", children: [
                "Check-in: ",
                new Date(vehicle.check_in_time).toLocaleTimeString()
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs(
                Button,
                {
                  size: "sm",
                  onClick: () => openCheckOutModal(vehicle),
                  className: "bg-red-600 hover:bg-red-700 text-white text-xs px-3 py-1",
                  children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx(ArrowRight, { className: "h-3 w-3 mr-1" }),
                    "Check-out"
                  ]
                }
              )
            ] })
          ] })
        ] }, vehicle.id)) }) }) : /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-8", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Car, { className: "h-12 w-12 mx-auto text-muted-foreground mb-4" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-muted-foreground", children: searchTerm ? "No vehicles found matching your search" : "No vehicles currently parked" })
        ] }) })
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: showCheckOutModal, onOpenChange: setShowCheckOutModal, children: /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogContent, { className: "max-w-lg", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(DialogTitle, { className: "flex items-center space-x-2 text-xl", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(UserMinus, { className: "h-6 w-6" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Check Out Vehicle" })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(DialogDescription, { className: "text-base", children: "Review parking details and complete payment" })
      ] }),
      selectedVehicle && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "bg-gray-50 p-4 rounded-lg border", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Car, { className: "h-8 w-8 text-gray-600" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-lg font-semibold", children: selectedVehicle.plate_number }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-sm text-gray-600", children: [
              "Type: ",
              selectedVehicle.vehicle_type === "2-wheeler" ? "2-wheeler" : "4-wheeler"
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-sm text-gray-600", children: [
              "Check In: ",
              formatDateTime$1(selectedVehicle.check_in_time)
            ] })
          ] })
        ] }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-gray-50 p-4 rounded-lg border", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center space-x-3 mb-3", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Clock, { className: "h-5 w-5 text-gray-600" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-semibold", children: "Parking Details" })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm text-gray-600", children: "Duration:" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-sm font-medium", children: [
                Math.floor(((/* @__PURE__ */ new Date()).getTime() - new Date(selectedVehicle.check_in_time).getTime()) / (1e3 * 60 * 60)),
                "h"
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm text-gray-600", children: "Rate:" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm font-medium", children: "Up to 6 hours: 50" })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "border-t pt-2 mt-2", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-semibold", children: "Total Amount:" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-lg font-bold text-green-600", children: [
                "",
                Math.floor(((/* @__PURE__ */ new Date()).getTime() - new Date(selectedVehicle.check_in_time).getTime()) / (1e3 * 60 * 60)) * 50
              ] })
            ] }) })
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Label$1, { htmlFor: "payment_method", className: "text-base font-medium", children: "Payment Method" }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs(
            "select",
            {
              id: "payment_method",
              value: paymentMethod,
              onChange: (e) => setPaymentMethod(e.target.value),
              className: "w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-parkflow-blue focus:border-transparent text-base",
              children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("option", { value: "cash", children: "Cash" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("option", { value: "card", children: "Card" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("option", { value: "digital", children: "Digital Payment" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("option", { value: "free", children: "Free" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-end space-x-3 pt-4", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Button,
            {
              onClick: () => setShowCheckOutModal(false),
              variant: "outline",
              disabled: processing,
              className: "px-6 py-2",
              children: "Cancel"
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Button,
            {
              onClick: handleCheckOut,
              className: "bg-green-600 hover:bg-green-700 px-6 py-2",
              disabled: processing,
              children: processing ? /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "flex items-center", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2" }),
                "Processing..."
              ] }) : "Confirm Checkout"
            }
          )
        ] })
      ] })
    ] }) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Dialog, { open: showSuccessModal, onOpenChange: setShowSuccessModal, children: /* @__PURE__ */ jsxRuntimeExports.jsx(DialogContent, { className: "max-w-md", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center space-y-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex justify-center", children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-16 h-16 bg-green-100 rounded-full flex items-center justify-center", children: /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, { className: "h-8 w-8 text-green-600" }) }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-2xl font-bold text-gray-900", children: "Checkout Successful" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-gray-600", children: [
          "Vehicle ",
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-semibold", children: selectedVehicle?.plate_number }),
          " has been checked out."
        ] })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "bg-gray-50 p-4 rounded-lg", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-gray-600", children: "Payment Due" }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-3xl font-bold text-blue-600", children: [
          "",
          checkoutAmount
        ] })
      ] }) }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(
        Button,
        {
          onClick: () => setShowSuccessModal(false),
          className: "w-full bg-blue-600 hover:bg-blue-700 text-white py-3 text-lg",
          children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, { className: "h-5 w-5 mr-2" }),
            "Done"
          ]
        }
      )
    ] }) }) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      ImageCheckInDialog,
      {
        isOpen: showImageCheckIn,
        onClose: () => setShowImageCheckIn(false),
        onPlateDetected: handlePlateDetected
      }
    )
  ] });
}
const NotFound = () => {
  const location = useLocation();
  reactExports.useEffect(() => {
    console.error("404 Error: User attempted to access non-existent route:", location.pathname);
  }, [location.pathname]);
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex min-h-screen items-center justify-center bg-gray-100", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx("h1", { className: "mb-4 text-4xl font-bold", children: "404" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "mb-4 text-xl text-gray-600", children: "Oops! Page not found" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("a", { href: "/", className: "text-blue-500 underline hover:text-blue-700", children: "Return to Home" })
  ] }) });
};
const queryClient = new QueryClient();
const App = () => /* @__PURE__ */ jsxRuntimeExports.jsx(HydrationErrorBoundary, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(QueryClientProvider, { client: queryClient, children: /* @__PURE__ */ jsxRuntimeExports.jsx(TooltipProvider, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(AuthProvider, { children: [
  /* @__PURE__ */ jsxRuntimeExports.jsx(Toaster$1, {}),
  /* @__PURE__ */ jsxRuntimeExports.jsx(Toaster, {}),
  /* @__PURE__ */ jsxRuntimeExports.jsx(BrowserRouter, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(MobileRouter, { children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Routes, { children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "/", element: /* @__PURE__ */ jsxRuntimeExports.jsx(RoleSelection, {}) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "/login", element: /* @__PURE__ */ jsxRuntimeExports.jsx(Login, {}) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "/superadmin-verification", element: /* @__PURE__ */ jsxRuntimeExports.jsx(SuperAdminVerification, {}) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "/superadminlogin", element: /* @__PURE__ */ jsxRuntimeExports.jsx(SuperAdminLogin, {}) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "/register", element: /* @__PURE__ */ jsxRuntimeExports.jsx(Register, {}) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "/onboarding", element: /* @__PURE__ */ jsxRuntimeExports.jsx(OnboardingPage, {}) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "/forgot-password", element: /* @__PURE__ */ jsxRuntimeExports.jsx(ForgotPassword, {}) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "/reset-password", element: /* @__PURE__ */ jsxRuntimeExports.jsx(ResetPasswordSimple, {}) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "/terms-of-service", element: /* @__PURE__ */ jsxRuntimeExports.jsx(TermsOfService, {}) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "/privacy-policy", element: /* @__PURE__ */ jsxRuntimeExports.jsx(PrivacyPolicy, {}) }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Route, { path: "/dashboard", element: /* @__PURE__ */ jsxRuntimeExports.jsx(DashboardLayout, {}), children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { index: true, element: /* @__PURE__ */ jsxRuntimeExports.jsx(Dashboard, {}) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "contractors", element: /* @__PURE__ */ jsxRuntimeExports.jsx(Contractors, {}) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "locations", element: /* @__PURE__ */ jsxRuntimeExports.jsx(Locations, {}) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "attendants", element: /* @__PURE__ */ jsxRuntimeExports.jsx(Attendants, {}) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "vehicles", element: /* @__PURE__ */ jsxRuntimeExports.jsx(Vehicles, {}) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "reports", element: /* @__PURE__ */ jsxRuntimeExports.jsx(Reports, {}) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "income", element: /* @__PURE__ */ jsxRuntimeExports.jsx(Income, {}) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "logs", element: /* @__PURE__ */ jsxRuntimeExports.jsx(Logs, {}) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "subscriptions", element: /* @__PURE__ */ jsxRuntimeExports.jsx(Subscriptions, {}) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "settings", element: /* @__PURE__ */ jsxRuntimeExports.jsx(Settings, {}) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "profile", element: /* @__PURE__ */ jsxRuntimeExports.jsx(Profile, {}) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "qr-scanner", element: /* @__PURE__ */ jsxRuntimeExports.jsx(QRScanner, {}) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "check-inout", element: /* @__PURE__ */ jsxRuntimeExports.jsx(CheckInOut, {}) }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "*", element: /* @__PURE__ */ jsxRuntimeExports.jsx(Navigate, { to: "/dashboard", replace: true }) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(Route, { path: "*", element: /* @__PURE__ */ jsxRuntimeExports.jsx(NotFound, {}) })
  ] }) }) })
] }) }) }) });
createRoot(document.getElementById("root")).render(/* @__PURE__ */ jsxRuntimeExports.jsx(App, {}));
export {
  apiClient as a
};
